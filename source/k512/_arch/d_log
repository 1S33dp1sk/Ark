


/************************ h-logging ************************/

#ifndef _D_LOG
	#define _D_LOG 1
	void log_str(char const *__) {
		write(0,__,str_rwings(__));
		write(0,"\n",1);
	};

	void log_dpoint(d_point *dst_point) {
		printf("dst point :: \n");
		printf("@%lu\n", dst_point->c_index);
		printf("name :%s\n",dst_point->c_name);
		printf("ref  :%s\n",dst_point->c_ref);
	};

	void log_sstat(s_stat *sfile){
		printf("dcloud : ATP :: dist ::: shared\n");
		printf("path	= %s\n", sfile->s_path);
		printf("iploc	= %s\n", sfile->s_ipv);
		printf("port	= %s\n", __s_port);
		printf("addr	= %s\n", sfile->s_addr);
		printf("term	= %s\n", sfile->s_term==0?"PUBLIC":"PRIVATE");
	};

	void log_mstat(m_stat *mfile){
		printf("dcloud : ATP :: dist ::: mounted\n");
		printf("path	= %s\n", mfile->m_path);
		printf("nodenum	= %lu\n", mfile->m_inn);
		printf("size	= %lu\n",mfile->m_size);
		printf("mode	= %lu\n",mfile->m_mode);
		printf("blkio	= %lu\n",mfile->m_blksz);
	};

	void log_esptr(ulong *esptr) {
		printf("dcloud : K :: esptr\n");
		ulong c=0;
		do {
			printf(":%lu=%lu\n",c,esptr[c]);c+=1;
		}
		while(*esptr++);
	};

	void log_process_ids(ulong p_pid, ulong c_pid) {
	   printf("process ids ::\n");
	   printf("p.pid    =%lu\n",p_pid);
	   printf("c.pid    =%lu\n",c_pid);
	};

	void log_process_schema(ulong p_pid, ulong c_pid) {
	    printf("p_pid :: %lu",p_pid);
	    printf("\nc_pid :: %lu",c_pid);
	    printf("\nsuccess=%d\tnsucess=%d\n",CALL_SUCC(c_pid),CALL_NSUC(c_pid));
	    printf("call next ? %lu\n",CALL_NEXT(c_pid));
	};

	void log_at_protoname(atp_t __atpname) {
		switch(__atpname) {
		case __at_p: 		printf("ATP : @				::\b"); break;
		case __at_4: 		printf("ATP : @Ipv4			::\b"); break;
		case __at_6: 		printf("ATP : @Ipv6			::\b"); break;
		case __at_e:		printf("ATP : @ETHEREUM		::\b"); break;
		case __at__:		printf("ATP : @-Protocol	::\b"); break;
		default:			printf("ATP <dcloud> 		:::\n"); break;
		};
	};
	
	void log_ixrh(ixr_h *ixrh) {
		// log indexer prototype
		printf("\nindexer head ::\n");
		printf("\tfldsze=%lu", ixrh->__size);
		printf("\tdcount=%lu", ixrh->d_count);
		printf("\tchksum=%lu", ixrh->checksum);
		printf("\n");
	};

	void log_socket(aip_sock *sock) {
		d_socket s_info=__sock_addr(sock_aip_to_sa(sock));
		printf("socket @%s\n",s_info.s_ascii);
	};


	//// log the format type specifications
	//void log_fmt_t(fmt_t __format) {
	//	switch(__format) {
	//	case __keyval__: __TEXT(Key:Value); break;
	//	case __envvar__: __TEXT(Enviroment=Spec); break;
	//	case __pathmut__: __TEXT(Path:=MountPoint); break;
	//	case __fld__: __TEXT(Field=:Callable); break;
	//	case __intrprt__: __TEXT(Interpreter<i>); break;
	//	case __csok__: __TEXT(@Socket); break;
	//	case __call__: __TEXT(@ATP<i>{p}); break;
	//	default: __TEXT(Unknown); break;
	//	};
	//};

	// log the key value as strings
	void log_keyvalue(char *key, char *value) {
		__ASCII(key);
		__ASCII(value);
	};
	// print the corrent way of using the `d-lbb` command
	void lbb_usage(){
		__TEXT(Use lbb as :: `d-lbb /path/to/file`);
	};


	#define __H512__L
#endif
