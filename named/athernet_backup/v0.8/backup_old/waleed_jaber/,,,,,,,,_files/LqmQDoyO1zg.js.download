if (self.CavalryLogger) { CavalryLogger.start_js(["\/LXqP"]); }

__d("AppsDivebarDisplayController",["cx","AppsDivebarConfigData","Arbiter","AsyncRequest","CSS","UIPagelet","$"],(function(a,b,c,d,e,f,g){var h=171;a={isVisible:function(){if(this._visible!==void 0)return this._visible;this._visible=!b("AppsDivebarConfigData").hidden;return this._visible},showApps:function(){this._visible=!0;var a={fb_source_category:"sidebar"};b("UIPagelet").loadFromEndpoint("GamesDivebarPagelet","pagelet_canvas_nav_content",a);b("CSS").show(b("$")("apps_gripper"));b("CSS").show(b("$")("pagelet_canvas_nav_content"));b("CSS").addClass(b("$")("pagelet_canvas_nav_content"),"_4woj");b("Arbiter").inform("AppsDivebar/show-apps");new(b("AsyncRequest"))("/ajax/feed/apps/resize").setData({height:""+h,menu:!0}).setMethod("POST").send()},hideApps:function(){this._visible=!1,b("CSS").hide(b("$")("pagelet_canvas_nav_content")),b("CSS").hide(b("$")("apps_gripper")),b("Arbiter").inform("AppsDivebar/hide-apps"),new(b("AsyncRequest"))("/ajax/feed/apps/resize").setData({height:"1",menu:!0}).setMethod("POST").send()}};e.exports=a}),null);
__d("getMentionsSearchSource",["AtSignMentionsStrategy","CapitalizedNameMentionsStrategy","DocumentCompositeMentionsSource","DocumentMentionsSource","FilteredSearchSource","SearchSourceWithMetrics","WebAsyncSearchSource","filterCapitalizedNames"],(function(a,b,c,d,e,f){function g(a){var c={bootstrapRequests:[],queryRequests:[],auxiliaryFields:{authorativePerson:"is_authoritative_person",connectedPage:"connected_page",disableAutosuggest:"disable_autosuggest",workForeignEntity:"is_work_foreign_entity",renderType:"render_type",verified:"is_verified",workUser:"is_work_user",indexRank:"index_rank"}};a._bootstrapEndpoints&&a._bootstrapEndpoints.forEach(function(a){c.bootstrapRequests.push({uri:a.endpoint,data:a.data})});a.bootstrapEndpoint&&c.bootstrapRequests.push({uri:a.bootstrapEndpoint,data:a.bootstrapData});a.queryEndpoint&&c.queryRequests.push({uri:a.queryEndpoint,data:a.queryData});return new(b("WebAsyncSearchSource"))(c)}function a(a,c){a=g(a);a=new(b("SearchSourceWithMetrics"))(a,c);c=new(b("FilteredSearchSource"))(b("filterCapitalizedNames"),a);a=[new(b("DocumentMentionsSource"))(b("AtSignMentionsStrategy"),a),new(b("DocumentMentionsSource"))(b("CapitalizedNameMentionsStrategy"),c)];return new(b("DocumentCompositeMentionsSource"))(a)}e.exports=a}),null);
__d("RequestsJewel",["RequestsJewelController"],(function(a,b,c,d,e,f){a=function(a,c){"use strict";var d=b("RequestsJewelController").create(a.getFlyout(),function(){return a.isOpen()});a.subscribe("marked-seen",function(){return d.markSeen()});a.subscribe("closed",function(){return d.closeHandler()});a.subscribe("opened",function(){return d.openHandler()})};e.exports=a}),null);
__d("ChatSidebarGroupCreateButtonReact.bs",["cx","fbt","bs_curry","React","QE2Logger","Link.react","ReasonReact.bs","joinClasses","MercuryConfig","MessengerGroupCreateDialogReact.bs","XWorkSaveGroupPurposeController","MessengerGroupCreationEntryPoint","WorkSyncedGroupCreationEntryPoint"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=b("MessengerGroupCreationEntryPoint").GCF_CHAT_SIDEBAR;function k(a,c){if(a)return b("ReasonReact.bs").element(void 0,void 0,b("MessengerGroupCreateDialogReact.bs").make(j,!0,c,[]));else return null}function a(a){var c=i.useState(function(){return!1}),d=c[1],e=h._("Create new group");b("QE2Logger").logExposureForUser("workchat_synced_groups_universe",a.viewer);var f=b("MercuryConfig").WorkSyncedGroupAutoCreateEnabled;f=f?[b("XWorkSaveGroupPurposeController").getURIBuilder().setString("purpose","work_teamwork").setString("ref",b("WorkSyncedGroupCreationEntryPoint").GROUP_CREATION_ICON_ON_CHAT_SIDEBAR).setBool("back_disallowed",!0).getURI(),function(a){return 0},"dialog"]:["#",function(a){return b("bs_curry")._1(d,function(a){return!0})},""];var g="_1-4-";a=a.className;a=a!==void 0?b("joinClasses")(g,a):g;return i.createElement("div",{className:"_46fv"},k(c[0],function(a){return b("bs_curry")._1(d,function(a){return!1})}),i.createElement(b("Link.react"),{"aria-label":e,"data-hover":"tooltip","data-tooltip-content":e,"data-tooltip-position":"below",className:a,href:f[0],onClick:f[1],rel:f[2]}))}f.entryPoint=j;f.renderDialog=k;f.make=a}),null);
__d("ChatSidebarComposeLink.react",["fbt","ChatOpenTabEventLogger","CurrentUser","FantaTabActions","Link.react","MessengerState.bs","React","TooltipData"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){return a.call(this,b)||this}var d=c.prototype;d.render=function(){var a=g._("New Message");return h.jsx(b("Link.react"),babelHelpers["extends"]({"aria-label":a,className:this.props.className,href:"#",onClick:this.$1},b("TooltipData").propsFor(a,"below")))};d.$1=function(a){var c=b("MessengerState.bs").createNewLocalThreadGenerateID(b("CurrentUser").getID());b("FantaTabActions").openNewMessageTab(c,"compose_link");b("ChatOpenTabEventLogger").logClickOpen("sidebar",c);a.preventDefault()};return c}(h.Component);e.exports=a}),null);
__d("XChatEmojiSettingsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/emoji_settings/",{__asyncDialog:{type:"Int"}})}),null);
__d("XVideoCallOffDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/off/",{__asyncDialog:{type:"Int"}})}),null);
__d("ChatSidebarDropdown.react",["cx","fbt","AppsDivebarDisplayController","Arbiter","AsyncRequest","BanzaiODS","Bootloader","ChatConfig","ChatOptions","ChatSidebarBotsActions","ChatSidebarBotsStore","ChatSidebarDropdownConstants","ChatVisibility","ContextualDialogArrow","ContextualLayerAutoFlip","ConversationNubUtils","CurrentUser","FantaTabActions","FBRTCCallBlockingStore","LayerHideOnBlur","Link.react","LogHistory","MenuSeparator.react","PinnedConversationNubsConfig","PopoverMenu.react","PresencePrivacy","PresenceState","React","ReactXUIMenu","SubscriptionsHandler","TrackingNodes","URI","XChatEmojiSettingsController","XVideoCallOffDialogController","emptyFunction","joinClasses","qex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("ChatSidebarBotsActions").module,k=b("ChatSidebarBotsStore").module,l=b("React"),m=b("ReactXUIMenu").SelectableItem,n=b("ReactXUIMenu").SelectableMenu,o=b("ReactXUIMenu").Item,p=b("LogHistory").getInstance("blackbird");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={appsVisible:b("AppsDivebarDisplayController").isVisible(),isConversationsEnabled:b("PinnedConversationNubsConfig").isEnabled,isDiscoverBotsHidden:k?k.getState().isHidden:!0,isOnline:b("ChatVisibility").isOnline(),isCallBlocked:b("FBRTCCallBlockingStore").getBlockingStatus(),pendingChange:!1},d.$8=function(a,b){a=b.item.getValue();b=b.item.isSelected&&b.item.isSelected();d.$5(a,!!b)},d.$27=function(){b("Bootloader").loadModules(["FunnelLogger"],function(a){a.startFunnel("WWW_PRESENCE_FUNNEL"),a.appendActionWithTag("WWW_PRESENCE_FUNNEL","click_gear",b("PresencePrivacy").getOnlinePolicyStr())},"ChatSidebarDropdown.react"),d.props.onShow&&d.props.onShow()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("Arbiter").subscribe(["AppsDivebar/show-apps","AppsDivebar/hide-apps"],function(){a.setState({appsVisible:b("AppsDivebarDisplayController").isVisible()})}),b("PresencePrivacy").subscribe("privacy-user-presence-changed",function(){a.setState({isOnline:b("ChatVisibility").isOnline()})}),b("Arbiter").subscribe("buddylist/hide",function(){a.refs.menu.hidePopover()}),b("Arbiter").subscribe("sidebar/visibility",function(b,c){c||a.refs.menu.hidePopover()}),b("FBRTCCallBlockingStore").addListener(function(){a.setState({isCallBlocked:b("FBRTCCallBlockingStore").getBlockingStatus()})}));k&&this.$1.addSubscriptions(k.addListener(function(){a.setState({isDiscoverBotsHidden:k.getState().isHidden})}));b("PinnedConversationNubsConfig").userSettingsIsEnabled&&this.$1.addSubscriptions(b("Arbiter").subscribe(b("ConversationNubUtils").TURN_CONVERSATIONS_OFF_EVENT,function(){a.setState({isConversationsEnabled:!1})}),b("Arbiter").subscribe(b("ConversationNubUtils").TURN_CONVERSATIONS_ON_EVENT,function(){a.setState({isConversationsEnabled:!0})}));var c=b("ChatOptions").getSetting(b("ChatSidebarDropdownConstants").TURN_OFF_CHAT_TABS);this.$2(c)};d.$2=function(a){var c=null;a===void 0?c="turn_off_chat_tabs.uninitialized":a?c="turn_off_chat_tabs.true":c="turn_off_chat_tabs.false";b("BanzaiODS").bumpEntityKey(3303,"messenger_web_chat_options",c)};d.componentWillUnmount=function(){this.$1&&this.$1.release()};d.$3=function(a,b){b=b?"sidebar_dropdown_visibility_error":"sidebar_dropdown_set_visibility";p.debug(b,JSON.stringify({action:a}))};d.$4=function(a,c){var d=this;if(this.state.pendingChange)return;this.setState({pendingChange:!0});var e={};e[a]=!c;b("ChatOptions").setSetting(a,!c,"mini_sidebar_menu");new(b("AsyncRequest"))("/ajax/chat/settings.php").setHandler(function(a){return b("PresenceState").doSync(!0)}).setErrorHandler(function(){return b("ChatOptions").setSetting(a,c,"mini_sidebar_menu_error")}).setFinallyHandler(function(){return d.setState({pendingChange:!1})}).setData(e).setAllowCrossPageTransition(!0).send()};d.$5=function(a,c){var d=!0;switch(a){case b("ChatSidebarDropdownConstants").SOUND:this.$4(a,c);break;case b("ChatSidebarDropdownConstants").ADVANCED_SETTINGS:case b("ChatSidebarDropdownConstants").TURN_OFF_DIALOG:this.$6();this.$3(a,!1);break;case b("ChatSidebarDropdownConstants").LOWER_ALL_TABS:b("FantaTabActions").minimizeAllTabs();break;case b("ChatSidebarDropdownConstants").CLOSE_ALL_TABS:b("FantaTabActions").closeAllTabs();this.$3(a,!1);break;case b("ChatSidebarDropdownConstants").HIDE_GROUPS:this.$4(a,c);break;case b("ChatSidebarDropdownConstants").TOGGLE_DISCOVER_BOTS:j&&j.saveSettings({isHidden:!this.state.isDiscoverBotsHidden});break;case b("ChatSidebarDropdownConstants").SIDEBAR:this.props.onToggleSidebar();d=!1;break;case b("ChatSidebarDropdownConstants").ONLINE:this.$7();this.state.isOnline?this.$3(a,!0):b("ChatVisibility").goOnline();break;case b("ChatSidebarDropdownConstants").VIDEOCALL_ON:b("FBRTCCallBlockingStore").turnOnVideoCalling();break;case b("ChatSidebarDropdownConstants").VIDEOCALL_OFF:break;case b("ChatSidebarDropdownConstants").PAUSE:break;case b("ChatSidebarDropdownConstants").SHOW_TICKER:b("Arbiter").inform("ChatSidebarDropdown/openTicker");break;case b("ChatSidebarDropdownConstants").HIDE_TICKER:b("Arbiter").inform("ChatSidebarDropdown/closeTicker");break;case b("ConversationNubUtils").TURN_CONVERSATIONS_OFF_EVENT:b("ConversationNubUtils").turnConversationsOff();break;case b("ConversationNubUtils").TURN_CONVERSATIONS_ON_EVENT:b("ConversationNubUtils").turnConversationsOn();break;case b("ChatSidebarDropdownConstants").SHOW_APPS:b("AppsDivebarDisplayController").showApps();break;case b("ChatSidebarDropdownConstants").HIDE_APPS:b("AppsDivebarDisplayController").hideApps();break;case b("ChatSidebarDropdownConstants").HIDE_ADMINED_PAGES:this.$4(a,c);break;case b("ChatSidebarDropdownConstants").HIDE_MARKETPLACE:this.$4(a,c);break;case b("ChatSidebarDropdownConstants").HIDE_BUSINESSES:this.$4(a,c);break;case b("ChatSidebarDropdownConstants").TURN_OFF_CHAT_TABS:this.$4(a,c);break}d&&this.refs.menu&&this.refs.menu.hidePopover()};d.$9=function(){return l.jsx(m,{value:b("ChatSidebarDropdownConstants").SOUND,selected:b("ChatOptions").getSetting(b("ChatSidebarDropdownConstants").SOUND),children:h._("Chat Sounds")})};d.$10=function(){var a=b("XChatEmojiSettingsController").getURIBuilder().getURI();return l.jsx(o,{href:a,rel:"dialog",value:b("ChatSidebarDropdownConstants").EMOJI_SETTINGS,children:h._("Emoji")})};d.$11=function(){return b("CurrentUser").isWorkUser()?null:l.jsx(o,{href:new(i||(i=b("URI")))("/settings?tab=blocking"),value:b("ChatSidebarDropdownConstants").BLOCK_SETTINGS,children:h._("Block Settings")})};d.$12=function(){return l.jsx(o,{value:b("ChatSidebarDropdownConstants").LOWER_ALL_TABS,children:h._("Collapse All Chat Tabs")})};d.$13=function(){return l.jsx(o,{value:b("ChatSidebarDropdownConstants").CLOSE_ALL_TABS,children:h._("Close All Chat Tabs")})};d.$14=function(){return l.jsx(o,{className:"_4kqp",value:b("ChatSidebarDropdownConstants").SIDEBAR,children:h._("Hide Sidebar")})};d.$15=function(){return this.props.sidebarType==="buddylist_nub"||!b("ChatConfig").get("show_admined_pages")?null:l.jsx(m,{className:"_4kqp",value:b("ChatSidebarDropdownConstants").HIDE_ADMINED_PAGES,selected:b("ChatOptions").getSetting(b("ChatSidebarDropdownConstants").HIDE_ADMINED_PAGES),children:h._("Hide Pages You Manage")})};d.$16=function(){return this.props.sidebarType==="buddylist_nub"||!b("ChatConfig").get("show_businesses")?null:l.jsx(m,{className:"_4kqp",value:b("ChatSidebarDropdownConstants").HIDE_BUSINESSES,selected:b("ChatOptions").getSetting(b("ChatSidebarDropdownConstants").HIDE_BUSINESSES),children:h._("Hide Pages to Contact")})};d.$17=function(){return this.props.sidebarType==="buddylist_nub"?null:l.jsx(m,{value:b("ChatSidebarDropdownConstants").HIDE_GROUPS,selected:b("ChatOptions").getSetting(b("ChatSidebarDropdownConstants").HIDE_GROUPS),children:h._("Hide Groups")})};d.$18=function(){var a=this,c=b("ChatOptions").getSetting(b("ChatSidebarDropdownConstants").TURN_OFF_CHAT_TABS);c===void 0&&(c=!1);return l.jsx(m,{onClick:function(){return a.$2(!c)},value:b("ChatSidebarDropdownConstants").TURN_OFF_CHAT_TABS,selected:c,children:h._("Turn off chat tabs")})};d.$19=function(){var a=b("ChatVisibility").isOnline(),c=a?new(i||(i=b("URI")))("/ajax/chat/privacy/settings_dialog.php").addQueryData("dialog_type","turn_off_dialog"):"#",d="";d=a?h._("Turn Off Active Status"):h._("Turn on Active Status");var e=a?b("ChatSidebarDropdownConstants").TURN_OFF_DIALOG:b("ChatSidebarDropdownConstants").ONLINE;if(this.props.sidebarType==="buddylist"&&!a)return null;if(b("qex")._("971346")){var f=function(){return b("Bootloader").loadModules(["MessengerDialogs.bs","SetActiveStatusViewabilityWrapper.react"],function(a,b){a.showDialog(function(){return l.jsx(b,{})})},"ChatSidebarDropdown.react")};return l.jsx(o,{rel:"",value:e,onClick:f,children:d})}else return l.jsx(o,{href:c,rel:a?"dialog":"",value:e,children:d})};d.$20=function(){var a=this.state.isCallBlocked,c=a?"#":b("XVideoCallOffDialogController").getURIBuilder().getURI(),d=a?h._("Turn On Video\/Voice Calls"):h._("Turn Off Video\/Voice Calls"),e=a?b("ChatSidebarDropdownConstants").VIDEOCALL_ON:b("ChatSidebarDropdownConstants").VIDEOCALL_OFF;return l.jsx(o,{href:c,rel:a?"":"dialog",value:e,children:d})};d.$21=function(){var a=k?k.getState().bots:[];if(!j||a.length===0)return null;a=this.state.isDiscoverBotsHidden?h._("Show bot discovery"):h._("Hide bot discovery");return l.jsx(o,{value:b("ChatSidebarDropdownConstants").TOGGLE_DISCOVER_BOTS,children:a})};d.$22=function(){if(!b("PinnedConversationNubsConfig").userSettingsIsEnabled)return null;var a=this.state.isConversationsEnabled,c=a?h._("Turn Off Post Tabs"):h._("Turn On Post Tabs");a=a?b("ConversationNubUtils").TURN_CONVERSATIONS_OFF_EVENT:b("ConversationNubUtils").TURN_CONVERSATIONS_ON_EVENT;return l.jsx(o,{value:a,children:c})};d.$23=function(){if(!b("ChatConfig").get("has_apps_option")||this.props.sidebarType!=="sidebar")return null;var a=this.state.appsVisible,c=a?h._("Hide Games"):h._("Show Games");a=a?b("ChatSidebarDropdownConstants").HIDE_APPS:b("ChatSidebarDropdownConstants").SHOW_APPS;return[l.jsx(o,{value:a,children:c},"apps_menu")]};d.$24=function(){var a=this.props.sidebarType==="sidebar",c=b("ChatConfig").get("has_apps_option")&&a;a=a&&b("qex")._("690094");return c||a?l.jsx(b("MenuSeparator.react"),{},"extras_separator"):null};d.$25=function(){if(this.props.sidebarType!=="sidebar"||!b("qex")._("690094"))return null;var a=b("ChatSidebarDropdownConstants").HIDE_MARKETPLACE;return[l.jsx(m,{value:a,selected:b("ChatOptions").getSetting(a),children:h._("Hide Marketplace")},"marketplace_menu")]};d.$26=function(){return l.jsxs(n,{className:"fbChatSidebarDropdown/PopoverMenu",multiple:!0,onItemClick:this.$8,children:[this.$9(),this.$10(),this.$11(),l.jsx(b("MenuSeparator.react"),{}),this.$12(),this.$13(),this.$21(),this.$14(),this.$15(),this.$16(),this.$17(),this.$18(),this.$19(),this.$20(),this.$22(),this.$24(),this.$23(),this.$25()]})};d.render=function(){var a=h._("Options"),c=b("joinClasses")(this.props.className,"_5qth _5vm9"+(b("ChatVisibility").isOnline()?"":" _5vma")),d=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.DROPDOWN_BUTTON);return l.jsx(b("PopoverMenu.react"),{alignh:"right",alignv:"top",className:c,layerBehaviors:[b("ContextualLayerAutoFlip"),b("ContextualDialogArrow"),b("LayerHideOnBlur")],menu:this.$26(),onHide:this.props.onHide,onShow:this.$27,ref:"menu",children:l.jsx(b("Link.react"),{"aria-label":a,className:"_5vmb button","data-ft":d,"data-hover":"tooltip","data-tooltip-content":a,"data-tooltip-position":"below",href:"#"})})};d.$7=function(){b("Bootloader").loadModules(["FunnelLogger"],function(a){a.appendActionWithTag("WWW_PRESENCE_FUNNEL","sidebar_dropdown_turn_on_chat",b("PresencePrivacy").getOnlinePolicyStr()),a.endFunnel("WWW_PRESENCE_FUNNEL")},"ChatSidebarDropdown.react")};d.$6=function(){b("Bootloader").loadModules(["FunnelLogger"],function(a){a.appendActionWithTag("WWW_PRESENCE_FUNNEL","open_privacy_dialog",b("PresencePrivacy").getOnlinePolicyStr())},"ChatSidebarDropdown.react")};return c}(l.PureComponent);a.defaultProps={className:"",onHide:b("emptyFunction"),onShow:b("emptyFunction")};e.exports=a}),null);
__d("ChatSidebarGroupCreateButtonReactComponent",["ChatSidebarGroupCreateButtonReact.bs"],(function(a,b,c,d,e,f){"use strict";a=b("ChatSidebarGroupCreateButtonReact.bs").make;e.exports=a}),null);
__d("addDelightedTextInEditorState",["TextDelightInComposerController"],(function(a,b,c,d,e,f){"use strict";var g=b("TextDelightInComposerController").matcher;function a(a,b,c){c===void 0&&(c=!1);if(!g)return a;return c?g.matchLastWord(a,"","comment"):g.applyTextDelightEntity(a,b,"","comment")}e.exports=a}),null);
__d("addMentionableEntityToComposerState",["FBLogger","createMentionEntityForContentState","replaceMentionedTextInEditorState"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){var e=a.inputState;switch(e.__type){case"editor-state-based":c=b("replaceMentionedTextInEditorState")(c,e.editorState,d,b("createMentionEntityForContentState"));return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},e,{editorState:c})});case"plain-text":default:b("FBLogger")("ufi2").warn("Unimplemented: tried to commit a searchable entity as a mention to a `UFI2ComposerState` with an `inputState` of type `%s`. Only the `editor-state-based` type is supported at the moment.",e.__type);return a}}e.exports=a}),null);
__d("getUpgradedUFI2DelightsComposerPlugin",["EditorState","React","TextDelightConfig","TextDelightInComposerGating","TextDelightSpan.react","UnicodeUtils","addDelightedTextInEditorState","clearTimeout","getEntityMatcher","installUFI2ComposerInputDecorators","keyCommandBackspaceDelight","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i=b("TextDelightConfig").composerOptions,j=null;function k(a,b,c){a.inputProps.onComposerStateChange(function(d){var e=babelHelpers["extends"]({},d,b(d)),f=e.inputState;switch(f.__type){case"editor-state-based":d=d.inputState;if(d.__type!=="editor-state-based")return e;l(a,f.editorState,d.editorState,c);return m(e,d.editorState,!1);default:return e}})}function l(a,c,d,e){if(d.getCurrentContent()!==c.getCurrentContent()){j&&b("clearTimeout")(j);if(i.autoHighlightThresholdMs>0){var f=b("setTimeoutAcrossTransitions")(function(){a.inputProps.onComposerStateChange(function(a){return m(a,null,!0)})},i.autoHighlightThresholdMs);j=f;e.addSubscriptions({remove:function(){b("clearTimeout")(f)}})}}}function m(a,c,d){var e=a.inputState;if(e.__type!=="editor-state-based")return a;c=b("addDelightedTextInEditorState")(e.editorState,c||e.editorState,d);return c===e.editorState?a:babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},e,{editorState:c})})}function n(a,c,d){if(!b("TextDelightInComposerGating").isBackspaceEnabled("comment"))return"not-handled";var e=a.composerState.inputState,f=null;if(e.__type!=="editor-state-based")return"not-handled";c==="backspace"&&(f=b("keyCommandBackspaceDelight")(d));if(!f)return"not-handled";a.onComposerStateChange(function(a){return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},e,{editorState:f||e.editorState})})});return"handled"}function o(a,b,c){var d=n(a,b,c);return d==="not-handled"?a.handleKeyCommand?a.handleKeyCommand(b,c):"not-handled":d}function p(a){a.onComposerStateChange(function(a){var c=a.inputState;if(c.__type!=="editor-state-based")return a;var d=c.editorState;return babelHelpers["extends"]({},a,{inputState:babelHelpers["extends"]({},c,{editorState:b("EditorState").forceSelection(d,d.getSelection())})})})}function a(a){return{installPlugin:function(a){a.onInstallContentBlockToTextWithEntitiesInputMessageMappers(function(a,c,d,e){var f=a.getEntityAt(d);if(f==null)return null;c=c.getEntity(f);if(c.getType()==="DELIGHT"){f=a.getText().slice(d,e);a=c.getData();e=a.campaignID;c=a.disabled;if(c)return null;if(/^\d+$/.test(e))return{message:{ranges:[{entity:{id:e},length:(g||(g=b("UnicodeUtils"))).strlen(f),offset:d}],text:f}}}return null})},render:function(c,d){var e=c.subscriptionsHandler,f=babelHelpers.objectWithoutPropertiesLoose(c,["subscriptionsHandler"]),g={component:b("TextDelightSpan.react"),props:babelHelpers["extends"]({},a,{triggerChange:function(){return p(f.inputProps)}}),strategy:b("getEntityMatcher")(function(a){return a.getType()==="DELIGHT"})};return h.jsx(d,babelHelpers["extends"]({},f,{inputProps:babelHelpers["extends"]({},f.inputProps,{composerState:b("installUFI2ComposerInputDecorators")(f.inputProps.composerState,g),handleKeyCommand:function(a,b){return o(c.inputProps,a,b)},onComposerStateChange:function(a){return k(c,a,e)}})}))}}}e.exports=a}),null);
__d("upgradedUFI2MentionsComposerPluginCreatorWithTypeaheadView",["ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","DataSource","FBLogger","Keys","MentionSpan.react","MultiBootstrapDataSource","React","TypeaheadMetricReporter","TypeaheadNavigation","UnicodeUtils","WeakMentionSpan.react","addMentionableEntityToComposerState","getEntityMatcher","getMentionableRect","getMentionsSearchSource","installUFI2ComposerInputDecorators","shallowEqual"],(function(a,b,c,d,e,f){"use strict";var g,h=(c=b("Keys")).DOWN,i=c.ESC,j=c.RETURN,k=c.TAB,l=c.UP,m=b("React"),n={component:b("MentionSpan.react"),strategy:b("getEntityMatcher")(function(a){return a.getType()==="MENTION"})},o={component:b("WeakMentionSpan.react"),strategy:b("getEntityMatcher")(function(a){return a.getType()==="MENTION"?!!((a=a.getData())==null?void 0:a.isWeak):!1})};function p(a,c,d,e,f,g,h){switch(g){case"MentionsAutocomplete/cancel":f&&f.layer&&f.layer.hide();return"handled";case"MentionsAutocomplete/next-mention":d(function(a){var c=null;b("TypeaheadNavigation").moveDown(a.mentionableEntities,a.selectedMentionableEntity,function(a){c=a});return{selectedMentionableEntity:c}});return"handled";case"MentionsAutocomplete/previous-mention":d(function(a){var c=null;b("TypeaheadNavigation").moveUp(a.mentionableEntities,a.selectedMentionableEntity,function(a){c=a});return{selectedMentionableEntity:c}});return"handled";case"MentionsAutocomplete/select-mention":if(c.selectedMentionableEntity!=null){q(a,c,c.selectedMentionableEntity,"return-key",e);return"handled"}break}return a.inputProps.handleKeyCommand?a.inputProps.handleKeyCommand(g,h):"not-handled"}function q(a,c,d,e,f){f.reportSelect(d.getUniqueID(),d.getType(),c.mentionableEntities.indexOf(d),e==="click"),f.sessionEnd(),f.sessionStart(),a.inputProps.onComposerStateChange(function(a){return b("addMentionableEntityToComposerState")(a,d,c.characterOffset)})}function r(a,b,c,d){if(b.mentionableEntities.length&&c&&c.layer&&c.layer.isShown())switch(d.keyCode){case h:d.preventDefault();return"MentionsAutocomplete/next-mention";case i:d.preventDefault();return"MentionsAutocomplete/cancel";case j:if(b.selectedMentionableEntity){d.preventDefault();return"MentionsAutocomplete/select-mention"}break;case k:if(b.selectedMentionableEntity){d.preventDefault();return"MentionsAutocomplete/select-mention"}break;case l:d.preventDefault();return"MentionsAutocomplete/previous-mention"}return a.inputProps.keyBindingFn?a.inputProps.keyBindingFn(d):null}function s(a,c,d,e,f){var g=d.inputProps.composerState.inputState;switch(g.__type){case"editor-state-based":var h=g.editorState.getCurrentContent();g=g.editorState.getSelection();if(g.getHasFocus()===!1){(e.characterOffset!==0||e.mentionableEntities.length!==0)&&f(function(a){return{characterOffset:0,mentionableEntities:[]}});return}d.subscriptionsHandler.addSubscriptions(c.search(h,g,function(c,d){var g=a.typeaheadViewProps,h=d||0,i=c||[];g&&g.sortFn&&i.sort(g.sortFn);i=i.slice(0,a.maxResults);d=!b("shallowEqual")(e.mentionableEntities,i);if(i.length===0&&d===!1)return;var j=i.includes(e.selectedMentionableEntity)?e.selectedMentionableEntity:i[0];if(e.characterOffset===h&&e.selectedMentionableEntity===j&&d===!1)return;f(function(a){return{characterOffset:h,mentionableEntities:i,selectedMentionableEntity:j}})}));break;default:return}}function a(a){return function(c,d){var e,f,h=new(b("TypeaheadMetricReporter"))({event_name:"tinder_mentions"}),i=function(){if(c.mentions_datasource_js_constructor_args_json){var a;try{a=JSON.parse(c.mentions_datasource_js_constructor_args_json),c.maxResults!=null&&(a[0]=babelHelpers["extends"]({},a[0],{maxResults:c.maxResults,queryData:a[0].queryData=babelHelpers["extends"]({},a[0].queryData,{max_result:c.maxResults})}))}catch(a){b("FBLogger")("ufi2").warn("Failed to parse `mentions_datasource_js_constructor_args_json` The mentions autocomplete is disabled for this user. (JSON string was: `%s`. Config was: `%s`.)",c.mentions_datasource_js_constructor_args_json,JSON.stringify(c))}if(a){var d=a[0];d=(d==null?void 0:(d=d.bootstrapEndpoints)==null?void 0:d.length)>0?new(Function.prototype.bind.apply(b("MultiBootstrapDataSource"),[null].concat(a)))():new(Function.prototype.bind.apply(b("DataSource"),[null].concat(a)))();return b("getMentionsSearchSource")(d,h)}}else b("FBLogger")("ufi2").warn("Failed to fetch `mentions_datasource_js_constructor_args_json` for use in the UFI composer mentions plugin. The mentions autocomplete is disabled for this user.");return b("getMentionsSearchSource")(new(b("DataSource"))({}),h)}();d&&i.bootstrap();function j(a){h.sessionEnd()}function k(a){i.bootstrap(),h.sessionStart()}return{componentDidUpdate:function(a,b,d,e,f){b=d.inputProps.composerState.inputState;a=a.inputProps.composerState.inputState;b.__type==="editor-state-based"&&(a.__type!=="editor-state-based"||a.__type==="editor-state-based"&&a.editorState!==b.editorState)&&s(c,i,d,e,f)},componentWillUnmount:function(){h.sessionDeactivate()},installPlugin:function(a,d,e){a.onInstallContentBlockToTextWithEntitiesInputMessageMappers(function(a,c,d,e){var f=a.getEntityAt(d);if(f==null)return null;c=c.getEntity(f);if(c.getType()==="MENTION"){f=a.getText().slice(d,e);a=c.getData();e=a.id;if(/^\d+$/.test(e)){return{entitiesByID:(a={},a[e]=c,a),message:{ranges:[{entity:{id:e},entity_is_weak_reference:c.isWeak,length:(g||(g=b("UnicodeUtils"))).strlen(f),offset:d}],text:f}}}}return null}),s(c,i,a,d,e)},render:function(d,g,i,l){d.subscriptionsHandler;var s=babelHelpers.objectWithoutPropertiesLoose(d,["subscriptionsHandler"]);return m.jsxs(m.Fragment,{children:[m.jsx(l,babelHelpers["extends"]({},s,{inputProps:babelHelpers["extends"]({},s.inputProps,{composerState:b("installUFI2ComposerInputDecorators")(s.inputProps.composerState,o,n),handleKeyCommand:function(a,b){return p(d,g,i,h,f,a,b)},keyBindingFn:function(a){return r(d,g,f,a)},onBlur:function(a){s.inputProps.onBlur&&s.inputProps.onBlur(a);if(a.isDefaultPrevented())return;j(a)},onFocus:function(a){s.inputProps.onFocus&&s.inputProps.onFocus(a);if(a.isDefaultPrevented())return;k(a)},onInputRefUpdated:function(a){e=a,s.inputProps.onInputRefUpdated&&s.inputProps.onInputRefUpdated(a)}})})),g.mentionableEntities.length?m.jsx(b("ContextualLayer.react"),{behaviors:{ContextualLayerAutoFlip:b("ContextualLayerAutoFlip"),ContextualLayerUpdateOnScroll:b("ContextualLayerUpdateOnScroll")},contextBounds:b("getMentionableRect")(g.characterOffset,!1),contextRef:function(){return e},"data-testid":void 0,offsetX:0,offsetY:5,position:"below",ref:function(a){f=a},shown:!0,children:m.jsx(a,babelHelpers["extends"]({},c.typeaheadViewProps,{entries:g.mentionableEntities,highlightedEntry:g.selectedMentionableEntity,onHighlight:function(a){i({selectedMentionableEntity:a})},onSelect:function(a,b){b.preventDefault(),q(d,g,a,"click",h)}}))}):null]})}}}}e.exports=a}),null);
__d("createUpgradedUFI2GroupMentionsComposerPlugin",["GroupMentionsTypeaheadView.react","upgradedUFI2MentionsComposerPluginCreatorWithTypeaheadView"],(function(a,b,c,d,e,f){"use strict";e.exports=b("upgradedUFI2MentionsComposerPluginCreatorWithTypeaheadView")(b("GroupMentionsTypeaheadView.react"))}),null);
__d("createUpgradedUFI2MentionsComposerPlugin",["XUITypeaheadView.react","upgradedUFI2MentionsComposerPluginCreatorWithTypeaheadView"],(function(a,b,c,d,e,f){"use strict";e.exports=b("upgradedUFI2MentionsComposerPluginCreatorWithTypeaheadView")(b("XUITypeaheadView.react"))}),null);