if (self.CavalryLogger) { CavalryLogger.start_js(["w9FjG"]); }

__d("PixelRatioConst",[],(function(a,b,c,d,e,f){e.exports={cookieName:"dpr"}}),null);
__d("ResetScrollOnUnload",["Run"],(function(a,b,c,d,e,f){a={disableScrollRestoration:function(){b("Run").onUnload(function(){window.history.scrollRestoration="manual"})},init:function(a){b("Run").onUnload(function(){window.history.scrollRestoration="manual",a.style.opacity="0",window.scrollTo(0,0)})}};e.exports=a}),null);
__d("TimezoneAutoset",["AsyncRequest","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();var g=!1;function h(a){var b=new Date(),c=b.getTimezoneOffset()/15;b=b.getTime()/1e3;a=Math.round((a-b)/900);b=Math.round(c+a)%96;if(b==0)return 0;else b>48?b-=Math.ceil(b/96)*96:b<-56&&(b+=Math.ceil(b/-96)*96);return b*15}function a(a,c,d){__p&&__p();if(!a||void 0==c)return;if(g)return;g=!0;a=-h(a);if(d||a!=c){c="/ajax/timezone/update.php";new(b("AsyncRequest"))().setURI(c).setData({gmt_off:a,is_forced:d}).setErrorHandler(b("emptyFunction")).setTransportErrorHandler(b("emptyFunction")).setOption("suppressErrorAlerts",!0).send()}}c={setInputValue:function(a,b){a.value=h(b)},setTimezone:a};e.exports=c}),null);
__d("NavigationMenubarInteractionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:NavigationMenubarInteractionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:NavigationMenubarInteractionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:NavigationMenubarInteractionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAction=function(a){this.$1.action=a;return this};a.prototype.setTargetItem=function(a){this.$1.target_item=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={action:!0,target_item:!0};e.exports=a}),null);
__d("NavigationAssistantController",["csx","cx","fbt","Arbiter","AsyncRequest","CSS","DOM","DOMEventListener","DOMQuery","DOMTraverser","Event","Focus","KeyboardShortcuts","KeyEventController","Menu","MenuItem","NavigationMenubarInteractionsTypedLogger","PageTransitions","RTLKeys","TabbableElements","debounce","ge","getActiveElement","getOrCreateDOMID","gkx","setImmediate","setTimeout"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=["main","banner","search","navigation","region","complementary","form","contentinfo"],k={main:function(a){return a?i._("Main: {section name}",[i._param("section name",a)]):i._("Main section")},banner:function(a){return i._("{section name} banner",[i._param("section name",a)])},search:function(a){return i._("Search {section name}",[i._param("section name",a)])},navigation:function(a){return a?i._("Navigate {section name}",[i._param("section name",a)]):i._("Navigation")},region:function(a){return a},complementary:function(a){return a?a:i._("Complementary information")},form:function(a){return i._("{section name} form",[i._param("section name",a)])},contentinfo:function(a){return i._("{section name} footer",[i._param("section name",a)])}},l=500;a={init:function(a,c,d,e,f,g){__p&&__p();this._banner=a;this._menubar=c;this._sectionsMenu=d;this._accessibilityMenu=e;this._globalMenu=f;this._shortcutMenuItem=this._accessibilityMenu&&this._accessibilityMenu.getItemAt(0);this._menubarMenus=[{menu:this._sectionsMenu,logName:"page_sections"}];this._accessibilityMenu&&this._menubarMenus.push({menu:this._accessibilityMenu,logName:"accessibility"});this._globalMenu&&this._menubarMenus.push({menu:this._globalMenu,logName:"global"});document.body&&b("CSS").addClass(document.body,"hasAXNavMenubar");this._hasBanner=document.body&&b("CSS").hasClass(document.body,"hasBanner");this._shown=!1;this._items=[];this._hotKeyTrigger=null;this._menubarMenuItems=b("DOMQuery").scry(this._menubar,'[role="button"]');this._menubarMenuItems.forEach(function(a){a.setAttribute("role","menuitem")});this._activeItem=this._menubarMenuItems[0];this._activeItemIndex=0;if(g!=null)for(var h in g)Object.prototype.hasOwnProperty.call(g,h)&&g[h]!=null&&g[h].disableTypeaheadActivation();this._setupEvents();this._keysSoFar="";this._clearKeysSoFarAfterDelay=b("debounce")(function(){this._keysSoFar=""}.bind(this),l);this._handlePageLoad()},_setupEvents:function(){this._menubarMenuItems[0].addEventListener("focus",this._showMenubar.bind(this)),this._menubar.addEventListener("keydown",this._checkHide.bind(this)),this._menubar.addEventListener("keyup",this._checkMenuSwitch.bind(this)),this._menubarMenus.forEach(function(a){a.menu.subscribe("show",this._menuShown.bind(this,a)),a.menu.subscribe("hide",this._menuHidden.bind(this,a)),a.menu.subscribe("done",this._checkBlur.bind(this)),a.menu.getRoot().addEventListener("keyup",this._checkMenuSwitch.bind(this))}.bind(this)),b("DOMEventListener").add(document,"click",this._checkClickBlur.bind(this)),this._sectionsMenu.subscribe("focus",this._highlightFocused.bind(this)),this._sectionsMenu.subscribe("blur",this._unhighlightFocused.bind(this)),this._accessibilityMenu&&this._accessibilityMenu.subscribe("itemclick",this._checkShortcutsShow.bind(this)),this._globalMenu&&this._globalMenu.subscribe("itemclick",this._checkLogEvent.bind(this)),b("gkx")("677762")&&(b("DOMEventListener").add(document,"keydown",this._checkHotKey.bind(this)),b("DOMEventListener").add(document,"keypress",this._trackHotKeyPress.bind(this)),b("DOMEventListener").add(document,"keyup",this._unsetHotKey.bind(this)))},_checkHide:function(a){a=b("Event").getKeyCode(a);if(a===b("RTLKeys").ESC){this._hideMenubar();this._returnFocus();return}a===b("RTLKeys").TAB&&b("setImmediate")(function(){this._hideMenubar()}.bind(this))},_returnFocus:function(){if(this._hotKeyTrigger)b("Focus").set(this._hotKeyTrigger,!0),this._hotKeyTrigger=null;else{var a=this._banner.nextElementSibling;b("TabbableElements").isTabbable(a)||(a=b("DOMTraverser").nextFilteredNode(document.body,a,b("TabbableElements").isTabbable));b("Focus").set(a)}},_setActiveItem:function(a){if(a<0||a>=this._menubarMenuItems.length)return;this._activeItem.setAttribute("tabindex","-1");this._activeItem=this._menubarMenuItems[a];this._activeItemIndex=a;this._activeItem.setAttribute("tabindex","0")},_checkMenuSwitch:function(a){__p&&__p();a=b("Event").getKeyCode(a);var c=this._menubarMenus.length,d=this._activeItemIndex;switch(a){case b("RTLKeys").getLeft():d=this._activeItemIndex===0?c-1:this._activeItemIndex-1;break;case b("RTLKeys").getRight():d=this._activeItemIndex===c-1?0:this._activeItemIndex+1;break;default:d=this._findItemToFocus(a);if(d<0)return!1}this._isShowingMenu&&this._isShowingMenu.done();this._setActiveItem(d);b("setTimeout")(function(){b("Focus").set(this._activeItem,!0)}.bind(this),0);return!0},_findItemToFocus:function(a){if(this._isShowingMenu)return-1;a=String.fromCharCode(a).toLowerCase();this._keysSoFar||(this._searchIndex=this._activeItemIndex);this._keysSoFar+=a;this._clearKeysSoFarAfterDelay();a=this._findMatchInRange(this._searchIndex+1,this._menubarMenuItems.length);a<0&&(a=this._findMatchInRange(0,this._searchIndex));return a<0?this._searchIndex:a},_findMatchInRange:function(a,b){for(var a=a;a<b;a++){var c=this._menubarMenuItems[a].innerText;if(c.toLowerCase().indexOf(this._keysSoFar)===0)return a}return-1},_menuShown:function(a){this._ignoreBlur=!0,this._isShowingMenu=a.menu,this._logEvent("menu_shown",a.logName)},_menuHidden:function(a){this._ignoreBlur=!1,this._isShowingMenu===a.menu&&(this._isShowingMenu=null)},_checkClickBlur:function(){this._ignoreBlur||this._checkBlur()},_checkBlur:function(){var a=b("getActiveElement")();this._shown&&a&&!b("DOM").contains(this._menubar,a)&&!this._ignoreBlur&&this._hideMenubar();this._highlighted&&(b("CSS").removeClass(this._highlighted,"_1toc"),this._highlighted=null)},_highlightFocused:function(a,c){this._highlighted&&b("CSS").removeClass(this._highlighted,"_1toc"),this._highlighted=b("ge")(c.item.getValue()),this._highlighted&&b("CSS").addClass(this._highlighted,"_1toc")},_unhighlightFocused:function(a,c){this._highlighted&&b("CSS").removeClass(this._highlighted,"_1toc")},_checkHotKey:function(a){__p&&__p();var c=b("Event").getKeyCode(a),d=a.altKey;if(!b("gkx")("677763")&&!b("KeyEventController").filterEventTargets(a,"keydown"))return;if(c===b("RTLKeys").FORWARD_SLASH&&d){c=b("getActiveElement")();this._listenHotKeyPress=!0;if(this._shown){this._menubarMenus.forEach(function(a){a.menu.done()});b("setTimeout")(function(){this._returnFocus(),this._hideMenubar()}.bind(this),0);return}if(c&&this._isInDialog(c))return;this._hotKeyTrigger=c;this._showMenubar();b("Focus").set(this._activeItem,!0);this._logEvent("hotkey_triggered","menubar");return}this._listenHotKeyPress=!1;this._shown&&this._checkHide(a)},_unsetHotKey:function(a){this._listenHotKeyPress=!1},_trackHotKeyPress:function(a){if(this._listenHotKeyPress){a=b("Event").getKeyCode(a);this._logEvent("hotkey_char",""+a)}},_handlePageLoad:function(){this._validateMainSection(),this._setupSectionsMenu(),this._setupAccessibilityMenu(),b("PageTransitions").registerCompletionCallback(function(){this._handlePageLoad()}.bind(this))},_validateMainSection:function(){var a=document.getElementById("content");if(!a)return;var c=b("DOMQuery").scry(a,'[role="main"]'),d=a.getAttribute("role")==="main";c.length&&d?a.setAttribute("role",""):!c.length&&!d&&a.setAttribute("role","main")},_isInDialog:function(a){a=a;while(a&&a!==document&&a.getAttribute("role")!=="dialog")a=a.parentNode;return a!==document},_hideMenubar:function(){if(!this._shown)return;this._shown=!1;b("KeyboardShortcuts").popLayer();b("CSS").addClass(this._banner,"_1toe");this._setActiveItem(0);!this._hasBanner&&document.body&&b("CSS").removeClass(document.body,"hasBanner");b("setTimeout")(function(){b("Event").fire(window,"scroll")},350)},_showMenubar:function(){__p&&__p();if(this._shown)return;this._shown=!0;this._ignoreBlur=!1;this._validateMainSection();this._setupSectionsMenu();this._setupAccessibilityMenu();b("KeyboardShortcuts").pushLayer();b("CSS").matchesSelector(this._banner.nextElementSibling,"._73y_")?b("CSS").addClass(this._banner,"_1tof"):b("CSS").removeClass(this._banner,"_1tof");b("CSS").removeClass(this._banner,"_1toe");!this._hasBanner&&document.body&&b("CSS").addClass(document.body,"hasBanner");b("setTimeout")(function(){b("Event").fire(window,"scroll"),b("Arbiter").inform("banner/shown",null,"state")},50);this._logEvent("shown","menubar")},_addMenuItem:function(a,c,d){c=b("Menu").buildItemFromData({ctor:b("MenuItem"),label:a,selected:!1,value:c,onclick:function(c){b("setTimeout")(function(){b("Focus").set(b("ge")(d),!0),this._hideMenubar()}.bind(this),0),this._logEvent("selected_item",a),this._ignoreBlur=!1}.bind(this)});this._sectionsMenu.addItem(c);this._items.push(c)},_getLandmarkSections:function(a){var b=[],c=[];a.forEach(function(a){var d=a.getAttribute("role");d==="main"?b.push(a):j.indexOf(d)>-1&&c.push(a)});return b.concat(c)},_computeElementLabel:function(a,b,c){__p&&__p();var d=a.getAttribute("id");c=c||[];var e=c.includes(d);!e&&d&&c.push(d);d=a.getAttribute("aria-labelledby");if(!e&&d){e=d.split(" ");var f="";e.forEach(function(a){a=document.getElementById(a);if(!a)return;f+=this._computeElementLabel(a,!1,c)}.bind(this));return f}d=a.getAttribute("aria-label");if(d)return d;return b?"":a.innerText?a.innerText.substring(0,100):""},_addSectionItems:function(a){__p&&__p();a.forEach(function(a){__p&&__p();if(!b("TabbableElements").isVisible(a)||!a.offsetHeight||!a.offsetWidth)return;var c=a.getAttribute("role");if(!c||!Object.prototype.hasOwnProperty.call(k,c))return;var d=k[c](this._computeElementLabel(a,!0)),e=a;if(c==="search"||c==="region"||c==="form"){c=b("DOMQuery").scry(a,".navigationFocus");c.length&&(e=c[0],!b("TabbableElements").isTabbable(e)&&b("TabbableElements").find(e).length&&(e=b("TabbableElements").find(e)[0]))}d&&this._addMenuItem(d,b("getOrCreateDOMID")(a),b("getOrCreateDOMID")(e))}.bind(this))},_setupSectionsMenu:function(){var a=b("DOMQuery").scry(document.body,"[role]");a=this._getLandmarkSections(a);this._cleanupSectionsMenu();this._addSectionItems(a)},_cleanupSectionsMenu:function(){while(this._items.length)this._sectionsMenu.removeItem(this._items.pop())},_setupAccessibilityMenu:function(){if(!this._accessibilityMenu)return;if(b("KeyboardShortcuts").hasFlyoutToShow()){var a=this._accessibilityMenu.getItemAt(0);a!==this._shortcutMenuItem&&this._accessibilityMenu.addItemBefore(this._shortcutMenuItem,a)}else this._accessibilityMenu.removeItem(this._shortcutMenuItem)},_logEvent:function(a,c){new(b("NavigationMenubarInteractionsTypedLogger"))().setAction(a).setTargetItem(c).log()},_checkShortcutsShow:function(a,c){c.item.getValue()==="key_shortcuts"&&(this._ignoreBlur=!1,this._hideMenubar(),b("setTimeout")(function(){b("KeyboardShortcuts").showShortcutFlyout()},0)),this._logEvent("selected_item_ax",c.item.getValue())},_checkLogEvent:function(a,b){a=b.item.getValue();this._logEvent("selected_item_global",a);this._ignoreBlur=!1},_getHelpDialogRequest:function(){if(!this._dialogRequest)this._dialogRequest=new(b("AsyncRequest"))("/ajax/keyboard_shortcuts"),this._dialogRequest.setReadOnly(!0);else if(this._dialogRequest.transport)return null;return this._dialogRequest}};e.exports=a}),null);
__d("BiometricDataField",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TIME_STAMP:"ts",WEB_SESSION_ID:"web_session_id",PAGE_URI:"page_uri",SCRIPT_PATH:"script_path",MOUSE_MOVEMENT_COORDINATES:"mouse_movement_coordinates",MOUSE_MOVEMENT_COORDINATES_NO_SCROLL:"mouse_movement_coordinates_no_scroll",MOUSE_CLICK_COORDINATES:"mouse_click_coordinates",MOUSE_CLICK_COORDINATES_NO_SCROLL:"mouse_click_coordinates_no_scroll",MOUSE_CLICK_DURATIONS:"mouse_click_durations",MOUSE_MOVEMENT_SPEEDS:"mouse_movement_speeds",MOUSE_MOVEMENT_ACCELERATIONS:"mouse_movement_accelerations",KEY_STROKE_TIMES:"key_stroke_times",KEY_STROKE_DURATIONS:"key_stroke_durations",KEY_TO_KEY_DOWN_TIMES:"key_to_key_down_times",KEY_TO_KEY_UP_TIMES:"key_to_key_up_times",SCROLL_LENGTHS:"scroll_lengths",SCROLL_SPEEDS:"scroll_speeds",BOT_DETECTOR_RESULTS:"bot_detector_results",BOT_DETECTOR_CONFIDENCE_SCORES:"bot_detector_confidence_scores",BOT_SCORER_FEATURE_SCORES:"bot_scorer_feature_scores"})}),null);
__d("IntegrityKeyStrokeTimeCollector",["BiometricDataField","Event","getTime"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map(),h=new Map(),i=[];a={attachListener:function(){b("Event").listen(window.document,"keydown",j),b("Event").listen(window.document,"keyup",k)},storeData:function(){var a=Array.from(h.keys()),b=a.find(function(a){return g.has(a)})||"",c=g.get(b)||0;b=h.get(b)||0;c&&b?i.push([c,b]):i.push([0,0]);a.forEach(function(a){g["delete"](a),h["delete"](a)})},clearData:function(){i=[],g.clear(),h.clear()},getData:function(){var a;if(i.every(function(a){return a[0]===0&&a[1]===0}))return{};var c=b("BiometricDataField").KEY_STROKE_TIMES;return a={},a[c]=JSON.stringify(i),a}};function j(a){!g.has(a.code)&&!a.repeat&&g.set(a.code,b("getTime")())}function k(a){g.has(a.code)&&!h.has(a.code)&&h.set(a.code,b("getTime")())}e.exports=a}),null);
__d("IntegrityMouseClickCollector",["BiometricDataField","Event"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[],h=[],i=-1,j=-1,k=-1,l=-1;a={attachListener:function(){b("Event").listen(window.document,"click",m)},storeData:function(){g.push([i,j]),h.push([k,l]),i=-1,j=-1,k=-1,l=-1},clearData:function(){g=[],h=[]},getData:function(){var a;if(g.every(function(a){return a.length===2&&a[0]===-1&&a[1]===-1}))return{};var c=b("BiometricDataField").MOUSE_CLICK_COORDINATES,d=b("BiometricDataField").MOUSE_CLICK_COORDINATES_NO_SCROLL;return a={},a[c]=JSON.stringify(g),a[d]=JSON.stringify(h),a}};function m(a){i=a.pageX,j=a.pageY,k=a.clientX,l=a.clientY}e.exports=a}),null);
__d("IntegrityMouseClickDurationCollector",["BiometricDataField","Event","getTime"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[],h=0,i=0;a={attachListener:function(){b("Event").listen(window.document,"mousedown",j),b("Event").listen(window.document,"mouseup",k)},storeData:function(){g.push(i),i=0},clearData:function(){g=[],h=0,i=0},getData:function(){var a;if(g.every(function(a){return a===0}))return{};var c=b("BiometricDataField").MOUSE_CLICK_DURATIONS;return a={},a[c]=JSON.stringify(g),a}};function j(a){h=b("getTime")()}function k(a){i=b("getTime")()-h}e.exports=a}),null);
__d("IntegrityMouseMovementCollector",["BiometricDataField","Event"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[],h=[],i=-1,j=-1,k=-1,l=-1;a={attachListener:function(){b("Event").listen(window.document,"mousemove",m)},storeData:function(){g.push([i,j]),h.push([k,l])},clearData:function(){g=[],h=[]},getData:function(){var a;if(g.every(function(a){return a.length===2&&a[0]===-1&&a[1]===-1}))return{};var c=b("BiometricDataField").MOUSE_MOVEMENT_COORDINATES,d=b("BiometricDataField").MOUSE_MOVEMENT_COORDINATES_NO_SCROLL;return a={},a[c]=JSON.stringify(g),a[d]=JSON.stringify(h),a}};function m(a){i=a.pageX,j=a.pageY,k=a.clientX,l=a.clientY}e.exports=a}),null);
__d("IntegrityScrollLengthCollector",["BiometricDataField"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[],h=window.pageYOffset;a={attachListener:function(){},storeData:function(){var a=window.pageYOffset;g.push(a-h);h=a},clearData:function(){g=[],h=window.pageYOffset},getData:function(){var a;if(g.every(function(a){return a===0}))return{};var c=b("BiometricDataField").SCROLL_LENGTHS;return a={},a[c]=JSON.stringify(g),a}};e.exports=a}),null);
__d("XIntegrityBiometricLoggingAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/ibl/",{})}),null);
__d("IntegrityBiometricsLogger",["AsyncRequest","BiometricDataField","XIntegrityBiometricLoggingAsyncController","IntegrityKeyStrokeTimeCollector","IntegrityMouseClickCollector","IntegrityMouseClickDurationCollector","IntegrityMouseMovementCollector","IntegrityScrollLengthCollector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("IntegrityKeyStrokeTimeCollector"),b("IntegrityMouseClickCollector"),b("IntegrityMouseClickDurationCollector"),b("IntegrityMouseMovementCollector"),b("IntegrityScrollLengthCollector")];a={attachListeners:function(){g.forEach(function(a){return a.attachListener()})},storeData:function(){g.forEach(function(a){return a.storeData()})},clearData:function(){g.forEach(function(a){return a.clearData()})},logData:function(a){var c=b("XIntegrityBiometricLoggingAsyncController").getURIBuilder().getURI(),d=h(),e=b("BiometricDataField").PAGE_URI,f=b("BiometricDataField").SCRIPT_PATH;new(b("AsyncRequest"))(c).setData(babelHelpers["extends"]((c={},c[e]=a.currentPageURI,c[f]=a.scriptPath,c),d)).setAllowCrossPageTransition(!0).setOption("suppressEvaluation",!0).send()}};function h(){return g.map(function(a){return a.getData()}).reduce(function(a,b){return babelHelpers["extends"]({},a,b)},{})}e.exports=a}),null);
__d("IntegrityBiometricsScheduler",["BotDetectionMouseMovementSitevarConfig","IntegrityBiometricsLogger","Run","URI","clearInterval","getTime","setInterval"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("BotDetectionMouseMovementSitevarConfig").run_time_ms,h=b("BotDetectionMouseMovementSitevarConfig").interval_time_ms,i=!1,j=!1,k,l,m,n={schedule:function(a){if(!i){i=!0;l=b("getTime")();k=a;b("IntegrityBiometricsLogger").attachListeners();m=b("setInterval")(n._storeData,h);a=!0;b("Run").onBeforeUnload(n._handlePageTransition,a)}},_storeData:function(){__p&&__p();if(j){b("clearInterval")(m);return}if(b("getTime")()-l>g){b("IntegrityBiometricsLogger").logData({currentPageURI:b("URI").getRequestURI().getPath(),scriptPath:k});b("IntegrityBiometricsLogger").clearData();j=!0;b("clearInterval")(m);return}b("IntegrityBiometricsLogger").storeData()},_handlePageTransition:function(){j||(b("IntegrityBiometricsLogger").logData({currentPageURI:b("URI").getRequestURI().getPath(),scriptPath:k}),b("IntegrityBiometricsLogger").clearData()),i=!1,j=!1}};e.exports=n}),null);
__d("HelpLiteFlyoutBootloader",["regeneratorRuntime","Deferred","JSResource"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h=null,i=null,j={loadFlyout:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:j.loadFlyoutWithHelpType(null);case 1:case"end":return a.stop()}},null,this)},loadFlyoutWithHelpType:function(a){__p&&__p();var c,d,e,f;return b("regeneratorRuntime").async(function(h){__p&&__p();while(1)switch(h.prev=h.next){case 0:h.next=2;return b("regeneratorRuntime").awrap(b("JSResource")("HelpLiteFlyout").__setRef("HelpLiteFlyoutBootloader").load());case 2:c=h.sent;if(!g){h.next=6;break}c.refreshHelp();return h.abrupt("return");case 6:g=!0;a&&j.setHelpType(a);h.next=10;return b("regeneratorRuntime").awrap(this._getDeferredFlyoutElements().getPromise());case 10:d=h.sent,e=d.flyout,f=d.flyoutRoot,c.registerFlyoutToggler(e,f),c.loadBody();case 15:case"end":return h.stop()}},null,this)},setHelpType:function(a){i=a},getHelpType:function(){return i},_getDeferredFlyoutElements:function(){h==null&&(h=new(b("Deferred"))());return h},registerFlyoutElements:function(a,b){this._getDeferredFlyoutElements().resolve({flyout:a,flyoutRoot:b})}};e.exports=j}),null);
__d("PrivacyLiteFlyoutBootloader",["regeneratorRuntime","Promise","Deferred","JSResource"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h=null,i=null,j={loadFlyout:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(j._loadFlyout(!1));case 2:case"end":return a.stop()}},null,this)},loadFlyoutAsChild:function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(j._loadFlyout(!0));case 2:case"end":return a.stop()}},null,this)},_loadFlyout:function(a){__p&&__p();var c,d,e,f,h,i,j,k,l,m;return b("regeneratorRuntime").async(function(n){__p&&__p();while(1)switch(n.prev=n.next){case 0:if(!g){n.next=2;break}return n.abrupt("return");case 2:g=!0;n.next=5;return b("regeneratorRuntime").awrap(b("Promise").all([b("JSResource")("PrivacyLiteFlyout").__setRef("PrivacyLiteFlyoutBootloader").load(),this._getDeferredFlyoutElements().getPromise(),this._getDeferredFooterElements().getPromise()]));case 5:c=n.sent,d=c[0],e=c[1],f=e.flyout,h=e.flyoutRoot,i=c[2],j=i.footer,k=i.event,l=i.settingsExitPoint,m=i.basicsExitPoint,d.setIsChild(!!a),d.registerFlyoutToggler(f,h),d.registerSettingsAndBasicsLinkLogging(j,k,l,m),d.loadBody();case 19:case"end":return n.stop()}},null,this)},setChildFlyoutVisible:function(a){__p&&__p();var c,d,e,f;return b("regeneratorRuntime").async(function(h){__p&&__p();while(1)switch(h.prev=h.next){case 0:if(!(!g&&!a)){h.next=2;break}return h.abrupt("return");case 2:h.next=4;return b("regeneratorRuntime").awrap(b("Promise").all([b("JSResource")("PrivacyLiteFlyout").__setRef("PrivacyLiteFlyoutBootloader").load(),this._getDeferredFlyoutElements().getPromise()]));case 4:c=h.sent;d=c[0];e=c[1];f=e.flyout;e._flyoutRoot;if(!(a===d.isFlyoutVisible())){h.next=11;break}return h.abrupt("return");case 11:d.setChildFlyoutVisible(a),d.onToggle(f,a?"show":"hide");case 13:case"end":return h.stop()}},null,this)},_getDeferredFlyoutElements:function(){h==null&&(h=new(b("Deferred"))());return h},registerFlyoutElements:function(a,b){this._getDeferredFlyoutElements().resolve({flyout:a,flyoutRoot:b})},_getDeferredFooterElements:function(){i==null&&(i=new(b("Deferred"))());return i},registerFooterElements:function(a,b,c,d){this._getDeferredFooterElements().resolve({footer:a,event:b,settingsExitPoint:c,basicsExitPoint:d})}};e.exports=j}),null);
__d("HelpLiteFlyout",["AsyncRequest","CSS","DOM","Event","HelpLiteFlyoutBootloader","PrivacyLiteFlyoutBootloader","Toggler","ge"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h={loadBody:function(){b("ge")("fbHelpLiteFlyoutLoading")&&new(b("AsyncRequest"))("/help/ajax/contextual/").setData({page_type:b("HelpLiteFlyoutBootloader").getHelpType()}).send()},refreshHelp:function(){b("ge")("fbHelpLiteFlyoutLoading")&&new(b("AsyncRequest"))("/help/ajax/contextual/").setData({page_type:b("HelpLiteFlyoutBootloader").getHelpType(),is_refresh:!0}).send()},resetHelp:function(a){var c=b("ge")("fbContextualHelpContent");c&&b("DOM").replace(c,a);h.isFlyoutVisible()&&h.refreshHelp()},showHelp:function(){b("PrivacyLiteFlyoutBootloader").setChildFlyoutVisible(!1),b("CSS").show(b("ge")("fbHelpLiteFlyout"))},openPrivacy:function(){b("CSS").hide(b("ge")("fbHelpLiteFlyout")),b("PrivacyLiteFlyoutBootloader").loadFlyoutAsChild(),b("PrivacyLiteFlyoutBootloader").setChildFlyoutVisible(!0)},registerPrivacyBackLink:function(a){b("Event").listen(a,"click",h.showHelp)},registerFlyoutToggler:function(a,c){g=c;a=b("Toggler").createInstance(a);a.setSticky(!1);b("Toggler").listen("hide",c,function(a){b("PrivacyLiteFlyoutBootloader").setChildFlyoutVisible(!1)});b("Toggler").listen("show",c,function(a){h.showHelp()})},isFlyoutVisible:function(){return g&&b("Toggler").getActive()===g},setFlyoutVisible:function(a){a&&b("HelpLiteFlyoutBootloader").loadFlyout(),a?b("Toggler").show(g):b("Toggler").hide(g)}};e.exports=h}),null);
__d("AccessibilityWebAssistiveTechTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:AccessibilityWebAssistiveTechLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:AccessibilityWebAssistiveTechLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:AccessibilityWebAssistiveTechLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setIndicatedBrowsers=function(a){this.$1.indicated_browsers=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setIsVirtualCursorAction=function(a){this.$1.is_virtual_cursor_action=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={indicated_browsers:!0,is_virtual_cursor_action:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("FourOhFourJSTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:FourOhFourJSLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:FourOhFourJSLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:FourOhFourJSLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setFbid=function(a){this.$1.fbid=a;return this};a.prototype.setOriginalURI=function(a){this.$1.original_uri=a;return this};a.prototype.setScriptPath=function(a){this.$1.script_path=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={fbid:!0,original_uri:!0,script_path:!0,time:!0,weight:!0};e.exports=a}),null);
__d("KeyboardActivityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:KeyboardActivityLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:KeyboardActivityLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:KeyboardActivityLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setDuration=function(a){this.$1.duration=a;return this};a.prototype.setKey=function(a){this.$1.key=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={duration:!0,key:!0,vc:!0};e.exports=a}),null);
__d("MqttWsClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MqttWsClientLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MqttWsClientLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MqttWsClientLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppID=function(a){this.$1.app_id=a;return this};a.prototype.setAttemptNumber=function(a){this.$1.attempt_number=a;return this};a.prototype.setConnectionStatus=function(a){this.$1.connection_status=a;return this};a.prototype.setDuration=function(a){this.$1.duration=a;return this};a.prototype.setErrorCode=function(a){this.$1.error_code=a;return this};a.prototype.setErrorMessage=function(a){this.$1.error_message=a;return this};a.prototype.setEventType=function(a){this.$1.event_type=a;return this};a.prototype.setFailTotal=function(a){this.$1.fail_total=a;return this};a.prototype.setHostname=function(a){this.$1.hostname=a;return this};a.prototype.setHref=function(a){this.$1.href=a;return this};a.prototype.setOnline=function(a){this.$1.online=a;return this};a.prototype.setPlatform=function(a){this.$1.platform=a;return this};a.prototype.setPublishStatus=function(a){this.$1.publish_status=a;return this};a.prototype.setSessionID=function(a){this.$1.session_id=a;return this};a.prototype.setSubscribedTopics=function(a){this.$1.subscribed_topics=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setSuccessTotal=function(a){this.$1.success_total=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setTimePassed=function(a){this.$1.time_passed=a;return this};a.prototype.setTopic=function(a){this.$1.topic=a;return this};a.prototype.setUserSessionID=function(a){this.$1.user_session_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={app_id:!0,attempt_number:!0,connection_status:!0,duration:!0,error_code:!0,error_message:!0,event_type:!0,fail_total:!0,hostname:!0,href:!0,online:!0,platform:!0,publish_status:!0,session_id:!0,subscribed_topics:!0,success_total:!0,time:!0,time_passed:!0,topic:!0,user_session_id:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("RealtimeRequestStreamWebClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RealtimeRequestStreamWebClientLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RealtimeRequestStreamWebClientLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RealtimeRequestStreamWebClientLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setClientSessionID=function(a){this.$1.client_session_id=a;return this};a.prototype.setClientTimeMs=function(a){this.$1.client_time_ms=a;return this};a.prototype.setMessage=function(a){this.$1.message=a;return this};a.prototype.setSeverity=function(a){this.$1.severity=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setUserFbid=function(a){this.$1.user_fbid=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={client_session_id:!0,client_time_ms:!0,message:!0,severity:!0,time:!0,user_fbid:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("FantaHider",["ifRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports={hide:function(){b("ifRequired")("FantaTabsSlimApp",function(a){a.hide()},function(){b("ifRequired")("FantaTabsReactApp",function(a){a.hide()})})},unhide:function(){b("ifRequired")("FantaTabsSlimApp",function(a){a.unhide()},function(){b("ifRequired")("FantaTabsReactApp",function(a){a.unhide()})})}}}),null);
__d("DimensionLogging",["BanzaiNectar","getViewportDimensions"],(function(a,b,c,d,e,f){a=b("getViewportDimensions")();b("BanzaiNectar").log("browser_dimension","homeload",{x:a.width,y:a.height,sw:window.screen.width,sh:window.screen.height,aw:window.screen.availWidth,ah:window.screen.availHeight,at:window.screen.availTop,al:window.screen.availLeft})}),null);
__d("FocusRing",["cx","CSS","Event","KeyEventController","Keys","VirtualCursorStatus","emptyFunction"],(function(a,b,c,d,e,f,g){__p&&__p();var h=["mousedown","mouseup"];a={KEY_CODES:[b("Keys").UP,b("Keys").RIGHT,b("Keys").DOWN,b("Keys").LEFT,b("Keys").TAB,b("Keys").RETURN,b("Keys").SPACE,b("Keys").ESC],init:function(){if(this._initialized)return;this._userInteractingWithKeyboard=!1;this._attachVirtualCursorListener();this._attachKeyDownListener();document.body&&b("CSS").addClass(document.body,"_19_u");this._initialized=!0},usingKeyboardNavigation:function(){return this._userInteractingWithKeyboard},_attachVirtualCursorListener:function(){document.documentElement&&(this._onClickListener=b("VirtualCursorStatus").add(document.documentElement,this._onClick.bind(this)))},_attachMouseListeners:function(){this._onMouseListeners=h.map(function(a){return b("Event").listen(document.documentElement,a,this._onMouseEvent.bind(this))}.bind(this))},_attachKeyDownListener:function(){this._onKeyDownListener=b("Event").listen(document.documentElement,"keydown",this._onKeyDown.bind(this))},_initialized:!1,_userInteractingWithKeyboard:!0,_onMouseEvent:function(){this._hideFocusRing()},_onMouseListeners:h.map(function(a){return{remove:b("emptyFunction")}}),_removeMouseListeners:function(){this._onMouseListeners.forEach(function(a){return a.remove()})},_onClick:function(a,b,c){a&&this._showFocusRing()},_onKeyDown:function(a){this.KEY_CODES.indexOf(b("Event").getKeyCode(a))>-1&&b("KeyEventController").filterEventTargets(a,"keydown")&&this._showFocusRing()},_showFocusRing:function(){this._onKeyDownListener.remove(),this._attachMouseListeners(),this._userInteractingWithKeyboard=!0,document.body&&b("CSS").removeClass(document.body,"_19_u")},_hideFocusRing:function(){this._removeMouseListeners(),this._attachKeyDownListener(),this._userInteractingWithKeyboard=!1,document.body&&b("CSS").addClass(document.body,"_19_u")},_onKeyDownListener:{remove:b("emptyFunction")},_onClickListener:{remove:b("emptyFunction")}};e.exports=a}),null);
__d("FourOhFourJSLogger",["FourOhFourJSTypedLogger","ScriptPath"],(function(a,b,c,d,e,f){a={log:function(){window.onload=function(){var a=new(b("FourOhFourJSTypedLogger"))();a.setOriginalURI(window.location.href);a.setScriptPath(b("ScriptPath").getScriptPath());a.logVital()}}};e.exports=a}),null);
__d("WebPixelRatioDetector",["Cookie","DOMEventListener","PixelRatioConst","Run"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("PixelRatioConst").cookieName,h=!1,i=!1,j=!1;function k(){return window.devicePixelRatio||1}function l(){b("Cookie").set(g,String(k()))}function m(){b("Cookie").clear(g)}function n(){if(i)return;i=!0;j&&m();k()!==1?l():m()}a={startDetecting:function(a){a&&(j=!0);if(h)return;h=!0;"onpagehide"in window&&b("DOMEventListener").add(window,"pagehide",n);b("Run").onBeforeUnload(n,!1)}};e.exports=a}),null);
__d("SISketchSurface",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FEED:"feed",LOGIN:"login",REG:"registration"})}),null);
__d("XSISketchResultsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/sketch_results/",{})}),null);
__d("Sketch",["Promise","regeneratorRuntime","Alea","AsyncRequest","Base64","Form","SISketchSurface","XSISketchResultsController","emptyFunction","md5","nullthrows","performance","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();var g=10,h=16,i=function(){return new(b("Promise"))(function(a){setTimeout(a)})};function j(a,c,d){"use strict";this.seed=a,this.rounds=c,this.rng=b("Alea")(a),this.ctx=b("nullthrows")(d.getContext("2d")),this.width=d.width,this.height=d.height}j.prototype.solveAllRoundsAsync=function(a){"use strict";__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:c=Date.now()+g,d=0;case 2:if(!(d<this.rounds)){e.next=11;break}a(d);if(!(Date.now()>c)){e.next=8;break}e.next=7;return b("regeneratorRuntime").awrap(i());case 7:c=Date.now()+g;case 8:d++;e.next=2;break;case 11:case"end":return e.stop()}},null,this)};j.prototype.solveAsync=function(){"use strict";return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(this.solveAllRoundsAsync(this.pickPrimitiveAndDraw.bind(this)));case 2:case"end":return a.stop()}},null,this)};j.prototype.solveOnePrimitiveAsync=function(a){"use strict";return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(this.solveAllRoundsAsync(this.getDrawFunction(a)));case 2:case"end":return c.stop()}},null,this)};j.prototype.getDrawFunction=function(a){"use strict";switch(a){case"text":return this.drawText.bind(this);case"bezier":return this.drawBezier.bind(this);case"circle":return this.drawCircle.bind(this);case"emoji":return this.drawEmoji.bind(this);default:return function(){return void 0}}};j.prototype.pickPrimitive=function(a){"use strict";var b=["emoji","circle","bezier","text"];return b[a%b.length]};j.prototype.pickPrimitiveAndDraw=function(a){"use strict";a=this.getDrawFunction(this.pickPrimitive(a));a()};j.prototype.drawText=function(){"use strict";var a=Math.floor(this.rng()*50+100);this.ctx.font=a+"px Arial";var b=Math.floor(this.rng()*100).toString(),c=Math.floor(this.rng()*this.width/2);a=this.rngRange(a*2,this.height-a);this.ctx.fillStyle=this.makeRadialGradient();this.applyShadow();this.ctx.fillText(b,c,a)};j.prototype.drawEmoji=function(){"use strict";var a=Math.floor(this.rng()*50+100);this.ctx.font=a+"px Arial";var b="\ud83d\ude03",c=Math.floor(this.rng()*this.width/2);a=this.rngRange(a*2,this.height-a);this.ctx.fillStyle=this.makeRadialGradient();this.applyShadow();this.ctx.fillText(b,c,a)};j.prototype.drawBezier=function(){"use strict";__p&&__p();this.ctx.beginPath();var a=this.rng()*this.width,b=this.rng()*this.height,c=this.rng()*this.width,d=this.rng()*this.height,e=this.rng()*this.width,f=this.rng()*this.height;this.ctx.moveTo(a,b);this.ctx.bezierCurveTo(this.rng()*this.width,this.rng()*this.height,this.rng()*this.width,this.rng()*this.height,c,d);this.ctx.bezierCurveTo(this.rng()*this.width,this.rng()*this.height,this.rng()*this.width,this.rng()*this.height,e,f);this.ctx.bezierCurveTo(this.rng()*this.width,this.rng()*this.height,this.rng()*this.width,this.rng()*this.height,a,b);this.ctx.fillStyle=this.makeRadialGradient();this.applyShadow();this.ctx.fill()};j.prototype.drawCircle=function(){"use strict";this.ctx.beginPath(),this.ctx.arc(this.rng()*this.width,this.rng()*this.height,this.rng()*this.width/5,0,2*Math.PI),this.ctx.fillStyle=this.makeRadialGradient(),this.applyShadow(),this.ctx.fill(),this.ctx.lineWidth=2,this.ctx.strokeStyle=this.makeRadialGradient(),this.ctx.stroke()};j.prototype.makeRadialGradient=function(){"use strict";var a=this.ctx.createRadialGradient(this.rng()*this.width,this.rng()*this.height,0,this.rng()*this.width,this.rng()*this.height,this.width*2);a.addColorStop(0,this.makeColor());a.addColorStop(.5,this.makeColor());a.addColorStop(1,this.makeColor());return a};j.prototype.makeColor=function(){"use strict";var a=Math.floor(this.rng()*255),b=Math.floor(this.rng()*255),c=Math.floor(this.rng()*255);return"rgb("+a+","+b+","+c+")"};j.prototype.applyShadow=function(){"use strict";this.ctx.shadowColor=this.makeColor(),this.ctx.shadowBlur=this.rng()*50,this.ctx.shadowOffsetX=this.rng()*15,this.ctx.shadowOffsetY=this.rng()*15};j.prototype.rngRange=function(a,b){"use strict";var c=Math.min(a,b);a=Math.max(a,b);return this.rng()*(a-c)+c};var k={solveIntern:function(a,c,d,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(k.solveAsync(a,d,e));case 2:f=g.sent,c.textContent=f.hash;case 4:case"end":return g.stop()}},null,this)},solveAndCallAsyncController:function(a,c,d){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return b("regeneratorRuntime").awrap(k.createCanvasAndSolve(a,c,d));case 2:e=h.sent,f=k.encode(e),g=b("XSISketchResultsController").getURIBuilder().getURI(),new(b("AsyncRequest"))().setURI(g).setMethod("POST").setData({skstamp:f}).setTimeoutHandler(1e4,b("emptyFunction")).setErrorHandler(b("emptyFunction")).send();case 6:case"end":return h.stop()}},null,this)},solveAndUpdateForm:function(a,c,d,e){var f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return b("regeneratorRuntime").awrap(k.createCanvasAndSolve(a,c,d));case 2:f=i.sent,e=="login_form"?f.surface=b("SISketchSurface").LOGIN:e=="reg"?f.surface=b("SISketchSurface").REG:f.surface="",g=k.encode(f),h=document.getElementById(e),b("Form").createHiddenInputs({skstamp:g},h);case 7:case"end":return i.stop()}},null,this)},solveAllPrimitivesAndCallAsyncController:function(a,c,d){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.next=2;return b("regeneratorRuntime").awrap(k.createCanvasAndSolveAllPrimitives(a,c,d));case 2:e=h.sent,f=k.encode(e),g=b("XSISketchResultsController").getURIBuilder().getURI(),new(b("AsyncRequest"))().setURI(g).setMethod("POST").setData({skstamp:f}).setTimeoutHandler(1e4,b("emptyFunction")).setErrorHandler(b("emptyFunction")).send();case 6:case"end":return h.stop()}},null,this)},createCanvasAndSolve:function(a,c,d){__p&&__p();var e,f,g,h;return b("regeneratorRuntime").async(function(i){__p&&__p();while(1)switch(i.prev=i.next){case 0:e=document.createElement("canvas");e.width=200;e.height=200;e.style.display="none";f={};f.rounds=d;f.seed=a;f.seed2=c;b("nullthrows")(document.body).appendChild(e);i.next=11;return b("regeneratorRuntime").awrap(k.solveAsync(e,a,d));case 11:g=i.sent;i.next=14;return b("regeneratorRuntime").awrap(k.solveAsync(e,c,d));case 14:h=i.sent;f.hash=g.hash;f.hash2=h.hash;f.time_taken=g.time_taken+h.time_taken;b("nullthrows")(document.body).removeChild(e);return i.abrupt("return",f);case 20:case"end":return i.stop()}},null,this)},solveAsync:function(a,c,d){__p&&__p();var e,f,g,h,i,l;return b("regeneratorRuntime").async(function(m){__p&&__p();while(1)switch(m.prev=m.next){case 0:e=new j(c,d,a);e.ctx.clearRect(0,0,e.width,e.height);f=b("performanceNow")();m.next=5;return b("regeneratorRuntime").awrap(e.solveAsync());case 5:g=b("performanceNow")();h=parseInt((g-f)*1e3,10);m.next=9;return b("regeneratorRuntime").awrap(k.getHash(a));case 9:i=m.sent;l={hash:i,time_taken:h};return m.abrupt("return",l);case 12:case"end":return m.stop()}},null,this)},createCanvasAndSolveAllPrimitives:function(a,c,d){__p&&__p();var e,f,g,h;return b("regeneratorRuntime").async(function(i){__p&&__p();while(1)switch(i.prev=i.next){case 0:e=document.createElement("canvas");e.width=200;e.height=200;e.style.display="none";f={rounds:d,seed:a,hash:"",seed2:c,hash2:"",time_taken:0,hash_text:"",hash_bezier:"",hash_circle:"",hash_emoji:""};b("nullthrows")(document.body).appendChild(e);i.next=8;return b("regeneratorRuntime").awrap(k.solveAsync(e,a,d));case 8:g=i.sent;i.next=11;return b("regeneratorRuntime").awrap(k.solveAsync(e,c,d));case 11:h=i.sent;f.hash=g.hash;f.hash2=h.hash;f.time_taken=g.time_taken+h.time_taken;i.next=17;return b("regeneratorRuntime").awrap(k.solvePrimitive(e,a,d,"text"));case 17:f.hash_text=i.sent;i.next=20;return b("regeneratorRuntime").awrap(k.solvePrimitive(e,a,d,"bezier"));case 20:f.hash_bezier=i.sent;i.next=23;return b("regeneratorRuntime").awrap(k.solvePrimitive(e,a,d,"circle"));case 23:f.hash_circle=i.sent;i.next=26;return b("regeneratorRuntime").awrap(k.solvePrimitive(e,a,d,"emoji"));case 26:f.hash_emoji=i.sent;b("nullthrows")(document.body).removeChild(e);return i.abrupt("return",f);case 29:case"end":return i.stop()}},null,this)},solvePrimitive:function(a,c,d,e){__p&&__p();var f,g;return b("regeneratorRuntime").async(function(h){__p&&__p();while(1)switch(h.prev=h.next){case 0:f=new j(c,d,a);f.ctx.clearRect(0,0,f.width,f.height);h.next=4;return b("regeneratorRuntime").awrap(f.solveOnePrimitiveAsync(e));case 4:h.next=6;return b("regeneratorRuntime").awrap(k.getHash(a));case 6:g=h.sent;return h.abrupt("return",g);case 8:case"end":return h.stop()}},null,this)},encode:function(a){return b("Base64").encode(JSON.stringify(a))},getHash:function(a){return new(b("Promise"))(function(c){setTimeout(function(){c(b("md5")(a.toDataURL()))},h)})}};e.exports=k}),null);
__d("AccessibilityWebVirtualCursorClickLogger",["AccessibilityWebAssistiveTechTypedLogger","VirtualCursorStatus"],(function(a,b,c,d,e,f){a={init:function(a){a.forEach(function(a){b("VirtualCursorStatus").add(a,this._log)}.bind(this),this)},_log:function(a,c,d){d===void 0&&(d=!1),a&&new(b("AccessibilityWebAssistiveTechTypedLogger"))().setIndicatedBrowsers(c).setIsVirtualCursorAction(d).log()}};e.exports=a}),null);
__d("KeyboardActivityLogger",["Event","KeyboardActivityTypedLogger","Keys","isElementInteractive"],(function(a,b,c,d,e,f){__p&&__p();a=["tab","right","left","up","down","enter"];var g=a.reduce(function(a,b){a[b]={count:0,startTS:0};return a},{}),h=20;c={init:function(){document.addEventListener("keydown",this._listenForKey.bind(this))},_listenForKey:function(a){__p&&__p();var c=a.getTarget();if(b("isElementInteractive")(c))return;switch(b("Event").getKeyCode(a)){case b("Keys").TAB:this._checkKeyActivity("tab");break;case b("Keys").RIGHT:this._checkKeyActivity("right");break;case b("Keys").LEFT:this._checkKeyActivity("left");break;case b("Keys").UP:this._checkKeyActivity("up");break;case b("Keys").DOWN:this._checkKeyActivity("down");break;case b("Keys").RETURN:this._checkKeyActivity("enter");break}},_checkKeyActivity:function(a){var b=g[a];b.count++;b.startTS===0&&(b.startTS=Date.now());b.count===h&&(this._log(a),b.count=0,b.startTS=0)},_log:function(a){var c=g[a];c=Date.now()-c.startTS;new(b("KeyboardActivityTypedLogger"))().setKey(a).setDuration(c).log()}};e.exports=c}),null);
__d("BladeRunnerConfig",["RTISubscriptionManagerConfig","nullthrows"],(function(a,b,c,d,e,f){__p&&__p();a.prototype.patchRequestHeaders=function(a){"use strict";var c={},d=b("RTISubscriptionManagerConfig").bladerunner_www_sandbox;if(d!=null){var e=b("nullthrows")(a.method);!e.startsWith("FBLQ:")&&!e.startsWith("FBGQLS:")&&(c["javascript-sandbox"]=d)}for(var f in a)c[f]=a[f];return c};function a(){"use strict"}c=new a();e.exports=c}),null);
__d("BladeRunnerLogger",["BanzaiODS","CurrentUser","FBLogger","RealtimeRequestStreamWebClientTypedLogger","gkx"],(function(a,b,c,d,e,f){__p&&__p();var g="bladerunner_js_client",h={info:"info",warning:"warning",exception:"exception"};function a(){"use strict";this.$1=this.$4(),this.setFBLoggerLevel(1)}a.prototype.info=function(a){"use strict";this.$3>=2&&b("FBLogger")(g).info(a),this.$5(h.info,a)};a.prototype.warn=function(a){"use strict";this.$3>=1&&b("FBLogger")(g).warn(a),this.$5(h.warning,a)};a.prototype.exception=function(a,c){c===void 0&&(c="");c=c+" "+a.toString();this.$3>=0&&b("FBLogger")(g).warn(c);this.$5(h.exception,c)};a.prototype.bumpCounter=function(a,c){c===void 0&&(c=1),b("BanzaiODS").bumpEntityKey("BladeRunnerClient",a,c)};a.prototype.setClientSessionId=function(a){"use strict";this.$2=a};a.prototype.setFBLoggerLevel=function(a){"use strict";this.$3=a};a.prototype.$5=function(a,c){"use strict";if(this.$1){a=new(b("RealtimeRequestStreamWebClientTypedLogger"))().setClientTimeMs(Date.now()).setSeverity(a).setMessage(c).setClientSessionID(this.$2).setUserFbid(b("CurrentUser").getID());a.log()}};a.prototype.$4=function(){"use strict";return b("gkx")("676834")};c=new a();e.exports=c}),null);
__d("BladeRunnerTypesInternal",["Base64","BladeRunnerLogger","BladeRunnerTypes"],(function(a,b,c,d,e,f){__p&&__p();g.prototype.getHeaders=function(){"use strict";if(this.headers!=null)return this.headers;throw new Error("Expected headers")};g.readObject=function(a){"use strict";var b=new g();b.streamId=o(a.streamId);b.requestType=o(a.requestType);b.payload=r(a.payload);b.headers=u(a.headers);b.extraHeader=r(a.extraHeader);b.requestTarget=r(a.requestTarget);return b};function g(){"use strict"}h.readObject=function(a){"use strict";var b=new h();b.streamId=o(a.streamId);b.dataId=p(a.dataId);b.data=r(a.data);b.shouldAck=w(a.shouldAck);return b};h.prototype.decodeData=function(){"use strict";if(this.data==null)throw new Error("Expected data");return b("Base64").decode(this.data)};function h(){"use strict"}i.readObject=function(a){"use strict";var b=new i();b.streamId=o(a.streamId);b.dataId=o(a.dataId);b.success=v(a.success);b.message=r(a.message);b.code=p(a.code);return b};function i(){"use strict"}j.readObject=function(a){"use strict";var b=new j();b.streamId=p(a.streamId);b.message=r(a.message);return b};function j(){"use strict"}k.readObject=function(a){"use strict";var b=new k();b.streamId=o(a.streamId);b.status=o(a.status);b.message=r(a.message);b.code=p(a.code);b.shouldRetry=w(a.shouldRetry);b.retryDelayMs=p(a.retryDelayMs);return b};function k(){"use strict"}l.readObject=function(a){"use strict";var b=new l();b.streamId=o(a.streamId);b.newBody=r(a.newBody);b.newExtraHeader=r(a.newExtraHeader);b.patchExtraHeader=r(a.patchExtraHeader);b.killBody=w(a.killBody);b.temporary=w(a.temporary);return b};function l(){"use strict"}m.prototype.getRequest=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request;throw new Error("Expected request")};m.prototype.getData=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data;throw new Error("Expected data")};m.prototype.getDataAck=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.DATA_ACK&&this.dataAck!=null)return this.dataAck;throw new Error("Expected dataAck")};m.prototype.getStatusUpdate=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate;throw new Error("Expected status update")};m.prototype.getLog=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log;throw new Error("Expected log")};m.prototype.getRewriteRequest=function(){"use strict";if(this.type==b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest;throw new Error("Expected rewrite request")};m.prototype.getStreamId=function(){"use strict";__p&&__p();if(this.type==b("BladeRunnerTypes").StreamFrameType.REQUEST&&this.request!=null)return this.request.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.DATA&&this.data!=null)return this.data.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE&&this.statusUpdate!=null)return this.statusUpdate.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.LOG&&this.log!=null)return this.log.streamId;if(this.type==b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST&&this.rewriteRequest!=null)return this.rewriteRequest.streamId;throw new Error("Frame with unexpected type")};m.readObject=function(a){"use strict";__p&&__p();var c=new m();c.type=o(a.type);switch(c.type){case b("BladeRunnerTypes").StreamFrameType.REQUEST:c.request=g.readObject(s(a.request));break;case b("BladeRunnerTypes").StreamFrameType.DATA:c.data=h.readObject(s(a.data));break;case b("BladeRunnerTypes").StreamFrameType.DATA_ACK:c.dataAck=i.readObject(s(a.dataAck));break;case b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:c.statusUpdate=k.readObject(s(a.statusUpdate));break;case b("BladeRunnerTypes").StreamFrameType.LOG:c.log=j.readObject(s(a.log));break;case b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:c.rewriteRequest=l.readObject(s(a.rewriteRequest));break;default:b("BladeRunnerLogger").warn("Frame with unexpected type: "+c.type);return null}return c};m.newRequestFrame=function(a){"use strict";var c=new m();c.type=b("BladeRunnerTypes").StreamFrameType.REQUEST;c.request=a;return c};m.newDataFrame=function(a){"use strict";var c=new m();c.type=b("BladeRunnerTypes").StreamFrameType.DATA;c.data=a;return c};m.newDataAckFrame=function(a){"use strict";var c=new m();c.type=b("BladeRunnerTypes").StreamFrameType.DATA_ACK;c.dataAck=a;return c};m.newStatusUpdateFrame=function(a){"use strict";var c=new m();c.type=b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE;c.statusUpdate=a;return c};m.newLogFrame=function(a){"use strict";var c=new m();c.type=b("BladeRunnerTypes").StreamFrameType.LOG;c.log=a;return c};m.newRewriteRequestFrame=function(a){"use strict";var c=new m();c.type=b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST;c.rewriteRequest=a;return c};function m(){"use strict"}function n(a,b){"use strict";this.batchId=a,this.frames=b}n.prototype.getFrames=function(){"use strict";if(this.frames!=null)return this.frames;throw new Error("Expected frames")};n.prototype.write=function(){"use strict";return JSON.stringify(this)};n.read=function(a){"use strict";__p&&__p();a=JSON.parse(a);var b=a.batchId||0,c=[];for(var a=a.frames,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;f=m.readObject(f);f!=null&&c.push(f)}return new n(b,c)};function o(a){if(typeof a==="number")return a;throw new Error("Expected number")}function p(a){return a==null?null:o(a)}function q(a){if(typeof a==="string")return a;throw new Error("Expected string")}function r(a){return a==null?null:q(a)}function s(a){if(typeof a==="object"&&a!=null)return a;throw new Error("Expected object")}function t(a){if(typeof a==="object"&&a!=null){var b=a,c={};Object.keys(b).forEach(function(a){var d=b[a];typeof d==="string"&&d!=null&&(c[a]=d)});return c}throw new Error("Expected string map")}function u(a){return a==null?null:t(a)}function v(a){if(typeof a==="boolean"&&a!=null)return a;throw new Error("Expected boolean")}function w(a){return a==null?null:v(a)}e.exports={GatewayStreamBatch:n,GatewayStreamData:h,GatewayStreamDataAck:i,GatewayStreamFrame:m,GatewayStreamLog:j,GatewayStreamRequest:g,GatewayStreamRewriteRequest:l,GatewayStreamStatusUpdate:k}}),null);
__d("BladeRunnerEventHandler",["BladeRunnerLogger","BladeRunnerTypes","BladeRunnerTypesInternal","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g=1e3;function a(a,b,c){"use strict";this.$2=a,this.$1=b,this.$3=c}a.prototype.onProxyResponse=function(a){"use strict";__p&&__p();this.$4(a);var c=[];for(var d=a.getFrames(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;this.$2.witnessFrame(g)&&c.push(g)}c.length>0&&this.$5(new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(a.batchId,c))};a.prototype.onDisconnect=function(){"use strict";this.$2.resetErrors();var a=new(b("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();a.streamId=this.$2.getRequest().streamId;a.status=b("BladeRunnerTypes").StreamStatus.CLOSED;a.shouldRetry=!0;a.retryDelayMs=0;a=new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[b("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a)]);this.onProxyResponse(a)};a.prototype.$4=function(a){"use strict";__p&&__p();a=a.getFrames().filter(function(a){return a.type==b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE});for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.getStatusUpdate();if(e.status==b("BladeRunnerTypes").StreamStatus.CLOSED||e.status==b("BladeRunnerTypes").StreamStatus.REJECTED){this.$2.onError();var f=e.shouldRetry!=null&&e.shouldRetry,h=e.message!=null?e.message:"null";if(f&&this.$2.getErrorCount()<=this.$2.getRetriesAllowed()){e.status=b("BladeRunnerTypes").StreamStatus.PAUSED;var i=g;e.retryDelayMs!=null&&(i=e.retryDelayMs);b("BladeRunnerLogger").info("Can retry: stream "+e.streamId+" closed with status "+e.status+", message "+h+". Error count: "+this.$2.getErrorCount()+", retryDelay "+i+"ms. Already retrying: "+this.$2.getRetryRequestScheduled().toString());this.$2.getRetryRequestScheduled()?b("BladeRunnerLogger").bumpCounter("stream_closed_already_retrying"):(b("BladeRunnerLogger").bumpCounter("stream_closed_will_retry"),this.$2.setRetryRequestScheduled(!0),i>0?b("setTimeoutAcrossTransitions")(function(){return this.$6()}.bind(this),i):this.$6())}else b("BladeRunnerLogger").info("Will not retry: stream "+e.streamId+" closed with status "+e.status+", message "+h+". Error count: "+this.$2.getErrorCount()+", shouldRetry "+f.toString()+". Already retrying: "+this.$2.getRetryRequestScheduled().toString()),f?b("BladeRunnerLogger").bumpCounter("stream_closed_retry_exceeded"):b("BladeRunnerLogger").bumpCounter("stream_closed_no_retry"),this.$3.removeStream(e.streamId)}}};a.prototype.$6=function(){"use strict";this.$2.setRetryRequestScheduled(!1),this.$2.isAlive()&&this.$3.sendRetryStreamRequest(this.$2)};a.prototype.$5=function(a){"use strict";__p&&__p();b("BladeRunnerLogger").bumpCounter("send_to_handler");var c=[];this.$1.onBatch(a);for(var a=a.getFrames(),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;try{switch(f.type){case b("BladeRunnerTypes").StreamFrameType.DATA:this.$1.onData(f.getData().decodeData());c.push(f.getData());break;case b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:this.$1.onStatusUpdate(f.getStatusUpdate().status);break;case b("BladeRunnerTypes").StreamFrameType.LOG:f=f.getLog().message;f!=null&&this.$1.onLog(f);break;default:throw new Error("Frame with unexpected type")}}catch(a){b("BladeRunnerLogger").bumpCounter("send_to_handler_error"),b("BladeRunnerLogger").exception(a,"Failed sending frame to stream handler")}}this.$7(c)};a.prototype.$7=function(a){"use strict";__p&&__p();var c=[];for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(f.shouldAck===!0&&f.dataId!=null){var g=new(b("BladeRunnerTypesInternal").GatewayStreamDataAck)();g.streamId=f.streamId;g.dataId=f.dataId;g.success=!0;c.push(g)}}this.$3.sendDataAcks(c)};e.exports=a}),null);
__d("MqttLogger",["BanzaiODS","FantailLogger","FBLogger","Log","LogHistory","MqttWsClientTypedLogger","Random","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="mqtt_client",h="MqttJsClient",i=null,j={CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish"};k.getInstance=function(){i||(i=new k());return i};function k(){this.$1=b("LogHistory").getInstance(g),this.$2=0,this.$3=b("gkx")("778292"),this.$4=Math.floor(b("Random").random()*Number.MAX_SAFE_INTEGER),this.$5=Date.now()}k.prototype.setAppId=function(a){this.$2===0&&(this.$2=a)};k.prototype.logConnect=function(a){var c=a.sessionID,d=a.connectionStatus,e=a.duration,f=a.hostname,g=a.attemptNumber,h=a.failTotal,i=a.successTotal,k=a.subscribedTopics,l=a.errorCode;a=a.errorMessage;var m=d?"success":"failed";this.bumpCounter(j.CONNECT+"."+m);m=new(b("MqttWsClientTypedLogger"))().setUserSessionID(this.$4).setSessionID(c).setHref(window.location.hostname).setConnectionStatus(d).setDuration(e).setHostname(f).setAttemptNumber(g).setFailTotal(h).setSuccessTotal(i).setTimePassed(Date.now()-this.$5).setSubscribedTopics(k).setErrorCode(l).setErrorMessage(a);this.$6(j.CONNECT,m)};k.prototype.logDisconnect=function(a){var c=a.sessionID,d=a.errorCode,e=a.errorMessage;a=a.duration;this.bumpCounter(j.DISCONNECT);c=new(b("MqttWsClientTypedLogger"))().setUserSessionID(this.$4).setSessionID(c).setHref(window.location.hostname).setDuration(a).setErrorCode(d).setErrorMessage(e).setTimePassed(Date.now()-this.$5);this.$6(j.DISCONNECT,c)};k.prototype.logPublish=function(a){var c=a.sessionID,d=a.topic,e=a.connectionStatus;a=a.publishStatus;this.bumpCounter(j.PUBLISH+"."+d);c=new(b("MqttWsClientTypedLogger"))().setUserSessionID(this.$4).setHref(window.location.hostname).setSessionID(c).setTopic(d).setConnectionStatus(e).setPublishStatus(a).setTimePassed(Date.now()-this.$5);this.$6(j.PUBLISH,c)};k.prototype.logError=function(a,c){try{b("FBLogger")(g).catching(a).mustfix(c),this.$7(b("FantailLogger").error,c)}catch(a){}};k.prototype.logErrorWarn=function(a,c){try{b("FBLogger")(g).catching(a).warn(c),this.$7(b("FantailLogger").warn,c)}catch(a){}};k.prototype.logWarn=function(a,c){try{this.$1.warn(a,c),this.$7(b("FantailLogger").warn,c)}catch(a){}};k.prototype.debugTrace=function(a,c){try{this.$1.debug(a,c),this.$7(b("FantailLogger").debug,c)}catch(a){}};k.prototype.bumpCounter=function(a){this.$2!==0&&b("BanzaiODS").bumpEntityKey("mqtt_ws_client",this.$2+"."+a),b("BanzaiODS").bumpEntityKey("mqtt_ws_client",a)};k.prototype.$6=function(a,c){c.setEventType(a);c.setAppID(this.$2);c.setOnline(this.$8());var d=JSON.stringify(c.getData());this.$1.log(a,d);a!==j.PUBLISH&&c.log();this.$7(b("FantailLogger").info,d)};k.prototype.$7=function(a,c){b("gkx")("676936")&&a(h,c)};k.prototype.$8=function(){return window.navigator&&window.navigator.onLine!==void 0?window.navigator.onLine:!1};e.exports=k}),null);
__d("MqttTypes",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){this.errorCode=a,this.errorMessage=b}function b(a,b){this.mqttError=a,this.connAck=b}e.exports={MqttError:a,ConnectFailure:b}}),null);
/**
 * License: https://www.facebook.com/legal/license/Irg6QaR_7LF/
 */
__d("paho-mqtt",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();(function(a,b){typeof f==="object"&&typeof e==="object"?e.exports=b():typeof define==="function"&&define.amd?define(b):typeof f==="object"?f=b():(typeof a.Paho==="undefined"&&(a.Paho={}),a.Paho.MQTT=b())})(this,function(){__p&&__p();var c=function(c){__p&&__p();var d="@VERSION@",e={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},f=function(a,b){__p&&__p();for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))if(Object.prototype.hasOwnProperty.call(b,c)){if(typeof a[c]!==b[c])throw new Error(j(h.INVALID_TYPE,[typeof a[c],c]))}else{var d="Unknown property, "+c+". Valid properties are:";for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(d=d+" "+e);throw new Error(d)}},g=function(a,b){return function(){return a.apply(b,arguments)}},h={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out. SocketState: {0}, HasSocketError: {1}."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out. HasSocketError: {0}."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed: code {0} reason {1} wasClean {2}."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},i={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},j=function(a,b){__p&&__p();a=a.text;if(b){var c,d;for(var e=0;e<b.length;e++){c="{"+e+"}";d=a.indexOf(c);if(d>0){var f=a.substring(0,d);d=a.substring(d+c.length);a=f+b[e]+d}}}return a},k=[0,6,77,81,73,115,100,112,3],l=[0,4,77,81,84,84,4],m=function(a,b){this.type=a;for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(this[c]=b[c])};m.prototype.encode=function(){__p&&__p();var a=(this.type&15)<<4,b=0,c=[],d=0,f;this.messageIdentifier!==void 0&&(b+=2);switch(this.type){case e.CONNECT:switch(this.mqttVersion){case 3:b+=k.length+3;break;case 4:b+=l.length+3;break}b+=s(this.clientId)+2;this.willMessage!==void 0&&(b+=s(this.willMessage.destinationName)+2,f=this.willMessage.payloadBytes,f instanceof Uint8Array||(f=new Uint8Array(h)),b+=f.byteLength+2);this.userName!==void 0&&(b+=s(this.userName)+2);this.password!==void 0&&(b+=s(this.password)+2);break;case e.SUBSCRIBE:a|=2;for(var g=0;g<this.topics.length;g++)c[g]=s(this.topics[g]),b+=c[g]+2;b+=this.requestedQos.length;break;case e.UNSUBSCRIBE:a|=2;for(var g=0;g<this.topics.length;g++)c[g]=s(this.topics[g]),b+=c[g]+2;break;case e.PUBREL:a|=2;break;case e.PUBLISH:this.payloadMessage.duplicate&&(a|=8);a=a|=this.payloadMessage.qos<<1;this.payloadMessage.retained&&(a|=1);d=s(this.payloadMessage.destinationName);b+=d+2;var h=this.payloadMessage.payloadBytes;b+=h.byteLength;h instanceof ArrayBuffer?h=new Uint8Array(h):h instanceof Uint8Array||(h=new Uint8Array(h.buffer));break;case e.DISCONNECT:break;default:break}var i=r(b),j=i.length+1;b=new ArrayBuffer(b+j);var m=new Uint8Array(b);m[0]=a;m.set(i,1);if(this.type==e.PUBLISH)j=p(this.payloadMessage.destinationName,d,m,j);else if(this.type==e.CONNECT){switch(this.mqttVersion){case 3:m.set(k,j);j+=k.length;break;case 4:m.set(l,j);j+=l.length;break}a=0;this.cleanSession&&(a=2);this.willMessage!==void 0&&(a|=4,a|=this.willMessage.qos<<3,this.willMessage.retained&&(a|=32));this.userName!==void 0&&(a|=128);this.password!==void 0&&(a|=64);m[j++]=a;j=o(this.keepAliveInterval,m,j)}this.messageIdentifier!==void 0&&(j=o(this.messageIdentifier,m,j));switch(this.type){case e.CONNECT:j=p(this.clientId,s(this.clientId),m,j);this.willMessage!==void 0&&(j=p(this.willMessage.destinationName,s(this.willMessage.destinationName),m,j),j=o(f.byteLength,m,j),m.set(f,j),j+=f.byteLength);this.userName!==void 0&&(j=p(this.userName,s(this.userName),m,j));this.password!==void 0&&(j=p(this.password,s(this.password),m,j));break;case e.PUBLISH:m.set(h,j);break;case e.SUBSCRIBE:for(var g=0;g<this.topics.length;g++)j=p(this.topics[g],c[g],m,j),m[j++]=this.requestedQos[g];break;case e.UNSUBSCRIBE:for(var g=0;g<this.topics.length;g++)j=p(this.topics[g],c[g],m,j);break;default:}return b};function n(a,b){__p&&__p();var c=b,d=a[b],f=d>>4;d=d&=15;b+=1;var g,h=0,i=1;do{if(b==a.length)return[null,c];g=a[b++];h+=(g&127)*i;i*=128}while((g&128)!==0);g=b+h;if(g>a.length)return[null,c];i=new m(f);switch(f){case e.CONNACK:h=a[b++];h&1&&(i.sessionPresent=!0);i.returnCode=a[b++];break;case e.PUBLISH:c=d>>1&3;f=q(a,b);b+=2;h=u(a,b,f);b+=f;c>0&&(i.messageIdentifier=q(a,b),b+=2);f=new z(a.subarray(b,g));(d&1)==1&&(f.retained=!0);(d&8)==8&&(f.duplicate=!0);f.qos=c;f.destinationName=h;i.payloadMessage=f;break;case e.PUBACK:case e.PUBREC:case e.PUBREL:case e.PUBCOMP:case e.UNSUBACK:i.messageIdentifier=q(a,b);break;case e.SUBACK:i.messageIdentifier=q(a,b);b+=2;i.returnCode=a.subarray(b,g);break;default:break}return[i,g]}function o(a,b,c){b[c++]=a>>8;b[c++]=a%256;return c}function p(a,b,c,d){d=o(b,c,d);t(a,c,d);return d+b}function q(a,b){return 256*a[b]+a[b+1]}function r(a){var b=new Array(1),c=0;do{var d=a%128;a=a>>7;a>0&&(d|=128);b[c++]=d}while(a>0&&c<4);return b}function s(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d>2047?(55296<=d&&d<=56319&&(c++,b++),b+=3):d>127?b+=2:b++}return b}function t(a,b,c){__p&&__p();c=c;for(var d=0;d<a.length;d++){var e=a.charCodeAt(d);if(55296<=e&&e<=56319){var f=a.charCodeAt(++d);if(isNaN(f))throw new Error(j(h.MALFORMED_UNICODE,[e,f]));e=(e-55296<<10)+(f-56320)+65536}e<=127?b[c++]=e:e<=2047?(b[c++]=e>>6&31|192,b[c++]=e&63|128):e<=65535?(b[c++]=e>>12&15|224,b[c++]=e>>6&63|128,b[c++]=e&63|128):(b[c++]=e>>18&7|240,b[c++]=e>>12&63|128,b[c++]=e>>6&63|128,b[c++]=e&63|128)}return b}function u(a,b,c){__p&&__p();var d="",e,f=b;while(f<b+c){var g=a[f++];if(g<128)e=g;else{var i=a[f++]-128;if(i<0)throw new Error(j(h.MALFORMED_UTF,[g.toString(16),i.toString(16),""]));if(g<224)e=64*(g-192)+i;else{var k=a[f++]-128;if(k<0)throw new Error(j(h.MALFORMED_UTF,[g.toString(16),i.toString(16),k.toString(16)]));if(g<240)e=4096*(g-224)+64*i+k;else{var l=a[f++]-128;if(l<0)throw new Error(j(h.MALFORMED_UTF,[g.toString(16),i.toString(16),k.toString(16),l.toString(16)]));if(g<248)e=262144*(g-240)+4096*i+64*k+l;else throw new Error(j(h.MALFORMED_UTF,[g.toString(16),i.toString(16),k.toString(16),l.toString(16)]))}}}e>65535&&(e-=65536,d+=String.fromCharCode(55296+(e>>10)),e=56320+(e&1023));d+=String.fromCharCode(e)}return d}var v=function(a,c,d){__p&&__p();this._client=a;this._window=c;this._keepAliveInterval=d*1e3;this.isReset=!1;var f=new m(e.PINGREQ).encode(),g=function(a){return function(){return i.apply(a)}},i=function(){!this.isReset?(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(h.PING_TIMEOUT.code,j(h.PING_TIMEOUT,[this._client._hasSocketError]))):(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(f),this.timeout=b("setTimeoutAcrossTransitions")(g(this),this._keepAliveInterval))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=b("setTimeoutAcrossTransitions")(g(this),this._keepAliveInterval))};this.cancel=function(){this._window.clearTimeout(this.timeout)}},w=function(a,c,d,e,f){this._window=c;d||(d=30);c=function(b,a,c){return function(){return b.apply(a,c)}};this.timeout=b("setTimeoutAcrossTransitions")(c(e,a,f),d*1e3);this.cancel=function(){this._window.clearTimeout(this.timeout)}},x=function(a,b,d,e,f){__p&&__p();if(!("WebSocket"in c&&c.WebSocket!==null))throw new Error(j(h.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in c&&c.ArrayBuffer!==null))throw new Error(j(h.UNSUPPORTED,["ArrayBuffer"]));this._trace("Paho.MQTT.Client",a,b,d,e,f);this.host=b;this.port=d;this.path=e;this.uri=a;this.clientId=f;this._wsuri=null;this._localKey=b+":"+d+(e!="/mqtt"?":"+e:"")+":"+f+":";this._msg_queue=[];this._buffered_msg_queue=[];this._sentMessages={};this._receivedMessages={};this._notify_msg_sent={};this._message_identifier=1;this._sequence=0};x.prototype.host=null;x.prototype.port=null;x.prototype.path=null;x.prototype.uri=null;x.prototype.clientId=null;x.prototype.socket=null;x.prototype.connected=!1;x.prototype.maxMessageIdentifier=65536;x.prototype.connectOptions=null;x.prototype.hostIndex=null;x.prototype.onConnected=null;x.prototype.onConnectionLost=null;x.prototype.onMessageDelivered=null;x.prototype.onMessageArrived=null;x.prototype.traceFunction=null;x.prototype._msg_queue=null;x.prototype._buffered_msg_queue=null;x.prototype._connectTimeout=null;x.prototype.sendPinger=null;x.prototype.receivePinger=null;x.prototype._reconnectInterval=1;x.prototype._reconnecting=!1;x.prototype._hasSocketError=!1;x.prototype._reconnectTimeout=null;x.prototype.disconnectedPublishing=!1;x.prototype.disconnectedBufferSize=5e3;x.prototype.receiveBuffer=null;x.prototype._traceBuffer=null;x.prototype._MAX_TRACE_ENTRIES=100;x.prototype.connect=function(a){__p&&__p();var b=this._traceMask(a,"password");this._trace("Client.connect",b,this.socket,this.connected);if(this.connected)throw new Error(j(h.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(j(h.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);this.connectOptions=a;this._reconnectInterval=1;this._reconnecting=!1;a.uris?(this.hostIndex=0,this._doConnect(a.uris[0])):this._doConnect(this.uri)};x.prototype.subscribe=function(a,b){__p&&__p();this._trace("Client.subscribe",a,b);if(!this.connected)throw new Error(j(h.INVALID_STATE,["not connected"]));var c=new m(e.SUBSCRIBE);c.topics=[a];b.qos!==void 0?c.requestedQos=[b.qos]:c.requestedQos=[0];b.onSuccess&&(c.onSuccess=function(a){b.onSuccess({invocationContext:b.invocationContext,grantedQos:a})});b.onFailure&&(c.onFailure=function(a){b.onFailure({invocationContext:b.invocationContext,errorCode:a,errorMessage:j(a)})});b.timeout&&(c.timeOut=new w(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:h.SUBSCRIBE_TIMEOUT.code,errorMessage:j(h.SUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};x.prototype.unsubscribe=function(a,b){__p&&__p();this._trace("Client.unsubscribe",a,b);if(!this.connected)throw new Error(j(h.INVALID_STATE,["not connected"]));var c=new m(e.UNSUBSCRIBE);c.topics=[a];b.onSuccess&&(c.callback=function(){b.onSuccess({invocationContext:b.invocationContext})});b.timeout&&(c.timeOut=new w(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:h.UNSUBSCRIBE_TIMEOUT.code,errorMessage:j(h.UNSUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};x.prototype.send=function(a){this._trace("Client.send",a);wireMessage=new m(e.PUBLISH);wireMessage.payloadMessage=a;a.qos>0?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage,null));this._schedule_message(wireMessage);return wireMessage.messageIdentifier};x.prototype.disconnect=function(){this._trace("Client.disconnect");this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);if(!this.socket)throw new Error(j(h.INVALID_STATE,["not connecting or connected"]));wireMessage=new m(e.DISCONNECT);this._notify_msg_sent[wireMessage]=g(this._disconnected,this);this._schedule_message(wireMessage)};x.prototype.getTraceLog=function(){if(this._traceBuffer!==null){this._trace("Client.getTraceLog",new Date());this._trace("Client.getTraceLog in flight messages",this._sentMessages.length);for(var a in this._sentMessages)this._trace("_sentMessages ",a,this._sentMessages[a]);for(var a in this._receivedMessages)this._trace("_receivedMessages ",a,this._receivedMessages[a]);return this._traceBuffer}};x.prototype.startTrace=function(){this._traceBuffer===null&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date(),d)};x.prototype.stopTrace=function(){delete this._traceBuffer};x.prototype._doConnect=function(a){__p&&__p();if(this.connectOptions.useSSL){var b=a.split(":");b[0]="wss";a=b.join(":")}this._wsuri=a;this.connected=!1;this.connectOptions.ignoreSubProtocol?this.socket=new WebSocket(a):this.connectOptions.mqttVersion<4?this.socket=new WebSocket(a,["mqttv3.1"]):this.socket=new WebSocket(a,["mqtt"]);this.socket.binaryType="arraybuffer";this.socket.onopen=g(this._on_socket_open,this);this.socket.onmessage=g(this._on_socket_message,this);this.socket.onerror=g(this._on_socket_error,this);this.socket.onclose=g(this._on_socket_close,this);this.sendPinger=new v(this,window,this.connectOptions.keepAliveInterval);this.receivePinger=new v(this,window,this.connectOptions.keepAliveInterval);this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._connectTimeout=new w(this,window,this.connectOptions.timeout,this._onConnectTimeout,[])};x.prototype._schedule_message=function(a){this._msg_queue.push(a),this.connected&&this._process_queue()};x.prototype.store=function(a,b){};x.prototype.restore=function(a){};x.prototype._process_queue=function(){var a=null,b=this._msg_queue.reverse();while(a=b.pop())this._socket_send(a),this._notify_msg_sent[a]&&(this._notify_msg_sent[a](),delete this._notify_msg_sent[a])};x.prototype._requires_ack=function(a){var b=Object.keys(this._sentMessages).length;if(b>this.maxMessageIdentifier)throw Error("Too many messages:"+b);while(this._sentMessages[this._message_identifier]!==void 0)this._message_identifier++;a.messageIdentifier=this._message_identifier;this._sentMessages[a.messageIdentifier]=a;a.type===e.PUBLISH&&this.store("Sent:",a);this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)};x.prototype._on_socket_open=function(){var a=new m(e.CONNECT,this.connectOptions);a.clientId=this.clientId;this._socket_send(a);this.connected=!0;this.connectOptions.onSocketOpen&&this.connectOptions.onSocketOpen()};x.prototype._on_socket_message=function(a){this._trace("Client._on_socket_message",a.data);a=this._deframeMessages(a.data);for(var b=0;b<a.length;b+=1)this._handleMessage(a[b])};x.prototype._deframeMessages=function(a){__p&&__p();a=new Uint8Array(a);var b=[];if(this.receiveBuffer){var c=new Uint8Array(this.receiveBuffer.length+a.length);c.set(this.receiveBuffer);c.set(a,this.receiveBuffer.length);a=c;delete this.receiveBuffer}try{c=0;while(c<a.length){var d=n(a,c),e=d[0];c=d[1];if(e!==null)b.push(e);else break}c<a.length&&(this.receiveBuffer=a.subarray(c))}catch(a){d=Object.prototype.hasOwnProperty.call(a,"stack")=="undefined"?a.stack.toString():"No Error Stack Available";this._disconnected(h.INTERNAL_ERROR.code,j(h.INTERNAL_ERROR,[a.message,d]));return}return b};x.prototype._handleMessage=function(a){__p&&__p();this._trace("Client._handleMessage",a);try{switch(a.type){case e.CONNACK:this._connectTimeout.cancel();this._reconnectTimeout&&this._reconnectTimeout.cancel();this.connectOptions.cleanSession&&(this._sentMessages={},this._receivedMessages={});if(a.returnCode===0)this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);else{this.connected=!1;this._disconnected(h.CONNACK_RETURNCODE.code,j(h.CONNACK_RETURNCODE,[a.returnCode,i[a.returnCode]]),a.returnCode);break}var b=[];for(var c in this._sentMessages)Object.prototype.hasOwnProperty.call(this._sentMessages,c)&&b.push(this._sentMessages[c]);if(this._buffered_msg_queue.length>0){var d=null,f=this._buffered_msg_queue.reverse();while(d=f.pop())b.push(d),this.onMessageDelivered&&(this._notify_msg_sent[d]=this.onMessageDelivered(d.payloadMessage,null))}var b=b.sort(function(a,b){return a.sequence-b.sequence});for(var f=0,d=b.length;f<d;f++){var g=b[f];if(g.type==e.PUBLISH&&g.pubRecReceived){var k=new m(e.PUBREL,{messageIdentifier:g.messageIdentifier});this._schedule_message(k)}else this._schedule_message(g)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});f=!1;this._reconnecting&&(f=!0,this._reconnectInterval=1,this._reconnecting=!1);this._connected(f,this._wsuri);this._process_queue();break;case e.PUBLISH:this._receivePublish(a);break;case e.PUBACK:d=a.messageIdentifier;var g=this._sentMessages[d];g&&(delete this._sentMessages[d],this.onMessageDelivered&&this.onMessageDelivered(g.payloadMessage,d));break;case e.PUBREC:var g=this._sentMessages[a.messageIdentifier];if(g){g.pubRecReceived=!0;var k=new m(e.PUBREL,{messageIdentifier:a.messageIdentifier});this.store("Sent:",g);this._schedule_message(k)}break;case e.PUBREL:b=this._receivedMessages[a.messageIdentifier];b&&(this._receiveMessage(b),delete this._receivedMessages[a.messageIdentifier]);f=new m(e.PUBCOMP,{messageIdentifier:a.messageIdentifier});this._schedule_message(f);break;case e.PUBCOMP:d=a.messageIdentifier;var g=this._sentMessages[d];delete this._sentMessages[d];this.onMessageDelivered&&this.onMessageDelivered(g.payloadMessage,d);break;case e.SUBACK:var g=this._sentMessages[a.messageIdentifier];g&&(g.timeOut&&g.timeOut.cancel(),a.returnCode[0]===128?g.onFailure&&g.onFailure(a.returnCode):g.onSuccess&&g.onSuccess(a.returnCode),delete this._sentMessages[a.messageIdentifier]);break;case e.UNSUBACK:var g=this._sentMessages[a.messageIdentifier];g&&(g.timeOut&&g.timeOut.cancel(),g.callback&&g.callback(),delete this._sentMessages[a.messageIdentifier]);break;case e.PINGRESP:this.sendPinger.reset();break;case e.DISCONNECT:this._disconnected(h.INVALID_MQTT_MESSAGE_TYPE.code,j(h.INVALID_MQTT_MESSAGE_TYPE,[a.type]));break;default:this._disconnected(h.INVALID_MQTT_MESSAGE_TYPE.code,j(h.INVALID_MQTT_MESSAGE_TYPE,[a.type]))}}catch(a){k=Object.prototype.hasOwnProperty.call(a,"stack")=="undefined"?a.stack.toString():"No Error Stack Available";this._disconnected(h.INTERNAL_ERROR.code,j(h.INTERNAL_ERROR,[a.message,k]));return}};x.prototype._on_socket_error=function(a){this.connectOptions.ignoreSocketError||(this._reconnecting||this._disconnected(h.SOCKET_ERROR.code,j(h.SOCKET_ERROR,[a.data])),this.connectOptions.onSocketError&&this.connectOptions.onSocketError(a)),this._hasSocketError=!0};x.prototype._on_socket_close=function(a){this._reconnecting||this._disconnected(h.SOCKET_CLOSE.code,j(h.SOCKET_CLOSE,a!=null?[a.code,a.reason,a.wasClean]:[]))};x.prototype._socket_send=function(a){if(a.type==1){var b=this._traceMask(a,"password");this._trace("Client._socket_send",b)}else this._trace("Client._socket_send",a);this.socket.send(a.encode());this.sendPinger.reset()};x.prototype._receivePublish=function(a){__p&&__p();switch(a.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(a);break;case 1:var b=new m(e.PUBACK,{messageIdentifier:a.messageIdentifier});this._schedule_message(b);this._receiveMessage(a);break;case 2:this._receivedMessages[a.messageIdentifier]=a;this.store("Received:",a);b=new m(e.PUBREC,{messageIdentifier:a.messageIdentifier});this._schedule_message(b);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}};x.prototype._receiveMessage=function(a){this.onMessageArrived&&this.onMessageArrived(a.payloadMessage)};x.prototype._connected=function(a,b){this.onConnected&&this.onConnected(a,b)};x.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=this._reconnectInterval*2),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))};x.prototype._onConnectTimeout=function(){this._disconnected(h.CONNECT_TIMEOUT.code,j(h.CONNECT_TIMEOUT,[this.socket.readyState,this._hasSocketError]))};x.prototype._disconnected=function(a,b,c){__p&&__p();this._trace("Client._disconnected",a,b);if(a!==void 0&&this._reconnecting){this._reconnectTimeout=new w(this,window,this._reconnectInterval,this._reconnect);return}this.sendPinger.cancel();this.receivePinger.cancel();this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._msg_queue=[];this._buffered_msg_queue=[];this._notify_msg_sent={};this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket.readyState===1&&this.socket.close(),delete this.socket);if(this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else{a===void 0&&(a=h.OK.code,b=j(h.OK));if(this.connected){this.connected=!1;this.onConnectionLost&&this.onConnectionLost({errorCode:a,errorMessage:b,reconnect:this.connectOptions.reconnect,uri:this._wsuri});if(a!==h.OK.code&&this.connectOptions.reconnect){this._reconnectInterval=1;this._reconnect();return}}else this.connectOptions.mqttVersion===4&&this.connectOptions.mqttVersionExplicit===!1?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:a,errorMessage:b,connack:c})}};x.prototype._trace=function(){if(this.traceFunction){for(var a in arguments)typeof arguments[a]!=="undefined"&&arguments.splice(a,1,JSON.stringify(arguments[a]));var b=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:b})}if(this._traceBuffer!==null)for(var a=0,c=arguments.length;a<c;a++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),a===0?this._traceBuffer.push(arguments[a]):typeof arguments[a]==="undefined"?this._traceBuffer.push(arguments[a]):this._traceBuffer.push("  "+JSON.stringify(arguments[a]))};x.prototype._traceMask=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(d==b?c[d]="******":c[d]=a[d]);return c};var y=function(a,b,c,d){__p&&__p();var e;if(typeof a!=="string")throw new Error(j(h.INVALID_TYPE,[typeof a,"host"]));if(arguments.length==2){d=b;e=a;var g=e.match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(g)a=g[4]||g[2],b=parseInt(g[7]),c=g[8];else throw new Error(j(h.INVALID_ARGUMENT,[a,"host"]))}else{arguments.length==3&&(d=c,c="/mqtt");if(typeof b!=="number"||b<0)throw new Error(j(h.INVALID_TYPE,[typeof b,"port"]));if(typeof c!=="string")throw new Error(j(h.INVALID_TYPE,[typeof c,"path"]));var i=a.indexOf(":")!==-1&&a.slice(0,1)!=="["&&a.slice(-1)!=="]";e="ws://"+(i?"["+a+"]":a)+":"+b+c}var k=0;for(var l=0;l<d.length;l++){var m=d.charCodeAt(l);55296<=m&&m<=56319&&l++;k++}if(typeof d!=="string"||k>65535)throw new Error(j(h.INVALID_ARGUMENT,[d,"clientId"]));var n=new x(e,a,b,c,d);this._getHost=function(){return a};this._setHost=function(){throw new Error(j(h.UNSUPPORTED_OPERATION))};this._getPort=function(){return b};this._setPort=function(){throw new Error(j(h.UNSUPPORTED_OPERATION))};this._getPath=function(){return c};this._setPath=function(){throw new Error(j(h.UNSUPPORTED_OPERATION))};this._getURI=function(){return e};this._setURI=function(){throw new Error(j(h.UNSUPPORTED_OPERATION))};this._getClientId=function(){return n.clientId};this._setClientId=function(){throw new Error(j(h.UNSUPPORTED_OPERATION))};this._getOnConnected=function(){return n.onConnected};this._setOnConnected=function(a){if(typeof a==="function")n.onConnected=a;else throw new Error(j(h.INVALID_TYPE,[typeof a,"onConnected"]))};this._getDisconnectedPublishing=function(){return n.disconnectedPublishing};this._setDisconnectedPublishing=function(a){n.disconnectedPublishing=a};this._getDisconnectedBufferSize=function(){return n.disconnectedBufferSize};this._setDisconnectedBufferSize=function(a){n.disconnectedBufferSize=a};this._getConnectOptions=function(){return n.connectOptions};this._getOnConnectionLost=function(){return n.onConnectionLost};this._setOnConnectionLost=function(a){if(typeof a==="function")n.onConnectionLost=a;else throw new Error(j(h.INVALID_TYPE,[typeof a,"onConnectionLost"]))};this._getOnMessageDelivered=function(){return n.onMessageDelivered};this._setOnMessageDelivered=function(a){if(typeof a==="function")n.onMessageDelivered=a;else throw new Error(j(h.INVALID_TYPE,[typeof a,"onMessageDelivered"]))};this._getOnMessageArrived=function(){return n.onMessageArrived};this._setOnMessageArrived=function(a){if(typeof a==="function")n.onMessageArrived=a;else throw new Error(j(h.INVALID_TYPE,[typeof a,"onMessageArrived"]))};this._getTrace=function(){return n.traceFunction};this._setTrace=function(a){if(typeof a==="function")n.traceFunction=a;else throw new Error(j(h.INVALID_TYPE,[typeof a,"onTrace"]))};this.connect=function(d){__p&&__p();d=d||{};f(d,{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",ignoreSocketError:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",onSocketOpen:"function",onSocketError:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",ignoreSubProtocol:"boolean",uris:"object"});d.keepAliveInterval===void 0&&(d.keepAliveInterval=60);if(d.mqttVersion>4||d.mqttVersion<3)throw new Error(j(h.INVALID_ARGUMENT,[d.mqttVersion,"connectOptions.mqttVersion"]));d.mqttVersion===void 0?(d.mqttVersionExplicit=!1,d.mqttVersion=4):d.mqttVersionExplicit=!0;if(d.password!==void 0&&d.userName===void 0)throw new Error(j(h.INVALID_ARGUMENT,[d.password,"connectOptions.password"]));if(d.willMessage){if(!(d.willMessage instanceof z))throw new Error(j(h.INVALID_TYPE,[d.willMessage,"connectOptions.willMessage"]));d.willMessage.stringPayload=null;if(typeof d.willMessage.destinationName==="undefined")throw new Error(j(h.INVALID_TYPE,[typeof d.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}typeof d.cleanSession==="undefined"&&(d.cleanSession=!0);if(d.hosts){if(!(d.hosts instanceof Array))throw new Error(j(h.INVALID_ARGUMENT,[d.hosts,"connectOptions.hosts"]));if(d.hosts.length<1)throw new Error(j(h.INVALID_ARGUMENT,[d.hosts,"connectOptions.hosts"]));var g=!1;for(var b=0;b<d.hosts.length;b++){if(typeof d.hosts[b]!=="string")throw new Error(j(h.INVALID_TYPE,[typeof d.hosts[b],"connectOptions.hosts["+b+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(d.hosts[b])){if(b===0)g=!0;else if(!g)throw new Error(j(h.INVALID_ARGUMENT,[d.hosts[b],"connectOptions.hosts["+b+"]"]))}else if(g)throw new Error(j(h.INVALID_ARGUMENT,[d.hosts[b],"connectOptions.hosts["+b+"]"]))}if(!g){if(!d.ports)throw new Error(j(h.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));if(!(d.ports instanceof Array))throw new Error(j(h.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));if(d.hosts.length!==d.ports.length)throw new Error(j(h.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));d.uris=[];for(var b=0;b<d.hosts.length;b++){if(typeof d.ports[b]!=="number"||d.ports[b]<0)throw new Error(j(h.INVALID_TYPE,[typeof d.ports[b],"connectOptions.ports["+b+"]"]));g=d.hosts[b];var a=d.ports[b],i=g.indexOf(":")!==-1;e="ws://"+(i?"["+g+"]":g)+":"+a+c;d.uris.push(e)}}else d.uris=d.hosts}n.connect(d)};this.subscribe=function(a,b){if(typeof a!=="string")throw new Error("Invalid argument:"+a);b=b||{};f(b,{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"});if(b.timeout&&!b.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(typeof b.qos!=="undefined"&&!(b.qos===0||b.qos===1||b.qos===2))throw new Error(j(h.INVALID_ARGUMENT,[b.qos,"subscribeOptions.qos"]));n.subscribe(a,b)};this.unsubscribe=function(a,b){if(typeof a!=="string")throw new Error("Invalid argument:"+a);b=b||{};f(b,{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"});if(b.timeout&&!b.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");n.unsubscribe(a,b)};this.send=function(a,b,c,d){__p&&__p();var e;if(arguments.length===0)throw new Error("Invalid argument.length");else if(arguments.length==1){if(!(a instanceof z)&&typeof a!=="string")throw new Error("Invalid argument:"+typeof a);e=a;if(typeof e.destinationName==="undefined")throw new Error(j(h.INVALID_ARGUMENT,[e.destinationName,"Message.destinationName"]));n.send(e)}else e=new z(b),e.destinationName=a,arguments.length>=3&&(e.qos=c),arguments.length>=4&&(e.retained=d),n.send(e)};this.publish=function(a,b,c,d){__p&&__p();var e;if(arguments.length===0)throw new Error("Invalid argument.length");else if(arguments.length==1){if(!(a instanceof z)&&typeof a!=="string")throw new Error("Invalid argument:"+typeof a);e=a;if(typeof e.destinationName==="undefined")throw new Error(j(h.INVALID_ARGUMENT,[e.destinationName,"Message.destinationName"]));return n.send(e)}else{e=new z(b);e.destinationName=a;arguments.length>=3&&(e.qos=c);arguments.length>=4&&(e.retained=d);return n.send(e)}};this.disconnect=function(){n.disconnect()};this.getTraceLog=function(){return n.getTraceLog()};this.startTrace=function(){n.startTrace()};this.stopTrace=function(){n.stopTrace()};this.isConnected=function(){return n.connected}};Object.defineProperties(y.prototype,{host:{get:function(){return this._getHost()},set:function(a){this._setHost(a)}},port:{get:function(){return this._getPort()},set:function(a){this._setPort(a)}},path:{get:function(){return this._getPath()},set:function(a){this._setPath(a)}},clientId:{get:function(){return this._getClientId()},set:function(a){this._setClientId(a)}},onConnected:{get:function(){return this._getOnConnected()},set:function(a){this._setOnConnected(a)}},disconnectedPublishing:{get:function(){return this._getDisconnectedPublishing()},set:function(a){this._setDisconnectedPublishing(a)}},disconnectedBufferSize:{get:function(){return this._getDisconnectedBufferSize()},set:function(a){this._setDisconnectedBufferSize(a)}},onConnectionLost:{get:function(){return this._getOnConnectionLost()},set:function(a){this._setOnConnectionLost(a)}},connectOptions:{get:function(){return this._getConnectOptions()}},onMessageDelivered:{get:function(){return this._getOnMessageDelivered()},set:function(a){this._setOnMessageDelivered(a)}},onMessageArrived:{get:function(){return this._getOnMessageArrived()},set:function(a){this._setOnMessageArrived(a)}},trace:{get:function(){return this._getTrace()},set:function(a){this._setTrace(a)}}});var z=function(a){__p&&__p();var b;if(typeof a==="string"||a instanceof ArrayBuffer||a instanceof Int8Array||a instanceof Uint8Array||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)b=a;else throw j(h.INVALID_ARGUMENT,[a,"newPayload"]);this._getPayloadString=function(){if(typeof b==="string")return b;else return u(b,0,b.length)};this._getPayloadBytes=function(){if(typeof b==="string"){var a=new ArrayBuffer(s(b));a=new Uint8Array(a);t(b,a,0);return a}else return b};var c;this._getDestinationName=function(){return c};this._setDestinationName=function(a){if(typeof a==="string")c=a;else throw new Error(j(h.INVALID_ARGUMENT,[a,"newDestinationName"]))};var d=0;this._getQos=function(){return d};this._setQos=function(a){if(a===0||a===1||a===2)d=a;else throw new Error("Invalid argument:"+a)};var e=!1;this._getRetained=function(){return e};this._setRetained=function(a){if(typeof a==="boolean")e=a;else throw new Error(j(h.INVALID_ARGUMENT,[a,"newRetained"]))};var f=!1;this._getDuplicate=function(){return f};this._setDuplicate=function(a){f=a}};Object.defineProperties(z.prototype,{payloadString:{get:function(){return this._getPayloadString()}},payloadBytes:{get:function(){return this._getPayloadBytes()}},destinationName:{get:function(){return this._getDestinationName()},set:function(a){this._setDestinationName(a)}},topic:{get:function(){return this._getDestinationName()},set:function(a){this._setDestinationName(a)}},qos:{get:function(){return this._getQos()},set:function(a){this._setQos(a)}},retained:{get:function(){return this._getRetained()},set:function(a){this._setRetained(a)}},duplicate:{get:function(){return this._getDuplicate()},set:function(a){this._setDuplicate(a)}}});var A=function(a,b){a=new m(e.CONNECT,a);a.clientId=b;return a},B=function(a,b){b=new m(b);b.topics=[a];b.requestedQos=[1];b.messageIdentifier=this.messageSequenceId++;return b},C=function(a){return B(a,e.SUBSCRIBE)},D=function(a){return B(a,e.UNSUBSCRIBE)},E=function(a,b,c){var d;d=new z(b);d.destinationName=a;arguments.length>=3&&(d.qos=c);var f;f=new m(e.PUBLISH);f.payloadMessage=d;f.messageIdentifier=this.messageSequenceId++;return f},F=function(a){__p&&__p();a=new Uint8Array(a);var b=[],c=0;while(c<a.length){var d=n(a,c),e=d[0];c=d[1];if(e!==null)b.push(e);else break}return b};return{TESTING_CLIENT_IMPL:x,Client:y,Message:z,Encoder:{encodeConnect:A,encodePublish:E,encodeSubscribe:C,encodeUnsubscribe:D,messageSequenceId:1},Decoder:{decode:F}}}(window);return c})}),null);
__d("MqttWsClient",["MqttLogger","MqttTypes","gkx","paho-mqtt"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MqttTypes").ConnectFailure,h=b("MqttTypes").MqttError,i=function(a){};function a(a){this.$2=a,this.$3=b("MqttLogger").getInstance(),this.$1=new(b("paho-mqtt").Client)(this.$2,"mqttwsclient"),this.$4={}}a.prototype.connect=function(a){__p&&__p();this.$4=a,this.$1.onConnectionLost=function(b){a.onConnectionLost(new h(b.errorCode,b.errorMessage))},this.$1.onMessageArrived=function(b){try{var c=b.destinationName;this.$3.bumpCounter("message_arrived.ws."+c);a.onMessageArrived(c,b.payloadString)}catch(a){this.$3.logError(a,"Unable to parse message");this.$3.bumpCounter((c="error_processing_message."+b.destinationName)!=null?c:"null")}}.bind(this),this.$1.onMessageDelivered=function(b,c){return a.onMessageDelivered(b,c)},this.$1.connect({userName:a.userName,mqttVersion:a.mqttVersion,keepAliveInterval:a.keepAliveInterval,onFailure:function(b){if(b!=null){var c=new h(b.errorCode,b.errorMessage);c=new g(c,b.connack)}else c=new g(new h(1,"No ResponseObject"),-1);a.onConnectFailure(c)},onSuccess:function(){return a.onConnectSuccess()},ignoreSubProtocol:a.ignoreSubProtocol,onSocketOpen:function(){return a.onConnection()},onSocketError:function(b){return a.onConnectionError(b)},ignoreSocketError:b("gkx")("811275")})};a.prototype.unsubscribe=function(a){this.$1.unsubscribe(a)};a.prototype.subscribe=function(a){this.$1.subscribe(a,{})};a.prototype.publish=function(a,b,c){return this.$1.publish(a,b,c,!1)};a.prototype.isConnected=function(){return this.$1.isConnected()};a.prototype.disconnect=function(){this.$4!=null&&(this.$4.onConnectSuccess=i,this.$4.onConnectFailure=i,this.$4.onConnection=i,this.$4.onConnectionError=i,this.$4.onMessageArrived=i,this.$4.onMessageDelivered=i),this.$1.connectOptions!=null&&(this.$1.connectOptions.onConnectSuccess=i,this.$1.connectOptions.onConnectFailure=i,this.$1.connectOptions.onConnection=i,this.$1.connectOptions.onConnectionError=i,this.$1.connectOptions.onMessageArrived=i,this.$1.connectOptions.onMessageDelivered=i),this.isConnected()&&this.$1.disconnect()};e.exports=a}),null);
__d("MqttConnection",["Promise","MqttLogger","MqttTypes","MqttWsClient","Random","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("MqttTypes").ConnectFailure;b("MqttTypes").MqttError;var g=10,h="publish",i="subscribe",j="unsubscribe",k=function(a){},l=18e4,m=5*1e3,n=15,o=21,p=new Set(["AMQJS0007E","AMQJS0008I"]);function q(a){return a!=null?a.split(" ")[0]:""}function a(){__p&&__p();this.$6=!1;this.$9=b("MqttLogger").getInstance();this.$10="Disconnected";this.$15=new Set();this.$17=[];this.$18=new Map();this.$19=0;this.$20=0;this.$16=0;this.$12=0;this.$13=0;this.$6=!1;this.$4="";this.$11="";this.$14=0;this.$8="";this.$7=0;this.$5=null;var a=function(){};this.$1=a;this.$2=a;this.$3=a}a.prototype.run=function(a){__p&&__p();var b=a.onStateChange,c=a.onJSError,d=a.onMessageReceived,e=a.endpoint,f=a.deviceId,g=a.userFbid,h=a.appId,i=a.subscribedTopics;a=a.capabilities;if(this.$6){this.$9.debugTrace("run","Run called while in running state.");return}this.$1=b;this.$3=d;this.$4=e;this.$8=f;this.$11=g;this.$14=h;this.$6=!0;this.$12=0;this.$16=a;this.$2=c||k;i&&i.forEach(function(a){return this.$15.add(a)}.bind(this));this.$21()};a.prototype.shutdown=function(){this.$22(),this.$6=!1,this.$9.debugTrace("shutdown","Shutdown")};a.prototype.subscribe=function(a){this.$15.add(a);if(!this.$23(i))return b("gkx")("676932");try{this.$5!=null&&this.$5.subscribe(a)}catch(b){this.$9.logError(b,"Exception subscribing"),this.$9.bumpCounter("subscribe_exception."+a)}this.$9.debugTrace("subscribe","Subscribing to "+a);return!0};a.prototype.publish=function(a,c,d){__p&&__p();var e={resolve:function(){},reject:function(a){}},f=new(b("Promise"))(function(a,b){e.resolve=a,e.reject=b}),g=this.$23(h),i="unknown";if(!g)this.$17.push({topic:a,payload:c,qos:d,ack:e}),i="buffered";else if(this.$5!=null){try{c=this.$5.publish(a,c,d);c!=null?this.$18.set(c,e):e.resolve()}catch(b){this.$9.logError(b,"Exception publishing"),this.$9.bumpCounter("publish_exception."+a),e.reject(b)}i="published"}this.$9.logPublish({sessionID:this.$7,topic:a,connectionStatus:g,publishStatus:i});return f};a.prototype.unsubscribe=function(a){this.$15["delete"](a);if(!this.$23(j))return!1;try{this.$5!=null&&this.$5.unsubscribe(a)}catch(b){this.$9.logError(b,"Exception unsubscribing"),this.$9.bumpCounter("unsubscribe_exception."+a)}this.$9.debugTrace("unsubscribe","Unsubscribing to "+a);return!0};a.prototype.isRunning=function(){return this.$6};a.prototype.$22=function(){this.$6&&this.$5!=null&&(this.$24("Disconnected"),this.$5!=null&&this.$5.disconnect(),this.$5=null)};a.prototype.$24=function(a){a!==this.$10&&(this.$10=a,this.$1(a))};a.prototype.$25=function(){return new(b("MqttWsClient"))(this.$4)};a.prototype.$21=function(){__p&&__p();if(!this.$6)return;this.$24("Connecting");var a=Date.now(),b=Array.from(this.$15);try{this.$5=this.$25();if(this.$5==null)throw new Error("Invalid State: Unable to create client");this.$7=this.$26();var c=Date.now(),d={u:this.$11,s:this.$7,cp:1,ecp:this.$16,chat_on:!0,fg:1,d:this.$27(),ct:"websocket",mqtt_sid:"",aid:this.$14,st:b,dc:""};this.$5!=null&&this.$5.connect({userName:JSON.stringify(d),mqttVersion:3,keepAliveInterval:g,ignoreSubProtocol:!0,onConnectFailure:function(a){return this.$28(a,c,b)}.bind(this),onConnectSuccess:function(){return this.$29(c,b)}.bind(this),onConnection:function(){return this.$30()}.bind(this),onConnectionError:function(a){return this.$31(a)}.bind(this),onConnectionLost:function(a){return this.$32(a)}.bind(this),onMessageArrived:function(a,b){return this.$33(a,b)}.bind(this),onMessageDelivered:function(a,b){return this.$34(a,b)}.bind(this)})}catch(c){this.$9.bumpCounter("js_error_in_init_exception"),this.$24("Disconnected"),this.$35(!1,a,b,14,c.message),c&&this.$9.logErrorWarn(c,"js error"),this.$36(c,"client_init")}};a.prototype.$30=function(){this.$17.forEach(function(a){if(this.$5){var b=this.$5.publish(a.topic,a.payload,a.qos);b!=null?this.$18.set(b,a.ack):a.ack.resolve()}}.bind(this)),this.$17=[]};a.prototype.$37=function(a){__p&&__p();a===void 0&&(a=null);if(!this.$6)return;this.$22();this.$38();this.$7=-1;this.$13=0;a=(a=a)!=null?a:Math.pow(2,Math.min(this.$12,6))*(1e3+b("Random").random()*200);this.$9.debugTrace("_scheduleReconnect","Reconnect in "+a+" ms");b("setTimeoutAcrossTransitions")(function(){this.$21()}.bind(this),a);this.$12+=1};a.prototype.$38=function(){if(!b("gkx")("807517"))return;var a=Date.now()-this.$13,c=this.$13!==0&&a>m,d=this.$12>n;(c||d)&&(this.$12=0);this.$13!==0&&a<=m&&this.$9.bumpCounter("short_lived_session");d&&this.$9.bumpCounter("connection_attempt_limit")};a.prototype.$26=function(){return Math.floor(b("Random").random()*Number.MAX_SAFE_INTEGER)};a.prototype.$27=function(){return this.$8};a.prototype.$23=function(a){__p&&__p();if(!this.$6){this.$9.debugTrace("_ensureConnected","Mqtt connection: "+a+" called when not running");return!1}if(this.$5==null){this.$9.debugTrace("_ensureConnected","Mqtt connection: "+a+" called when not connected, ignored");return!1}var b=this.$5.isConnected();if(!b){this.$9.debugTrace("_ensureConnected","Mqtt connection: "+a+" called with client not connected");return!1}return!0};a.prototype.$35=function(a,b,c,d,e){a===!0?this.$20++:this.$19++,this.$9.logConnect({sessionID:this.$7,connectionStatus:a,duration:Date.now()-b,hostname:this.$4,attemptNumber:this.$12,failTotal:this.$19,successTotal:this.$20,subscribedTopics:c,errorCode:d,errorMessage:e})};a.prototype.$28=function(a,b,c){__p&&__p();var d=a.mqttError,e=d.errorMessage;this.$9.debugTrace("connect","Connect failed "+e);this.$35(!1,b,c,d.errorCode,e);if(a.connAck!=null){this.$9.bumpCounter("connect_failure."+a.connAck);if(a.connAck===o){this.$37(l);return}}p.has(q(e))&&this.$36(new Error(e),"connect_failure");this.$37()};a.prototype.$29=function(a,c){this.$9.debugTrace("connect","Connect success"),this.$35(!0,a,c),this.$24("Connected"),b("gkx")("807517")||(this.$12=0),this.$13=Date.now(),this.$17.length>0&&this.$9.bumpCounter("publish_buffer_not_empty")};a.prototype.$32=function(a){a.errorCode&&this.$9.logDisconnect({sessionID:this.$7,errorCode:a.errorCode,errorMessage:a.errorMessage,duration:Date.now()-this.$13}),this.$37()};a.prototype.$31=function(a){b("gkx")("676934")?this.$9.bumpCounter("websocket_error.error"):this.$36(a,"websocket_error")};a.prototype.$33=function(a,b){this.$9.debugTrace("onMessageArrived","Message received on "+a);this.$9.bumpCounter("message_arrived."+a);try{this.$3(a,b)}catch(b){this.$9.logError(b,"Listener threw error"),this.$9.bumpCounter("listener_error."+a)}};a.prototype.$34=function(a,b){a=b!=null?b:"null";this.$9.debugTrace("onMessageDelivered","Delivered Message {ID: "+a+"}");if(b==null)return;a=this.$18.get(b);if(a==null)return;this.$18["delete"](b);a.resolve()};a.prototype.$36=function(a,b){try{this.$9.bumpCounter("js_error_in_init");this.$9.bumpCounter(b+".error");var c=a?a.message:"error";this.$9.debugTrace("onError",b+": "+c);this.$2(a)}catch(a){this.$9.bumpCounter("js_error_in_error_logging"),this.$9.logError(a,"JS error while trying to log previous error")}};e.exports=a}),null);
__d("MqttChannel",["ChannelClientID","MqttConnection","MqttLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.endpoint,d=a.userFbid,e=a.appId,f=a.initialSubscribedTopics;a=a.capabilities;this.$8=b("MqttLogger").getInstance();this.$8.setAppId(e);this.$9=e;this.$10=d;this.$1=c;this.$3="Disconnected";this.$2=[];this.$4=new Map();this.$7=new(b("MqttConnection"))();this.$5=b("ChannelClientID").getID();this.$6=new Set();this.$11(f,a)}a.prototype.$11=function(a,b){if(this.$7.isRunning()){this.$12("run","Connection started calling run again");return}this.$7.run({onStateChange:function(a){this.$13(a)}.bind(this),onJSError:function(a){this.$14(a)}.bind(this),onMessageReceived:function(a,b){this.$15(a,b)}.bind(this),deviceId:this.$5,endpoint:this.$1,userFbid:this.$10,appId:this.$9,subscribedTopics:a,capabilities:b})};a.prototype.shutdown=function(){this.$7&&this.$7.shutdown()};a.prototype.publish=function(a,b){return this.$7.publish(a,b,1)};a.prototype.subscribe=function(a,b){this.$7.subscribe(a)||this.$6.add(a);var c=this.$4.get(a);!c?(c=[b],this.$4.set(a,c)):c.push(b)};a.prototype.subscribeChannelEvents=function(a){this.$2.push(a)};a.prototype.unsubscribe=function(a){this.$7.unsubscribe(a)||this.$6["delete"](a),this.$4["delete"](a)};a.prototype.getDeviceId=function(){return this.$5};a.prototype.getConnectionState=function(){return this.$3};a.prototype.getEndpoint=function(){return this.$1};a.prototype.testOnlyResetState=function(){this.$1="",this.$2=[],this.$3="Disconnected",this.$4=new Map(),this.$8=b("MqttLogger").getInstance(),this.$7=new(b("MqttConnection"))(),this.$5=b("ChannelClientID").getID(),this.$6=new Set()};a.prototype.testOnlyMessageReceived=function(a,b){this.$15(a,b)};a.prototype.$15=function(a,b){__p&&__p();var c=this.$4.get(a);if(!c)this.$8.debugTrace("_onMessageReceived",a+" being dropped, no listeners");else for(var a=c,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;try{e(b)}catch(a){this.$8.logError(a,"Listener exception"),this.$8.bumpCounter("listener_error")}}};a.prototype.$14=function(a){__p&&__p();for(var b=this.$2,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onJSError&&e.onJSError(a)}};a.prototype.$13=function(a){this.$3!=="Connected"&&a==="Connected"&&(this.$6.forEach(function(a){return this.$7.subscribe(a)}.bind(this)),this.$6.clear()),this.$3=a,this.$12("_changeState","Connection state = "+a),this.$16(a)};a.prototype.$16=function(a){__p&&__p();for(var b=this.$2,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onMQTTStateChanged(a)}};a.prototype.$12=function(a,b){this.$8.debugTrace(a,"Mqtt channel: "+b)};e.exports=a}),null);
__d("FBMqttChannel",["MqttChannel","MqttWebConfig"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("MqttChannel"))({endpoint:b("MqttWebConfig").endpoint,userFbid:b("MqttWebConfig").fbid,appId:b("MqttWebConfig").appID,initialSubscribedTopics:b("MqttWebConfig").subscribedTopics,capabilities:b("MqttWebConfig").capabilities})}),null);
__d("BladeRunnerSocket",["BladeRunnerEventHandler","BladeRunnerLogger","BladeRunnerTypes","BladeRunnerTypesInternal","FBMqttChannel","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="Connected",h="Disconnected",i=32*1024,j="/br_sr",k="/sr_res",l=null;function m(a){this.$1=[],this.$2=0,this.$3=null,this.$4=0,this.$5=new Map(),this.$6=a!=null?a:b("FBMqttChannel"),b("BladeRunnerLogger").setClientSessionId(b("uuid")()),this.$7()}m.get=function(){l==null&&(l=new m(b("FBMqttChannel")));return l};m.prototype.sendNewStreamRequest=function(a,c){c=new(b("BladeRunnerEventHandler"))(a,c,this);var d=a.getRequest();this.$5.set(d.streamId,c);this.getStreamCount()<=m.maxStreamCount?this.$8(d):(b("BladeRunnerLogger").bumpCounter("socket_request_throttled_max_streams"),b("BladeRunnerLogger").warn("Maximum stream count reached, will not send request: "+JSON.stringify(a.getRequest().getHeaders())),this.$9(c,d.streamId))};m.prototype.sendRetryStreamRequest=function(a){this.$8(a.getRequest())};m.prototype.sendCancel=function(a){b("BladeRunnerLogger").bumpCounter("socket_send_cancel");var c=new(b("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();c.streamId=a;c.status=b("BladeRunnerTypes").StreamStatus.CLOSED;this.$10(c);this.removeStream(a)};m.prototype.sendDataAcks=function(a){b("BladeRunnerLogger").bumpCounter("socket_send_data_ack",a.length),this.$11(a)};m.prototype.removeStream=function(a){this.$5["delete"](a)};m.prototype.getStreamCount=function(){return this.$5.size};m.prototype.getNextStreamId=function(){this.$4++;return this.$4};m.prototype.onMQTTStateChanged=function(a){this.$12();if(a!=h&&a!=g||this.$3==a)return;this.$3=a;b("BladeRunnerLogger").info("MQTTStateChanged: "+a);a==h?(b("BladeRunnerLogger").bumpCounter("mqtt_state_disconnected"),this.$13()):a==g&&b("BladeRunnerLogger").bumpCounter("mqtt_state_connected")};m.prototype.$8=function(a){b("BladeRunnerLogger").bumpCounter("socket_send_request"),this.$1.push(b("BladeRunnerTypesInternal").GatewayStreamFrame.newRequestFrame(a)),this.$12()};m.prototype.$10=function(a){this.$1.push(b("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(a)),this.$12()};m.prototype.$11=function(a){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;this.$1.push(b("BladeRunnerTypesInternal").GatewayStreamFrame.newDataAckFrame(e))}this.$12()};m.prototype.$14=function(){this.$2++;return this.$2};m.prototype.$12=function(){if(this.$6.getConnectionState()===g&&this.$1.length>0){try{this.$15(this.$1)}finally{this.$1=[]}return!0}return!1};m.prototype.$15=function(a){__p&&__p();var c=new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(this.$14(),a);c=c.write();if(c.length>i){var d=Math.floor(a.length/2);if(d===0)throw new Error("Publish is too long: "+c.length);this.$15(a.slice(0,d));this.$15(a.slice(d,a.length))}else try{b("BladeRunnerLogger").info("send message to "+j+" "+c),this.$6.publish(j,c),b("BladeRunnerLogger").bumpCounter("mqtt_publish_success")}catch(a){b("BladeRunnerLogger").exception(a,"Failed publishing to MQTT");b("BladeRunnerLogger").bumpCounter("mqtt_publish_error");throw a}};m.prototype.$7=function(){b("BladeRunnerLogger").info("Starting socket with endpoint "+this.$6.getEndpoint()+" useragent "+navigator.userAgent),this.$16(),this.onMQTTStateChanged(this.$6.getConnectionState()),this.$6.subscribeChannelEvents({onMQTTStateChanged:function(a){this.onMQTTStateChanged(a)}.bind(this),onJSError:function(a){b("BladeRunnerLogger").warn("JS error in MQTTChannel: "+(typeof a=="object"&&a!=null?a.toString():"unknown error")+", "+JSON.stringify(a)),b("BladeRunnerLogger").bumpCounter("mqtt_channel_error")}}),this.$6.subscribe(j,function(a){throw new Error("Unexpected response: "+j+" "+a.toString())}),this.$6.subscribe(k,function(a){this.$17(a)}.bind(this))};m.prototype.$17=function(a){a=b("BladeRunnerTypesInternal").GatewayStreamBatch.read(a);this.processBatch(a)};m.prototype.processBatch=function(a){__p&&__p();try{b("BladeRunnerLogger").bumpCounter("socket_process_batch");b("BladeRunnerLogger").info("Received batch "+JSON.stringify(a));var c=null;for(var d=a.getFrames(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;g=g.getStreamId();c==null&&(c=g);if(g!=null&&c!=g)throw new Error("Received batch with frames for multiple streams")}if(c!=null){g=this.$5.get(c);g!=null?g.onProxyResponse(a):b("BladeRunnerLogger").info("Received batch with frames for unknown stream id: "+c)}else b("BladeRunnerLogger").info("Received batch with no frames")}catch(a){b("BladeRunnerLogger").exception(a,"Failed processing batch from MQTT");b("BladeRunnerLogger").bumpCounter("socket_process_batch_error");throw a}};m.prototype.$13=function(){this.$5.forEach(function(a,b,c){a.onDisconnect()})};m.prototype.$9=function(a,c){var d=new(b("BladeRunnerTypesInternal").GatewayStreamStatusUpdate)();d.streamId=c;d.status=b("BladeRunnerTypes").StreamStatus.REJECTED;d.shouldRetry=!1;d.retryDelayMs=0;c=new(b("BladeRunnerTypesInternal").GatewayStreamBatch)(null,[b("BladeRunnerTypesInternal").GatewayStreamFrame.newStatusUpdateFrame(d)]);a.onProxyResponse(c)};m.prototype.$16=function(){"WebSocket"in window||(b("BladeRunnerLogger").warn("Browser does not support websocket"),b("BladeRunnerLogger").bumpCounter("websocket_not_supported"))};m.maxStreamCount=500;e.exports=m}),null);
__d("BladeRunnerStream",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a}a.prototype.getStreamHandler=function(){"use strict";return this.$1};a.prototype.cancel=function(){"use strict"};a.prototype.isAlive=function(){"use strict";return!1};a.prototype.getStatus=function(){"use strict";return null};a.prototype.getStreamId=function(){"use strict";return 0};e.exports=a}),null);
__d("BladeRunnerStreamState",["BladeRunnerTypes","BladeRunnerTypesInternal"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a,this.$2=null,this.$3=0,this.$4=!1,this.$5=0,this.$6=!1}a.prototype.getRequest=function(){"use strict";return this.$1};a.prototype.isAlive=function(){"use strict";return!(this.$2==b("BladeRunnerTypes").StreamStatus.CLOSED||this.$2==b("BladeRunnerTypes").StreamStatus.REJECTED)};a.prototype.getLastStatus=function(){"use strict";return this.$2};a.prototype.setLastStatus=function(a){"use strict";this.$2=a};a.prototype.onError=function(){"use strict";this.$3+=1};a.prototype.getErrorCount=function(){"use strict";return this.$3};a.prototype.resetErrors=function(){"use strict";this.$3=0};a.prototype.getRetryRequestScheduled=function(){"use strict";return this.$6};a.prototype.setRetryRequestScheduled=function(a){"use strict";this.$6=a};a.prototype.witnessFrame=function(a){"use strict";__p&&__p();switch(a.type){case b("BladeRunnerTypes").StreamFrameType.STATUS_UPDATE:var c=a.getStatusUpdate(),d=!0;switch(c.status){case b("BladeRunnerTypes").StreamStatus.ACCEPTED:d=!this.$4;this.$4||(this.$4=!0);break;case b("BladeRunnerTypes").StreamStatus.STARTED:d=this.getLastStatus()!=b("BladeRunnerTypes").StreamStatus.STARTED;break;case b("BladeRunnerTypes").StreamStatus.PAUSED:d=this.getLastStatus()==b("BladeRunnerTypes").StreamStatus.STARTED;break;case b("BladeRunnerTypes").StreamStatus.CLOSED:case b("BladeRunnerTypes").StreamStatus.REJECTED:default:d=!0}this.setLastStatus(c.status);return d;case b("BladeRunnerTypes").StreamFrameType.REWRITE_REQUEST:this.$7(a.getRewriteRequest());return!1;default:return!0}};a.prototype.setRetriesAllowed=function(a){"use strict";this.$5=a};a.prototype.getRetriesAllowed=function(){"use strict";return this.$5};a.prototype.$7=function(a){"use strict";if(a.patchExtraHeader!=null)return;a.temporary!=null||a.temporary==!0||(a.newBody!=null&&(this.$1.payload=a.newBody),a.newExtraHeader!=null&&(this.$1.extraHeader=a.newExtraHeader,this.$1.headers=JSON.parse(a.newExtraHeader)),a.killBody!=null&&a.killBody==!0&&(this.$1.payload=null))};e.exports=a}),null);
__d("BladeRunnerSocketStream",["BladeRunnerStream","BladeRunnerStreamState","BladeRunnerTypes","BladeRunnerTypesInternal"],(function(a,b,c,d,e,f){__p&&__p();var g,h=5;c=babelHelpers.inherits(a,b("BladeRunnerStream"));g=c&&c.prototype;function a(a,c,d){"use strict";g.constructor.call(this,a),this.$BladeRunnerSocketStream1=d,this.$BladeRunnerSocketStream2=new(b("BladeRunnerStreamState"))(c),this.$BladeRunnerSocketStream2.setRetriesAllowed(h)}a.prototype.send=function(){"use strict";this.$BladeRunnerSocketStream1.sendNewStreamRequest(this.$BladeRunnerSocketStream2,this.getStreamHandler())};a.prototype.cancel=function(){"use strict";this.isAlive()&&(this.$BladeRunnerSocketStream1.sendCancel(this.$BladeRunnerSocketStream2.getRequest().streamId),this.$BladeRunnerSocketStream2.setLastStatus(b("BladeRunnerTypes").StreamStatus.CLOSED))};a.prototype.isAlive=function(){"use strict";return this.$BladeRunnerSocketStream2.isAlive()};a.prototype.getStatus=function(){"use strict";return this.$BladeRunnerSocketStream2.getLastStatus()};a.prototype.getStreamId=function(){"use strict";return this.$BladeRunnerSocketStream2.getRequest().streamId};e.exports=a}),null);
__d("BladeRunnerClient",["Base64","BladeRunnerConfig","BladeRunnerLogger","BladeRunnerSocket","BladeRunnerSocketStream","BladeRunnerTypes","BladeRunnerTypesInternal"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a!=null?a:b("BladeRunnerSocket").get()}a.prototype.requestStream=function(a,c,d){"use strict";__p&&__p();var e=new(b("BladeRunnerTypesInternal").GatewayStreamRequest)();e.streamId=this.$1.getNextStreamId();e.requestType=b("BladeRunnerTypes").StreamRequestType.BLADE_RUNNER;e.headers=b("BladeRunnerConfig").patchRequestHeaders(a);e.extraHeader=JSON.stringify(e.headers);e.payload=c!=null?b("Base64").encode(c):null;a=new(b("BladeRunnerSocketStream"))(d,e,this.$1);a.send();return a};a.prototype.logInfo=function(a){"use strict";b("BladeRunnerLogger").info(a)};a.prototype.bumpCounter=function(a){"use strict";b("BladeRunnerLogger").bumpCounter(a)};e.exports=a}),null);