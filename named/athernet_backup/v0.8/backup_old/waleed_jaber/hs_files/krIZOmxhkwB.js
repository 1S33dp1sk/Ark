if (self.CavalryLogger) { CavalryLogger.start_js(["7hum+"]); }

__d("ChatContentSearchContextualDialog.react",["cx","ContextualLayerAutoFlipHorizontal","LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer"],(function(a,b,c,d,e,f,g){"use strict";a=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({addedBehaviors:[b("ContextualLayerAutoFlipHorizontal"),b("LayerHideOnEscape")],displayName:"StickerXUIContextualDialog",theme:{wrapperClassName:"_53ii",arrowDimensions:{offset:47,length:16}}}));e.exports=a}),null);
__d("ChatContentSearchButton.react",["cx","fbt","AutoFocusableLink.react","BootloadOnRender.react","ChatContentSearchContextualDialog.react","ChatFlyoutPlaceholder.react","JSResource","LazyComponent.react","MercuryShareAttachmentRenderLocations","React","ReactComponentWithPureRenderMixin","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=278;c=b("React").createClass({displayName:"ChatContentSearchButton",_clickGuard:!1,mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{autoFocus:a.bool,clicked:a.bool,ContextualDialogClass:a.func,flyoutAlignment:a.oneOf(["left","right"]),getQuery:a.func.isRequired,location:a.oneOf(b("MercuryShareAttachmentRenderLocations").getValues()),onLoad:a.func,onSelect:a.func.isRequired},getDefaultProps:function(){return{flyoutAlignment:"left",location:b("MercuryShareAttachmentRenderLocations").CHAT}},getInitialState:function(){return{query:"",shown:!!this.props.clicked}},componentDidMount:function(){this.props.onLoad&&this.props.onLoad(this)},updateQuery:function(){this.setState({query:this.props.getQuery()})},hideFlyout:function(){this.setState({query:"",shown:!1})},render:function(){return b("React").createElement("span",null,b("React").createElement(b("AutoFocusableLink.react"),{autoFocus:this.props.autoFocus,className:b("joinClasses")(this.props.className,this.state.shown?"open":""),href:"#",onMouseDown:this._handleMouseDown,onClick:this._handleClick,role:"button",title:h._("Choose a GIF"),ref:"link"}),this.renderLayers())},renderLayers:function(){if(!this.state.shown)return null;var a=this.props.ContextualDialogClass||b("ChatContentSearchContextualDialog.react");return b("React").createElement(a,{alignment:this.props.flyoutAlignment,contextRef:function(){return this.refs.link}.bind(this),onBlur:this.hideFlyout,onToggle:this._handleContextualDialogToggle,shown:this.state.shown,width:i,key:"contextualDialog"},b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{location:this.props.location,onEscKeyDown:this.hideFlyout,onSelect:this._handleSelect,query:this.state.query}),loader:b("JSResource")("ChatContentSearchFlyout.react").__setRef("ChatContentSearchButton.react"),placeholder:b("React").createElement(b("ChatFlyoutPlaceholder.react"),null)}))},_handleMouseDown:function(a){this._clickGuard=this.state.shown},_handleClick:function(a){a.stopPropagation();if(this.state.shown||this._clickGuard)return;this.setState({query:this.props.getQuery(),shown:!this.state.shown})},_handleSelect:function(a,b){this.props.onSelect(a,b),this.hideFlyout()},_handleContextualDialogToggle:function(a){this.setState({shown:a})}});e.exports=c}),null);