if (self.CavalryLogger) { CavalryLogger.start_js(["n8qXi"]); }

__d("ComposedEntityMutabilityToName",[],(function(a,b,c,d,e,f){e.exports={0:"MUTABLE",1:"IMMUTABLE",2:"SEGMENTED"}}),null);
__d("ComposedEntityTypeToName",[],(function(a,b,c,d,e,f){e.exports={0:"MENTION",1:"LINK",2:"IMAGE",3:"VIDEO",4:"EMOTICON",5:"TOKEN",6:"HASHTAG",7:"IMPLICIT_LINK",8:"EMBED",9:"EMOJI",10:"MATH",11:"HIGHLIGHT",12:"DELIGHT",13:"TEMPLATE_VARIABLE",14:"ASSISTANT_TYPEAHEAD"}}),null);
__d("SRDevModeParams",[],(function(a,b,c,d,e,f){e.exports={items:["__spin_r","__spin_b","__spin_t","__spin_dev_mhenv"],escapeParam:"reset_spin"}}),null);
__d("MercuryAudioPlayer",["Arbiter","DOM","Event","Flash"],(function(a,b,c,d,e,f){__p&&__p();var g=200;function h(){var a=b("DOM").create("audio"),c=!1;try{a.canPlayType&&(a.canPlayType("video/mp4;").replace(/^no$/,"")&&(c=!0))}finally{return c}}function i(){return b("Flash").isAvailable()}var j=function(){this.interval=null,this.arbiterInstance=null,this.audio=b("DOM").create("audio"),b("Event").listen(this.audio,"playing",function(){this.informAttachment("playing",this.audio.currentTime),this.interval=setInterval(function(){this.informAttachment("playing",this.audio.currentTime)}.bind(this),g)}.bind(this)),b("Event").listen(this.audio,"ended",function(){clearInterval(this.interval),this.informAttachment("finished")}.bind(this))};Object.assign(j.prototype,{setAudio:function(a,b){this.audio.setAttribute("src",a),this.arbiterInstance=b},informAttachment:function(a,b){this.arbiterInstance&&this.arbiterInstance.inform(a,b)},play:function(){this.audio.play(),this.informAttachment("played")},resume:function(){this.audio.play(),this.informAttachment("played")},pause:function(){this.audio.pause(),clearInterval(this.interval),this.informAttachment("paused")},getType:function(){return"html5"}});var k=function(){this.src=null;this.arbiterInstance=null;var a=b("DOM").create("div");document.body.appendChild(a);this.swf=b("Flash").embed("/swf/cigars/SoundStreamPlayer.swf",a,null,{});this.interval=null;b("Arbiter").subscribe("soundstream/finished",function(){clearInterval(this.interval),this.informAttachment("finished")}.bind(this))};Object.assign(k.prototype,{setAudio:function(a,b){this.src=a,this.arbiterInstance=b},informAttachment:function(a,b){this.arbiterInstance&&this.arbiterInstance.inform(a,b)},play:function(){this.swf.playSound(this.src),this.interval=setInterval(function(){var a=this.swf.getCurrentTime();this.informAttachment("playing",a)}.bind(this),g),this.informAttachment("played")},resume:function(){this.swf.resume(),this.informAttachment("played")},pause:function(){clearInterval(this.interval),this.swf.pause(),this.informAttachment("paused")},getType:function(){return"flash"}});function l(){if(h())return new j();else if(i())return new k();return!1}var m=null,n=null,o=0;function a(a,b){this.src=a;this.arbiterInstance=b;this.audio_id=++o;m!==null||(m=l());if(!m)return!1}Object.assign(a.prototype,{getType:function(){if(!m)return!1;else return m.getType()},play:function(a){a&&n==this.audio_id?m.resume():(this.pause(),n=this.audio_id,m.setAudio(this.src,this.arbiterInstance),m.play())},pause:function(){m.pause()}});e.exports=a}),null);
__d("MercuryAttachmentAudioClip.react",["cssVar","cx","fbt","Arbiter","ArbiterMixin","CurrentUser","JSLogger","LeftRight.react","Link.react","MercuryAudioPlayer","MercuryShareAttachmentRenderLocations","React","SubscriptionsHandler","WorkModeConfig","joinClasses","messengerCustomColorUtils","shield"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=b("React").PropTypes;var j="MercuryAttachmentAudioClip/play",k="progress-bar",l=b("JSLogger").create("mercury_audio_clip");c=b("React").createClass({displayName:"AudioClip",mixins:[b("ArbiterMixin")],propTypes:{customColor:a.string,duration:a.number,isChat:a.bool,isFromViewer:a.bool,location:a.oneOf(b("MercuryShareAttachmentRenderLocations").getValues()),onAttachmentLoad:a.func,rootClassName:a.string,showHelp:a.bool,src:a.string.isRequired,width:a.number},getInitialState:function(){this.logged=!1;return{time:0,playing:!1,started:!1,duration:this.props.duration,audioPlayer:new(b("MercuryAudioPlayer"))(this.props.src,this)}},componentDidMount:function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad(),this._subscriptionsHandler=new(b("SubscriptionsHandler"))(),this._subscriptionsHandler.addSubscriptions(this.subscribe("playing",this.updateTime),this.subscribe("played",b("shield")(this.setState,this,{playing:!0,started:!0})),this.subscribe("paused",b("shield")(this.setState,this,{playing:!1})),this.subscribe("finished",b("shield")(this.setState,this,{playing:!1,started:!1,time:this.props.duration})),b("Arbiter").subscribe(j,function(a,b){this.props.src!=b&&this.setState({time:0})}.bind(this)))},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release()},updateTime:function(a,b){this.setState({time:b})},play:function(){this.state.playing?this.state.audioPlayer.pause():(this.state.audioPlayer.play(this.state.started),b("Arbiter").inform(j,this.props.src),this.logged||(this.logged=!0,l.log("play",{uid:b("CurrentUser").getID(),duration:this.props.duration})))},_formatSeconds:function(a){if(a){a=Math.round(a);var b=a%60;b<10&&(b="0"+b);a=Math.floor(a/60);return a+":"+b}else return null},_renderPlayer:function(a,c,d){var e=this.props.isFromViewer,f=this.props.isChat,g=b("WorkModeConfig").is_work_user,h=d===k,j=f&&e&&!h,l=this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER;g=g?"#373e4c":"#4080ff";g=d||g;a={width:a};j&&(a.backgroundColor=g);j=d&&d!==k&&!f?{color:d}:{};g={};h&&(g["aria-disabled"]=!0);return b("React").createElement(b("Link.react"),babelHelpers["extends"]({"aria-label":i._("Voice Message"),className:"_1miz _2e-1"+(l?"":" _3_om")+(e&&f?" _3e5f":""),role:"button",style:a,onClick:this.play},g),b("React").createElement("span",{className:"_1mi- _2e-2"},b("React").createElement("i",{className:"_1mi_ _2e-3"})),b("React").createElement("span",{style:j,className:"_1mj0 _2e-4 _3oh-"},c),b("React").createElement("div",{className:"_1mj1 _2e-5"}))},render:function(){__p&&__p();var a=this.state.time,c=this.state.playing,d=this._formatSeconds(this.state.duration),e=this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER,f=this.props.width||170;if(e){var g=this.props.duration;g>10?f=240:g>5?f=200:g>2?f=160:f=120}g=null;var h=Math.ceil(a*(f+2)/this.state.duration);e&&(h=Math.ceil(a*(f+24)/this.state.duration));if(this.state.audioPlayer&&this.state.audioPlayer.getType()){var j=this._renderPlayer(f,d,this.props.customColor);f=this._renderPlayer(f,d,k);c="_1mj2 _2e-6"+(c&&a!==0?" _1mj3":"")+(c&&a===0?" _4g4x":"");g=b("React").createElement("div",{className:c},j,b("React").createElement("div",{className:"_1mj4 _2e-7",style:{width:h}},f))}else g=b("React").createElement("div",{className:"_1mj2"},b("React").createElement("div",{className:"_1miz"},b("React").createElement(b("LeftRight.react"),null,b("React").createElement("a",{className:"_1mj5",href:this.props.src},b("React").createElement("span",{className:"_3qi6"},b("React").createElement("i",{className:"_1mj6"})),b("React").createElement("span",{className:"_1mj7"},i._("Voice Message")),b("React").createElement("span",{className:"_1mj8"},d)),b("React").createElement("a",{href:this.props.src,className:"_1mj9"},b("React").createElement("i",{className:"_1mja"})))));return b("React").createElement("div",{className:b("joinClasses")("_1mjb"+(e?" _454y":""),this.props.rootClassName)},g)}});e.exports=c}),null);
__d("PagesMessengerCreatorInfo.react",["cx","React","UFICreatorInfo.react","XUIGrayText.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("XUIGrayText.react"),{className:"_ajk"+(this.props.isNote?" _45l2":""),display:"inline",shade:"light",size:"meta1"},b("React").createElement(b("UFICreatorInfo.react"),{creatorID:this.props.creator_info.creatorID,creatorType:this.props.creator_info.creatorType,creatorName:this.props.creator_info.creatorName,labelType:this.props.creator_info.labelType,pageID:this.props.creator_info.pageID,profileURI:this.props.creator_info.profileURI}))};function a(){h.apply(this,arguments)}a.propTypes={creator_info:c.shape({creatorID:c.string.isRequired,creatorName:c.string.isRequired,creatorType:c.string.isRequired,labelType:c.string.isRequired,pageID:c.string.isRequired,profileURI:c.string}).isRequired};e.exports=a}),null);
__d("XMessagingGetEmojiRecentUsageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/emoji_recent_usage/",{})}),null);
__d("EmojiServerRequests",["Promise","AsyncRequest","XMessagingGetEmojiRecentUsageController"],(function(a,b,c,d,e,f){"use strict";a={fetchTrayData:function(a){return g(b("XMessagingGetEmojiRecentUsageController").getURIBuilder().getURI(),a,!0)}};function g(a,c,d){return new(b("Promise"))(function(c,e){return new(b("AsyncRequest"))(a).setHandler(function(a){return c(a.getPayload())}).setAllowCrossPageTransition(d).send()}).then(c)}e.exports=a}),null);
__d("XMessagingGetEmojiColorPrefController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/get_emoji_color/",{})}),null);
__d("XMessagingSetEmojiColorPrefController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/set_emoji_color/",{})}),null);
__d("EmojiState",["fbt","AsyncRequest","EmojiActions","EmojiServerRequests","MessengerSupportedEmojiUtils","XMessagingGetEmojiColorPrefController","XMessagingSetEmojiColorPrefController","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=null,i=null,j;a={onTrayDataReady:function(a){j||(j=b("EmojiServerRequests").fetchTrayData(function(a){i=a})),b("promiseDone")(j,function(){a(),b("EmojiActions").loadedTrayData()})},getEmojiColor:function(){var a=b("XMessagingGetEmojiColorPrefController").getURIBuilder().getURI();new(b("AsyncRequest"))(a).setMethod("POST").setAllowCrossPageTransition(!0).setHandler(function(a){b("EmojiActions").emojiColorReady(a.payload)}).send()},changeEmojiColor:function(a){var c=b("XMessagingSetEmojiColorPrefController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData({color:a}).send()},addMRUCategory:function(){if(i){var a=i.map(function(a){return b("MessengerSupportedEmojiUtils").getSupportedEmojiCodesArray(a)}).filter(function(a){return!!a});h={name:g._("Recently sent"),emojis:a,icon:[128340]};b("EmojiActions").updateTrayData();i=null}},_addRecentlyUsedEmoji:function(a){__p&&__p();var c=h&&h.emojis;if(!c)return;var d=function(b){var d=a[b];for(var b=0;b<c.length;++b)if(c[b].length==d.length&&c[b].every(function(a,b){return a===d[b]})){c.splice(b,1);break}c.unshift(d)};for(var e=0;e<a.length;++e)d(e);b("EmojiActions").updateTrayData()},getMRUCategory:function(){h||this.addMRUCategory();return h},updateRecentlyUsed:function(a){if(!h){this.addMRUCategory();return}this._addRecentlyUsedEmoji(a)}};e.exports=a}),null);
__d("EmojiStateStore",["EmojiActions","EmojiDispatcher","EmojiState","FluxStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("EmojiDispatcher")),b("EmojiState").getEmojiColor(),this.$EmojiStateStore2=!1}a.prototype.getState=function(){var a=b("EmojiState").getMRUCategory();return{currentCategory:this.$EmojiStateStore4,emojiColor:this.$EmojiStateStore3,mruCategory:[a],threadID:this.$EmojiStateStore1,trayDataReady:this.$EmojiStateStore2}};a.prototype.__onDispatch=function(a){__p&&__p();var c=b("EmojiActions").Types;switch(a.type){case c.GET_EMOJI_COLOR:b("EmojiState").getEmojiColor();break;case c.EMOJI_COLOR_READY:this.$EmojiStateStore3=a.color;break;case c.CHANGE_EMOJI_COLOR:b("EmojiState").changeEmojiColor(a.color);this.$EmojiStateStore3=a.color;break;case c.CHANGE_CURRENT_CATEGORY:this.$EmojiStateStore4=a.currentCategory;break;case c.UPDATE_TRAY_DATA:break;case c.TRAY_DATA_READY:this.$EmojiStateStore2=!0;break}this.__emitChange()};a.__moduleID=e.id;e.exports=new a()}),null);
__d("FBRTCCallabilityActions",["keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CALLABILITY_FETCHED:null,CALLABILITY_FETCH_ERROR:null});function a(a){this.$1=a}a.prototype.callabilityFetched=function(a,b){this.$1.dispatch({type:g.CALLABILITY_FETCHED,userID:a,callability:b})};a.prototype.callabilityFetchError=function(a){this.$1.dispatch({type:g.CALLABILITY_FETCH_ERROR,userID:a})};a.Types=g;e.exports=a}),null);
__d("XRTCCallabilityController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/rtc/callability/",{user_id:{type:"FBID",required:!0}})}),null);
__d("FBRTCCallabilityDataManager",["AsyncRequest","FBRTCCallabilityActions","TimeSlice","XRTCCallabilityController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=new(b("FBRTCCallabilityActions"))(a)}a.prototype.fetchCallability=function(a){b("TimeSlice").guard(function(){var c=b("XRTCCallabilityController").getURIBuilder().setFBID("user_id",a).getURI(),d=this.$2.bind(this,a),e=this.$3.bind(this,a);new(b("AsyncRequest"))().setURI(c).setHandler(d).setErrorHandler(e).setAllowCrossPageTransition(!0).send()}.bind(this),"Chat Tab RTC Callability Check",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype.$2=function(a,b){this.$1.callabilityFetched(a,b.payload)};a.prototype.$3=function(a,b){this.$1.callabilityFetchError(a)};e.exports=a}),null);
__d("RTCCallabilityStore",["fbt","Cache","FBRTCCallabilityActions","FBRTCCallabilityDataManager","FluxStore","MercuryThreadInfo"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=.5,j=5;c=babelHelpers.inherits(a,b("FluxStore"));h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$RTCCallabilityStore2=new(b("FBRTCCallabilityDataManager"))(a),this.$RTCCallabilityStore1=new(b("Cache"))()}a.prototype.__onDispatch=function(a){__p&&__p();var c=a.type;switch(c){case b("FBRTCCallabilityActions").Types.CALLABILITY_FETCHED:c=a.userID;var d=a.callability;this.$RTCCallabilityStore1.set(c,{callable:d.is_callable,isBlocked:d.is_blocked},null,d.is_callable?j:i);this.__emitChange();break;case b("FBRTCCallabilityActions").Types.CALLABILITY_FETCH_ERROR:this.$RTCCallabilityStore1.set(a.userID,{callable:!1,isBlocked:!1},null,i);this.__emitChange();break}};a.prototype.isCallable=function(a,b){b=b?b.message_count>0&&b.folder==="inbox":!1;a=this.fetchUserFromCache(a);return a&&a.callable||b};a.prototype.isBlocked=function(a,c){c=c?b("MercuryThreadInfo").canReply(c):!0;a=this.fetchUserFromCache(a);return a&&a.isBlocked||!c};a.prototype.fetchUserFromCache=function(a){this.$RTCCallabilityStore1.has(a)||(this.$RTCCallabilityStore2.fetchCallability(a),this.$RTCCallabilityStore1.set(a,{callable:!1,isBlocked:!1},null,i));return this.$RTCCallabilityStore1.get(a)};a.prototype.callButtonTooltip=function(a,b,c,d){c===void 0&&(c=!0);return!this.isBlocked(a,d)&&(c||this.isCallable(a))?g._("Start a video chat with {shortname}",[g._param("shortname",b)]):g._("{shortname} is currently unavailable for video calling",[g._param("shortname",b)])};a.prototype.voiceCallButtonTooltip=function(a,b,c,d){c===void 0&&(c=!0);return!this.isBlocked(a,d)&&(c||this.isCallable(a))?g._("Start a voice call with {shortname}",[g._param("shortname",b)]):g._("{shortname} is currently unavailable for voice calling",[g._param("shortname",b)])};a.__moduleID=e.id;e.exports=a}),null);
__d("MessengerProfileLinkTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerProfileLinkLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAction=function(a){this.$1.action=a;return this};a.prototype.setDomain=function(a){this.$1.domain=a;return this};a.prototype.setLinkLocation=function(a){this.$1.link_location=a;return this};a.prototype.setTargetID=function(a){this.$1.target_id=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={action:!0,domain:!0,link_location:!0,target_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("WorkChatActivityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppID=function(a){this.$1.app_id=a;return this};a.prototype.setAppVersion=function(a){this.$1.app_version=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setGroupID=function(a){this.$1.group_id=a;return this};a.prototype.setHscrollPosition=function(a){this.$1.hscroll_position=a;return this};a.prototype.setThreadIds=function(a){this.$1.thread_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={app_id:!0,app_version:!0,event:!0,group_id:!0,hscroll_position:!0,thread_ids:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("WorkDoNotDisturbSettingsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:WorkDoNotDisturbSettingsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkDoNotDisturbSettingsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkDoNotDisturbSettingsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setOption=function(a){this.$1.option=a;return this};a.prototype.setSource=function(a){this.$1.source=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={event:!0,option:!0,source:!0,time:!0,weight:!0};e.exports=a}),null);
__d("RepliedToMessageContent.react",["ix","cx","fbt","Bootloader","CurrentUser","FantaTabActions","FBLogger","Image.react","LineClamp.react","MercuryAttachmentType","MessengerTextWithEntities.react","React","RepliedToMessageStatusForGraphQL","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$4=function(){this.$5();if(this.props.repliedToMessageData.status!==b("RepliedToMessageStatusForGraphQL").VALID)return;var a=this.props.threadID;this.props.isMessengerUI?this.props.scrollToRepliedMessage&&this.props.scrollToRepliedMessage(this.props.repliedToMessageData.message.message_id):a!==null&&a!==void 0&&b("FantaTabActions").jumpToMessage(a,this.props.repliedToMessageData.message.message_id)}.bind(this),c}a.prototype.render=function(){__p&&__p();var a=this.props,c=a.isFromViewer,d=a.isMessengerUI;a=a.repliedToMessageData;var e=a.status===b("RepliedToMessageStatusForGraphQL").VALID;if(e&&!a.message){b("FBLogger")("message_replies").mustfix("invalid message reply: Status is Valid but replied_to_message is missing");return null}e=e?a.message.body:this.$1(a);var f=null;!e&&a.message.attachments&&(f=this.$2(a.message.attachments,c,d),e=this.$3(a.message.attachments));c=b("React").createElement(b("LineClamp.react"),{className:"_4k7e",lines:2,lineHeight:d?16:13,fitHeightToShorterText:!0},b("React").createElement(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:e}));if(!this.props.replyInOneBubble)return b("React").createElement("div",{className:(!!f&&d?"_6e7n":"")+(!!f&&!d?" _6e6m":"")},c,f);a=b("React").createElement("blockquote",{className:"_pye"+(!!f&&d?" _6e7n":"")+(!!f&&!d?" _6e6m":"")},b("React").createElement("div",{className:"_pyf"}),c,f);return!this.props.isLinkified?a:b("React").createElement("a",{className:"_6e6n",href:"#",onClick:this.$4},a)};a.prototype.$1=function(a){switch(a.status){case b("RepliedToMessageStatusForGraphQL").DELETED:return b("CurrentUser").isWorkUser()?i._("This message was deleted").toString():i._("Message removed").toString();case b("RepliedToMessageStatusForGraphQL").TEMPORARILY_UNAVAILABLE:default:return i._("Message is temporarily unavailable").toString()}};a.prototype.$2=function(a,c,d){d=d?"_6e6o":"_6e6y";if(a.length===1&&a[0].attach_type)switch(a[0].attach_type){case b("MercuryAttachmentType").PHOTO:case b("MercuryAttachmentType").STICKER:case b("MercuryAttachmentType").THIRDPARTYSTICKER:case b("MercuryAttachmentType").ANIMATED_IMAGE:return!this.props.replyInOneBubble?b("React").createElement(b("Image.react"),{className:d,src:g("602383")}):c===!0?b("React").createElement(b("Image.react"),{className:d,src:g("544881")}):b("React").createElement(b("Image.react"),{className:d,src:g("596859")});case b("MercuryAttachmentType").VIDEO:return!this.props.replyInOneBubble?b("React").createElement(b("Image.react"),{className:d,src:g("602399")}):c===!0?b("React").createElement(b("Image.react"),{className:d,src:g("504242")}):b("React").createElement(b("Image.react"),{className:d,src:g("596875")});default:return!this.props.replyInOneBubble?b("React").createElement(b("Image.react"),{className:d,src:g("562396")}):c===!0?b("React").createElement(b("Image.react"),{className:d,src:g("555222")}):b("React").createElement(b("Image.react"),{className:d,src:g("596853")})}else if(a.length>1)return!this.props.replyInOneBubble?b("React").createElement(b("Image.react"),{className:d,src:g("602390")}):c===!0?b("React").createElement(b("Image.react"),{className:d,src:g("504171")}):b("React").createElement(b("Image.react"),{className:d,src:g("596866")});else return null};a.prototype.$3=function(a){__p&&__p();var c=a.length;if(c===1&&a[0].attach_type)switch(a[0].attach_type){case b("MercuryAttachmentType").PHOTO:return i._("Photo").toString();case b("MercuryAttachmentType").VIDEO:return i._("Video").toString();case b("MercuryAttachmentType").STICKER:case b("MercuryAttachmentType").THIRDPARTYSTICKER:return i._("Sticker").toString();case b("MercuryAttachmentType").ANIMATED_IMAGE:return i._("GIF").toString();default:return i._("Attachment").toString()}else if(c>1)return i._({"*":"{number of attachments} attachments","_1":"{number of attachments} attachment"},[i._param("number of attachments",c),i._plural(c)]).toString();else return null};a.prototype.$5=function(){b("Bootloader").loadModules(["MessageReplyTypedLogger","MessageReplyEvent"],function(a,c){a=new a();a.setEvent(c.SCROLL_TO_ORIGINAL_MESSAGE).setIsWorkplace(b("CurrentUser").isWorkUser()).log()},"RepliedToMessageContent.react")};e.exports=a}),null);
__d("CssBackgroundImageReact.bs",["ReasonReact.bs","bs_js_null_undefined","CssBackgroundImage.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){var h={className:b("bs_js_null_undefined").fromOption(a),imageURI:b("bs_js_null_undefined").fromOption(c),backgroundPosition:b("bs_js_null_undefined").fromOption(d),height:b("bs_js_null_undefined").fromOption(e),width:b("bs_js_null_undefined").fromOption(f),style:b("bs_js_null_undefined").fromOption(g)},i=b("CssBackgroundImage.react");return function(a){return b("ReasonReact.bs").wrapJsForReason(i,h,a)}}f.make=a}),null);
__d("MessengerSharedPhotoReact.bs",["cx","fbt","bs_curry","React","LinkReact.bs","ReasonReact.bs","bs_js_primitive","CssBackgroundImageReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerSharedPhotoReact"),j={height:"100%"};function a(a,c,d,e,f,g){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){var g=function(a){a.preventDefault();return b("bs_curry")._1(d,c)},i=h._("photo");if(e!==void 0){var k=e,l=f?b("React").createElement("div",{className:"_3603 _64ks"}):null;return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,i,a,void 0,void 0,void 0,void 0,void 0,k,void 0,g,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("CssBackgroundImageReact.bs").make(a,k,"center",void 0,void 0,b("bs_js_primitive").some(j))([l]))]))}else return b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,i,a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,g,void 0,void 0,"button",void 0,void 0,void 0,void 0,void 0,[]))},i[9],i[10],i[11],i[12]]}f.component=i;f.style100pct=j;f.make=a}),null);
__d("MessengerSharedPhotoReact.re",["bs_curry","MessengerSharedPhotoReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){a=b("ReasonReact.bs").wrapReasonForJs(b("MessengerSharedPhotoReact.bs").component,function(a){return b("bs_curry")._6(b("MessengerSharedPhotoReact.bs").make,a.className,a.fbid,a.onClick,a.uri,a.isSpherical,a.children)});f.component=a;f["default"]=a}),null);
__d("ChatPhotoViewFooterHScroll.react",["cx","Animation","MessengerSharedPhotoReact.re","React","SphericalPhotoUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerSharedPhotoReact.re").component,j=b("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings;c=b("React").PropTypes;var k=200,l=74,m=140,n=30;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=null,this.state={currentPhoto:"",prevScrollLeft:0,scrollLeft:0},b}a.prototype.componentDidMount=function(){this.props.width&&this.props.updateNumberInOneBatch(this.$2(this.props.width)),this.$1=new(b("Animation"))(this.refs.childContainer).to("scrollLeft",0).duration(k).go()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){if(a.photoID!=this.state.currentPhoto||this.props.sharedPhotos.length!==a.sharedPhotos.length){var b=a.width?(a.width-l)/2-m:0,c=a.sharedPhotos.findIndex(function(b){return b.node.id===a.photoID});this.setState({currentPhoto:a.photoID,prevScrollLeft:this.state.scrollLeft,scrollLeft:c*l-b})}a.width!=this.props.width&&this.props.updateNumberInOneBatch(this.$2(a.width))};a.prototype.componentDidUpdate=function(){this.$1&&this.$1.from("scrollLeft",this.state.prevScrollLeft).to("scrollLeft",this.state.scrollLeft).duration(k).go()};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.stop()};a.prototype.shouldComponentUpdate=function(a,b){return a.photoID!=this.state.currentPhoto||a.sharedPhotos.length!==this.props.sharedPhotos.length?!0:!1};a.prototype.render=function(){__p&&__p();var a=this.props.sharedPhotos;a=a.map(function(a){var c,d=a.node.photo_encodings?a.node.photo_encodings.length!==0:!1;c=(c=a)!=null?(c=c.node)!=null?(c=c.image1)!=null?c.uri:c:c:c;if(d){var e=j(a.node.photo_encodings);e=e.smallThumbnail;c=e||c}return!c?null:b("React").createElement("div",{className:"_1oyb",key:a.node.legacy_attachment_id},b("React").createElement(i,{className:"_1oyc"+(this.state.currentPhoto!==a.node.id?" _1oyd":""),fbid:a.node.legacy_attachment_id,onClick:this.props.onScroll,uri:c,isSpherical:d}))}.bind(this));return b("React").createElement("div",{className:"_1oye"},b("React").createElement("div",{className:"_1oyf",ref:"childContainer"},b("React").createElement("div",{className:"_1oyh",ref:"scrollable"},a)))};a.prototype.$2=function(a){return a?Math.ceil((a-m*2)/l):n};a.propTypes={onScroll:c.func,photoID:c.string,sharedPhotos:c.array,updateNumberInOneBatch:c.func,width:c.number};e.exports=a}),null);
__d("XForwardingNUXSeenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/forwarding_nux_seen/",{})}),null);
__d("MessagingForwardingButtonNUX.react",["AsyncRequest","ChatConfig","React","XForwardingNUXSeenController","XUIAmbientNUX.react"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={showNUX:!b("ChatConfig").get("seen_forwarding_nux")},this.$1=function(){if(!this.state.showNUX)return;b("ChatConfig").set("seen_forwarding_nux",!0);new(b("AsyncRequest"))(b("XForwardingNUXSeenController").getURIBuilder().getURI()).send();this.setState({showNUX:!1})}.bind(this),this.close=function(){this.$1()}.bind(this),c}a.prototype.render=function(){"use strict";return b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:this.props.contextRef,onCloseButtonClick:this.$1,position:"left",width:"auto",shown:this.state.showNUX},this.props.children)};a.propTypes={contextRef:c.func.isRequired};e.exports=a}),null);
__d("MessengerPhotoViewCloseLink.react",["cx","fbt","React","TooltipLink.react"],(function(a,b,c,d,e,f,g,h){"use strict";a=b("React").PropTypes;c=function(a){var c=a.customTooltip!==void 0?a.customTooltip:b("React").createElement("span",null,h._("Press Esc to close"));return b("React").createElement(b("TooltipLink.react"),{className:"_51ok _50-m _51an",onClick:a.onClick,tooltip:c},b("React").createElement("div",{className:"_387s"}))};c.propTypes={onClick:a.func,customTooltip:a.element};e.exports=c}),null);
__d("SpotlightViewerBottomBarLink",["cx","Link.react","React"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a=this.props.className||"_4_8j _4_8k";return b("React").createElement(b("Link.react"),babelHelpers["extends"]({},this.props,{className:a}),this.props.children)};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("ChatPhotoViewHeader.react",["cx","fbt","MessagingForwardingButtonNUX.react","MessengerPhotoViewCloseLink.react","React","SpotlightViewerBottomBarLink","WorkModeConfig"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$3=function(){this.$2(),this.props.showForwardDialog&&this.props.showForwardDialog()}.bind(this),this.$4=function(){this.$2(),this.props.showShareDialog&&this.props.showShareDialog()}.bind(this),b}a.prototype.render=function(){return b("React").createElement("div",{className:"_51an _50-m _3h_t _5l-3",role:"banner"},this.$1(),b("React").createElement(b("MessengerPhotoViewCloseLink.react"),{onClick:this.props.onClose}))};a.prototype.$2=function(){this.refs.forwardNUX&&this.refs.forwardNUX.close()};a.prototype.$1=function(){var a,c,d;this.props.disableForward||(a=b("React").createElement(b("SpotlightViewerBottomBarLink"),{className:"_3h_u",onClick:this.$3,ref:"forwardButton"},b("React").createElement("div",{className:"_3h_v _3h_w"}),h._("Forward")),c=b("React").createElement(b("MessagingForwardingButtonNUX.react"),{contextRef:function(){return this.refs.forwardButton}.bind(this),ref:"forwardNUX"},h._("Send this image to other people in separate messages.")));this.props.enableShareToFB&&(d=b("React").createElement("div",{className:"_3h_u",onClick:this.$4,ref:"shareButton",role:"button",tabIndex:"0"},b("React").createElement("div",{className:"_3tth _3h_w"}),this.$5()));return b("React").createElement("div",{key:"buttonsContainer",ref:"buttons"},b("React").createElement(b("SpotlightViewerBottomBarLink"),{className:"_3h_u",rel:"async",ajaxify:this.props.url,ref:"downloadButton"},b("React").createElement("div",{className:"_3h_x _3h_w"}),h._("Download")),a,c,d,b("React").createElement("div",{className:"_3h_u",onClick:this.props.openInfo,ref:"moreInfo",role:"link",tabIndex:"0"},b("React").createElement("div",{className:"_3h_y _3h_w"}),h._("Info")))};a.prototype.$5=function(){if(b("WorkModeConfig").is_work_user)return h._("Share to Workplace");else return h._("Share to Facebook")};a.propTypes={disableForward:c.bool,enableShareToFB:c.bool,onClose:c.func,openInfo:c.func,showForwardDialog:c.func,showShareDialog:c.func,url:c.object};e.exports=a}),null);
__d("ChatSpeakingSticker.react",["React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(){var a=b("ReactDOM").findDOMNode(this.refs.stickerVideo);a.play()}.bind(this),c}a.prototype.render=function(){return b("React").createElement("div",{onClick:this.$1,role:"presentation"},b("React").createElement("video",{height:this.props.videoSize.height,ref:"stickerVideo",width:this.props.videoSize.width},b("React").createElement("source",{src:this.props.videoURI})))};a.propTypes={videoURI:c.string.isRequired,videoSize:c.shape({height:c.number,width:c.number}).isRequired};e.exports=a}),null);
__d("ChatEmojiSkinTonePreferencePicker.react",["ChatEmojiPicker.react","MessengerEmojiConfig","React","SkinToneEmoji.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h=128077;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(a){a=b("SkinToneEmoji.bs").getTone(a);this.props.onSelect&&this.props.onSelect(a)}.bind(this),c}a.prototype.render=function(){var a=null;try{a=this.props.currentPreference?String.fromCodePoint.apply(String,b("SkinToneEmoji.bs").applyTone([h],this.props.currentPreference)):String.fromCodePoint(h)}catch(b){a=String.fromCodePoint(h)}return b("React").createElement(b("ChatEmojiPicker.react"),{className:this.props.className,columns:this.props.columns,currentEmoji:a,emojiChoices:b("MessengerEmojiConfig").emoji_colors.map(function(a){return b("SkinToneEmoji.bs").applyTone([h],a)}),onSelect:this.$1})};a.propTypes={className:c.string,columns:c.number,currentPreference:c.number,onSelect:c.func};a.defaultProps={columns:6};e.exports=a}),null);
__d("EmojiSticker.react",["cx","Image.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad()};a.prototype.render=function(){var a=this.props.emojiImage?this.props.emojiImage:b("React").createElement(b("Image.react"),{src:this.props.sourceURI});return b("React").createElement("div",{"aria-label":this.props.emoji,className:b("joinClasses")(this.props.className,"_383m"),tabIndex:"0"},a)};function a(){h.apply(this,arguments)}a.propTypes={emoji:c.string,emojiImage:c.any,onAttachmentLoad:c.func,sourceURI:c.string.isRequired};e.exports=a}),null);
__d("MessengerErrorBoundary.react",["cx","fbt","ChatReliabilityInstrumentation","ErrorBoundary.react","LogHistory","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("LogHistory").getInstance("messenger_error_boundary"),k=function(a){return h._({"conversation list":"Could not display conversation list.","conversation":"Could not display conversation.","composer":"Could not display composer.","conversation information":"Could not display conversation information.","attachment":"Could not display attachment.","pinned conversation list":"Could not display pinned conversation list."},[h._enum(a,{"conversation list":"conversation list",conversation:"conversation",composer:"composer","conversation information":"conversation information",attachment:"attachment","pinned conversation list":"pinned conversation list"})])},l=function(a,c){return function(){return b("React").createElement("div",{className:b("joinClasses")("_5jpt",c)},a)}};c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(a,c){var d="React error in "+c+" got "+a.message;j.error(d,JSON.stringify(a));b("ChatReliabilityInstrumentation").logERROR(d);this.props.onHandleError&&this.props.onHandleError(a,c)}.bind(this),c}a.prototype.render=function(){var a=this.props,c=a.className,d=a.component;a=babelHelpers.objectWithoutPropertiesLoose(a,["className","component"]);return b("React").createElement(b("ErrorBoundary.react"),babelHelpers["extends"]({},a,{fallbackComponent:l(k(d),c),onHandleError:this.$1,bigRedBox:!0}))};e.exports=a}),null);
__d("MercuryShareAttachment.react",["cx","BootloadedComponent.react","DOM","Event","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MercuryShareStyleMap","MessengerErrorBoundary.react","React","ReactDOM","emptyFunction","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$3=function(a){this.$1(a),b("DOM").scry(b("ReactDOM").findDOMNode(this),"img").forEach(function(a){var c=b("Event").listen(a,"load",function(){this.$1(a.height),c.remove()}.bind(this))}.bind(this))}.bind(this),c}a.prototype.componentDidMount=function(){this.$1()};a.prototype.$2=function(a,c){this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER&&!this.props.isSubattachment&&(c=b("joinClasses")("_52mr _2poz _ui9","_4skb",c));return b("React").createElement("div",{className:c},a,this.props.afterDecorators)};a.prototype.render=function(){var a=b("MercuryShareStyleMap").getStyleFactory(this.props.attachment);if(!a)return null;var c=a.attachment;a=a.factory;return this.$2(b("React").createElement(b("MessengerErrorBoundary.react"),babelHelpers["extends"]({},this.props,{component:"attachment"}),b("React").createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({},this.props,{attachment:c,bootloadLoader:a.componentLoader,bootloadPlaceholder:b("React").createElement("div",null),key:(c=this)!=null?(c=c.props)!=null?(c=c.attachment)!=null?c.share_id:c:c:c,module:a.componentName,onComponentLoad:this.$3}))),a.cx&&a.cx.get(this.props.location))};a.prototype.$1=function(a){this.props.onComponentLoaded(a)};a.propTypes={attachment:b("MercuryShareAttachmentReactShape"),isFromViewer:c.bool,isPageMessage:c.bool,isSponsored:c.bool,isSubattachment:c.bool,isVisible:c.bool,location:c.oneOf(b("MercuryShareAttachmentRenderLocations").getValues()),messageID:c.string,onComponentLoaded:c.func.isRequired,onSelect:c.func,pageID:c.string,threadID:c.string.isRequired,afterDecorators:c.array,timestamp:c.number,author:c.string};a.defaultProps={onComponentLoaded:b("emptyFunction")};e.exports=a}),null);
__d("MessengerErrorAttachment.react",["cx","fbt","CurrentUser","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=this.props.attachment.error_msg||h._("This attachment could not be loaded.");return b("React").createElement("div",{className:"_1o12 _52mr"},b("React").createElement("div",{className:"_1o13"},a,this.$1()))};a.prototype.$1=function(){return!this.props.attachment.error_msg&&b("CurrentUser").isEmployee()&&b("CurrentUser").hasWorkUser()&&!b("CurrentUser").isWorkUser()?b("React").createElement("div",null,h._("It was probably meant for your \u0040workplace account.")):null};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MessengerFileAttachment.react",["cx","Link.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("Link.react"),{className:"_4pcn _2uf4",target:"_blank",href:this.props.attachment.url},b("React").createElement("div",{className:"_2uf5"}),this.props.attachment.name)};function a(){h.apply(this,arguments)}a.propTypes={attachment:c.object.isRequired};e.exports=a}),null);
__d("MessengerFromViewerUtils",["CurrentUser","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";function a(a){return a.author===b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID())}e.exports={isFromViewer:a}}),null);
__d("MessengerHotLikePreview.react",["cx","Animation","ChatConfig","EmojiLikeConstants","HotLikeSound","MercuryShareAttachmentRenderLocations","MessengerDotComAndInboxM4Check.bs","MessengerHotLikeIconSVGM4React.bs","MessengerHotLikePreviewEvents","MessengerHotLikeSVGReact.re","MessengerHotLikeUtils","MessengerSupportedEmojiUtils","React","ReactDOM","StickerConstants","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerHotLikeSVGReact.re").component;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$5=function(){this.$6=new(b("Animation"))(b("ReactDOM").findDOMNode(this)),(!b("ChatConfig").getBool("chat_tab_has_gradients")||this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER)&&(this.$7(-2,2,150,1e3),this.$7(-4,4,100,1e3),this.$7(-10,10,75,1e3)),this.$6.go()}.bind(this),this.$2=function(a,c){__p&&__p();var d=c?b("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION:b("MessengerHotLikePreviewEvents").FINISH_ANIMATION;if(this.$8)return;this.$8=!0;c=Date.now()-this.props.since;var e=null;this.props.customLike&&(e=b("MessengerHotLikeUtils").getEmojiSizeForTime(c));var f=b("MessengerHotLikeUtils").getStickerIDForTime(c);b("HotLikeSound").snap(f);c=b("MessengerHotLikeUtils").getMetadataForHotLike(e||f);this.$6.stop();var g=30,h=-10;(f===b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||b("ChatConfig").getBool("chat_tab_has_gradients"))&&(g=0,h=0);this.$4.stop().to("width",c.width*1.2).to("height",c.height*1.2).to("rotateZ",g).duration(100).checkpoint().to("width",c.width*.9).to("height",c.height*.9).to("rotateZ",h).duration(100).checkpoint().to("width",c.width).to("height",c.height).to("rotateZ",0).duration(100).ondone(function(){this.props.forGameChat||b("MessengerHotLikePreviewEvents").emit(d,a,f,e)}.bind(this)).go()}.bind(this),this.$3=function(a){b("HotLikeSound").pop(),this.$4.stop().to("width",0).to("height",0).duration(100).ondone(function(){b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").REMOVE,a)}).go()}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=new(b("SubscriptionsHandler"))(),this.$1.addSubscriptions(b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,this.$2),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP_EMOJI,this.$2),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").POP,this.$3)),b("HotLikeSound").start(),this.$4=new(b("Animation"))(b("ReactDOM").findDOMNode(this)).to("width",80).to("height",80).duration(3e3).go(),this.$5()};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.release()};a.prototype.render=function(){if(this.props.customLike){var a=this.props.customLike,c=b("MessengerSupportedEmojiUtils").getNewEmojiData(a.emoji,b("EmojiLikeConstants").size.LARGE);c=c?c.url:this.props.customLike.large;a.uri&&(c=a.uri);return b("React").createElement("div",{className:"_4a9g _383m",style:{backgroundImage:"url("+c+")"}})}a=b("MessengerDotComAndInboxM4Check.bs").yes?b("MessengerHotLikeIconSVGM4React.bs").makeWithGradient(this.props.thread):b("React").createElement(i,{color:this.props.customColor});return b("React").createElement("div",{className:"_4a9g _576q"},a)};a.prototype.$7=function(a,b,c,d){d=Math.floor(d/c);var e;for(var f=0;f<d;f++)e=f%2?a:b,this.$6.to("rotateZ",e).duration(c).checkpoint()};a.propTypes={customLike:c.object,forGameChat:c.bool,since:c.number};e.exports=a}),null);
__d("ChatSpeakingStickerReact.bs",["ReasonReact.bs","ChatSpeakingSticker.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("ChatSpeakingSticker.react"),{videoURI:a,videoSize:c},d)}f.make=a}),null);
__d("MercuryAttachmentPayload.bs",["bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){c=c!==void 0?b("bs_js_primitive").valFromOption(c):null;return{app_attribution:null,attach_type:a,deduplication_key:null,description:null,icon_type:null,key:c,large_preview_height:null,large_preview_width:null,large_preview_url:null,media:null,metadata:null,message_file_fbid:null,name:null,photo_encodings:null,preview_height:null,preview_uploading:null,preview_url:null,preview_width:null,rel:null,share:null,source:null,target:null,thumbnail_url:null,upload_id:null,uri:null,url:d,video_title:null}}f.create=a}),null);
__d("MessengerAttachmentViewer",["Bootloader","MessagesViewer","React","Run","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={renderVideo:function(a){b("Bootloader").loadModules(["MessagingVideoViewer.react","MessengerForwardAttachmentDialogReact.bs"],function(c,d){d=d.jsComponent;b("MessagesViewer").renderVideo(b("React").createElement(c,babelHelpers["extends"]({},a,{forwardDialogComponent:d})))},"MessengerAttachmentViewer")},bootstrapWithConfig:function(a,c){b("Bootloader").loadModules(["SpotlightMessagesViewer","MessengerForwardAttachmentDialogReact.bs"],function(d,e){e=e.jsComponent;b("MessagesViewer").renderSpotlight(a,c,d,e)},"MessengerAttachmentViewer")},preload:function(){b("Run").onAfterLoad(function(){b("Bootloader").loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","MessengerForwardAttachmentDialogReact.bs"],b("emptyFunction"),"MessengerAttachmentViewer")})}};e.exports=a}),null);
__d("SphericalPhotoViewerInMessengerThreadBootloaded.react",["cx","BootloadedComponent.react","CssBackgroundImage.react","JSResource","PhotoProjection","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("PhotoProjection").PERSPECTIVE;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){__p&&__p();if(this.props.photoEncodings&&this.props.thumbnail){var a=this.props.photoEncodings.find(function(a){return a.projection_type===i}),c=null,d=null;if(a&&a.thumbnails&&a.thumbnails.length>0){a=a.thumbnails;c=a[0]?a[0].uri:null;d=a[1]?a[1].uri:null}if(this.props.useRenderer&&this.props.width&&this.props.height&&this.props.fbid){a=d||c||this.props.thumbnail;return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SphericalPhotoViewerInMessengerThreadWrapper.react").__setRef("SphericalPhotoViewerInMessengerThreadBootloaded.react"),bootloadPlaceholder:b("React").createElement(b("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:a,className:"_3v3t"}),height:this.props.height,width:this.props.width,fbid:this.props.fbid,thumbnail:a,photoEncodings:this.props.photoEncodings,isVisible:this.props.isVisible,onClickHandler:this.props.onClickHandler})}else{a=c||d||this.props.thumbnail;return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SphericalPhotoMessengerThumbnail.react").__setRef("SphericalPhotoViewerInMessengerThreadBootloaded.react"),bootloadPlaceholder:b("React").createElement(b("CssBackgroundImage.react"),{backgroundPosition:"center",imageURI:a,className:"_3v3t"}),photoEncodings:this.props.photoEncodings,thumbnail:a})}}return null};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MessengerSphericalPhotoReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","SphericalPhotoViewerInMessengerThreadBootloaded.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){return b("ReasonReact.bs").wrapJsForReason(b("SphericalPhotoViewerInMessengerThreadBootloaded.react"),{height:b("bs_js_null_undefined").fromOption(a),width:b("bs_js_null_undefined").fromOption(c),fbid:b("bs_js_null_undefined").fromOption(d),thumbnail:b("bs_js_null_undefined").fromOption(e),photoEncodings:b("bs_js_null_undefined").fromOption(f),isVisible:b("Utils.bs").optionBoolToBool(g),onClickHandler:h,useRenderer:i},j)}f.make=a}),null);
__d("MessengerPhotoReact.bs",["cx","fbt","bs_curry","Image.bs","React","Utils.bs","cssURL","Link.react","ReasonReact.bs","joinClasses","bs_js_primitive","bs_caml_primitive","MercuryAttachmentType","MessengerSpinnerReact.bs","bs_caml_builtin_exceptions","MessengerSphericalPhotoReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a,c){__p&&__p();var d=a.metadata;if(d==null)return null;else if(a.attach_type===b("MercuryAttachmentType").VIDEO){var e=c&&!(d.large_preview==null);if(e)return d.large_preview;else return d.inbox_preview}else if(c)return a.large_preview_url;else return a.preview_url}function j(a){if(a==null)return[null,null];else return[a.width,a.height]}function k(a){__p&&__p();var c=window.screen.width>1800;if(b("Utils.bs").isTruthy(a.preview_uploading)){var d=function(b,c){var a=!(b==null);if(a)return b;else return c},e=c&&!(a.large_preview_url==null);if(e)return[d(a.large_preview_width,480),d(a.large_preview_height,480),a.large_preview_url,c];else return[d(a.preview_width,280),d(a.preview_height,280),a.preview_url,c]}else{e=i(a,c);d=!(e==null);var f=a.metadata;if(d&&!(f==null)){d=c&&!(f.large_size==null);d=d?f.large_size:f.inbox_size;f=j(d);return[f[0],f[1],e,c]}else d=1;if(d===1)if(a.preview_url==null){f=a.media;if(f==null)return void 0;else{e=!(f.playable==null)&&!(f.animated_image==null);if(e){d=j(f.animated_image_size);return[d[0],d[1],f.animated_image,c]}else{e=j(f.image_size);return[e[0],e[1],f.image,c]}}}else{d=c&&!(a.large_preview_url==null);if(d)return[a.large_preview_width,a.large_preview_height,a.large_preview_url,c];else return[a.preview_width,a.preview_height,a.preview_url,c]}}}function l(a){__p&&__p();var c=function(a){return""+(String(a)+"")};if(b("Utils.bs").isTruthy(a.preview_uploading)){var d=!(a.preview_url==null);return c(d?0:280)}else{var e=function(a){var b=a[1];a=a[0];if(!(a==null)&&!(b==null))return[a,b]};d=function(a){if(a!==void 0){a=a;return e([a[0],a[1]])}};var f=!(a.media==null);f=f?d(k(a)):e([a.preview_width,a.preview_height]);if(f!==void 0){d=f;return c(b("bs_caml_primitive").caml_float_min(d[1]*b("bs_caml_primitive").caml_float_min(1,450/d[0]),450))}else return void 0}}function m(a,c,d,e,f){b("Utils.bs").isTruthy(e.preview_uploading);e=a[2];if(e==null||!f)return null;else{f=a[3];a=f?window.screen.height*.7:window.screen.height*.65;f={maxHeight:""+(String(a)+""),maxWidth:"100%",width:"100%"};return b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(b("joinClasses")(d,c?"":"_5pf5"),"",void 0,void 0,e,void 0,void 0,void 0,b("bs_js_primitive").some(f),[]))}}var n=b("ReasonReact.bs").statelessComponent("MessengerPhoto");function a(a,c,d,e,f,g,i){__p&&__p();var j=a!==void 0?a:"";return[n[0],n[1],n[2],n[3],function(){if(f!==void 0)return b("bs_curry")._1(f,0);else return 0},n[5],n[6],n[7],function(){__p&&__p();var a=k(c);if(a!==void 0){a=a;var f=c.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE,n=!(c.app_attribution==null),o=c.photo_encodings;o=o==null?!1:o.length!==0;var p=(!f||!d)&&!o;if(p){p=a[2];p=p==null?void 0:b("cssURL")(p);var q=d?l(c):void 0;p=[p,q]}else p=[void 0,void 0];q={};var r=p[0];r!==void 0&&(q.backgroundImage=b("bs_js_primitive").valFromOption(r));r=p[1];r!==void 0&&(q.minHeight=b("bs_js_primitive").valFromOption(r));p=q;r=b("Utils.bs").isTruthy(c.preview_uploading);q=r?b("React").createElement("span",{className:"_7atr"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,void 0,void 0,[]))):null;r=f?b("MercuryAttachmentType").ANIMATED_IMAGE:void 0;var s=function(){if(g!==void 0)return b("bs_curry")._1(g,c);else return 0},t=function(a){a.preventDefault();return s(0)};if(o){var u=a[2],v=c.metadata,w;if(v==null)w=void 0;else{v=v.fbid;w=v==null?void 0:b("bs_js_primitive").some(v)}v=c.photo_encodings;w=b("ReasonReact.bs").element(void 0,void 0,b("MessengerSphericalPhotoReact.bs").make(400,400,w,u==null?void 0:b("bs_js_primitive").some(u),v==null?void 0:b("bs_js_primitive").some(v),e,s,d,[]))}else w=m(a,d&&f,(n?"_mxz":"")+(d&&!n?" _52mr":"")+(d&&!n?" _1byr":""),c,d);u={"aria-label":h._("Open photo"),className:"_4tsl",children:i};v=b("bs_js_primitive").nullable_to_opt(a[2]);v!==void 0&&(u.href=b("bs_js_primitive").valFromOption(v));return b("React").cloneElement(b("React").createElement("div",{className:b("joinClasses")(j,"_4tsk"+(n?" _mxz":"")+(d&&!n?" _52mr":"")+(d&&!n?" _1byr":"")+(b("Utils.bs").isTruthy(c.preview_uploading)&&a[2]==null?" _3etv":"")+(o&&!d?" _3603":"")),role:"presentation",style:p,onClick:t}),{"data-testid":r},b("React").createElement("div",{className:o&&!d?"_64ks":""}),b("React").createElement(b("Link.react"),u),w,q)}else return null},n[9],n[10],n[11],n[12]]}c=280;d=480;e=1800;g=450;f.preview_thumbnail_size=c;f.preview_large_size=d;f.large_window_width=e;f.max_photo_width=g;f.getSrcFromAttachment=i;f.sizeToWidthHeight=j;f.extractPreviewMetadata=k;f.getMinHeightForAttachment=l;f.getImageFromMetadata=m;f.component=n;f.make=a}),null);
__d("MessengerSharedMediaActions",["MessengerFluxReduceDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CURRENT_LOADED:null,DELETE_PHOTOS:null,LATEST_LOADED:null,LOAD_CURRENT:null,LOAD_MORE_LATEST:null,LOAD_MORE_PREVIOUS:null,PREVIOUS_LOADED:null}),h="MessengerSharedMedia";a={Types:g,Namespace:h,currentLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.CURRENT_LOADED,namespace:h,data:a})},deletePhotos:function(a,c){b("MessengerFluxReduceDispatcher").dispatch({type:g.DELETE_PHOTOS,namespace:h,threadFBID:a,photoFBIDs:c})},loadCurrent:function(a,c){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_CURRENT,namespace:h,threadFBID:a,photoID:c})},loadMorePrevious:function(a,c,d){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_MORE_PREVIOUS,namespace:h,threadFBID:a,afterCursor:c,first:d})},loadMoreLatest:function(a,c,d){b("MessengerFluxReduceDispatcher").dispatch({type:g.LOAD_MORE_LATEST,namespace:h,threadFBID:a,beforeCursor:c,last:d})},previousLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.PREVIOUS_LOADED,namespace:h,data:a})},latestLoaded:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:g.LATEST_LOADED,namespace:h,data:a})}};e.exports=a}),null);
__d("MessengerThreadSharedMediaAfterWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1668947383157276"};c.getQueryID=function(){"use strict";return"515216185516880"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerThreadSharedMediaBeforeWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1712143858865110"};c.getQueryID=function(){"use strict";return"1694317194012102"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerThreadSharedMediaFindWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a;a=babelHelpers.inherits(c,b("WebGraphQLQueryBase"));a&&a.prototype;c.__getDocID=function(){"use strict";return"1933185426727404"};c.getQueryID=function(){"use strict";return"237087923629184"};function c(){"use strict";a.apply(this,arguments)}return c}()}),null);
__d("MessengerSharedMediaReducer",["MessengerSharedMediaActions","MessengerThreadSharedMediaHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerSharedMediaActions").Types;function a(a,c){__p&&__p();switch(c.type){case g.LOAD_CURRENT:var d=a.get("sharedMedia").get(c.threadFBID);if(d){d=d.edges.find(function(a){return a.node.legacy_attachment_id===c.photoID});if(d)return a}d=a.get("isLoading").get(c.threadFBID);if(!!d&&d.curr)return a;d=l(a,c.threadFBID,"curr",!0);b("MessengerThreadSharedMediaHelper").search(c.threadFBID,c.photoID,function(a){return b("MessengerSharedMediaActions").currentLoaded(a)});return d}return a}function c(a,c){__p&&__p();switch(c.type){case g.LOAD_MORE_PREVIOUS:var d=a.get("isLoading").get(c.threadFBID);if(!!d&&d.prev)return a;d=l(a,c.threadFBID,"prev",!0);if(d===null)return a;b("MessengerThreadSharedMediaHelper").loadMorePrevious(c.threadFBID,c.afterCursor,c.first,function(a){return b("MessengerSharedMediaActions").previousLoaded(a)});return d}return a}function d(a,c){__p&&__p();switch(c.type){case g.LOAD_MORE_LATEST:var d=a.get("isLoading").get(c.threadFBID);if(!!d&&d.latest)return a;d=l(a,c.threadFBID,"latest",!0);if(d===null)return a;b("MessengerThreadSharedMediaHelper").loadMoreLatest(c.threadFBID,c.beforeCursor,c.last,function(a){return b("MessengerSharedMediaActions").latestLoaded(a)});return d}return a}function f(a,c){__p&&__p();var d;switch(c.type){case g.CURRENT_LOADED:c=c.data;var e=Object.keys(c)[0];c=(c=c[e])!=null?c.message_shared_media:c;d=(d=c)!=null?(d=d.edges)!=null?d.length:d:d;var f=l(a,e,"curr",!1);if(d!==0&&c){d=k(a.get("sharedMedia").get(e),c,0);d=a.get("sharedMedia").set(e,d);f=f.set("sharedMedia",d);d=c.edges[0];b("MessengerThreadSharedMediaHelper").loadMorePrevious(e,d.cursor,10,function(a){return b("MessengerSharedMediaActions").previousLoaded(a)});b("MessengerThreadSharedMediaHelper").loadMoreLatest(e,d.cursor,10,function(a){return b("MessengerSharedMediaActions").latestLoaded(a)})}return f}return a}function h(a,b){__p&&__p();switch(b.type){case g.PREVIOUS_LOADED:b=b.data;var c=Object.keys(b)[0];b=b[c].message_shared_media;var d=l(a,c,"prev",!1);b=k(a.get("sharedMedia").get(c),b,1);c=a.get("sharedMedia").set(c,b);d=d.set("sharedMedia",c);return d}return a}function i(a,b){__p&&__p();switch(b.type){case g.LATEST_LOADED:b=b.data;var c=Object.keys(b)[0];b=b[c].message_shared_media;var d=l(a,c,"latest",!1);b=k(a.get("sharedMedia").get(c),b,-1);c=a.get("sharedMedia").set(c,b);d=d.set("sharedMedia",c);return d}return a}function j(a,b){__p&&__p();switch(b.type){case g.DELETE_PHOTOS:var c=b.threadFBID;b=b.photoFBIDs;var d=a.get("sharedMedia").get(c);if(!d||!d.edges)break;var e=new Set(b.map(function(a){return a.toString()}));d.edges=d.edges.filter(function(a){return!e.has(a.node.legacy_attachment_id)});b=a.get("sharedMedia").set(c,d);c=a.set("sharedMedia",b);return c}return a}function k(a,b,c){__p&&__p();var d={};d.count=b.count;if(c===1&&a){var e=a.edges;d.has_previous_page=a.has_previous_page;d.has_next_page=b.page_info.has_next_page;b.edges.length>0?d.edges=e.concat(b.edges):d.edges=e}else if(c===-1&&a){e=a.edges;d.has_previous_page=b.page_info.has_previous_page;d.has_next_page=a.has_next_page;b.edges.length>0?d.edges=b.edges.concat(e):d.edges=e}else d.has_previous_page=b.page_info.has_previous_page,d.has_next_page=b.page_info.has_next_page,b.edges.length>0&&(d.edges=b.edges);return d}function l(a,b,c,d){var e=a.get("isLoading").get(b);e===void 0?(e={},e[c]=d):e[c]=d;c=a.set("isLoading",a.get("isLoading").set(b,e));return c}f={currentLoaded:f,deletePhotos:j,latestLoaded:i,loadCurrent:a,loadMoreLatest:d,loadMorePrevious:c,previousLoaded:h};e.exports=f}),null);
__d("MessengerSharedMediaState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={sharedMedia:b("immutable").Map({}),isLoading:b("immutable").Map({})};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerSharedMediaStore",["FluxReduceStore","MessengerFluxReduceDispatcher","MessengerSharedMediaActions","MessengerSharedMediaReducer","MessengerSharedMediaState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=Object.keys(b("MessengerSharedMediaReducer"));g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("MessengerSharedMediaState"))()};a.prototype.reduce=function(a,c){if(c.namespace!==b("MessengerSharedMediaActions").Namespace)return a;h.forEach(function(d){a=b("MessengerSharedMediaReducer")[d](a,c)});return a};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("MessengerFluxReduceDispatcher"))}),null);
__d("MessengerSharedPhotosAlbumViewPhotoReact.bs",["bs_curry","React","cssURL","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("ReasonReact.bs").statelessComponent("MessengerSharedPhotosAlbumViewPhotoReact");function a(a,c,d,e,f){return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){return b("React").createElement("a",{className:a,style:{backgroundImage:b("cssURL")(e)},href:"#",onClick:function(){return b("bs_curry")._1(d,c)}},f)},g[9],g[10],g[11],g[12]]}f.component=g;f.make=a}),null);
__d("MessengerSharedPhotosAlbumViewVScrollReact.bs",["cx","bs_array","bs_curry","React","bs_string","ReactDOM","Animation","bs_caml_array","ReasonReact.bs","bs_js_primitive","bs_caml_builtin_exceptions","MessengerSharedMediaActions","MessengerSharedPhotosAlbumViewPhotoReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){var c=a[1],d=c.length;if(d<48){b("MessengerSharedMediaActions").loadMorePrevious(a[0],b("bs_caml_array").caml_array_get(c,c.length-1|0).cursor,48);return 0}else return 0}function i(a){if(a!==void 0){a=b("bs_js_primitive").valFromOption(a);return(a.scrollTop+a.clientHeight|0)>=(a.scrollHeight-20|0)}else throw b("bs_caml_builtin_exceptions").not_found}function j(a){if(a!==void 0)return b("bs_js_primitive").valFromOption(a).scrollTop<=20;else throw b("bs_caml_builtin_exceptions").not_found}function k(a){if(a!==void 0)return b("bs_js_primitive").valFromOption(a).clientHeight;else throw b("bs_caml_builtin_exceptions").not_found}function l(a,c){if(a!==void 0){new(b("Animation"))(b("bs_js_primitive").valFromOption(a)).to("scrollTop",c).duration(200).go();return 0}else return 0}function m(a){var c=a[2][0];if(c!==void 0)return l(a[1][0],b("ReactDOM").findDOMNode(b("bs_js_primitive").valFromOption(c)).offsetTop-70|0);else return 0}function n(a,c){__p&&__p();a=c[2];var d=a[3],e=a[1],f=a[0];c=c[1];var g=e.length;if(i(c[1][0]))if(g<a[2]&&!d.prev){b("MessengerSharedMediaActions").loadMorePrevious(f,b("bs_caml_array").caml_array_get(e,e.length-1|0).cursor,48);return 0}else return 0;else if(j(c[1][0])&&!d.latest){b("MessengerSharedMediaActions").loadMoreLatest(f,b("bs_caml_array").caml_array_get(e,0).cursor,48);return 0}else return 0}function o(a){__p&&__p();var c=a[1],d=c[1][0];if(d!==void 0){var e=b("bs_curry")._1(a[0],n);b("bs_js_primitive").valFromOption(d).addEventListener("scroll",e);b("bs_curry")._1(a[4],function(){var a=c[1][0];if(a!==void 0)return b("bs_js_primitive").valFromOption(a).removeEventListener("scroll",e);else return 0})}h(a[2]);d=function(){__p&&__p();if(k(c[3][0])>0){m(c);var a=c[0][0];if(a!==void 0){clearInterval(b("bs_js_primitive").valFromOption(a));c[0][0]=void 0;return 0}else return 0}else return 0};c[0][0]=b("bs_js_primitive").some(setInterval(d,200));return 0}function p(a){a=a[1][0][0];if(a!==void 0){clearInterval(b("bs_js_primitive").valFromOption(a));return 0}else return 0}var q=b("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerSharedPhotosAlbumViewVScrollReact");function r(a,c){c[1][1][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function s(a,c){c[1][3][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function t(a,c){c[1][2][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function u(a,c,d,e,f,g,h){__p&&__p();var i=function(a){__p&&__p();return b("bs_array").map(function(d){__p&&__p();d=d.node;var e=d.photo_encodings;e=e==null?!1:e.length!==0;var f=d.photo_encodings,h,i=0;if(e&&!(f==null)){f=f.find(function(a){return a.projection_type==="perspective"});if(f!==void 0)if(f.thumbnails.length!==0){f=f.thumbnails;h=b("bs_caml_array").caml_array_get(f,0).uri}else{f=d.image1;h=f==null?void 0:f.uri}else{f=d.image1;h=f==null?void 0:f.uri}}else i=1;if(i===1){f=d.image1;h=f==null?void 0:f.uri}if(h!==void 0){i=d.legacy_attachment_id===g;return b("ReasonReact.bs").element(d.legacy_attachment_id,i?b("bs_curry")._1(a[0],t):void 0,b("MessengerSharedPhotosAlbumViewPhotoReact.bs").make("_3bly"+(e?" _3603":""),d.legacy_attachment_id,c,h,[b("React").createElement("div",{key:b("bs_string").concat("_",[d.legacy_attachment_id,["spherical_gradient",0]]),className:e?"_64ks":""})]))}else return null},d)};return[q[0],q[1],q[2],q[3],o,q[5],p,q[7],function(a){return b("React").createElement("div",{ref:b("bs_curry")._1(a[0],r),className:"_3xo8",onScroll:b("bs_curry")._1(a[0],n)},b("React").createElement("div",{ref:b("bs_curry")._1(a[0],s),className:"_3xoa"},i(a)))},function(){return[[void 0],[void 0],[void 0],[void 0]]},[e,d,f,a],function(a,b){return 0},q[12]]}a=b("ReasonReact.bs").wrapReasonForJs(q,function(a){return u(a.isLoading,a.onClick,a.sharedPhotos,a.threadID,a.totalCount,a.viewedPhoto,[])});c=200;d=48;e=6;g=20;var v=70;f.animationDuration=c;f.imagesToLoad=d;f.photosPerRow=e;f.scrollToEdgeTolerance=g;f.headerHeight=v;f.graduallyLoadPhotos=h;f.isScrolledToBottom=i;f.isScrolledToTop=j;f.getScrollHeight=k;f.scrollTo=l;f.autoScrollWhenLoaded=m;f.handleScroll=n;f.didMount=o;f.willUnmount=p;f.component=q;f.setRefChildContainer=r;f.setRefScrollable=s;f.setRefChild=t;f.make=u;f.jsComponent=a}),null);
__d("MessengerSharedPhotosAlbumView.react",["cx","fbt","MessengerPhotoViewCloseLink.react","MessengerSharedPhotosAlbumViewVScrollReact.bs","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerSharedPhotosAlbumViewVScrollReact.bs").jsComponent;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$2=function(){this.props.onClick(this.props.viewedPhoto)}.bind(this),b}a.prototype.render=function(){return b("React").createElement("div",{className:"_3bl- _5l-3",ref:"window"},this.$1(),b("React").createElement(j,{isLoading:this.props.isLoading,onClick:this.props.onClick,sharedPhotos:this.props.sharedPhotos,threadID:this.props.threadID,totalCount:this.props.totalCount,viewedPhoto:this.props.viewedPhoto}))};a.prototype.$1=function(){return b("React").createElement("div",{className:"_3bm0 _5l-3",ref:"header"},b("React").createElement(b("ShimButton.react"),{className:"_3bm2",onClick:this.$2},b("React").createElement("div",{className:"_3bm3"}),h._("Back to Photo")),b("React").createElement("div",{className:"_3bm4"},h._("Shared photos")),b("React").createElement(b("MessengerPhotoViewCloseLink.react"),{onClick:this.props.onCloseSharedPhotos}))};a.propTypes={onClick:c.func.isRequired,onCloseSharedPhotos:c.func.isRequired,sharedPhotos:c.arrayOf(c.object).isRequired,totalCount:c.number.isRequired,viewedPhoto:c.string.isRequired,threadID:c.string.isRequired,isLoading:c.object.isRequired};e.exports=a}),null);
__d("MessengerSharedPhotosAlbumViewContainer.react",["FluxContainer","MessengerSharedMediaStore","MessengerSharedPhotosAlbumView.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={edges:[],count:0,isLoading:{}},b}a.getStores=function(){return[b("MessengerSharedMediaStore")]};a.calculateState=function(a,c){a=b("MessengerSharedMediaStore").getState();var d=a.sharedMedia;return{edges:d.get(c.threadID).edges,count:d.get(c.threadID).count,isLoading:a.isLoading.get(c.threadID)}};a.prototype.render=function(){return this.state.edges.length===0?null:b("React").createElement(b("MessengerSharedPhotosAlbumView.react"),{onClick:this.props.onClick,onCloseSharedPhotos:this.props.onCloseSharedPhotos,sharedPhotos:this.state.edges,totalCount:this.state.count,viewedPhoto:this.props.viewedPhoto,threadID:this.props.threadID,isLoading:this.state.isLoading})};a.propTypes={onClick:c.func.isRequired,onCloseSharedPhotos:c.func.isRequired,viewedPhoto:c.string.isRequired,threadID:c.string};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MessageShareType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IMAGE:"image",PLATFORM_SHARE_CTA:"platform_share_CTA"})}),null);
__d("MessengerComposeViewHeaderReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerComposeViewHeader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k){return b("ReasonReact.bs").wrapJsForReason(b("MessengerComposeViewHeader.react"),{className:b("bs_js_null_undefined").fromOption(a),forceHideClearButton:c,onClear:b("bs_js_null_undefined").fromOption(d),onAddRecipient:e,onRemoveRecipient:f,onResize:g,recipients:h,viewer:i,isWorkUser:j},k)}f.make=a}),null);
__d("XMessagingForwardAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/forward/",{})}),null);
__d("XMessengerPlatformShareCTAController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/platform/share/",{})}),null);
__d("MessengerForwardAttachmentDialogReact.bs",["ix","cx","fbt","bs_block","bs_curry","Image.bs","React","immutable","CurrentUser","fbglyph","ReasonReact.bs","AsyncRequest","bs_js_primitive","MercuryLocalIDs","MessageShareType","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerSpinnerReact.bs","MessengerDialogBodyReact.bs","MessengerComposeViewHeaderReact.bs","XMessengerPlatformShareCTAController","XMessagingForwardAttachmentController"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=i._("Send"),k=b("ReasonReact.bs").reducerComponent("MessengerForwardAttachmentDialogReact");function l(a,c,d){new(b("AsyncRequest"))(a.getURIBuilder().getURI()).setMethod("POST").setHandler(d).setData(c).send();return 0}function m(a,c,d,e,f,h,m){__p&&__p();var n=function(a){if(a)return 0;else{b("MessengerDialogs.bs").removeDialog(void 0,0);return b("bs_curry")._1(c,0)}},o=function(c,e){__p&&__p();var f=e[3];c=function(a){if(a.payload.success)return b("bs_curry")._1(f,2);else return b("bs_curry")._1(f,b("bs_block").__(2,[b("bs_js_primitive").nullable_to_opt(a.payload.error)]))};var g={};e[1][0].forEach(function(c,a,d){g[String(b("MercuryLocalIDs").generateOfflineThreadingID(void 0))]=c.getUniqueID();return!0});var i=0;h!==void 0&&d!==void 0&&b("bs_js_primitive").valFromOption(h)===b("MessageShareType").PLATFORM_SHARE_CTA?l(b("XMessengerPlatformShareCTAController"),{cta_id:a,message_id:b("bs_js_primitive").valFromOption(d),recipient_map:g},c):i=1;i===1&&l(b("XMessagingForwardAttachmentController"),{attachment_id:a,recipient_map:g},c);return b("bs_curry")._1(e[3],1)};return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],function(a){__p&&__p();var c=a[1],d=c[2],h=c[1];if(d)d=b("React").createElement("div",void 0,b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,void 0,void 0,[])),b("React").createElement("span",{className:"_1e1n _3-99"},i._("Sending")));else if(h!==void 0){var k=g("141787");d=b("React").createElement("div",{className:"_1e1n"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,k,void 0,void 0,void 0,void 0,[])),b("React").createElement("span",{className:"_3-99"},h))}else d=null;k=c[0].isEmpty()||c[2];return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,n,void 0,e,void 0,void 0,560,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._2(b("MessengerDialogReact.bs").Title[0],void 0,f)))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerComposeViewHeaderReact.bs").make("_1e1o",!1,function(){return b("bs_curry")._1(a[3],0)},function(c){return b("bs_curry")._1(a[3],b("bs_block").__(0,[c]))},function(c){return b("bs_curry")._1(a[3],b("bs_block").__(1,[c]))},function(){return 0},c[0],b("CurrentUser").getID(),b("CurrentUser").isWorkUser(),[]))])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,b("bs_js_primitive").some(d),[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](2,j,k,void 0,b("bs_curry")._1(a[0],o),0,void 0,void 0,k?i._("Disabled send button"):j,[]))]))]))},function(){return[b("immutable").List([]),void 0,!1]},k[10],function(a){__p&&__p();if(typeof a==="number")switch(a){case 0:return function(a){return b("bs_block").__(0,[[b("immutable").List([]),a[1],a[2]]])};case 1:return function(a){return b("bs_block").__(0,[[a[0],void 0,!0]])};case 2:b("bs_curry")._1(c,0);return function(){return b("bs_block").__(0,[[b("immutable").List([]),void 0,!1]])}}else switch(a.tag|0){case 0:var d=a[0];return function(a){return b("bs_block").__(0,[[a[0].push(d),a[1],a[2]]])};case 1:var e=a[0];return function(a){return b("bs_block").__(0,[[a[0].filter(function(a){return a!==e}),a[1],a[2]]])};case 2:var f=a[0];return function(a){return b("bs_block").__(0,[[a[0],f,!1]])}}},k[12]]}a=b("ReasonReact.bs").wrapReasonForJs(k,function(a){return m(a.attachmentID,a.onClose,b("bs_js_primitive").nullable_to_opt(a.messageID),a.shown,a.title,b("bs_js_primitive").nullable_to_opt(a.shareType),[])});f.sendButtonLabel=j;f.component=k;f.sendData=l;f.make=m;f.jsComponent=a}),null);
__d("MessengerPhotoInfoDialog.react",["cx","fbt","MercuryIDs","MercuryTimestamp","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogHeaderReact.re","MessengerDialogs.bs","MessengerDialogTitleReact.re","MessengerEnvironment","MessengerParticipants.bs","MessengerSpinner.react","React","RelayClassic_DEPRECATED","XUIDialog.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react","react-relay/classic/query/RelayQL"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerContactImageReact.bs").jsComponent,k=b("MessengerDialogHeaderReact.re").component,l=b("MessengerDialogTitleReact.re").component;c=b("React").PropTypes;var m=54;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$5=function(a){a.preventDefault(),this.props.showHeader&&this.props.showHeader(),b("MessengerDialogs.bs").removeDialog()}.bind(this),this.$4=function(a){a||(this.props.showHeader&&this.props.showHeader(),this.props.closeInfo())}.bind(this),c}a.prototype.render=function(){return!this.props.fullMedia?null:b("MessengerEnvironment").messengerui?this.$1():this.$2()};a.prototype.$3=function(){var a=this.props.fullMedia;a=a.creator;return a?a.name:b("MessengerParticipants.bs").getDefaultName().toString()};a.prototype.$1=function(){var a=this.props.fullMedia;return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.$4,ref:"dialog",type:"default",width:504},b("React").createElement(k,null,b("React").createElement(l,null,h._("Info")),b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",label:h._("Done"),onClick:this.$5,type:"primary"})),b("React").createElement("div",{className:"_2zn1"},b("React").createElement("div",{className:"_2zn2"},h._("Uploaded by")),b("React").createElement("div",{className:"_2zn4"},b("React").createElement("div",{className:"_2zn5"},this.$3()),b("React").createElement("div",{className:"_2zn6"},b("MercuryTimestamp").getPreciseTimestamp(a.creation_time*1e3))),b("React").createElement("div",{className:"_2zn7"},this.showProfilePic())),this.$6(),this.$7())};a.prototype.$2=function(){var a=this.props.fullMedia;return b("React").createElement(b("XUIDialog.react"),{onToggle:this.$4,shown:this.props.infoOpen,ref:"dialog",type:"serif",width:504},b("React").createElement(b("XUIDialogHeader.react"),null,b("React").createElement(b("XUIDialogHeaderTitle.react"),null,h._("Info"))),b("React").createElement("div",{className:"_2zn1"},b("React").createElement("div",{className:"_2zn2"},h._("Uploaded by")),b("React").createElement("div",{className:"_2zn4"},b("React").createElement("div",{className:"_2zn5"},this.$3()),b("React").createElement("div",{className:"_2zn6"},b("MercuryTimestamp").getPreciseTimestamp(a.creation_time*1e3))),b("React").createElement("div",{className:"_2zn7"},this.showProfilePic())),this.$6(),this.$7())};a.prototype.$7=function(){__p&&__p();var a=this.props.fullMedia.exif_data,c="";if(a){a.aperture&&(c=a.aperture+" ");if(a.focal_length){var d=a.focal_length.split("/");d=parseInt(d[0],10)/(parseInt(d[1],10)||1);c+=d+"mm "}a.iso&&(c+="ISO "+a.iso)}return!c.length?null:b("React").createElement("div",{className:"_2zn1"},b("React").createElement("div",{className:"_2zn2"},h._("Camera")),b("React").createElement("div",{className:"_2zn4"},b("React").createElement("div",{className:"_2zn5"},a.model||"Camera"),b("React").createElement("div",{className:"_2zn6"},c)))};a.prototype.$6=function(){var a=this.props.fullMedia,c="";a.filesize>1e6?c=(a.filesize/1e6).toFixed(2)+"MB":a.filesize>1e3?c=(a.filesize/1e3).toFixed(2)+"KB":a.filesize>0&&(c=a.filesize+"B");var d=a.__typename==="MessageImage"?(a.original_dimensions.x*a.original_dimensions.y/1e6).toFixed(2)+"MP":"";return b("React").createElement("div",{className:"_2zn1"},b("React").createElement("div",{className:"_2zn2"},h._("Details")),b("React").createElement("div",{className:"_2zn4"},b("React").createElement("div",{className:"_2zn5"},a.filename),b("React").createElement("div",{className:"_2zn6"},d+" "+a.original_dimensions.x+" x "+a.original_dimensions.y+" "+c)))};a.prototype.showProfilePic=function(){__p&&__p();var a=this.props.fullMedia;if(!a)return b("React").createElement(b("MessengerSpinner.react"),null);else{a=a.creator;if(!a)return b("React").createElement(b("MessengerSpinner.react"),null);a=b("MercuryIDs").getParticipantIDFromUserID(a.id);a=b("MessengerParticipants.bs").getNow(a);return a?b("React").createElement(j,{isMessengerUser:a.is_messenger_user,size:m,src:a.big_image_src||a.image_src}):b("React").createElement(b("MessengerSpinner.react"),null)}};a.propTypes={closeInfo:c.func,fullMedia:c.object,infoOpen:c.bool,photoID:c.string,showHeader:c.func};e.exports=b("RelayClassic_DEPRECATED").createContainer(a,{fragments:{fullMedia:function(a){return function(){return{children:[{fieldName:"__typename",kind:"Field",metadata:{isRequisite:!0},type:"String"},{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"},{children:[{fieldName:"creation_time",kind:"Field",metadata:{},type:"Time"},{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"},{fieldName:"name",kind:"Field",metadata:{},type:"String"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],fieldName:"creator",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:!0},type:"Actor"},{fieldName:"filename",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"x",kind:"Field",metadata:{},type:"Float"},{fieldName:"y",kind:"Field",metadata:{},type:"Float"}],fieldName:"original_dimensions",kind:"Field",metadata:{canHaveSubselections:!0},type:"Vect2"},{fieldName:"filesize",kind:"Field",metadata:{},type:"Int"},{children:[{fieldName:"iso",kind:"Field",metadata:{},type:"Int"},{fieldName:"aperture",kind:"Field",metadata:{},type:"String"},{fieldName:"focal_length",kind:"Field",metadata:{},type:"String"},{fieldName:"model",kind:"Field",metadata:{},type:"String"}],fieldName:"exif_data",kind:"Field",metadata:{canHaveSubselections:!0},type:"MessageImageExifData"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessageImage",type:"MessageImage"},{children:[{fieldName:"creation_time",kind:"Field",metadata:{},type:"Time"},{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"},{fieldName:"name",kind:"Field",metadata:{},type:"String"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],fieldName:"creator",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:!0},type:"Actor"},{fieldName:"filename",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"x",kind:"Field",metadata:{},type:"Float"},{fieldName:"y",kind:"Field",metadata:{},type:"Float"}],fieldName:"original_dimensions",kind:"Field",metadata:{canHaveSubselections:!0},type:"Vect2"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessageVideo",type:"MessageVideo"}],id:b("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"MessengerPhotoInfoDialog_FullMediaRelayQL",type:"Node"}}()}}})}),null);
__d("SpotlightMessagesViewerContainerRoute",["react-relay/classic/query/RelayQL","react-relay/classic/route/RelayRoute"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("react-relay/classic/route/RelayRoute"));g&&g.prototype;function a(){g.apply(this,arguments)}a.routeName="SpotlightMessagesViewerContainerRoute";a.paramDefinition={photoID:{type:"String",required:!0}};a.queries={fullMedia:function(a){return function(a){return{calls:[{kind:"Call",metadata:{type:"ID!"},name:"id",value:{kind:"CallVariable",callVariableName:"photoID"}}],children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"},b("react-relay/classic/query/RelayQL").__frag(a)]),fieldName:"node",kind:"Query",metadata:{isAbstract:!0,identifyingArgName:"id",identifyingArgType:"ID!"},name:"SpotlightMessagesViewerContainerRoute",type:"Node"}}(a.getFragment("fullMedia"))}};e.exports=a}),null);
__d("MessengerPhotoInfoDialogContainer.react",["MessengerPhotoInfoDialog.react","React","SpotlightMessagesViewerContainerRoute","react-relay/classic/container/RelayRootContainer"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerPhotoInfoDialogContainer",proptypes:{photoID:a.string.isRequired,showHeader:a.func},render:function(){var a=new(b("SpotlightMessagesViewerContainerRoute"))({photoID:this.props.photoID});return b("React").createElement(b("react-relay/classic/container/RelayRootContainer"),{Component:b("MessengerPhotoInfoDialog.react"),route:a,renderFetched:function(a){return b("React").createElement(b("MessengerPhotoInfoDialog.react"),babelHelpers["extends"]({},a,{closeInfo:this.props.closeInfo,photoID:this.props.photoID,infoOpen:this.props.infoOpen,showHeader:this.props.showHeader}))}.bind(this)})}});e.exports=c}),null);
__d("MessengerPhotoViewBottomBar.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return b("React").createElement("div",{className:"_51an _50-m _16zz"},a.children)};e.exports=a}),null);
__d("MessengerPhotoViewHScroll.react",["cx","Animation","MessengerSharedPhotoReact.re","React","SphericalPhotoUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerSharedPhotoReact.re").component,j=b("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings,k=200,l=80;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=null,b}a.prototype.componentDidMount=function(){this.$2()};a.prototype.componentDidUpdate=function(){this.$2()};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.stop(),this.$1=null};a.prototype.render=function(){__p&&__p();var a=this.props.sharedPhotos;a=a.reduce(function(a,c){__p&&__p();var d=c.node.image1===null?c.node.image:c.node.image1,e=c.node.photo_encodings?c.node.photo_encodings.length!==0:!1;if(d){d=d.uri;if(e){var f=j(c.node.photo_encodings);f=f.smallThumbnail;d=f||d}a.push(b("React").createElement("div",{className:"_4dy9",key:c.node.legacy_attachment_id},b("React").createElement(i,{className:"_42rl"+(this.props.photoID!==c.node.legacy_attachment_id?" _q1a":""),fbid:c.node.legacy_attachment_id,onClick:this.props.onScroll,uri:d,isSpherical:e})))}return a}.bind(this),[]);var c=(this.props.width-l)/2;return b("React").createElement("div",{className:"_463g"},b("React").createElement("div",{className:"_463h",ref:"childContainer"},b("React").createElement("div",{className:"_463j",style:{paddingLeft:c,paddingRight:c},ref:"scrollable"},a)))};a.prototype.$2=function(){var a=this.refs.childContainer?this.refs.childContainer.scrollLeft:0,c=this.props.sharedPhotos.findIndex(function(a){return a.node.legacy_attachment_id===this.props.photoID}.bind(this));c=c*l;this.$1||(this.$1=new(b("Animation"))(this.refs.childContainer));this.$1.from("scrollLeft",a).to("scrollLeft",c).duration(k).go()};e.exports=a}),null);
__d("MessengerPhotoViewHeader.react",["cx","fbt","MessagingForwardingButtonNUX.react","MessengerPhotoViewCloseLink.react","React","SpotlightViewerBottomBarLink"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$3=function(){this.refs.forwardNUX&&this.refs.forwardNUX.close(),this.props.showForwardDialog&&this.props.showForwardDialog()}.bind(this),b}a.prototype.render=function(){return b("React").createElement("div",{className:"_51an _50-m _3c1i _5l-3",role:"banner"},this.$1(),this.$2())};a.prototype.$2=function(){return b("React").createElement(b("MessengerPhotoViewCloseLink.react"),{onClick:this.props.onClose})};a.prototype.$1=function(){var a,c;this.props.disableForward||(a=b("React").createElement(b("SpotlightViewerBottomBarLink"),{className:"_3c1o",onClick:this.$3,ref:"forwardButton"},b("React").createElement("div",{className:"_2msr _3oo2"}),h._("Forward")),c=b("React").createElement(b("MessagingForwardingButtonNUX.react"),{contextRef:function(){return this.refs.forwardButton}.bind(this),ref:"forwardNUX"},h._("Send this image to other people in separate messages.")));return b("React").createElement("div",{key:"buttonsContainer",ref:"buttons"},b("React").createElement(b("SpotlightViewerBottomBarLink"),{ajaxify:this.props.url,className:"_3c1o",rel:"async"},b("React").createElement("div",{className:"_3ooo _2msr"}),h._("Download")),a,c,b("React").createElement(b("SpotlightViewerBottomBarLink"),{className:"_3c1o",href:"#",onClick:this.props.openInfo,ref:"moreInfo"},b("React").createElement("div",{className:"_3c1k _2msr"}),h._("Info")))};a.propTypes={disableForward:c.bool,onClose:c.func,openInfo:c.func,photoID:c.string,showForwardDialog:c.func,url:c.object};e.exports=a}),null);
__d("XMessagingVideoAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/video/",{video_id:{type:"String",required:!0},video_container_id:{type:"String",required:!0},width:{type:"Int",required:!0},height:{type:"Int",required:!0},start_muted:{type:"Bool",defaultValue:!1},no_fullscreen:{type:"Bool",defaultValue:!1},load_player_controller:{type:"Bool",defaultValue:!1},hide_controls_on_finish:{type:"Bool",defaultValue:!1},hide_url_menu_option:{type:"Bool",defaultValue:!1},is_share:{type:"Bool",defaultValue:!1},render_play_button:{type:"Bool",defaultValue:!1},start_timestamp:{type:"Int",defaultValue:0},native_thumbnail:{type:"Bool",defaultValue:!1}})}),null);
__d("MessengerVideoPlayer.react",["cx","ActorURI","AsyncRequest","BackgroundImage.react","Event","FullScreen","MessengerSpinner.react","React","ShimButton.react","SpotlightMercurySharedMediaViewer.react","SubscriptionsHandler","Vector","VideoPlayerReason","VideoPlayerReasonTransitionHelper","VideoPlayerStates","XMessagingVideoAttachmentController","cssURL","getFullScreenElement","guid","joinClasses","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i="_ox1";d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(a){__p&&__p();var c;h.constructor.call(this,a);this.$2=!0;this.$3=[];this.$4=-1;this.$5=!1;this.$6=!1;this.state={playerAPI:null,forcePause:!!((c=this.props.videoData)==null?void 0:c.disableAutoplay)};this.$10=function(a){if(!this.isVideoClicked(a))return;a.preventDefault();this.props.isOnStage?(a.stopPropagation(),this.isState(b("VideoPlayerStates").PLAYING)?this.pause(b("VideoPlayerReason").USER):this.play(b("VideoPlayerReason").USER)):(this.pause(b("VideoPlayerReason").USER),this.props.onClick&&this.props.onClick())}.bind(this);this.$11=function(a){if(!this.isRightClick(a))return;a.stopPropagation();a.preventDefault();b("setImmediate")(function(){this.props.onSelect&&this.props.onSelect()}.bind(this))}.bind(this);this.$8=function(){if(!this.$2||this.state.forcePause)return;this.$6&&(this.play(new(b("VideoPlayerReasonTransitionHelper"))(b("VideoPlayerReason").PAGE_VISIBILITY)),this.$6=!1)}.bind(this);this.$7=function(){if(!this.$2||this.state.forcePause||!(this.state.playerAPI&&this.state.playerAPI.isMuted()))return;this.$6=!!this.state.playerAPI&&this.state.playerAPI.isState(b("VideoPlayerStates").PLAYING);this.pause()}.bind(this);this.$1=b("guid")();this.$2=!((c=a.videoData)==null?void 0:c.disableAutoplay);this.props.isInThread&&(this.listeners=new(b("SubscriptionsHandler"))(),this.listeners.addSubscriptions(b("Event").listen(window,"blur",this.$7),b("Event").listen(window,"focus",this.$8)))}a.prototype.shouldComponentUpdate=function(a){var c=document.getElementById(this.$1.toString()),d=b("FullScreen").isFullScreen();if(c!=null&&d&&c.children[0].children[0]===b("getFullScreenElement")())return!1;d=!!(a.stageDimensions&&a.stageDimensions!==this.props.stageDimensions);d&&(this.$4=this.getCurrentTimePosition(),this.$5=!this.isState(b("VideoPlayerStates").PLAYING));return!this.props.videoData||a.videoData.id!==this.props.videoData.id||d};a.prototype.UNSAFE_componentWillReceiveProps=function(a){if(!this.$2)return;this.props.isInThread&&a.isVisible!==this.props.isVisible&&(a.isVisible&&!this.state.forcePause?this.play(new(b("VideoPlayerReasonTransitionHelper"))(b("VideoPlayerReason").VIDEO_VISIBILITY)):this.pause())};a.prototype.componentDidMount=function(){this.props.videoData&&this.$9()};a.prototype.componentDidUpdate=function(){this.$3.forEach(function(a){return a.abandon()}),this.$3=[],this.props.videoData&&this.$9()};a.prototype.componentWillUnmount=function(){this.pause(b("VideoPlayerReason").UNLOADED),this.seek(0),this.$3.forEach(function(a){return a.abandon()}),this.listeners&&this.listeners.release(),this.state.playerAPI&&this.state.playerAPI.detachRootNode(),this.state.playerAPI&&this.state.playerAPI.destroy&&this.state.playerAPI.destroy()};a.prototype.isVideoLoaded=function(){var a=!!this.state.playerAPI;!a;return this.isState(b("VideoPlayerStates").FALLBACK)?!1:a};a.prototype.isVideoClicked=function(a){return a.target instanceof HTMLElement?a.target.classList.contains(i):!1};a.prototype.isRightClick=function(a){a=a||window.event;return a.button===2};a.prototype.play=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.play(a)};a.prototype.pause=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.pause(a)};a.prototype.seek=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.seek(a)};a.prototype.getCurrentTimePosition=function(){return this.isVideoLoaded()&&this.state.playerAPI?this.state.playerAPI.getCurrentTimePosition():-1};a.prototype.render=function(){var a=this.props.videoData,c=b("React").createElement("div",{ref:"placeholder"},b("React").createElement(b("MessengerSpinner.react"),{color:"blue",size:b("MessengerSpinner.react").large_size})),d={};if(a&&a.url){var e=a.original_dimensions;d.backgroundImage=b("cssURL")(a.url);c=b("React").createElement("div",{ref:"placeholder"},b("React").createElement(b("BackgroundImage.react"),{className:this.props.className,width:e.x,height:e.y,loadingIndicatorStyle:"large",backgroundSize:"cover",ref:"placeholder",style:d,src:a.url}))}return b("React").createElement(b("ShimButton.react"),{className:b("joinClasses")(this.props.className,"_4-od"),id:this.$1,onClick:this.$10,onMouseDown:this.$11,style:d},c)};a.prototype.$9=function(){__p&&__p();var a=this.props.videoData;if(a){var c=a.original_dimensions;this.props.stageDimensions&&(c=b("SpotlightMercurySharedMediaViewer.react").getImageDimensionsForStage(new(b("Vector"))(a.original_dimensions.x,a.original_dimensions.y),this.props.stageDimensions));c=b("XMessagingVideoAttachmentController").getURIBuilder().setString("video_id",a.legacy_attachment_id).setString("video_container_id",this.$1).setInt("width",c.x).setInt("height",c.y).setInt("start_timestamp",this.$4>0?Math.round(this.$4):0).setBool("start_muted",a.start_muted).setBool("no_fullscreen",a.no_fullscreen).setBool("load_player_controller",!0).setBool("hide_controls_on_finish",a.hide_controls_on_finish).setBool("native_thumbnail",a.disableAutoplay).setBool("hide_url_menu_option",Boolean(a.hide_url_menu_option)).setBool("is_share",a.is_share).setBool("render_play_button",this.props.isInThread).getURI();a=this.props.attachment;a&&a.metadata&&a.metadata.pageid&&(c=b("ActorURI").create(c,a.metadata.pageid));var d=new(b("AsyncRequest"))();this.$3.push(d);d.setMethod("GET").setStatusElement(this.refs.placeholder).setURI(c).setRelativeTo(this).setReadOnly(!0).setHandler(function(a){this.$3=this.$3.filter(function(a){return a!==d})}.bind(this)).send()}};a.prototype.$12=function(){this.props.isVisible&&this.isState(b("VideoPlayerStates").FINISHED)?(this.seek(0),this.play(b("VideoPlayerReason").LOOP)):this.props.isVisible&&this.isState(b("VideoPlayerStates").PAUSED)&&!this.$6?this.setState({forcePause:!0}):this.isState(b("VideoPlayerStates").PLAYING)&&this.setState({forcePause:!1})};a.prototype.onVideoLoaded=function(){if(!this.$2)return;this.state.playerAPI&&this.state.playerAPI.addListener("stateChange",function(){return this.$12()}.bind(this));this.props.isVisible&&!this.$5&&!this.state.forcePause?this.play(b("VideoPlayerReason").AUTOPLAY):this.pause();this.$4=-1;this.$5=!1};a.prototype.isState=function(a){return!!(this.state.playerAPI&&this.state.playerAPI.isState(a))};a.propTypes={attachment:c.object,className:c.string,isInThread:c.bool,isVisible:c.bool,isOnStage:c.bool,stageDimensions:c.instanceOf(b("Vector")),videoData:c.object,onClick:c.func,onSelect:c.func};a.invokeVideoLoaded=function(a,c,d){a.$2=d,c.setAllowCrossPageTransition(!0),c.isState(b("VideoPlayerStates").LOADING)?a.stateChangeListener=c.addListener("stateChange",function(){if(!c.isState(b("VideoPlayerStates").LOADING)){if(a.state&&a.state.playerAPI)return;a.setState({playerAPI:c},a.onVideoLoaded);a.stateChangeListener&&a.stateChangeListener.remove()}}):a.setState({playerAPI:c},a.onVideoLoaded)};e.exports=a}),null);
__d("MessagingForwardAttachmentDialog.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("MessagingForwardAttachmentDialogImpl.react").__setRef("MessagingForwardAttachmentDialog.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("SpotlightMessagesViewerPagers.react",["cx","fbt","LeftRight.react","Link.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){return b("React").createElement(b("LeftRight.react"),null,b("React").createElement(b("Link.react"),{"aria-disabled":a.disablePrevArrow,"aria-label":h._("Previous"),className:"_322u"+(a.disablePrevArrow?"":" _2bbb")+" _50-m"},b("React").createElement("div",{className:(a.disablePrevArrow?"":"_4ksl")+(a.disablePrevArrow?"":" _4ksm")})),b("React").createElement(b("Link.react"),{"aria-disabled":a.disableNextArrow,"aria-label":h._("Next"),className:"_322u"+(a.disableNextArrow?"":" _2bbc")+" _50-m"},b("React").createElement("div",{className:(a.disableNextArrow?"":"_4ksl")+(a.disableNextArrow?"":" _4kso")})))};e.exports=a}),null);
__d("XMessagingPhotoDownloadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/photo/",{photo_id:{type:"String",required:!0}})}),null);
__d("XMessagingShareAttachmentDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/share/dialog/",{__asyncDialog:{type:"Int"}})}),null);
__d("SpotlightMercurySharedMediaViewer.react",["csx","cx","fbt","invariant","ActorURI","AsyncDialog","AsyncRequest","BootloadedComponent.react","ChatPhotoViewFooterHScroll.react","ChatPhotoViewHeader.react","Event","FunnelLogger","JSResource","KeyEventController","MessagingForwardAttachmentDialog.react","MessengerPhotoInfoDialogContainer.react","MessengerThreadSharedMediaHelper","MessengerVideoPlayer.react","Parent","PhotoUtils","React","SpotlightMessagesViewerPagers.react","SpotlightViewer","SpotlightViewerImage","SpotlightViewport","SubscriptionsHandler","Vector","XMessagingPhotoDownloadController","XMessagingShareAttachmentDialogController"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k;a=b("React").PropTypes;var l=88,m=30,n="WWW_MESSENGER_SHARE_TO_FB_FUNNEL",o="_4-og";c=babelHelpers.inherits(p,b("React").Component);k=c&&c.prototype;function p(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.$1=void 0,this.$2=[],this.state={hasPrevPage:!1,hasNextPage:!1,firstPhotoLoaded:!1,isLoading:!1,mediaData:[],numberInOneBatch:m,photoData:null,showForward:!1,showInfo:!1,stageDimensions:new(b("Vector"))()},this.$11=function(){return!this.state.photoData?null:b("React").createElement(b("ChatPhotoViewFooterHScroll.react"),{onScroll:this.$18,photoID:this.state.photoData.node.id,sharedPhotos:this.state.mediaData,updateNumberInOneBatch:this.$19,width:this.state.stageDimensions.x})}.bind(this),this.$19=function(a){this.setState({numberInOneBatch:a})}.bind(this),this.$18=function(a){if(!this.state.mediaData||this.state.isLoading)return;var b=this.state.mediaData.findIndex(function(b){return b.node.legacy_attachment_id===a});if(b<0)return;var c=this.state.mediaData[b];this.setState({photoData:c});this.$22(b)}.bind(this),this.$5=function(a,c){__p&&__p();if(this.state.photoData==null||this.state.isLoading)return;if(c&&!!b("Parent").bySelector(c.target,"._170l"))return;c&&c.target instanceof HTMLElement&&c.target.className===o&&this.$10();c=this.state.mediaData.findIndex(function(a){this.state.photoData!=null||j(0,1033);return a.node.legacy_attachment_id===this.state.photoData.node.legacy_attachment_id}.bind(this));if(c<0||c===this.state.mediaData.length-1&&!this.state.hasNextPage&&a)return;if(c===0&&!a){this.setState({isLoading:!0},function(){return this.$7(this.state.photoData,1,function(b){if(b===0)return;this.$5(a)}.bind(this))}.bind(this));return}var d=a?this.state.mediaData[c+1]:this.state.mediaData[c-1];this.setState({photoData:d});this.$22(c)}.bind(this),this.$10=function(){if(this.props.photoID===null)return;this.setState({photoData:null});this.props.onClosePhotoView()}.bind(this),this.$16=function(){this.setState({showForward:!0})}.bind(this),this.$20=function(){this.setState({showForward:!1})}.bind(this),this.$15=function(){this.setState({showInfo:!0})}.bind(this),this.$21=function(){this.setState({showInfo:!1})}.bind(this),this.$17=function(){this.setState({showForward:!1,showInfo:!1});b("FunnelLogger").appendAction(n,"click");var a=this.state.photoData;if(!this.$14()||!(a&&a.node))return;a=a.node.legacy_attachment_id;var c=b("XMessagingShareAttachmentDialogController").getURIBuilder().getURI();c=new(b("AsyncRequest"))(c).setData({attachment_id:a}).setMethod("POST");b("AsyncDialog").send(c)}.bind(this),this.$23=function(a,b,c){__p&&__p();var d=Object.keys(a)[0];a=a[d].message_shared_media;d=a.page_info;var e=a.edges.length;if(e!==0){var f=this.state.mediaData;switch(b){case 0:this.setState({photoData:a.edges[0],mediaData:[a.edges[0]],firstPhotoLoaded:!0});break;case 1:f=f.concat(a.edges);this.setState({hasNextPage:d.has_next_page,mediaData:f});break;case-1:f=a.edges;f=f.concat(this.state.mediaData);this.setState({mediaData:f,hasPrevPage:d.has_previous_page});break}}this.setState({isLoading:!1});c(e)}.bind(this),this.$3=function(){var a=new(b("Vector"))(b("Vector").getViewportDimensions().x,b("Vector").getViewportDimensions().y-l);return a},c}p.prototype.getDefaultProps=function(){return{enableShareToFB:!1}};p.prototype.componentDidMount=function(){this.setState({isLoading:!0,stageDimensions:this.$3()},function(){return this.$4(this.props.photoID)}.bind(this)),this.$1=new(b("SubscriptionsHandler"))(),this.$1.addSubscriptions(b("Event").listen(window,"resize",function(){this.setState({stageDimensions:this.$3()})}.bind(this)),b("KeyEventController").registerKey("LEFT",function(){this.$5(!1);return!1}.bind(this)),b("KeyEventController").registerKey("RIGHT",function(){this.$5(!0);return!1}.bind(this))),this.props.enableShareToFB&&b("FunnelLogger").startFunnel(n)};p.prototype.UNSAFE_componentWillUpdate=function(a,b){b.firstPhotoLoaded!==this.state.firstPhotoLoaded&&this.setState({isLoading:!0},function(){this.$6(b.photoData,b.numberInOneBatch,function(){}),this.$7(b.photoData,b.numberInOneBatch,function(){})}.bind(this)),b.numberInOneBatch!=this.state.numberInOneBatch&&!b.isLoading&&this.setState({isLoading:!0},function(){return this.$6(b.mediaData[b.mediaData.length-1],b.numberInOneBatch,function(){})}.bind(this))};p.prototype.componentWillUnmount=function(){this.$1&&this.$1.release(),this.$1=null,this.$2.forEach(function(a){return a.abandon()})};p.prototype.render=function(){var a=this.$8(),c=this.state.stageDimensions,d=this.state.isLoading||this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var e=this.state.mediaData.findIndex(function(a){this.state.photoData!=null||j(0,1033);return a.node.id===this.state.photoData.node.id}.bind(this));e=b("React").createElement("div",null,this.$9(),this.props.disablepaging?null:b("React").createElement(b("SpotlightMessagesViewerPagers.react"),{disablePrevArrow:e<=0&&!this.state.hasPrevPage,disableNextArrow:!this.state.hasNextPage&&e>=this.state.mediaData.length-1}));return b("React").createElement("span",null,b("React").createElement(b("SpotlightViewer"),{className:"_53vs",onHide:this.$10,open:this.props.photoID!==null,ref:"spotlightViewer",rootClassName:this.props.rootClassName},b("React").createElement(b("SpotlightViewport"),{active:!1,fadeInNOut:!0,media:a,onClick:this.$5,ref:"viewport",showLoadingIndicator:d,stageDimensions:c,useWidth:!0},e),this.$11()),this.$12(),this.$13())};p.prototype.$9=function(){if(!this.state.photoData)return null;var a=this.state.photoData;a=a.node.legacy_attachment_id;a=b("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",a).getURI();this.props.actorid&&(a=b("ActorURI").create(a,this.props.actorid));return b("React").createElement(b("ChatPhotoViewHeader.react"),{disableForward:this.props.disableForward,enableShareToFB:this.$14(),onClose:this.$10,openInfo:this.$15,ref:"photoviewheader",showForwardDialog:this.$16,showShareDialog:this.$17,url:a})};p.prototype.$12=function(){if(!this.state.photoData||!this.state.showForward)return null;var a=i._("Forward in separate messages");return b("React").createElement(b("MessagingForwardAttachmentDialog.react"),{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$20,shown:this.state.showForward,title:a})};p.prototype.$13=function(){return this.state.showInfo?b("React").createElement(b("MessengerPhotoInfoDialogContainer.react"),{closeInfo:this.$21,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id}):b("React").createElement("xhp",null)};p.prototype.$14=function(){var a=this.state.photoData;return!a?!1:!!this.props.enableShareToFB&&a.node.__typename==="MessageImage"&&a.node.image1.uri.indexOf(".gif")<0};p.prototype.$22=function(a){var b=this.state.numberInOneBatch,c=this.state.mediaData;a<=b/2?this.setState({isLoading:!0},function(){return this.$7(c[0],b,function(){})}.bind(this)):a>=c.length-b/2&&this.state.hasNextPage&&this.setState({isLoading:!0},function(){return this.$6(c[c.length-1],b,function(){})}.bind(this))};p.prototype.$4=function(a){a=b("MessengerThreadSharedMediaHelper").search(this.props.threadID,String(a),function(a){return this.$23(a,0,function(){})}.bind(this));this.$2.push(a)};p.prototype.$6=function(a,c,d){a=b("MessengerThreadSharedMediaHelper").loadMorePrevious(this.props.threadID,a.cursor,c||1,function(a){return this.$23(a,1,d)}.bind(this));this.$2.push(a)};p.prototype.$7=function(a,c,d){a=a?a.cursor:null;a=b("MessengerThreadSharedMediaHelper").loadMoreLatest(this.props.threadID,a,c||1,function(a){return this.$23(a,-1,d)}.bind(this));this.$2.push(a)};p.prototype.$8=function(){__p&&__p();if(this.state.photoData&&this.state.photoData.node){var a=this.state.photoData.node;if(a.__typename&&a.__typename==="MessageVideo")return this.$24();var c=this.state.stageDimensions,d=this.$25(a,c);if(!d)return null;if(a.photo_encodings&&a.photo_encodings.length!==0)return this.$26(a.legacy_attachment_id,d,a.photo_encodings,c);a=p.getImageDimensionsForStage(new(b("Vector"))(d.width,d.height),c);return this.$27(d,a)}else return null};p.prototype.$24=function(){return this.state.photoData?b("React").createElement(b("MessengerVideoPlayer.react"),{isOnStage:!0,isVisible:!0,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions}):null};p.prototype.$27=function(a,c){return b("React").createElement(b("SpotlightViewerImage"),{dimensions:c,ref:"image",src:a.uri})};p.prototype.$26=function(a,c,d,e){return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SpotlightViewerSphericalPhoto.react").__setRef("SpotlightMercurySharedMediaViewer.react"),bootloadPlaceholder:b("React").createElement("div",null),height:e.y,width:e.x,fbid:a,thumbnail:c.uri,photoEncodings:d,stageDimensions:this.state.stageDimensions})};p.prototype.$25=function(a,c){var d=null;a=b("PhotoUtils").getImagesFromData(a);a=a.sort(function(a,b){return a.width==null?b.width==null?0:1:b.width==null?-1:b.width-a.width});window.devicePixelRatio&&window.devicePixelRatio>1&&(c=new(b("Vector"))(c.x*window.devicePixelRatio,c.y*window.devicePixelRatio));for(var e=0;e<a.length;e++)(!d||a[e].width>=c.x||a[e].height>=c.y)&&(d=a[e]);return d};p.propTypes={disableForward:a.bool,enableShareToFB:a.bool,onClosePhotoView:a.func,photoID:a.string,rootClassName:a.string,threadID:a.string};p.getImageDimensionsForStage=function(a,c){var d=a.x;a=a.y;var e=c.x;c=c.y;var f=d/a,g=e/c;d>=e||a>=c?g<f?(d=e,a=Math.round(e/f)):g>f?(d=Math.round(c*f),a=c):(d=e,a=c):f<g?d=Math.round(a*f):a=Math.round(d/f);return new(b("Vector"))(d,a)};e.exports=p}),null);
__d("SpotlightMessengerSharedMediaViewer.react",["csx","cx","fbt","invariant","ActorURI","BootloadedComponent.react","Event","JSResource","KeyEventController","MessengerForwardAttachmentDialogReact.bs","MessengerPhotoInfoDialogContainer.react","MessengerPhotoViewBottomBar.react","MessengerPhotoViewHeader.react","MessengerPhotoViewHScroll.react","MessengerSharedMediaActions","MessengerVideoPlayer.react","Parent","PhotoUtils","React","ScriptPath","SpotlightMessagesViewerPagers.react","SpotlightViewer","SpotlightViewerImage","SpotlightViewport","SubscriptionsHandler","Vector","XMessagingPhotoDownloadController"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("MessengerForwardAttachmentDialogReact.bs").jsComponent;a=b("React").PropTypes;var m=88,n=80,o=30,p="_4-og";c=babelHelpers.inherits(q,b("React").Component);k=c&&c.prototype;function q(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.$1=void 0,this.$2=[],this.state={photoData:null,showForward:!1,showInfo:!1,stageDimensions:new(b("Vector"))()},this.$14=function(a){if(!this.props.sharedMedia)return;var b=this.props.sharedMedia.findIndex(function(b){return b.node.legacy_attachment_id===a});if(b<0)return;var c=this.props.sharedMedia[b];this.setState({photoData:c});this.$17(b)}.bind(this),this.$4=function(a,c){__p&&__p();if(this.state.photoData==null)return;var d=this.state.photoData;if(c&&!!b("Parent").bySelector(c.target,"._170l"))return;c&&c.target instanceof HTMLElement&&c.target.className===p&&this.$7();c=this.props.sharedMedia.findIndex(function(a){return a.node.legacy_attachment_id===d.node.legacy_attachment_id});if(c<0||c===this.props.sharedMedia.length-1&&!this.props.hasNextPage&&a)return;if(c===0&&!a){b("MessengerSharedMediaActions").loadMoreLatest(this.props.threadID,this.props.sharedMedia[0].cursor,o);return}a=a?this.props.sharedMedia[c+1]:this.props.sharedMedia[c-1];this.setState({photoData:a});this.$17(c)}.bind(this),this.$7=function(){if(this.props.photoID===null)return;b("ScriptPath").closeOverlayView("spotlight_media_view");this.setState({photoData:null});this.props.onClosePhotoView()}.bind(this),this.$12=function(){this.setState({showForward:!0})}.bind(this),this.$15=function(){this.setState({showForward:!1})}.bind(this),this.$11=function(){this.setState({showInfo:!0})}.bind(this),this.$16=function(){this.setState({showInfo:!1})}.bind(this),c}q.prototype.componentDidMount=function(){__p&&__p();var a=this.props.sharedMedia.find(function(a){return a.node.legacy_attachment_id===this.props.photoID}.bind(this));this.setState({photoData:a,stageDimensions:this.$3()});this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("Event").listen(window,"resize",function(){this.setState({stageDimensions:this.$3()})}.bind(this)),b("KeyEventController").registerKey("LEFT",function(){this.$4(!1);return!1}.bind(this)),b("KeyEventController").registerKey("RIGHT",function(){this.$4(!0);return!1}.bind(this)));b("ScriptPath").openOverlayView("spotlight_media_view",{photoID:this.props.photoID,threadID:this.props.threadID})};q.prototype.componentWillUnmount=function(){this.$1&&this.$1.release(),this.$1=null,this.$2.forEach(function(a){return a.abandon()})};q.prototype.render=function(){var a=this.$5(),c=this.state.stageDimensions,d=this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var e=this.props.sharedMedia.findIndex(function(a){this.state.photoData!=null||j(0,1033);return a.node.id===this.state.photoData.node.id}.bind(this));e=b("React").createElement("div",null,this.$6(),this.props.disablepaging?null:b("React").createElement(b("SpotlightMessagesViewerPagers.react"),{disablePrevArrow:e<=0&&!this.props.hasPrevPage,disableNextArrow:!this.props.hasNextPage&&e>=this.props.sharedMedia.length-1}));return b("React").createElement("span",null,b("React").createElement(b("SpotlightViewer"),{className:"_53vs",onHide:this.$7,open:this.props.photoID!==null,ref:"spotlightViewer",rootClassName:this.props.rootClassName},b("React").createElement(b("SpotlightViewport"),{active:!1,fadeInNOut:!0,media:a,onClick:this.$4,ref:"viewport",showLoadingIndicator:d,stageDimensions:c,useWidth:!0},e),this.$8()),this.$9(),this.$10())};q.prototype.$6=function(){if(!this.state.photoData)return null;var a=this.state.photoData.node.legacy_attachment_id;a=b("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",a).getURI();this.props.actorid&&(a=b("ActorURI").create(a,this.props.actorid));return b("React").createElement(b("MessengerPhotoViewHeader.react"),{disableForward:this.props.disableForward,onClose:this.$7,openInfo:this.$11,photoID:this.props.photoID,ref:"photoviewheader",showForwardDialog:this.$12,url:a})};q.prototype.$13=function(a){return a?Math.ceil(a/n):o};q.prototype.$8=function(){if(!this.state.photoData)return null;var a=this.state.photoData,c=b("React").createElement("button",{className:"_2n5b",onClick:function(){return this.props.openAlbum(a.node.legacy_attachment_id)}.bind(this),type:"button"},b("React").createElement("div",{"aria-label":i._("Full-screen photo gallery"),className:"_3por"}));return b("React").createElement(b("MessengerPhotoViewBottomBar.react"),null,b("React").createElement(b("MessengerPhotoViewHScroll.react"),{onScroll:this.$14,photoID:a.node.legacy_attachment_id,sharedPhotos:this.props.sharedMedia,width:this.state.stageDimensions.x}),c)};q.prototype.$9=function(){if(!this.state.photoData||this.props.disableForward)return null;var a=i._("Forward in separate messages");return b("React").createElement(l,{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$15,shown:this.state.showForward,title:a})};q.prototype.$10=function(){return this.state.showInfo?b("React").createElement(b("MessengerPhotoInfoDialogContainer.react"),{closeInfo:this.$16,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id}):b("React").createElement("xhp",null)};q.prototype.$17=function(a){var c=this.$13(this.state.stageDimensions.x),d=this.props.sharedMedia;a<=c/2?(b("MessengerSharedMediaActions").loadMoreLatest(this.props.threadID,d[0].cursor,c),d.length<c&&this.props.hasNextPage&&b("MessengerSharedMediaActions").loadMorePrevious(this.props.threadID,d[d.length-1].cursor,c)):a>=d.length-c/2&&this.props.hasNextPage&&b("MessengerSharedMediaActions").loadMorePrevious(this.props.threadID,d[d.length-1].cursor,c)};q.prototype.$3=function(){var a=new(b("Vector"))(b("Vector").getViewportDimensions().x,b("Vector").getViewportDimensions().y-m);return a};q.prototype.$5=function(){__p&&__p();if(this.state.photoData&&this.state.photoData.node){var a=this.state.photoData.node;if(a.__typename&&a.__typename==="MessageVideo")return this.$18();var c=this.state.stageDimensions,d=this.$19(a,c);if(!d)return null;if(a.photo_encodings&&a.photo_encodings.length!==0)return this.$20(a.legacy_attachment_id,d,a.photo_encodings,c);a=q.getImageDimensionsForStage(new(b("Vector"))(d.width,d.height),c);return this.$21(d,a)}else return null};q.prototype.$18=function(){return this.state.photoData?b("React").createElement(b("MessengerVideoPlayer.react"),{isVisible:!0,isOnStage:!0,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions}):null};q.prototype.$21=function(a,c){return b("React").createElement(b("SpotlightViewerImage"),{dimensions:c,ref:"image",src:a.uri})};q.prototype.$20=function(a,c,d,e){return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("SpotlightViewerSphericalPhoto.react").__setRef("SpotlightMessengerSharedMediaViewer.react"),bootloadPlaceholder:b("React").createElement("div",null),height:e.y,width:e.x,fbid:a,thumbnail:c.uri,photoEncodings:d,stageDimensions:this.state.stageDimensions})};q.prototype.$19=function(a,c){c=b("PhotoUtils").getImagesFromData(a);return c[c.length-1]};q.propTypes={disableForward:a.bool,hasPrevPage:a.bool,hasNextPage:a.bool,onClosePhotoView:a.func,openAlbum:a.func,photoID:a.string,rootClassName:a.string,threadID:a.string,sharedMedia:a.arrayOf(a.object)};q.getImageDimensionsForStage=function(a,c){var d=a.x;a=a.y;var e=c.x;c=c.y;var f=d/a,g=e/c;d>=e||a>=c?g<f?(d=e,a=Math.round(e/f)):g>f?(d=Math.round(c*f),a=c):(d=e,a=c):f<g?d=Math.round(a*f):a=Math.round(d/f);return new(b("Vector"))(d,a)};e.exports=q}),null);
__d("SpotlightMessengerSharedMediaViewerContainer.react",["FluxContainer","MessengerSharedMediaActions","MessengerSharedMediaStore","React","SpotlightMessengerSharedMediaViewer.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.getStores=function(){return[b("MessengerSharedMediaStore")]};a.calculateState=function(a,c){a=b("MessengerSharedMediaStore").getState();var d=a.sharedMedia.get(c.threadID);a=a.isLoading.get(c.threadID);return{sharedMedia:d,isLoading:a}};a.prototype.componentDidMount=function(){b("MessengerSharedMediaActions").loadCurrent(this.props.threadID,this.props.photoID)};a.prototype.render=function(){if(!this.state.sharedMedia)return null;var a=this.state.sharedMedia&&this.state.sharedMedia.edges.find(function(a){return a.node.legacy_attachment_id===this.props.photoID}.bind(this));return!a?null:b("React").createElement(b("SpotlightMessengerSharedMediaViewer.react"),{disableForward:this.props.disableForward,hasPrevPage:this.state.sharedMedia&&this.state.sharedMedia.has_previous_page,hasNextPage:this.state.sharedMedia&&this.state.sharedMedia.has_next_page,onClosePhotoView:this.props.onClosePhotoView,openAlbum:this.props.openAlbum,photoID:this.props.photoID,rootClassName:this.props.rootClassName,sharedMedia:this.state.sharedMedia&&this.state.sharedMedia.edges,threadID:this.props.threadID})};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MessengerThreadSharedPhotos.react",["cx","MessengerSharedPhotosAlbumViewContainer.react","React","SpotlightMessengerSharedMediaViewerContainer.react","SpotlightViewer"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={photoView:this.props.findFBID,albumView:""},this.$3=function(a){this.setState({albumView:a,photoView:""})}.bind(this),this.$4=function(){this.setState({albumView:""})}.bind(this),this.$5=function(a){this.setState({albumView:"",photoView:a})}.bind(this),this.$6=function(){this.setState({photoView:""})}.bind(this),this.$7=function(a){this.setState({photoView:a})}.bind(this),b}a.prototype.componentDidUpdate=function(){!this.state.photoView&&!this.state.albumView&&this.props.onCloseSharedPhotos()};a.prototype.render=function(){var a=this.state.photoView?this.$1():null,c=this.state.albumView?this.$2():null;return b("React").createElement("div",null,c,a)};a.prototype.$1=function(){return b("React").createElement(b("SpotlightMessengerSharedMediaViewerContainer.react"),{disableForward:!1,onClosePhotoView:this.$6,openAlbum:this.$3,photoID:this.state.photoView,rootClassName:"",threadID:this.props.threadFBID})};a.prototype.$2=function(){return b("React").createElement(b("SpotlightViewer"),{className:"_3ode",onHide:this.$4,open:!0,ref:"spotlightViewer"},b("React").createElement(b("MessengerSharedPhotosAlbumViewContainer.react"),{onClick:this.$5,onCloseSharedPhotos:this.props.onCloseSharedPhotos,threadID:this.props.threadFBID,viewedPhoto:this.state.albumView}))};a.propTypes={findFBID:c.string,onCloseSharedPhotos:c.func,threadFBID:c.string};e.exports=a}),null);
__d("MessengerThreadSharedPhotosReact.bs",["ReasonReact.bs","MessengerThreadSharedPhotos.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadSharedPhotos.react"),{findFBID:a,onCloseSharedPhotos:c,threadFBID:d},e)}f.make=a}),null);
__d("MessengerVideoPlayerReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerVideoPlayer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k){return b("ReasonReact.bs").wrapJsForReason(b("MessengerVideoPlayer.react"),{attachment:b("bs_js_null_undefined").fromOption(a),className:b("bs_js_null_undefined").fromOption(c),isInThread:b("bs_js_null_undefined").fromOption(d),isVisible:b("bs_js_null_undefined").fromOption(e),isOnStage:b("bs_js_null_undefined").fromOption(f),stageDimensions:b("bs_js_null_undefined").fromOption(g),videoData:h,onClick:b("bs_js_null_undefined").fromOption(i),onSelect:b("bs_js_null_undefined").fromOption(j)},k)}f.make=a}),null);
__d("MessengerVideoReact.bs",["cx","ix","bs_curry","Image.bs","React","ReasonReact.bs","joinClasses","bs_js_primitive","MessengerPhotoReact.bs","MessengerVideoPlayerReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerVideo");function j(a){__p&&__p();a=a.metadata;var b;if(a==null||a.fbid==null)b=1;else{var c=window.screen.width>1800&&!(a.large_size==null)&&!(a.large_preview==null),d=a.fbid,e=c?a.large_size:a.inbox_size;e=e==null?{x:0,y:0}:{x:e.width,y:e.height};c=c?a.large_preview:a.inbox_preview;return{legacy_attachment_id:d,original_dimensions:e,start_muted:!0,hide_controls_on_finish:!0,url:c,is_share:!1}}if(b===1)return{legacy_attachment_id:null,original_dimensions:null,start_muted:!0,hide_controls_on_finish:!0,url:null,is_share:!1}}function k(a){var b=a%60,c=b<10;return String(a/60|0)+(":"+((c?"0":"")+String(b)))}function a(a,c,d,e,f,g,l,m){__p&&__p();var n=a!==void 0?a:"",o=function(){var a=c.metadata,d=c.media;d=a==null?d==null?void 0:b("bs_js_primitive").nullable_to_opt(d.duration):b("bs_js_primitive").nullable_to_opt(a.duration);if(d!==void 0)return k(d);else return null},p=function(){if(g!==void 0)return b("bs_curry")._1(g,c);else return 0},q=function(a){var e=a.legacy_attachment_id;if(e==null)return void 0;else return b("bs_js_primitive").some(b("ReasonReact.bs").element(void 0,void 0,b("MessengerVideoPlayerReact.bs").make(b("bs_js_primitive").some(c),b("joinClasses")(n,"_ccq","_4tsk","_3o67",d?"_52mr":"",d?"_1byr":""),!0,f,void 0,void 0,a,p,l,[])))};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){var a=j(c);a=q(a);if(a!==void 0)return b("bs_js_primitive").valFromOption(a);else return b("ReasonReact.bs").element(void 0,void 0,b("MessengerPhotoReact.bs").make(b("joinClasses")(n,"_ccq"),c,d,void 0,e,g,[b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make("_ccr",void 0,void 0,void 0,h("27983"),void 0,void 0,void 0,void 0,[])),b("React").createElement("span",{className:"_ccs"},o(0))]))},i[9],i[10],i[11],i[12]]}c=1800;f.component=i;f.large_window_width=c;f.constructVideoData=j;f.formatDuration=k;f.make=a}),null);
__d("MessengerLivingRoomCTAContainer.react",["fbt","CurrentEnvironment","ErrorBoundary.react","JSResource","MercuryIDs","React","ShortProfiles","gkx","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("lazyLoadComponent")(b("JSResource")("MessengerLivingRoomCTA.react").__setRef("MessengerLivingRoomCTAContainer.react"));c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={threadType:null,otherUserName:null},b}a.prototype.componentDidMount=function(){__p&&__p();var a=this.props.threadID;if(a==null)return;a=b("MercuryIDs").tokenize(a);if(a.type==="thread"){this.setState({threadType:"group"});return}if(a.type!=="user")return;b("ShortProfiles").get(a.value,function(a){this.setState({otherUserName:a.firstName,threadType:"user"})}.bind(this))};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.threadID,d=a.isFromViewer;a=a.attachment;var e=this.state,f=e.threadType;e=e.otherUserName;if(!b("gkx")("678647")||a==null||d!=!0||c==null||f==null||f==="user"&&e==null||b("CurrentEnvironment").messengerdotcom)return null;a=a==null?void 0:(d=a.target)==null?void 0:d.video_messenger_cta_payload;d=a==null?void 0:a.cta_type;a=a==null?void 0:(a=a.video)==null?void 0:a.id;if(d!=="CREATE_LIVING_ROOM"||a==null)return null;var h;switch(f){case"user":h=g._("Watch with {name of the other user in the thread}",[g._param("name of the other user in the thread",e)]);break;case"group":h=g._("Watch with Group");break}return h==null?null:b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(i,{threadFBID:b("MercuryIDs").getThreadFBIDFromThreadID(c),videoID:a,buttonText:h})))};e.exports=a}),null);
__d("MessengerXMATextBlock.react",["cx","LineClamp.react","MessengerLivingRoomCTAContainer.react","React","ShimButton.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;var i=26;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(){this.props.url&&window.open(this.props.url)}.bind(this),b}a.prototype.render=function(){if(!this.props)return b("React").createElement("div",{className:"__6j"});var a=this.props.width?{maxWidth:this.props.width-i,textAlign:"left"}:{textAlign:"left"},c={textDecoration:"none"};return b("React").createElement("div",{className:b("joinClasses")(this.props.className,"__6j _43kk _6ude"),style:a},b("React").createElement(b("ShimButton.react"),{form:"link",onClick:this.$1,style:c},this.renderTitle(),this.renderDescription(),this.renderSource()),b("React").createElement(b("MessengerLivingRoomCTAContainer.react"),{threadID:this.props.threadID,isFromViewer:this.props.isFromViewer,attachment:this.props.attachment}))};a.prototype.renderTitle=function(){return!this.props.title?null:b("React").createElement("div",{className:"__6k"},b("React").createElement(b("LineClamp.react"),{lines:2,lineHeight:16},this.props.title))};a.prototype.renderDescription=function(){if(!this.props.description)return null;var a=this.props.width?{maxWidth:this.props.width-i}:{};return b("React").createElement("div",{className:"__6l",style:a},b("React").createElement(b("LineClamp.react"),{lines:2,lineHeight:15},this.props.description))};a.prototype.renderSource=function(){return!this.props.source?null:b("React").createElement("div",{className:"__6m"},b("React").createElement(b("LineClamp.react"),{lines:1,lineHeight:14},this.props.source))};a.propTypes={className:c.string,description:c.string,source:c.string,title:c.string,url:c.string,width:c.number,isFromViewer:c.bool,attachment:c.object};e.exports=a}),null);
__d("MessengerXMATextBlockReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerXMATextBlock.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k){return b("ReasonReact.bs").wrapJsForReason(b("MessengerXMATextBlock.react"),{className:b("bs_js_null_undefined").fromOption(a),description:b("bs_js_null_undefined").fromOption(c),source:b("bs_js_null_undefined").fromOption(d),title:b("bs_js_null_undefined").fromOption(e),url:b("bs_js_null_undefined").fromOption(f),width:b("bs_js_null_undefined").fromOption(g),threadID:b("bs_js_null_undefined").fromOption(h),isFromViewer:b("bs_js_null_undefined").fromOption(i),attachment:b("bs_js_null_undefined").fromOption(j)},k)}f.make=a}),null);
__d("MessengerVideoXMAReact.bs",["cx","React","ReasonReact.bs","joinClasses","bs_js_primitive","MessengerVideoPlayerReact.bs","MessengerXMATextBlockReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerVideoXMA");function i(a){__p&&__p();if(a==null)return null;else{var b=a.width>a.height?a.width:a.height,c=window.screen.width>1800;c=c?640:450;if(b<=c)return{x:a.width,y:a.height};else{c=c/b;b=a.width*c|0;a=a.height*c|0;return{x:b,y:a}}}}function j(a){var b=a.media;a=a.target;if(b==null||a==null||b.image_size==null||a.video_id==null)return void 0;else{var c=b.image_size;return{legacy_attachment_id:a.video_id,original_dimensions:i(c),start_muted:!0,hide_controls_on_finish:!0,url:b.image,is_share:!0}}}function a(a,c,d,e,f,g,i){var k=a!==void 0?a:"",l=function(a){if(a!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("MessengerVideoPlayerReact.bs").make(b("bs_js_primitive").some(c),b("joinClasses")(k,"_ccq","_4tsk","_3o67","_52mr","_1byr"),!0,d,void 0,void 0,b("bs_js_primitive").valFromOption(a),void 0,e,[]));else return null},m=function(a){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerXMATextBlockReact.bs").make("_2f5n _4br2 _29ew _3dug",b("bs_js_primitive").nullable_to_opt(c.description),b("bs_js_primitive").nullable_to_opt(c.source),b("bs_js_primitive").nullable_to_opt(c.video_title),b("bs_js_primitive").nullable_to_opt(c.uri),a!==void 0?b("bs_js_primitive").valFromOption(a).x:void 0,f,g,b("bs_js_primitive").some(c),[]))};return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var a=j(c),d=l(a);return b("React").createElement("div",{className:"_3duc"},d,m(a!==void 0?b("bs_js_primitive").nullable_to_opt(b("bs_js_primitive").valFromOption(a).original_dimensions):void 0))},h[9],h[10],h[11],h[12]]}c=640;d=450;e=1800;f.large_preview_dim=c;f.thumbinail_inbox_dim=d;f.large_window_width=e;f.component=h;f.adjustSize=i;f.constructVideoData=j;f.make=a}),null);
__d("MessengerPhotosGroupReact.bs",["cx","URI","bs_block","bs_curry","React","Utils.bs","ActorURI","bs_belt_Array","LogHistory","MercuryIDs","bs_belt_Option","ReasonReact.bs","joinClasses","bs_js_primitive","bs_caml_primitive","bs_js_null_undefined","MessagesViewerSetID","MessengerPhotoReact.bs","MessengerVideoReact.bs","MercuryAttachmentType","getPageIDFromThreadID","MessengerVideoXMAReact.bs","bs_caml_builtin_exceptions","ChatSpeakingStickerReact.bs","MercuryAttachmentPayload.bs","MessengerAttachmentViewer","MessengerThreadSharedPhotosReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="empty-spacer",i=b("LogHistory").getInstance("messenger_photo_group"),j=b("ReasonReact.bs").reducerComponent("MessengerPhotosGroup");function k(a,c,d,e,f,g,k,l,m,n,o,p,q,r){__p&&__p();var s=d!==void 0?d:"",t=function(a){a=a.length;var c=a===2||a===4;return b("joinClasses")(s,"_2n8h",a===1?"_2n8i":"",c?"_4ksk":"",a>1&&!c?"_2n8k":"","_5fk1")},u=function(){__p&&__p();if(l!==void 0){var a=b("bs_js_primitive").valFromOption(l),c=a.thread_fbid;if(c==null)return b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id);else{var d=b("bs_caml_primitive").caml_string_compare(c,"")===0;if(d)return b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id);else return c}}else return null},v=function(a,c){var d=u(0);c=c.metadata;c=c==null?null:c.fbid;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadSharedPhotosReact.bs").make(c,function(){return b("bs_curry")._1(a[3],0)},d,[]))},w=function(a){a=JSON.stringify(a);if(a!==void 0)return a;else return""},x=function(d,j,l,s){__p&&__p();var t=j.deduplication_key,v=j.metadata;if(t==null)if(v==null){var x=j.upload_id;x=x==null?"":x}else{v=v.fbid;x=v==null?"":v}else x=t;var y=function(b,a){i.debug("just_open_uri",w(j));return window.open(b)},z;if(!l&&!b("Utils.bs").isSomeTrue(f)){var A=j.metadata;v=0;if(A==null||A.fbid==null)v=1;else{t=j.app_attribution==null;z=t?function(a){i.debug("open_share_view",w(a));return b("bs_curry")._1(d[3],[a])}:function(c){__p&&__p();var d=A;c=c;i.debug("on_child_clicked",w(c));if(b("Utils.bs").isTruthy(c.preview_uploading))return 0;else if(c.attach_type===b("MercuryAttachmentType").VIDEO){var f=d.dimensions;f=f==null?{x:null,y:null}:{x:f.width,y:f.height};b("MessengerAttachmentViewer").renderVideo({pageID:b("bs_js_null_undefined").fromOption(o),rootClassName:"_1j1h",videoID:d.fbid,videoSize:f,videoURI:c.url});return 0}else if(c.attach_type===b("MercuryAttachmentType").PHOTO||c.attach_type===b("MercuryAttachmentType").THIRDPARTYSTICKER||c.attach_type===b("MercuryAttachmentType").ANIMATED_IMAGE){f=a.length===1;var h=c.url;if(!b("Utils.bs").isSomeTrue(g)&&c.attach_type===b("MercuryAttachmentType").PHOTO&&e!==void 0){var j=u(0),k=e===1;j=new(b("URI"))("/ajax/messaging/attachments/sharedphotos.php").setQueryData({thread_id:j,image_id:d.fbid});j=o!==void 0?new(b("ActorURI").create)(j,b("bs_js_primitive").valFromOption(o)):j;j=[b("MessagesViewerSetID").MESSAGES_VIEW_ALL_IN_THREAD,j,k]}else j=[null,h,f];b("MessengerAttachmentViewer").bootstrapWithConfig({actorid:b("bs_js_null_undefined").fromOption(o),dimensions:d.dimensions,disableForward:o!==void 0,disablePaging:j[2],endpoint:j[1],fbid:d.fbid,rootClassName:"_1j1h",setID:j[0],snapToPhoto:!0,src:c.preview_url});return 0}else if(c.uri==null)return 0;else return window.open(c.uri)}}if(v===1){l=j.uri==null;if(l)z=void 0;else{var B=j.uri;z=function(a){return y(B,a)}}}}else{t=j.large_preview_url==null;if(t)z=void 0;else{var C=j.large_preview_url;z=function(a){return y(C,a)}}}v=b("bs_belt_Option").getWithDefault(c,j.attach_type);if(v===b("MercuryAttachmentType").PHOTO||v===b("MercuryAttachmentType").ANIMATED_IMAGE||v===b("MercuryAttachmentType").THIRDPARTYSTICKER)return b("ReasonReact.bs").element(x,void 0,b("MessengerPhotoReact.bs").make(void 0,j,s,k,m,z,[]));else if(v===b("MercuryAttachmentType").VIDEO){l=j.metadata;if(l==null||!b("Utils.bs").isTruthy(l.render_as_sticker))t=1;else{l=l.dimensions;l=l==null?{height:null,width:null}:{height:l.height,width:l.width};var D=j.url;return b("ReasonReact.bs").element(void 0,void 0,b("ChatSpeakingStickerReact.bs").make(D,l,[]))}if(t===1)if(b("Utils.bs").isSomeTrue(g))return b("ReasonReact.bs").element(x,void 0,b("MessengerVideoXMAReact.bs").make(void 0,j,k,n,p,q,[]));else return b("ReasonReact.bs").element(x,void 0,b("MessengerVideoReact.bs").make(void 0,j,s,m,k,z,n,[]))}else if(v===h){D={className:"_4tsk _4rf-"};l=b("bs_js_primitive").nullable_to_opt(j.key);l!==void 0&&(D.key=b("bs_js_primitive").valFromOption(l));return b("React").createElement("div",D)}else throw[b("bs_caml_builtin_exceptions").invalid_argument,v+" is not handled by MessengerPhotosGroup"]},y=function(c,a,d){__p&&__p();if(a.length!==1){var e=a.length===2||a.length===4,f=e?2:3;e=[];var g=[0],i=a.length;while(g[0]<i){var j=b("bs_caml_primitive").caml_int_min(f,i-g[0]|0);j=b("bs_belt_Array").makeBy(f,function(e){return function(j){var i=j<e;if(i)return x(c,a[g[0]+j|0],d,!1);else{i="ghost"+String(f-j|0);j=b("MercuryAttachmentPayload.bs").create(h,b("bs_js_primitive").some(i),new(b("URI"))(""));return x(c,j,d,!1)}}}(j));e.push(b("React").createElement("div",{key:String(g[0]),className:"_2n8g"},j));g[0]=g[0]+f|0}return e}else{j=a[0];return x(c,j,d,!0)}};return[j[0],j[1],j[2],j[3],function(){b("MessengerAttachmentViewer").preload();return 0},j[5],j[6],j[7],function(c){var d=l!==void 0?!(b("getPageIDFromThreadID")(b("bs_js_primitive").valFromOption(l).thread_id)==null):!1;d=y(c,a,d);var e=c[1][0];c=e!==void 0?v(c,b("bs_js_primitive").valFromOption(e)):null;return b("React").createElement("div",{className:t(a),tabIndex:0},c,d)},function(){return[void 0]},j[10],function(c,a){if(c)return b("bs_block").__(0,[[b("bs_js_primitive").some(c[0])]]);else return b("bs_block").__(0,[[void 0]])},j[12]]}a=b("ReasonReact.bs").wrapReasonForJs(j,function(a){return k(a.attachments,b("bs_js_primitive").nullable_to_opt(a.attachType),b("bs_js_primitive").nullable_to_opt(a.className),b("bs_js_primitive").nullable_to_opt(a.count),b("bs_js_primitive").nullable_to_opt(a.isPageMessage),b("bs_js_primitive").nullable_to_opt(a.isXMA),b("bs_js_primitive").nullable_to_opt(a.isVisible),b("bs_js_primitive").nullable_to_opt(a.message),b("bs_js_primitive").nullable_to_opt(a.onAttachmentLoad),b("bs_js_primitive").nullable_to_opt(a.onSelect),b("bs_js_primitive").nullable_to_opt(a.pageID),b("bs_js_primitive").nullable_to_opt(a.threadID),b("bs_js_primitive").nullable_to_opt(a.isFromViewer),[])});c=b("bs_belt_Option").getWithDefault;f.$pipe$unknown=c;f.empty_spacer_type=h;f.history=i;f.component=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerPhotosGroup.react",["MessengerPhotosGroupReact.bs"],(function(a,b,c,d,e,f){"use strict";a=b("MessengerPhotosGroupReact.bs").jsComponent;e.exports=a}),null);
__d("MessengerStickerUtils",["MercuryAttachmentType"],(function(a,b,c,d,e,f){"use strict";function g(a){return!!(a&&a.attach_type===b("MercuryAttachmentType").STICKER)}function h(a){var b=a.attachments;return!!(a.is_like_preview||a.sticker_id||b&&b.length===1&&g(b[0]))}function a(a){return a.size===1&&h(a.first())}e.exports={isStickerMessageGroup:a,isStickerMessage:h,isStickerAttachment:g}}),null);
__d("MessengerVoiceClipAttachment.react",["cx","MercuryAttachmentAudioClip.react","MercuryShareAttachmentRenderLocations","MessengerColors","MessengerCustomColorUtils.bs","MessengerDotComAndInboxM4Check.bs","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=this.props.attachment,c=a.metadata.duration/1e3,d=!!a.app_attribution,e={};this.props.customColor&&(b("MessengerDotComAndInboxM4Check.bs").yes?e=babelHelpers["extends"]({backgroundAttachment:"fixed"},b("MessengerColors").makeLinearGradient(this.props.thread.gradient_colors,this.props.thread.solid_color,b("MessengerCustomColorUtils.bs").defaultColor())):e.backgroundColor=this.props.customColor);return b("React").createElement("div",{className:"_hh7"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6ybn":"")+" _s1-"+(this.props.customColor?" _5sxi":"")+(d?"":" _52mr")+(d?" _mxz":"")+" _1fz8"+(d?" _1-wa":"")+" _1nqp",style:e},b("React").createElement(b("MercuryAttachmentAudioClip.react"),{customColor:this.props.customColor,src:a.url,duration:c,key:"audio:"+this.props.message.message_id,showHelp:!1,width:200,location:b("MercuryShareAttachmentRenderLocations").MESSENGER,rootClassName:"_3czg"+(d?" _4yjw":"")+" _2poz _ui9"}))};function a(){h.apply(this,arguments)}a.propTypes={attachment:c.object.isRequired,customColor:c.string,message:c.object.isRequired,onUnwrap:c.func,thread:c.object.isRequired};e.exports=a}),null);
__d("XStickerInTrayController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/in_tray/",{pack_id:{type:"Int",required:!0}})}),null);
__d("StickersPackInTray",["Promise","AsyncRequest","XStickerInTrayController","react-relay/classic/query/createRelayQuery","react-relay/classic/query/RelayQL","react-relay/classic/store/RelayStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={onIsPackInTray:function(a,c,d){__p&&__p();c=b("react-relay/classic/query/createRelayQuery")(function(){return{children:[{children:[{calls:[{kind:"Call",metadata:{type:"StickerInterfaces"},name:"interface",value:{kind:"CallVariable",callVariableName:"stickerInterface"}},{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallValue",callValue:1e4}}],children:[{children:[{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:!0},type:"ID"}],fieldName:"node",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id",isRequisite:!0},type:"StickerPack"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:!0,isPlural:!0},type:"PacksInTrayEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:!0,isGenerated:!0,isRequisite:!0},type:"PageInfo"}],fieldName:"tray_packs",kind:"Field",metadata:{canHaveSubselections:!0,isConnection:!0},type:"PacksInTrayConnection"}],fieldName:"sticker_store",kind:"Field",metadata:{canHaveSubselections:!0},type:"StickerStore"}],fieldName:"viewer",kind:"Query",metadata:{},name:"StickersPackInTray",type:"Viewer"}}(),{stickerInterface:c});var e=b("react-relay/classic/store/RelayStore").readQuery(c);e=e&&e.length>0?e[0]:null;if(e&&e.sticker_store&&e.sticker_store.tray_packs&&e.sticker_store.tray_packs.edges)return new(b("Promise"))(function(b,c){return b({in_sticker_tray:e.sticker_store.tray_packs.edges.filter(function(b){return b.node.id===a}).length>0})}).then(d);var f=b("XStickerInTrayController").getURIBuilder().setInt("pack_id",a).getURI();return new(b("Promise"))(function(a,c){return new(b("AsyncRequest"))(f).setHandler(function(b){return a(b.getPayload())}).setAllowCrossPageTransition(!0).send()}).then(d)}};e.exports=a}),null);
__d("isRetina",[],(function(a,b,c,d,e,f){"use strict";e.exports=function(){return(window.devicePixelRatio||1)>1}}),null);
__d("MessengerAttachmentRenderer",["cx","EmojiSticker.react","MercuryAttachment","MercuryAttachmentType","MercuryAudioType","MercuryIDs","MercuryShareAttachment.react","MercuryShareAttachmentRenderLocations","MessengerErrorAttachment.react","MessengerFileAttachment.react","MessengerFromViewerUtils","MessengerHotLikePreview.react","MessengerHotLikeUtils","MessengerPhotosGroup.react","MessengerStickerUtils","MessengerSupportedEmojiUtils","MessengerVoiceClipAttachment.react","MessengerWebDriverTestIDs","React","Sticker.react","StickerAssetType","StickerConstants","StickerInterfaces","StickersActions","StickersPackInTray","StickersStoreController","StickerUtils","StoryAttachmentStyle","XStickerAssetController","isRetina"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=700,i="sticker:",j="share:",k="_1c_u",l="_3o6m",m=function(a){return a===Object(a)};a={getAttachmentsInsideBubble:function(a,c){var d=b("MercuryAttachment").get(a).filter(m).filter(function(a){return!this.attachmentShouldAppearOutsideBubble(a)}.bind(this));return this._getAttachmentComponents(d,a,c)},getAttachmentsOutsideBubble:function(a,c,d,e,f){var g=b("MercuryAttachment").get(a).filter(m).filter(function(a){return this.attachmentShouldAppearOutsideBubble(a)}.bind(this));return this._getAttachmentComponents(g,a,c,d,e,f)},_getAttachmentComponents:function(a,c,d,e,f,g){var h=this._getPhotosGroup(a.filter(b("MercuryAttachment").isPhotoGroupAttachment),c,d,e);a=a.filter(function(a){return!b("MercuryAttachment").isPhotoGroupAttachment(a)}).map(function(a){return this._getAttachmentComponent(a,c,d,e,f,g)}.bind(this));h&&a.push(h);return a},_getAttachmentComponent:function(a,c,d,e,f,g){__p&&__p();var h=e&&e.customColor,i=e&&e.onUnwrap,j=e&&e.isVisible,k=e&&e.isFromViewer,l=e&&e.isPageMessage;e=e&&e.onSelect;if(b("MessengerStickerUtils").isStickerAttachment(a))return this._getStickerComponent(a,c,h,i,g);if(this.isEmojiLikeAttachment(a))return this._getEmojiLikeAttachment(a,c,i);if(this.isVoiceClip(a))return this._getVoiceClip(a,c,h,i,g);if(this.isFileAttchment(a))return this._getFileComponent(a,c);if(this.isP2P(a)||this.isShareAttachment(a))return this._getShareAttachment(a,c,d,j,k,l,e,f);return this.isErrorAttachment(a)?this._getErrorAttachment(a,c):null},_getStickerComponent:function(a,c,d,e,f){__p&&__p();if(c.is_like_preview)return b("React").createElement(b("MessengerHotLikePreview.react"),{customColor:d,customLike:c.customLike,key:"hlp:"+c.like_preview_since,since:c.like_preview_since,thread:f,location:b("MercuryShareAttachmentRenderLocations").MESSENGER});e=a.metadata;if(!e){e=b("MessengerHotLikeUtils").getMetadataForHotLike(c.sticker_id);if(!e){e={};a=b("StickerUtils").getScaledDimensions(b("StickerConstants").THREAD_SIZE,b("StickerConstants").THREAD_SIZE,b("StickerConstants").THREAD_SIZE);var g=a.height;a=a.width;e.height=g;e.width=a}e.stickerID=c.sticker_id}g=b("XStickerAssetController").getURIBuilder().setInt("sticker_id",e.stickerID);a=null;var h=null;b("isRetina")()?(a=e.paddedSpriteURI2x,h=e.spriteURI2x):(a=e.paddedSpriteURI,h=e.spriteURI);var j=e.stickerID.toString();d=b("React").createElement(b("Sticker.react"),{accessibilityLabel:e.accessibilityLabel,className:"_2poz _ui9",animationTrigger:"hover",customColor:d,frameCount:e.frameCount||1,frameRate:e.frameRate||b("StickerConstants").DEFAULT_FRAME_RATE,framesPerCol:e.framesPerCol||1,framesPerRow:e.framesPerRow||1,key:i+c.message_id,onStickerClick:function(d,a){b("StickersPackInTray").onIsPackInTray(d,b("StickerInterfaces").MESSAGES,function(a){a.in_sticker_tray?(b("StickersActions").selectTrayPack(d),b("StickersActions").showStickerFlyout(c.thread_id)):b("StickersStoreController").showStore(d)})},packID:e.packID&&e.packID.toString(),paddedSpriteURI:a,sourceHeight:e.height,sourceURI:g.setEnum("image_type",b("StickerAssetType").IMAGE).getURI().toString(),sourceWidth:e.width,spriteURI:h,stickerID:j,testID:b("MessengerWebDriverTestIDs").STICKER,thread:f});return d},_getEmojiLikeAttachment:function(a,c,d){d=b("MessengerSupportedEmojiUtils").transferSize(a.size);d=b("MessengerSupportedEmojiUtils").getHotLikeEmojiData(c.body,d)||b("MessengerSupportedEmojiUtils").getHotLikeEmojiDataTransition(c.body,d);if(!d)return this._getErrorAttachment(a,c);a=d.emoji;d=b("React").createElement(b("EmojiSticker.react"),{className:"_2poz _ui9",key:i+c.message_id,emoji:c.body,emojiImage:a,sourceURI:""});return d},_getShareAttachment:function(a,c,d,e,f,g,i,k){var l,m,n=null;c&&c.platform_xmd&&(n=JSON.parse(c.platform_xmd));m=(m=a)!=null?(m=m.share)!=null?(m=m.messenger_ctas)!=null?(m=m[0])!=null?m.page_id:m:m:m:m;l=(l=a)!=null?(l=l.share)!=null?(l=l.target)!=null?(l=l.items)!=null?(l=l[0])!=null?(l=l.call_to_actions)!=null?(l=l[0])!=null?l.page_id:l:l:l:l:l:l:l;m=m||l;l=m?b("MercuryIDs").getParticipantIDFromUserID(m):c.author;return b("React").createElement(b("MercuryShareAttachment.react"),{attachment:a.share,isFromViewer:f,isPageMessage:g,isSponsored:c.is_sponsored,isVisible:!!e,key:j+c.message_id,location:b("MercuryShareAttachmentRenderLocations").MESSENGER,maxWidth:h,messageID:c.message_id,mnMessageType:n&&n.template_type,onComponentLoaded:d,onSelect:i,pageID:l,threadID:c.thread_id,afterDecorators:k,timestamp:c.timestamp,author:c.author})},_getVoiceClip:function(a,c,d,e,f){d=b("MessengerFromViewerUtils").isFromViewer(c)?d||void 0:void 0;return b("React").createElement(b("MessengerVoiceClipAttachment.react"),{thread:f,attachment:a,customColor:d,key:"audio:"+c.message_id,message:c,onUnwrap:function(){e&&e()}})},_getErrorAttachment:function(a,c){return b("React").createElement(b("MessengerErrorAttachment.react"),{attachment:a,key:"error:"+c.message_id})},_getPhotosGroup:function(a,c,d,e){if(!a.length)return null;var f=e&&e.onUnwrap;d=e&&e.isVisible;var g=e&&e.onSelect,h=e&&e.isPageMessage;e=e&&e.pageID;return b("React").createElement(b("MessengerPhotosGroup.react"),{attachments:a,className:"_2poz _52mr _ui9",count:a.length,isPageMessage:h,isVisible:!!d,key:"photos:"+c.message_id,message:c,onSelect:g,onUnwrap:function(){f&&f()},pageID:e})},getVideoElem:function(a,b){b=b.getMessageElement(a);if(!b)return null;a=b.getElementsByClassName(k);return a&&a.length?a[0]:b},getSphericalPhotoElem:function(a,b){b=b.getMessageElement(a);if(!b)return null;a=b.getElementsByClassName(l);return a&&a.length?a[0]:b},_rendersWithoutAttribution:function(a){return a.length!=1||!b("MercuryAttachment").hasAttribution(a[0])},_getFileComponent:function(a,c){return b("React").createElement(b("MessengerFileAttachment.react"),{attachment:a,className:"_2poz",key:"file:"+a.url})},attachmentShouldAppearOutsideBubble:function(a){return b("MessengerStickerUtils").isStickerAttachment(a)||b("MercuryAttachment").isPhotoGroupAttachment(a)||this.isShareAttachment(a)||this.isP2P(a)||this.isVoiceClip(a)||this.isErrorAttachment(a)||this.isEmojiLikeAttachment(a)},isPhotosGroupAttachment:function(a){a=a.props.attachments;return!!a&&a.length>1&&a.some(function(a){return!!a&&b("MercuryAttachment").isPhotoGroupAttachment(a)})},isRenderedShareAttachment:function(a){return!!(a.key&&a.key.startsWith(j))},isFileAttchment:function(a){return a.attach_type===b("MercuryAttachmentType").FILE},isShareAttachment:function(a){return!!(this._isStoryBased(a)&&!this.isP2P(a)&&(a.share.style_list.indexOf(b("StoryAttachmentStyle").SHARE)>-1||a.share.style_list.indexOf(b("StoryAttachmentStyle").FALLBACK)>-1))},isSharedVideoAttachment:function(a){a=a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.subattachments&&a.share.subattachments[0];return!!(a&&a.target&&a.target.video_id)},isP2P:function(a){return!!(this._isStoryBased(a)&&a.share.style_list.indexOf(b("StoryAttachmentStyle").ORION)>-1)},_isStoryBased:function(a){return!!(a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.style_list)},isEmojiLikeAttachment:function(a){return a.attach_type===b("MercuryAttachmentType").EMOJI_LIKE},isVoiceClip:function(a){a=a.metadata;return!!a&&(!!a.isAudio||a.type===b("MercuryAudioType").AudioClip||a.type===b("MercuryAudioType").VoiceMessageWithTranscript)},isVoiceClipAttachment:function(a){a=b("MercuryAttachment").get(a).filter(m).filter(function(a){return this.isVoiceClip(a)}.bind(this));return!!a.length},isP2PAttachment:function(a){a=b("MercuryAttachment").get(a).filter(function(a){return m(a)&&this.isP2P(a)}.bind(this));return!!a.length},isSingleVideoAttachment:function(a){a=b("MercuryAttachment").get(a).filter(m).filter(function(a){return b("MercuryAttachment").isVideoAttachment(a)});return a.length===1},isSharedVideoAttachmentMessage:function(a){a=b("MercuryAttachment").get(a).filter(m).filter(function(a){return this.isSharedVideoAttachment(a)||this.isGenieSharedVideoAttachment(a)}.bind(this));return a.length===1},isGenieSharedVideoAttachment:function(a){return!!(a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.style_list.indexOf(b("StoryAttachmentStyle").GENIE_MESSAGE)>-1&&a.share.target&&a.share.target.attachment&&this.isSharedVideoAttachment(a.share.target.attachment))},isSingleSphericalPhotoAttachment:function(a){a=b("MercuryAttachment").get(a).filter(m);if(a.length!==1)return!1;a=a.filter(function(a){return a.photo_encodings&&a.photo_encodings.length!==0}).length===1;return a},isErrorAttachment:function(a){return a.attach_type===b("MercuryAttachmentType").ERROR}};e.exports=a}),null);
__d("MessengerCodePasteUtils",["cx","BanzaiODS","MessengerBubble.react","MessengerFormattingUtils","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=/`{3,}/,i=3,j=/^\s+/,k=/\s+$/;function a(a){return!!(a&&a.search(h)!==-1)}function l(a,b){__p&&__p();var c=0;if(b-2>=0){c+=a[b-2].trim().length;var d=a[b-2].match(k);d&&(c+=d[0].length)}b-1>=0&&(c+=a[b-1].length+2*i);d=a[b].match(j);d&&(c+=d[0].length);return c}function m(a,b,c){if(a)return a.map(function(a){return Object.assign(Object.assign({},a),{offset:a.offset-b})}).filter(function(a){return 0<=a.offset&&a.offset<c});else return a}function n(a){a=a.split("\n");return a.length===1?{language:"",code:a[0]}:{language:a[0].replace(/[^a-zA-Z]+/g,""),code:a.slice(1).join("\n")}}function o(a){__p&&__p();if(!b("gkx")("678575"))return a.split(h);var c=b("MessengerFormattingUtils").getRanges(a).filter(function(a){return a.formatter===b("MessengerFormattingUtils").formatConfigs.blockquote.formatter||a.formatter===b("MessengerFormattingUtils").formatConfigs.blockcode.formatter}).sort(function(a,b){return a.offset!==b.offset?a.offset-b.offset:b.length-a.length}),d=[],e=0,f=0;for(var g=0;g<c.length;g++){var i=c[g];if(i.offset<f)continue;i.formatter===b("MessengerFormattingUtils").formatConfigs.blockcode.formatter&&(d.push(a.substring(e,i.offset)),d.push(i.innerText),e=i.offset+i.length);f=i.offset+i.length}d.push(a.substring(e));return d}function c(a,c,d,e,f){__p&&__p();a=o(a);var g=[],h=0;for(var i=0;i<a.length;i+=2){var j=a[i].trim();if(j&&j.length>0){h+=l(a,i);var k=c?m(c,h,j.length):c;g.push(b("React").createElement(b("MessengerBubble.react"),{key:i,body:j,customColor:e||void 0,className:"clearfix _3058 _ui9",isFromViewer:f,ranges:k,threadID:d}))}if(i+1<a.length&&a[i+1]){j=n(a[i+1]);k=j.language;j=j.code;b("BanzaiODS").bumpEntityKey("messenger_code_paste","render_bubble");g.push(b("React").createElement("div",{key:i+1,className:"_3058 _wu0 _52mr"},b("React").createElement("div",{ref:"syntaxTarget"+i,className:"language-"+k},j)))}}return g}e.exports={containsCodeBlock:a,getCodeAndMessageBubbles:c}}),null);
__d("MNRTCCallabilityStore",["MessengerDispatcher","RTCCallabilityStore"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("RTCCallabilityStore"))(b("MessengerDispatcher"))}),null);
__d("shouldNotRenderSegoe",["MessengerConfig","UserAgent"],(function(a,b,c,d,e,f){"use strict";var g=new RegExp("[\u0530-\u05f4\u10a0-\u10ff]"),h=b("UserAgent").isBrowser("Chrome")&&b("UserAgent").isPlatform("Windows 10");e.exports=function(a){return!b("MessengerConfig").SegoeUIDisabled&&h&&g.test(a)}}),null);
__d("MessengerBubble.react",["cx","fbt","invariant","EmojiOnlyMessage.react","MercuryIDs","MercuryMessageBody.react","MercuryMessageRenderLocations","MessageReplyPermissions","MessengerActions","MessengerCodeBubble.react","MessengerColors","MessengerContactActions.bs","MessengerCustomColorUtils.bs","MessengerDecorator","MessengerDotComAndInboxM4Check.bs","MessengerEnvironment","MessengerInnerDecorators.react","MessengerSupportedEmojiUtils","React","RepliedToMessageContent.react","SimpleXUIDialog","goURI","immutable","joinClasses","shouldNotRenderSegoe"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("MessengerContactActions.bs").actions;c=b("React").PropTypes;f=babelHelpers.inherits(a,b("React").PureComponent);j=f&&f.prototype;function a(){__p&&__p();var a,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return c=(a=j.constructor).call.apply(a,[this].concat(f)),this.state={emojis:void 0},this.$1=function(a,c,e){__p&&__p();switch(a){case k.MESSAGE:this.$2(c,e);break;case k.PROFILE:a=b("MercuryIDs").getParticipantIDFromUserID(c.id);a=this.props.participants&&this.props.participants.get(a);if(a&&a.href){var f=b("MessengerEnvironment").messengerdotcom;f?window.open(a.href):b("goURI")(a.href)}else this.$2(c,e);break;case k.FREE_CALL:d(["FBRTCCore","MNRTCCallabilityStore"],function(a,d){var e=c.id;e||i(0,1247);a.isAvailableForWebrtcCalling(e)||d.isCallable(e)?a.startOutgoingCall(e,"messenger_bubble_free_call",!1):b("SimpleXUIDialog").show(h._("{firstname} can't be reached at the moment.",[h._param("firstname",c.contactName)]),h._("Can't Connect Call"))});break}}.bind(this),c}a.prototype.componentDidMount=function(){if(!this.props.emojis){var a=this.props.body||"";a=b("MessengerSupportedEmojiUtils").getEmojiOnlyContents(a);a&&a.length&&this.setState({emojis:a})}};a.prototype.render=function(){__p&&__p();var a=!1,c=null;this.state.emojis?c=b("React").createElement(b("EmojiOnlyMessage.react"),{contents:this.state.emojis}):(a=!0,c=b("React").createElement(b("MercuryMessageBody.react"),{ref:this.props.bodyRef,body:this.props.body,className:"_3oh-"+(b("shouldNotRenderSegoe")(this.props.body||"")?" _2por":"")+" _58nk",threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,ranges:this.props.ranges,metaRanges:this.props.metaRanges,plainText:this.props.plainText,threadID:this.props.threadID,customLike:this.props.customLike,onContactSelect:this.$1,renderLocation:b("MercuryMessageRenderLocations").MESSENGER}));var d=[],e=[],f=this.props.message,g=!!this.props.isFromViewer;f&&!this.props.excludeAfterDecorators&&(b("MessengerDecorator").getAfterDecorators().forEach(function(a){a.check(f)&&(d.push(a.render(f,g,this.props)),e.push(a.getAdditionalClassNames()))}.bind(this)),b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(f)&&e.push(a.getAdditionalClassNames())}));var h=e.join(" "),i=null;this.props.body&&(this.props.containsCode?i=b("React").createElement(b("MessengerCodeBubble.react"),babelHelpers["extends"]({},this.props,{attachments:this.props.attachments,body:this.props.body,customColor:this.props.customColor,isFromViewer:this.props.isFromViewer,ranges:this.props.ranges||[],threadID:this.props.threadID||""})):i=b("React").createElement("div",{className:"_aok"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7i2m":""),tabIndex:0,"aria-label":this.props.body},c,this.props.attachments));var j=this.props.repliedToMessage&&b("MessageReplyPermissions").bubbleContainsRepliedToMessage(this.props.repliedToMessage,!!(!this.props.containsCode&&this.state.emojis))?b("React").createElement(b("RepliedToMessageContent.react"),{isFromViewer:this.props.isFromViewer,isLinkified:!0,isMessengerUI:!0,repliedToMessageData:this.props.repliedToMessage,scrollToRepliedMessage:this.props.scrollToRepliedMessage,replyInOneBubble:!0}):null,k=this.props.tooltip||{},l=this.props.isFromViewer&&!this.state.emojis&&!this.props.containsCode,m=b("MessengerDotComAndInboxM4Check.bs").yes&&this.props.thread&&l?babelHelpers["extends"]({backgroundAttachment:"fixed"},b("MessengerColors").makeLinearGradient(this.props.thread.gradient_colors,this.props.thread.solid_color,b("MessengerCustomColorUtils.bs").defaultColor())):{};return b("React").createElement("div",babelHelpers["extends"]({},k,{style:m,className:b("joinClasses")(h,this.props.className,(this.props.containsCode?"":"_hh7")+(b("MessengerDotComAndInboxM4Check.bs")&&!this.props.containsCode?" _6ybn":"")+(this.props.containsCode?" _4qoc":"")+(!this.props.isFromViewer&&this.props.containsCode?" _65sp":"")+(this.props.isFromViewer&&this.props.containsCode?" _65sq":"")+(this.props.containsCode?"":" _s1-")+(!this.props.containsCode&&!this.props.notBubblish?" _52mr":"")+(!this.props.containsCode&&this.props.isP2PAttachment?" _4z55":"")+(!this.props.containsCode&&!!this.state.emojis?" _2f5r":"")+(!this.props.containsCode&&!!this.state.emojis?" _581a":"")+(l?" _43by":"")+(b("MessengerDotComAndInboxM4Check.bs").yes&&l?" _6ybp":"")+(!this.props.containsCode&&a?" _3oh-":"")+(j?" _6uum":""))}),!f||this.props.isPageMessage?null:b("React").createElement(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:f,isFromViewer:!!this.props.isFromViewer,hovered:this.props.isHovered,onReplyToMessage:this.props.onReplyToMessage,messageProps:babelHelpers["extends"]({},this.props,{handleToggleOriginal:this.props.handleToggleOriginal,hasFormatting:this.props.hasFormatting,isShowingOriginal:this.props.plainText}),isSavedView:this.props.isSavedView}),j,i,i?null:c,i?null:this.props.attachments,d)};a.prototype.$2=function(a,c){c&&c.preventDefault();c=b("MercuryIDs").getThreadIDFromUserID(a.id);c&&b("MessengerActions").selectThread(c)};a.propTypes={attachments:c.instanceOf(b("immutable").List),body:c.string,customColor:c.string,customLike:c.object,excludeAfterDecorators:c.bool,isFromViewer:c.bool,message:c.object,metaRanges:c.array,notBubblish:c.bool,onUnwrap:c.func,participants:c.object,plainText:c.bool,ranges:c.array,threadID:c.string,threadCustomColor:c.string,onReplyToMessage:c.func,isHovered:c.bool,handleToggleOriginal:c.func,hasFormatting:c.func,isPageMessage:c.bool,isSavedView:c.bool,repliedToMessage:c.object,scrollToRepliedMessage:c.func,thread:c.object};e.exports=a}),null);
__d("MessengerCodeBubble.react",["Bootloader","MessengerCodePasteUtils","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.componentDidMount=function(){b("Bootloader").loadModules(["Prism.Complete"],function(a){for(var c in this.refs){var d=b("ReactDOM").findDOMNode(this.refs[c]);a.highlightElement(d)}}.bind(this),"MessengerCodeBubble.react")};a.prototype.render=function(){var a=b("MessengerCodePasteUtils").getCodeAndMessageBubbles(this.props.body,this.props.ranges,this.props.threadID,this.props.customColor,this.props.isFromViewer);return b("React").createElement("div",{className:this.props.className},a)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("ComposedEntityMutability",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MUTABLE:0,IMMUTABLE:1,SEGMENTED:2})}),null);
__d("MessengerConstants",[],(function(a,b,c,d,e,f){"use strict";a={NEW_THREAD_KEY:"new",BROWSER_EXTENSIONS_DIALOG_DIMENSIONS:{HEIGHT:604,WIDTH:405}};e.exports=a}),null);
__d("MessengerEditorStateManager",["CacheStorage","ComposedEntityMutability","ComposedEntityMutabilityToName","ComposedEntityTypeToName","DraftEntityInstance","EditorState","FBLogger","LogHistory","MessengerConstants","SelectionState","decodeBlocks","encodeBlocks","mapObject"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ComposedEntityMutability").IMMUTABLE,h=b("LogHistory").getInstance("messenger_editor_state_manager"),i=new(b("CacheStorage"))("localstorage"),j=new(b("CacheStorage"))("memory"),k=!1,l;a={get:function(a){__p&&__p();if(!a)return this._getEmptyEditorState();if(a===b("MessengerConstants").NEW_THREAD_KEY)return l||this._getEmptyEditorState();var c=i.get(a,!1);k&&(c?(j.set(a,c),i.remove(a)):c=j.get(a,!1));if(!c)return this._getEmptyEditorState();a=c.encodedBlocks;var d=b("mapObject")(a.entityMap,function(a,c){return new(b("DraftEntityInstance"))({type:b("ComposedEntityTypeToName")[a.type],mutability:b("ComposedEntityMutabilityToName")[g],data:a.data})});a=b("decodeBlocks")(a.blocks,d);d=b("EditorState").createWithContent(a);return b("EditorState").acceptSelection(d,new(b("SelectionState"))(c.selection))},set:function(a,c){if(a===b("MessengerConstants").NEW_THREAD_KEY){l=c;return}var d=b("encodeBlocks")(c.getCurrentContent());c=c.getSelection();var e=c.toJS(),f=k?j:i;f=f.set(a,{encodedBlocks:d,selection:e});f||(this._logWriteError(a),this._switchToMemoryStore(a,d,c))},_logWriteError:function(a){var c=i.getLastSetExceptionMessage(),d=i.getStorageKeyCount();b("FBLogger")("messenger_dot_com").warn("Fail to write to MessengerEditorState %s  %s",c,d);h.debug("set_editor_state_fail",JSON.stringify({threadID:a,error:c,keysCount:d}))},_switchToMemoryStore:function(a,c,d){if(!k){b("FBLogger")("messenger_dot_com").warn("Switching to MemoryStorage");h.debug("Switching to memoryStorage");k=!0;d=d.toJS();j.set(a,{encodedBlocks:c,selection:d})}},_getEmptyEditorState:function(){var a=b("EditorState").createEmpty();return b("EditorState").forceSelection(a,a.getSelection())}};e.exports=a}),null);
__d("MessengerPresenceStatusUtils",["fbt","AvailableListConstants","CurrentUser","LastActiveTimes","MercuryIDs","PresenceStatus","WorkChatAvailabilityStatusLoader","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getStatusFromCanonicalThread:function(a,c){__p&&__p();var d=null;if(c&&c.is_canonical){a=a.get(b("MercuryIDs").getParticipantIDFromFromThreadID(c.thread_id));if(a){a.is_messenger_user?c=b("CurrentUser").isWorkUser()?g._("Workplace Chat"):g._("Messenger"):c=b("CurrentUser").isWorkUser()?g._("Workplace"):g._("Facebook");var e=null,f=!1;if(b("WorkChatAvailabilityStatusLoader").isLoaded()&&b("CurrentUser").isWorkUser()&&b("gkx")("678573")){var h=b("WorkChatAvailabilityStatusLoader").getStoreEnforce();e={isDoNotDisturb:h.getIsDoNotDisturb(a.fbid),description:h.getDescriptionWithUserName(a.short_name,a.fbid)};f=e.isDoNotDisturb}h=b("PresenceStatus").get(a.fbid);var i,j;h!==b("AvailableListConstants").ACTIVE&&(i=b("LastActiveTimes").get(a.fbid),j=b("LastActiveTimes").getShortDisplay(a.fbid));h=h===b("AvailableListConstants").ACTIVE&&!f;d={contact:a,platform:c,isUserActive:h,availabilityStatusData:e,lastActiveTS:f?null:i,lastActive:f?null:j}}}return d}};e.exports=a}),null);
__d("MessengerComposerActions",["MessengerDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({ADD_TOKEN:null,REMOVE_TOKEN:null,FOCUS_COMPOSER:null,FOCUS_TYPEAHEAD:null,EXIT_COMPOSE_STATE:null,MOVE_DRAFT:null});a={Types:g,addToken:function(a){b("MessengerDispatcher").dispatch({type:g.ADD_TOKEN,entry:a})},moveDraftToNextThread:function(a){b("MessengerDispatcher").dispatch({type:g.MOVE_DRAFT,threadID:a})},removeToken:function(a){b("MessengerDispatcher").dispatch({type:g.REMOVE_TOKEN,entry:a})},focusComposer:function(){b("MessengerDispatcher").dispatch({type:g.FOCUS_COMPOSER})},focusTypeahead:function(){b("MessengerDispatcher").dispatch({type:g.FOCUS_TYPEAHEAD})},exitComposeState:function(){b("MessengerDispatcher").dispatch({type:g.EXIT_COMPOSE_STATE})}};e.exports=a}),null);
__d("LinkWithHiddenURLBar.react",["Link.react","React","ReactDOM","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.link=null,this.$5=function(a){this.link=a}.bind(this),this.$4=function(a){this.$6(),this.props.onFocus&&this.props.onFocus(a)}.bind(this),this.$2=function(a){this.$1(),this.props.onBlur&&this.props.onBlur(a)}.bind(this),this.$3=function(a){this.$6(),!a.metaKey&&this.props.onClick&&(this.props.onClick(a),a.preventDefault()),this.props.onAllClicks&&this.props.onAllClicks(a),b("setImmediate")(function(){return this.$1()}.bind(this))}.bind(this),c}a.prototype.componentDidMount=function(){this.$1()};a.prototype.render=function(){var a=this.props,c=a.label;a.onBlur;a.onAllClicks;a.onClick;a.onFocus;a=babelHelpers.objectWithoutPropertiesLoose(a,["label","onBlur","onAllClicks","onClick","onFocus"]);return b("React").createElement(b("Link.react"),babelHelpers["extends"]({},a,{label:c,onBlur:this.$2,onClick:this.$3,onFocus:this.$4,ref:this.$5}))};a.prototype.$1=function(){if(this.link){var a=b("ReactDOM").findDOMNode(this.link);a.href&&(a.setAttribute("data-href",a.href),a.removeAttribute("href"))}};a.prototype.$6=function(){if(this.link){var a=b("ReactDOM").findDOMNode(this.link),c=a.getAttribute("data-href");c&&(a.setAttribute("href",c),a.removeAttribute("data-href"))}};e.exports=a}),null);
__d("MercuryAttachmentAttribution.react",["cx","fbt","Image.react","ImmutableObject","Link.react","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=this.$1();return!a?null:b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_29ew")},b("React").createElement(b("Image.react"),{src:a.icon_url,className:"_29ex"}),b("React").createElement("span",{className:"_29ey"},a.name),this.$2())};a.prototype.$1=function(){return this.props.attachment&&this.props.attachment.app_attribution};a.prototype.$2=function(){var a=this.$1();if(!a||!a.metadata)return null;var c="_439n";try{a=JSON.parse(a.metadata)}catch(a){return null}return a.spotify_link?b("React").createElement(b("Link.react"),{className:c,href:a.spotify_link,target:"_blank"},h._("Open")):null};function a(){i.apply(this,arguments)}a.propTypes={attachment:c.instanceOf(b("ImmutableObject"))};e.exports=a}),null);
__d("MessengerAttachmentAttribution.react",["cx","ImmutableObject","MercuryAttachmentAttribution.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("MercuryAttachmentAttribution.react"),{attachment:this.props.attachment,className:"_2f5n _4br2"})};function a(){h.apply(this,arguments)}a.propTypes={attachment:c.instanceOf(b("ImmutableObject"))};e.exports=a}),null);
__d("MessengerBootloadedLogMessage.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("MessengerLogMessage.react").__setRef("MessengerBootloadedLogMessage.react"),placeholder:b("React").createElement("div",{className:"_497p"},"...")})};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MessengerBubbleBlock.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_52mr _4h13 _3058"},this.props.children)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MessengerCollapsedLogMessageGroup.react",["cx","fbt","Link.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.state={collapsed:!0},b}a.prototype.render=function(){var a=h._("See latest activity"),c=h._("See less activity");return b("React").createElement("div",{className:"_497p"},b("React").createElement(b("Link.react"),{className:"_4ea1",onClick:function(){return this.setState({collapsed:!this.state.collapsed})}.bind(this)},this.state.collapsed?a:c),this.state.collapsed?null:b("React").createElement("div",null,b("React").createElement("div",{className:"_4ea2"}),this.props.children,b("React").createElement("div",{className:"_4ea2"})))};e.exports=a}),null);
__d("MessageThreadAssociatedObjectKey",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTION_LINK:"action_link",APPROVAL_MODE_TOGGLEABLE:"approval_mode_toggleable",EVENT_PLACE:"event_place",ID:"id",IS_WORKPLACE_COMMUNITY:"is_workplace_community",MENTORSHIP_PROGRAM:"mentorship_program",NAME:"name",PRIVACY_MODE:"privacy_mode",PROFILE_PICTURE:"profile_picture",ROOM_TYPE:"room_type",START_TIMESTAMP:"start_timestamp"})}),null);
__d("MessengerProfileLinkAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLICK:"click",HOVER:"hover"})}),null);
__d("MessengerProfileLinkDomain",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",FB_SLASH_MESSAGES:"fb_slash_messages",WORK_CHAT:"work_chat"})}),null);
__d("MessengerProfileLinkLogger.bs",["MessengerProfileLinkTypedLogger"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){new(b("MessengerProfileLinkTypedLogger"))().setTargetID(a).setDomain(c).setLinkLocation(d).setAction(e).log();return 0}f.logItemImpression=a}),null);
__d("ProfileLinkReact.bs",["ReasonReact.bs","bs_js_null_undefined","ProfileLink.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){return b("ReasonReact.bs").wrapJsForReason(b("ProfileLink.react"),{className:b("bs_js_null_undefined").fromOption(a),href:b("bs_js_null_undefined").fromOption(c),onClick:b("bs_js_null_undefined").fromOption(d),onMouseEnter:b("bs_js_null_undefined").fromOption(e),onMouseLeave:b("bs_js_null_undefined").fromOption(f),target:b("bs_js_null_undefined").fromOption(g),uid:h},i)}f.make=a}),null);
__d("MessengerProfileLink.bs",["URI","bs_block","bs_curry","React","Arbiter","LinkReact.bs","CurrentUser","ReasonReact.bs","bs_js_primitive","ProfileLinkReact.bs","isMessengerDotComURI","MessengerProfileLinkAction","MessengerProfileLinkDomain","MessengerProfileLinkLogger.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").reducerComponent("MessengerProfileLink");function h(a,c,d,e,f,h){__p&&__p();var i=b("isMessengerDotComURI")(new(b("URI"))(window.location.href));h=b("CurrentUser").isWorkUser();var j=h?b("MessengerProfileLinkDomain").WORK_CHAT:i?b("MessengerProfileLinkDomain").MESSENGER_DOT_COM:b("MessengerProfileLinkDomain").FB_SLASH_MESSAGES,k=function(){return b("MessengerProfileLinkLogger.bs").logItemImpression(f,j,d,b("MessengerProfileLinkAction").HOVER)},l=function(){return b("MessengerProfileLinkLogger.bs").logItemImpression(f,j,d,b("MessengerProfileLinkAction").CLICK)};return[g[0],g[1],g[2],g[3],function(a){var c=b("Arbiter").subscribe("Hovercard/show",function(c,d){return b("bs_curry")._1(a[3],0)}),d=b("Arbiter").subscribe("Hovercard/hide",function(c,d){return b("bs_curry")._1(a[3],1)});return b("bs_curry")._1(a[4],function(){c.unsubscribe();d.unsubscribe();return 0})},g[5],g[6],g[7],function(d){return b("React").createElement("span",void 0,a!==void 0?i?b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,a,void 0,function(){d[1][0]&&k(0);return l(0)},void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,[e])):b("ReasonReact.bs").element(void 0,void 0,b("ProfileLinkReact.bs").make(void 0,void 0,function(){return l(0)},void 0,function(){var a=d[1][0];if(a)return k(0);else return 0},void 0,f,[e])):e)},function(){return[!1]},g[10],function(c,a){if(c)return b("bs_block").__(0,[[!1]]);else return b("bs_block").__(0,[[!0]])},g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(b("bs_js_primitive").nullable_to_opt(a.href),a.target,a.location,a.name,a.uid,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MessengerProfileLinkLocation",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CONTEXT_BANNER:"context_banner",INFOPANEL:"infopanel"})}),null);
__d("TimeSpentRoomTypeEnum$FbtEnum",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({GROUP:"Group",EVENT:"Event"});e.exports=a}),null);
__d("MessengerContextBanner.react",["cx","fbt","Badge.react","CurrentUser","Image.react","ImageBlock.react","Link.react","MercuryParticipantsConstants","MercuryParticipantsImage.react","MercuryShareAttachmentRenderLocations","MercuryThreadImage.react","MessageThreadAssociatedObjectKey","MessengerProfileLink.bs","MessengerProfileLinkLocation","MessengerTextWithEmoticons.react","React","TimeSpentRoomTypeEnum","TimeSpentRoomTypeEnum$FbtEnum","immutable","requireWeak"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerProfileLink.bs").jsComponent;c=b("React").PropTypes;var k;b("requireWeak")("MessengerThreadImageReact.bs",function(a){k=a.jsComponent});i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=b("React").createElement(b("ImageBlock.react"),{className:"_llj"+(this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER?" _2eu-":"")+(this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?" _2eu_":""),spacing:"large",style:this.props.style},this.$1(),b("React").createElement("div",{className:"_lll"},this.$2(),this.$3(),this.$4())),c=this.props.associatedObject;c&&c[b("MessageThreadAssociatedObjectKey").ACTION_LINK]&&(a=b("React").createElement(b("Link.react"),{href:c[b("MessageThreadAssociatedObjectKey").ACTION_LINK],target:"_blank",style:{textDecoration:"none"}},a));return a};a.prototype.$1=function(){var a=this.props.location===b("MercuryShareAttachmentRenderLocations").MESSENGER,c=this.props.associatedObject,d=null;if(!this.props.contactName&&c&&a)d=b("React").createElement(b("Image.react"),{className:"_4ld- _1wrc",src:c[b("MessageThreadAssociatedObjectKey").PROFILE_PICTURE]});else if(this.props.thread){c=k&&a?k:b("MercuryThreadImage.react");d=b("React").createElement(c,{showBadge:!1,participants:this.props.participants,size:a?60:null,thread:this.props.thread,viewer:this.props.viewer})}else this.props.participantIDs&&(d=b("React").createElement(b("MercuryParticipantsImage.react"),{participants:this.props.participantIDs,size:b("MercuryParticipantsConstants").BIG_IMAGE_SIZE}));return b("React").createElement("div",{className:"_llk"},d)};a.prototype.$2=function(){__p&&__p();if(this.props.location!==b("MercuryShareAttachmentRenderLocations").MESSENGER)return null;var a=this.props.isVerified?b("React").createElement(b("Badge.react"),{size:"medium",type:"verified"}):null,c=this.props.contactName;if(!c){var d=this.props.associatedObject;c=d?d[b("MessageThreadAssociatedObjectKey").NAME]:null}d=this.props.contactFBProfile;var e=this.props.contactID;return b("React").createElement("div",{className:"_llq"},b("React").createElement("span",{className:"_3oh-"},b("React").createElement(j,{href:d,location:b("MessengerProfileLinkLocation").CONTEXT_BANNER,name:c,uid:e}),a))};a.prototype.$3=function(){return b("React").createElement("div",{className:"_1n-e _36zg"},b("React").createElement(b("MessengerTextWithEmoticons.react"),{text:this.props.connectionContext||"",renderEmoticons:!1}))};a.prototype.$4=function(){__p&&__p();if(!this.props.contextItems.length){var a=this.props.associatedObject;if(a){a=b("TimeSpentRoomTypeEnum")[a[b("MessageThreadAssociatedObjectKey").ROOM_TYPE]];var c=b("CurrentUser").isWorkUser()?"Workplace":"Facebook";return b("React").createElement("div",{className:"_1n-e"},h._({"EVENT":"Go to {productName} event","GROUP":"Go to {productName} group"},[h._param("productName",c),h._enum(a,b("TimeSpentRoomTypeEnum$FbtEnum"))]))}return null}return b("React").createElement("div",null,this.props.contextItems.map(function(a,c){return b("React").createElement("div",{className:"_1n-e",key:"item:"+c},b("React").createElement(b("MessengerTextWithEmoticons.react"),{text:a||"",renderEmoticons:!1}))}))};function a(){i.apply(this,arguments)}a.propTypes={contactFBProfile:c.string,contactID:c.string,contactName:c.string,associatedObject:c.object,connectionContext:c.string,contextItems:c.arrayOf(c.string).isRequired,isVerified:c.bool,location:c.string.isRequired,participantIDs:c.arrayOf(c.string),participants:c.instanceOf(b("immutable").Map),thread:c.object,viewer:c.string.isRequired};e.exports=a}),null);
__d("XMessengerContextBannerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/messenger/context_banner/",{profile_id:{type:"Int",required:!0},max_context_items:{type:"Int",defaultValue:3}})}),null);
__d("MessengerContextInformationStore",["AsyncRequest","EventEmitter","TimeSlice","XMessengerContextBannerController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=new Map(),i=new Map();c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$MessengerContextInformationStore1=function(a){if(i.get(a))return;var c=b("XMessengerContextBannerController").getURIBuilder().setInt("profile_id",a).getURI();c=new(b("AsyncRequest"))().setAllowCrossPageTransition(!0).setURI(c).setHandler(this.$MessengerContextInformationStore2.bind(this,a));i.set(a,c);c.send()}.bind(this),c}a.prototype.getOrFetch=function(a){var c=h.get(a);c||b("TimeSlice").guard(this.$MessengerContextInformationStore1,"Chat Tab Messenger Context Banner Fetch",{propagationType:b("TimeSlice").PropagationType.ORPHAN})(a);return c};a.prototype.$MessengerContextInformationStore2=function(a,b){h.set(a,{connectionContext:b.payload.connection_context||"",contextItems:b.payload.context_items||[]}),i["delete"](a),this.emit("change")};e.exports=new a()}),null);
__d("PagesMessengerContextBanner.react",["cx","MercuryThreadImage.react","ProfileHeaderCoverPhoto.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=83,j=284,k=60;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=this.props.coverPhotoData?b("React").createElement(b("ProfileHeaderCoverPhoto.react"),{coverPhotoData:this.props.coverPhotoData,height:i,width:j}):null;return b("React").createElement("div",{className:"_fj3"},a,b("React").createElement("div",{className:"_2-0o"},b("React").createElement(b("MercuryThreadImage.react"),{className:"_2gye",size:k,thread:this.props.thread,viewer:this.props.viewer})))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MessengerContextBannerContainer.react",["DOMDimensions","MercuryIDs","MercuryShareAttachmentRenderLocations","MessengerContextBanner.react","MessengerContextInformationStore","MessengerParticipants.bs","PagesMessagingMercuryChatTabStore","PagesMessengerContextBanner.react","React","ReactComponentWithPureRenderMixin","ReactDOM","StoreAndPropBasedStateMixin","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;var g=b("React").createClass({displayName:"MessengerContextBannerContainer",mixins:[b("ReactComponentWithPureRenderMixin"),b("StoreAndPropBasedStateMixin")(b("MessengerContextInformationStore"),b("PagesMessagingMercuryChatTabStore"))],propTypes:{location:a.string.isRequired,onResize:a.func,otherUserFBIDs:a.arrayOf(a.string),thread:a.object,threadID:a.string,viewer:a.string.isRequired},statics:{calculateState:function(a){__p&&__p();var c=a.thread,d=null;c?d=c&&c.participants:a.otherUserFBIDs&&a.otherUserFBIDs.length===1&&(d=a.otherUserFBIDs.map(function(a){return b("MessengerParticipants.bs").getIDFromVanityOrFBID(a)}));var e=b("immutable").Map();d&&(e=e.withMutations(function(a){d&&d.forEach(function(c){a.set(c,b("MessengerParticipants.bs").getNow(c))})}));var f=null,h=null;c?(f=e.get(b("MercuryIDs").getParticipantIDFromFromThreadID(c.thread_id)),h=c.associated_object):f=d&&e.get(d[0]);c=b("PagesMessagingMercuryChatTabStore").getStateByThread(a.threadID);a=c.coverPhotoData;return babelHelpers["extends"]({associatedObject:h,contact:f,coverPhotoData:a,participantIDs:d,participants:e},g.getContextInformation(f&&f.fbid&&f.fbid.toString()))},getContextInformation:function(a){var c;a&&(c=b("MessengerContextInformationStore").getOrFetch(a.toString()));return c||{connectionContext:"",contextItems:[]}}},componentDidUpdate:function(){var a=b("ReactDOM").findDOMNode(this);if(!a)return;a=b("DOMDimensions").getElementDimensions(a).height;this.props.onResize&&this.props.onResize(a)},render:function(){if(!this.state.contact)return this.state.associatedObject&&this.props.location==b("MercuryShareAttachmentRenderLocations").MESSENGER?b("React").createElement(b("MessengerContextBanner.react"),{associatedObject:this.state.associatedObject,contextItems:this.state.contextItems,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,thread:this.props.thread,viewer:this.props.viewer}):null;if(this.state.contact.type==="page"){if(!this.state.connectionContext&&!this.state.contextItems.length)return null;if(this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT)return b("React").createElement(b("PagesMessengerContextBanner.react"),{coverPhotoData:this.state.coverPhotoData,thread:this.props.thread,viewer:this.props.viewer})}return b("React").createElement(b("MessengerContextBanner.react"),{contactFBProfile:this.state.contact.href,contactID:this.state.contact.fbid,contactName:this.state.contact.name,connectionContext:this.state.connectionContext,contextItems:this.state.contextItems,isVerified:this.state.contact.is_verified,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,thread:this.props.thread,viewer:this.props.viewer})}});e.exports=g}),null);
__d("MessageList.react",["cx","MercuryActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageGroup","MercuryShareAttachmentRenderLocations","MessagingGenericAdminTextType","MessengerCallLogEvent","MessengerDomIDs.bs","MessengerGrowthNewFriendBumpSubtype","MessengerLightweightActionUtils","MessengerMessage.bs","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs","PagesMessageListGreeting.react","React","ReactDOM","gkx","immutable","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerDomIDs.bs").ids,j=b("MessengerPresenceProvider.bs").jsComponent;c=b("React").PropTypes;var k=2,l=1e3*60*60,m=6,n=function(a){__p&&__p();var c;c=(c=a)!=null?(c=c.log_message_data)!=null?c.message_type:c:c;switch(c){case b("MessagingGenericAdminTextType").GROUP_POLL:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.question_id:c:c:c;case b("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.game_id:c:c:c;case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP:return(c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event_id:c:c:c;case b("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST:c=((c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.friend_request_subtype:c:c:c)||((c=a)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.subtype:c:c:c);return!c||c.toLowerCase()!==b("MessengerGrowthNewFriendBumpSubtype").ICEBREAKER?null:q(a);case b("MessagingGenericAdminTextType").MESSENGER_ICEBREAKER_VOTE_CAST:return q(a);default:return null}},o=function(a){return b("MessengerLightweightActionUtils").isLWAMessage(a)?"lwa":null};d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={activeMessageID:null,messageGroups:[],prevMessages:null},this.$5=function(a){this.setState(function(b){return{activeMessageID:b.activeMessageID===a?null:b.activeMessageID}})}.bind(this),this.$6=function(a){this.setState({activeMessageID:a})}.bind(this),b}a.getDerivedStateFromProps=function(a,c){if(c.prevMessages!==a.messages)return{messageGroups:b("MercuryMessageGroup").calculateMessageGroups(a.messages,a.location),prevMessages:a.messages};else return null};a.prototype.render=function(){__p&&__p();var a=this,c=this.props,d=c.DateBreak,e=c.forGameChat,f=c.location,g=c.MessageGroup,h=c.CollapsedLogMessageGroup,q=[],v=[],w;c=this.props.thread&&this.props.thread.solid_color;var x=c?{backgroundColor:c}:null,y=this.state.activeMessageID,z=this.state.messageGroups,A=z.length,B=this.props.readReceipts;c=B.last();var C=c?c.watermark:0,D=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),E={};for(var c=this.props.messages.size-1;c>=0;c--){var F=this.props.messages.get(c),G=n(F)||o(F);G&&!E[G]&&(E[G]=F.message_id)}var H=function(i){__p&&__p();var n=i>0?z[i-1]:null;n=n&&n.length>0?n[n.length-1]:null;var H=z[i],K=H[0],L=H[H.length-1],M=!1;if(!n||K.timestamp-n.timestamp>l){M=!0;n=b("React").createElement(d,{date:new Date(K.timestamp),key:"db:"+K.message_id,ref:"db:"+K.message_id});v.length===0&&q.push(n)}n=o(K);if(n&&E[n]!==K.message_id){n=a.$1(K,E);q.push(n);return"continue"}if(K.action_type==b("MercuryActionType").LOG_MESSAGE){n=(G=K)!=null?(G=G.log_message_data)!=null?G.message_type:G:G;var N=(F=K)!=null?(F=F.log_message_data)!=null?(F=F.untypedData)!=null?F.friend_request_subtype:F:F:F,O=n===b("MessagingGenericAdminTextType").PARTIES_PRESENCE,P=n===b("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE,Q=n===b("MessagingGenericAdminTextType").GROUP_POLL;N=n===b("MessagingGenericAdminTextType").MESSENGER_ICEBREAKER_VOTE_CAST||n===b("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST&&N&&N.toLowerCase()===b("MessengerGrowthNewFriendBumpSubtype").ICEBREAKER;var R=[b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY,b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP].includes(n);if((f===b("MercuryShareAttachmentRenderLocations").CHAT||f===b("MercuryShareAttachmentRenderLocations").MESSENGER)&&(K.log_message_type===b("MercuryLogMessageType").VIDEO_CALL||K.log_message_type===b("MercuryLogMessageType").PHONE_CALL||n===b("MessagingGenericAdminTextType").MESSENGER_CALL_LOG&&(((c=K)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event:c:c:c)===b("MessengerCallLogEvent").MISSED_CALL||((J=K)!=null?(J=J.log_message_data)!=null?(J=J.untypedData)!=null?J.event:J:J:J)===b("MessengerCallLogEvent").ONE_ON_ONE_CALL_ENDED||b("gkx")("678642")))){n=a.$2(K,D,z,A,i,B,C,L,E);q.push(n)}else{n=a.$3(K,E);w=K.message_id;!P&&!Q&&!R&&!N&&v.push(n);if(O&&b("gkx")("678643"))return"continue";(v.length===H.length||P||Q||R||N)&&(a.$4(v,q,w,x,h),v=[]);(P||Q||R||N)&&q.push(n)}return"continue"}H=b("immutable").List(H);var S=r(z,A,i,E),T=!t(B,H,S),U=s(C,L),V=u(a.props.deliveryTimestamp,L),W=H.first().author,X=b("MessengerMessage.bs").getPersona(L),Y=D===K.author;O=Y?0:m+k;var Z=a.props.maxBubbleWidth?a.props.maxBubbleWidth-O:null;q.push(b("React").createElement(j,{subscribeToIDs:W?[W]:null,key:"pp:"+K.message_id,ref:"pp:"+K.message_id},function(a){return b("React").createElement(g,{activeMessageID:p(y,H),author:W,deliveryTimestamp:V,forGameChat:e,hasDateBreak:M,isCanonical:this.props.isCanonical,isFromViewer:Y,isPageMessage:this.props.isPageMessage,isOnline:W?b("MessengerParticipantUtils.bs").has(a,W):!1,lastReadTimestamp:U,maxBubbleWidth:Z,messages:H,nextTimestamp:S,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$5,onMessageSelect:this.$6,onStickerClick:this.props.onStickerClick,onReplyToMessage:this.props.onReplyToMessage,pageID:this.props.isPageMessage===!0?this.props.viewer:null,persona:b("gkx")("678634")?X:null,readReceipts:T?B:b("immutable").OrderedMap(),key:"mg:"+K.message_id,ref:"mg:"+K.message_id,thread:this.props.thread,threadID:this.props.threadID,scrollToRepliedMessage:this.props.scrollToRepliedMessage})}.bind(a)))};for(var I=0;I<A;I++){var J,K=H(I);if(K==="continue")continue}K=this.props.threadID||this.props.thread&&this.props.thread.thread_id||this.props.thread&&this.props.thread.thread_fbid;H=null;f===b("MercuryShareAttachmentRenderLocations").MESSENGER&&K&&this.props.isPageMessage&&(H=b("React").createElement(b("PagesMessageListGreeting.react"),{messageCount:v.length+A,threadID:K}));return b("React").createElement("div",{id:f===b("MercuryShareAttachmentRenderLocations").MESSENGER?i.CONVERSATION:null},H,q)};a.prototype.getMessageElement=function(a,c){__p&&__p();var d;if(c===!0){var e=this.refs["db:"+a];if(e)return b("ReactDOM").findDOMNode(e)}e=this.$7(a);if(!e)return null;e=e[0].message_id;d=(d=this.refs["pp:"+e])==null?void 0:d.refs["mg:"+e];if(!d)return null;return c===!0&&e===a?b("ReactDOM").findDOMNode(d):d.getMessageElement(a)};a.prototype.getMessageComponent=function(a){var b,c=this.$7(a);if(!c)return null;c=c[0].message_id;b=(b=this.refs["pp:"+c])==null?void 0:b.refs["mg:"+c];return!b?null:b.getMessage(a)};a.prototype.$7=function(a){return this.state.messageGroups.find(function(b){return b.some(function(b){return b.message_id===a})})};a.prototype.$4=function(a,c,d,e,f){a.length!==0&&(a.length>1?c.push(b("React").createElement(f,{key:"mg:"+d,style:e},a)):c.push(b("React").createElement("div",{key:"mg:"+d},a)))};a.prototype.$2=function(a,c,d,e,f,g,h,i,k){__p&&__p();var l,m,n=this.props.MessageGroup;m=((m=a)!=null?(m=m.log_message_data)!=null?m.untypedData:m:m)||{};l=(l=a)!=null?(l=l.log_message_data)!=null?l.message_type:l:l;if(l===b("MessagingGenericAdminTextType").MESSENGER_CALL_LOG){l={message_type:b("MessagingGenericAdminTextType").MESSENGER_CALL_LOG,caller:b("MercuryIDs").getParticipantIDFromUserID(b("nullthrows")(m.caller_id,"caller id")),callee:b("MercuryIDs").getParticipantIDFromUserID(b("nullthrows")(m.callee_id,"callee id")),server_info_data:m.server_info,thread_id:a.thread_fbid,answered:m.event!==b("MessengerCallLogEvent").MISSED_CALL,log_message_type:m.video?b("MercuryLogMessageType").VIDEO_CALL:b("MercuryLogMessageType").PHONE_CALL,event:m.event,added_participants:null,removed_participants:null,untypedData:null,image:null,name:null};a=babelHelpers["extends"]({},a,{log_message_data:l})}m={attach_type:"share",share:{style_list:["rtc_call_log","fallback"],log_message_body:a.log_message_body,log_message_data:a.log_message_data,log_message_type:a.log_message_type,timestamp:a.timestamp}};l=babelHelpers["extends"]({},a,{attachments:[m],body:""});var o=b("immutable").List([l]),p=r(d,e,f,k),q=!t(g,o,p),v=s(h,i),w=u(this.props.deliveryTimestamp,i),x=o.first().author;return b("React").createElement(j,{subscribeToIDs:x?[x]:null,key:a.message_id},function(d){return b("React").createElement(n,{author:o.first().author,deliveryTimestamp:w,forGameChat:this.props.forGameChat,isCanonical:this.props.isCanonical,isFromViewer:c===a.author,isOnline:x?b("MessengerParticipantUtils.bs").has(d,x):!1,isPageMessage:this.props.isPageMessage,lastReadTimestamp:v,maxBubbleWidth:this.props.maxBubbleWidth,messages:o,nextTimestamp:p,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$5,onMessageSelect:this.$6,onStickerClick:this.props.onStickerClick,readReceipts:q?g:b("immutable").OrderedMap(),thread:this.props.thread,threadID:this.props.threadID})}.bind(this))};a.prototype.$3=function(a,c){var d=this.props.LogMessage,e=n(a);c=e?c[e]:null;return a.log_message_type!==b("MercuryLogMessageType").SERVER_ERROR?b("React").createElement(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:a.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,isPageMessage:this.props.isPageMessage,thread:this.props.thread,isLastOfType:c===a.message_id}):null};a.prototype.$1=function(a,c){c=c[b("nullthrows")(o(a),"other group id first message")];var d=this.props.LogMessage;return b("React").createElement(d,{className:this.props.location===b("MercuryShareAttachmentRenderLocations").CHAT?"_5w0o":null,key:a.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:a,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:c===a.message_id})};a.propTypes={CollapsedLogMessageGroup:c.func.isRequired,DateBreak:c.func.isRequired,deliveryTimestamp:c.number.isRequired,forGameChat:c.bool,isCanonical:c.bool,isPageMessage:c.bool,location:c.string.isRequired,LogMessage:c.func.isRequired,loadMoreMessages:c.func,MessageGroup:c.func.isRequired,messages:c.instanceOf(b("immutable").List).isRequired,onAttachmentLoad:c.func,onStickerClick:c.func,onReplyToMessage:c.func,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired,viewer:c.string.isRequired,thread:c.object,threadID:c.string,scrollToRepliedMessage:c.func};function p(a,b){return b.find(function(b){return b.message_id===a})?a:null}function q(a){return(a=a)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.icebreaker_type:a:a:a}function r(a,c,d,e){if(d>=c-1)return Infinity;var f=a[d+1][0],g=o(f);if(g&&e[g]!==f.message_id||((g=f)!=null?g.action_type:g)==b("MercuryActionType").LOG_MESSAGE)return r(a,c,d+1,e);else return f.timestamp}function s(a,b){return b.timestamp>a?a:Infinity}function t(a,b,c){return b.isEmpty()||!a.isEmpty()&&(a.last().action<b.first().timestamp||a.first().action>=c)}function u(a,b){return b.timestamp>a?a:Infinity}e.exports=a}),null);
__d("MessengerDateBreak.react",["cx","FBLogger","React","formatDate","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.shouldComponentUpdate=function(a){"use strict";return this.props.date.getTime()!==a.date.getTime()};a.prototype.render=function(){"use strict";try{var a=b("formatDate")(this.props.date,{future:"g:ia",today:"g:ia",withinWeek:"D g:ia",thisYear:"M jS, g:ia",older:"m/d/Y g:ia"});return b("React").createElement("h4",{className:b("joinClasses")(this.props.className,"_497p _2lpt")},b("React").createElement("time",{className:"_3oh-"},a))}catch(a){b("FBLogger")("messaging").mustfix("invalid timestamp: "+this.props.date.getTime());return null}};function a(){"use strict";h.apply(this,arguments)}a.propTypes={date:c.instanceOf(Date).isRequired};e.exports=a}),null);
__d("MessengerSignals.bs",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("EventEmitter"))(),h="resize";function a(){g.emit(h);return 0}function c(a){return g.addListener(h,a)}f.emitter=g;f.resizeEvent=h;f.resize=a;f.onResize=c}),null);
__d("MessengerFlexArea.react",["cx","CSS","Event","MessengerSignals.bs","React","ReactDOM","ResponsiveBlock.react","Style","SubscriptionsHandler","Vector","getElementRect","getScrollPosition","joinClasses","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerFlexArea",propTypes:{beforeResize:a.func,onResize:a.func,maxHeight:a.oneOfType([a.number,a.oneOf[void 0,null]])},_subscriptions:null,_onResizeTimeout:null,getInitialState:function(){return{height:0}},componentDidMount:function(){var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("Event").listen(window,"resize",b("throttle")(this.recalculateHeight,51)),b("MessengerSignals.bs").onResize(function(){this.recalculateHeight()}.bind(this)));this._subscriptions=a;this.recalculateHeight()},componentDidUpdate:function(a){a.maxHeight!==this.props.maxHeight&&this.recalculateHeight()},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release(),clearTimeout(this._onResizeTimeout)},render:function(){return b("React").createElement(b("ResponsiveBlock.react"),{className:b("joinClasses")(this.props.className,"_9hq"),onResize:this._handleResponsiveBlockResize,style:{height:this.state.height+"px"}},this.props.children)},recalculateHeight:function(){__p&&__p();if(!this.isMounted())return;var a=b("ReactDOM").findDOMNode(this),c=a.parentNode,d=this.state.height,e=b("Vector").getViewportDimensions().y,f=!1;c&&b("Style").get(c,"display")==="none"&&(b("Style").set(c,"display","initial"),f=!0);var g=!1;c instanceof Element&&b("CSS").hasClass(c,"hidden_elem")&&(b("CSS").removeClass(c,"hidden_elem"),g=!0);e-=b("Vector").getElementPosition(c||a).y;var h=b("getScrollPosition")(window);e+=h.y;c&&(Array.from(c.childNodes).forEach(function(a){if(a.nodeType===Node.COMMENT_NODE||b("Style").get(a,"position")==="absolute")return;e-=b("getElementRect")(a).height}),e+=b("getElementRect")(a).height);f&&b("Style").set(c,"display","");g&&c instanceof Element&&b("CSS").addClass(c,"hidden_elem");(isNaN(e)||e<0)&&(e=0);this.props.maxHeight!=null&&(e=Math.min(this.props.maxHeight,e));e!==d&&(this.props.beforeResize&&this.props.beforeResize(),this.setState({height:e},this.props.onResize))},_handleResponsiveBlockResize:b("throttle")(function(a,b){if(!this.isMounted())return;b===this.state.height&&(this.props.beforeResize&&this.props.beforeResize(),clearTimeout(this._onResizeTimeout),this.props.onResize&&(this._onResizeTimeout=setTimeout(this.props.onResize,0)))},51)});e.exports=c}),null);
__d("MessengerFlexScrollableArea.react",["MessengerFlexArea.react","MessengerScrollableArea.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={shouldTrackBottom:this.props.shouldStickToBottom},this.$2=function(){this.props.onScroll&&this.props.onScroll();if(!this.props.shouldStickToBottom)return;this.$3()}.bind(this),this.$1=function(){this.trackBottomIfRequired()}.bind(this),b}a.prototype.componentDidMount=function(){this.props.onMount&&this.props.onMount()};a.prototype.render=function(){return b("React").createElement(b("MessengerFlexArea.react"),{className:this.props.className,onResize:this.$1,ref:"flexArea",maxHeight:this.props.maxHeight},this.props.flexChildren,b("React").createElement(b("MessengerScrollableArea.react"),{height:"100%",needsFastScrollHandler:this.state.shouldTrackBottom,onScroll:this.$2,ref:"scrollable",tabIndex:this.props.tabIndex},this.props.children),this.props.footerChildren)};a.prototype.$3=function(){this.isScrolledToBottom()?this.setState({shouldTrackBottom:!0}):this.setState({shouldTrackBottom:!1})};a.prototype.getArea=function(){return this.refs.scrollable&&this.refs.scrollable.getArea()};a.prototype.handleResize=function(){this.refs.flexArea&&this.refs.flexArea.recalculateHeight()};a.prototype.trackBottomIfRequired=function(){this.state.shouldTrackBottom&&this.scrollToBottom()};a.prototype.overrideTrackBottom=function(a){this.setState({shouldTrackBottom:a})};a.prototype.scrollToBottom=function(){this.refs.scrollable&&this.refs.scrollable.scrollToBottom()};a.prototype.scrollToTop=function(a){this.refs.scrollable&&this.refs.scrollable.scrollToTop(a)};a.prototype.scrollToPosition=function(a,b,c){this.refs.scrollable&&this.refs.scrollable.scrollToPosition(a,b,c)};a.prototype.isScrolledToBottom=function(){var a=this.refs.scrollable;return a?a.isScrolledToBottom():!0};a.prototype.isScrolledToBottomWithHeight=function(a){return this.refs.scrollable.isScrolledToBottomWithHeight(a)};a.prototype.isScrolledToTop=function(){return this.refs.scrollable&&this.refs.scrollable.isScrolledToTop()};a.prototype.getScrollTop=function(){return this.refs.scrollable&&this.refs.scrollable.getScrollTop()||0};a.propTypes={flexChildren:c.node,footerChildren:c.node,onMount:c.func,onScroll:c.func,shouldStickToBottom:c.bool,tabIndex:c.number,maxHeight:c.number};e.exports=a}),null);
__d("MessengerMessageActionsWrapper.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1=function(){this.props.onShowMenu(this.props.message.message_id,!0)}.bind(this),this.$2=function(){this.props.onShowMenu(this.props.message.message_id,!1)}.bind(this),b}a.prototype.render=function(){return b("React").createElement("div",{onMouseEnter:this.$1,onMouseLeave:this.$2,className:this.props.className},this.props.children)};e.exports=a}),null);
__d("MessengerMessageSeenHeadsReact.bs",["cx","fbt","cssVar","Image.bs","React","immutable","ReasonReact.bs","joinClasses","MessengerConfig","MercuryTimestamp","MessengerMessage.bs","MercuryAttachment","getViewportDimensions"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerConfig").MaxSeenHeadCount;function k(){var a=b("getViewportDimensions")().width;if(a<parseInt("920px".replace("px",""),10))if(j<8)return j;else return 8;else if(a<parseInt("1211px".replace("px",""),10)&&j>=3)return 3;else return j}var l=b("ReasonReact.bs").statelessComponent("MessengerMessageSeenHeadsReact");function m(a,c,d,e,f,g,i){__p&&__p();return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],function(){__p&&__p();if(b("MessengerMessage.bs").isSending(d)||g.isEmpty()||b("MessengerMessage.bs").hasError(d))return null;else{var i=b("immutable").Seq(g).filter(function(a){a=a.watermark>=d.timestamp&&a.watermark<e;if(a)return!0;else return!1}).sort(function(a,b){return a.action-b.action|0});if(i.isEmpty())return null;else{var l=c?j:k(0),m=i.count()>(l+1|0),n=m?i.slice(0,l):i;n=n.map(function(c,d,a){a=f.get(d);if(a==null)return null;else{c=h._("Seen by {full name} at {seen time}",[h._param("full name",a.name),h._param("seen time",b("MercuryTimestamp").getPreciseTimestamp(c.action))]);return b("ReasonReact.bs").element(String(d),void 0,b("Image.bs").make("_jf2",c,void 0,void 0,a.image_src,void 0,c,void 0,void 0,[]))}}).toArray();var o=n.length;if(o===0)return null;else{m=m?i.slice(l,void 0).count():0;if(m>0){i=i.slice(l,void 0).map(function(a,b,c){a=f.get(b);if(a==null)return"";else return a.name}).filter(function(a){a=a==="";if(a)return!1;else return!0}).join("\n")+" ";n.unshift(b("React").createElement("span",{key:"overflow",className:"_jf3",title:i},"+"+String(m)))}return b("React").createElement("span",{className:b("joinClasses")(a,"_jf4"+((o+m|0)===1?" _jf5":"")+(b("MercuryAttachment").isSinglePhotoGroupAttachment(d)?" _ba3":""))},n)}}}},l[9],l[10],l[11],l[12]]}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){return m(a.className,a.isFromViewer,a.message,a.nextTimestamp,a.participants,a.readReceipts,[])});f.maxSeenHeads=j;f.calculateSliceNumber=k;f.component=l;f.make=m;f.jsComponent=a}),null);
__d("messengerRTLClasses",["cx","isRTL"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){a=b("isRTL")(a||"");return c?a?"_4pv0":"":(a?"":"direction_ltr")+(a?" direction_rtl":"")+(a?"":" text_align_ltr")+(a?" text_align_rtl":"")+(a?" _4pv0":"")}e.exports=a}),null);
__d("MessengerMessage.react",["cssVar","cx","fbt","EmojiLikeUtils","ImmutableObject","MercuryAttachment","MercuryDisplayTimeFilterMessageRenderer","MercuryMessageDeliveryState","MercuryMessageError.react","MercuryTimestamp","MessengerAttachmentAttribution.react","MessengerAttachmentRenderer","MessengerBubble.react","MessengerBubbleBlock.react","MessengerCodePasteUtils","MessengerDecorator","MessengerDotComAndInboxM4Check.bs","MessengerInnerDecorators.react","MessengerMessage.bs","MessengerMessageActionsWrapper.react","MessengerMessageSeenHeadsReact.bs","MessengerSettingsStore","MessengerURIUtils.bs","MessengerVideoAutoplayStore","MNCommerceMessageType","React","SubscriptionsHandler","TooltipData","emptyFunction","getViewportDimensions","ifRequired","immutable","joinClasses","messengerRTLClasses","shallowEqual"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("MessengerMessageSeenHeadsReact.bs").jsComponent;a=b("React").PropTypes;function l(a){switch(a){case b("MercuryMessageDeliveryState").SENDING:return i._("Sending");case b("MercuryMessageDeliveryState").SENT:return i._("Sent");case b("MercuryMessageDeliveryState").DELIVERED:return i._("Delivered");case b("MercuryMessageDeliveryState").ERROR:return i._("Error")}return null}c=babelHelpers.inherits(m,b("React").Component);j=c&&c.prototype;function m(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.state={isVisible:!1,plainText:!1,shown:{}},this.$14=function(a){this.messageBody=a}.bind(this),this.$15=function(a){a.stopPropagation(),this.props.onSelect(this.props.message.message_id)}.bind(this),this.$5=function(a,b){var c;this.setState({shown:babelHelpers["extends"]({},this.state.shown,(c={},c[a]=b,c))})}.bind(this),this.$11=function(){this.setState({plainText:!this.state.plainText})}.bind(this),this.$10=function(){this.props.onSelect(this.props.message.message_id)}.bind(this),this.$12=function(){return b("MessengerCodePasteUtils").containsCodeBlock(this.props.message.body)||!!this.messageBody&&this.messageBody.hasFormatting()}.bind(this),c}m.calculateState=function(a){return{isVisible:b("MessengerVideoAutoplayStore").isVisible(a.message.thread_id,a.message.message_id)||b("ifRequired")("MessengerSphericalRendererStore",function(b){return b.isVisible(a.message.thread_id,a.message.message_id)},function(){return!1})}};m.prototype.componentDidMount=function(){__p&&__p();this.setState(m.calculateState(this.props));var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("MessengerVideoAutoplayStore").addListener(function(a){a=m.calculateState(this.props);a.isVisible!==this.state.isVisible&&this.setState({isVisible:a.isVisible})}.bind(this)));var c=b("ifRequired")("MessengerSphericalRendererStore",function(a){return a},function(){return null});c&&a.addSubscriptions(c.addListener(function(a){a=m.calculateState(this.props);a.isVisible!==this.state.isVisible&&this.setState({isVisible:a.isVisible})}.bind(this)));this.$1=a};m.prototype.componentWillUnmount=function(){this.$1&&this.$1.release()};m.prototype.shouldComponentUpdate=function(a,c){return a.isActive!==this.props.isActive||a.isFromViewer!==this.props.isFromViewer||a.message!==this.props.message||a.messageTimestamp!==this.props.messageTimestamp||a.nextTimestamp!==this.props.nextTimestamp||a.showDeliveryState!==this.props.showDeliveryState||a.deliveryTimestamp!==this.props.deliveryTimestamp||!b("immutable").is(a.readReceipts,this.props.readReceipts)||!b("immutable").is(a.participants,this.props.participants)||a.customColor!==this.props.customColor||c.isVisible!==this.state.isVisible||!b("shallowEqual")(c.shown,this.state.shown)||a.onAttachmentLoad!==this.props.onAttachmentLoad};m.prototype.render=function(){__p&&__p();var a=this.props,c=a.isActive,d=a.isFromViewer;a=a.message;var e=i._("{time}",[i._param("time",b("MercuryTimestamp").getPreciseTimestamp(a.timestamp))]);e=b("TooltipData").propsFor(e,n(d));var f=[],g=[],h=this.props.message,j=d||!1,l=this.props.scrollToRepliedMessage;h&&!this.props.hideBeforeDecorator&&(b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(h)&&f.push(a.render(h,j,{scrollToRepliedMessage:l}))}),b("MessengerDecorator").getInnerDecorators().forEach(function(a){a.check(h)&&g.push(a.getAdditionalClassNames())}));var m=this.$2(e,!1),o=this.$3(e,null);o&&(m=this.$2(e,!0));e=!!o&&this.$4();return b("React").createElement(b("MessengerMessageActionsWrapper.react"),{className:b("joinClasses").apply(void 0,["clearfix _o46 _3erg"+(c?" _-5k":"")+(d?" _3i_m":"")+(d?" _nd_":"")+(d?"":" _29_7")+(e?" _q4a":""),b("messengerRTLClasses")(a.body)].concat(g)),message:a,onShowMenu:this.$5,isFromViewer:d},f,m,o,this.$6(),this.$7(),b("React").createElement(k,{className:"_4jzq",isFromViewer:d,message:a,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts}))};m.prototype.$8=function(a){return a.every(function(a){return!a||!b("MessengerAttachmentRenderer").isRenderedShareAttachment(a)})};m.prototype.$9=function(){return this.props.message.attachments.length===1&&b("MercuryAttachment").hasAttribution(this.props.message.attachments[0])};m.prototype.$3=function(a,c){__p&&__p();if(this.props.message.is_filtered_content)return null;if(this.props.message.commerce_message_type===b("MNCommerceMessageType").RIDE_INTENT)return null;var d=[],e=[],f=this.props.message,g=this.props.isFromViewer||!1;f&&b("MessengerDecorator").getAfterDecorators().forEach(function(a){a.check(f,g)&&(d.push(a.render(f,g,this.props,this.state.shown[this.props.message.message_id])),e.push(a.getAdditionalClassNames()))}.bind(this));c=b("MessengerAttachmentRenderer").getAttachmentsOutsideBubble(this.props.message,this.props.onAttachmentLoad,{customColor:this.props.customColor,isFromViewer:this.props.isFromViewer,isPageMessage:this.props.isPageMessage,isVisible:this.state.isVisible,onSelect:this.$10,onUnwrap:null,pageID:this.props.pageID},d,this.props.thread);if(!c||!c.length)return null;var h=this.$8(c),i=this.props.isPageMessage?null:b("React").createElement(b("MessengerInnerDecorators.react"),{className:h?"_1z_2":"",message:f,isFromViewer:!!this.props.isFromViewer,hovered:this.state.shown[this.props.message.message_id],messageProps:babelHelpers["extends"]({},this.props,{handleToggleOriginal:this.$11,hasFormatting:this.$12,isShowingOriginal:this.state.plainText}),isSavedView:this.props.isSavedView});if(a){var j=c.some(function(a){return!!a&&b("MessengerAttachmentRenderer").isPhotosGroupAttachment(a)});this.$9()&&(c=[b("React").createElement("span",{key:"AttachmentWithAttribution"},c[0],b("React").createElement(b("MessengerAttachmentAttribution.react"),{attachment:new(b("ImmutableObject"))(this.props.message.attachments[0])}))]);c=h?b("React").createElement("div",babelHelpers["extends"]({},a,{className:b("joinClasses").apply(void 0,["_3zvs"+(j?" _2-x3":"")].concat(e))}),c,d,i):c.map(function(c){return c&&b("React").cloneElement(c,a)})}j=b("MessengerAttachmentRenderer").isSharedVideoAttachmentMessage(this.props.message);j=b("React").createElement("div",{key:"renderedAttachments",className:"_3058 _15gf"+(j?" _3duc":"")},c,f.body||h?null:i);return this.$9()?b("React").createElement(b("MessengerBubbleBlock.react"),null,j):j};m.prototype.$13=function(){return b("MessengerAttachmentRenderer").isP2PAttachment(this.props.message)};m.prototype.$2=function(a,c){var d=this.props.message,e=b("immutable").List(b("MessengerAttachmentRenderer").getAttachmentsInsideBubble(d,this.props.onAttachmentLoad)),f=d.ranges;d.profile_ranges&&d.profile_ranges.length&&(f=(f||[]).concat(d.profile_ranges.map(function(a){return babelHelpers["extends"]({},a,{url:b("MessengerURIUtils.bs").getURIForUserID(a.id)})})));var g=b("MessengerCodePasteUtils").containsCodeBlock(d.body)&&!this.state.plainText;if(d.is_filtered_content)return b("React").createElement("div",{className:"_3058 _wiu _52mr uiBoxYellow clearfix"},b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(d));var h=d.body&&!b("EmojiLikeUtils").isEmojiLike(d);return h||!e.isEmpty()?b("React").createElement(b("MessengerBubble.react"),{thread:this.props.thread,attachments:e,body:d.body,bodyRef:this.$14,className:g?(this.props.isFromViewer?"_3uhm":"")+(this.props.isFromViewer?"":" _3uhn")+(d.isSelected?" _3xsz":""):"_3058 _ui9"+(d.isSelected?" _3xsz":""),containsCode:g,customColor:this.props.isFromViewer?this.props.customColor:"",customLike:d.customLike,excludeAfterDecorators:c,isFromViewer:this.props.isFromViewer,isP2PAttachment:this.$13(),ranges:f,message:d,metaRanges:d.meta_ranges,plainText:this.state.plainText,threadCustomColor:this.props.threadCustomColor||"#0084ff",threadID:d.thread_id,participants:this.props.participants,isHovered:this.state.shown[d.message_id],onReplyToMessage:this.props.onReplyToMessage,handleToggleOriginal:this.$11,hasFormatting:this.$12,isShowingOriginal:this.state.plainText,isPageMessage:this.props.isPageMessage,isSavedView:this.props.isSavedView,repliedToMessage:this.props.message.replied_to_message,scrollToRepliedMessage:this.props.scrollToRepliedMessage,tooltip:a}):null};m.prototype.$7=function(){if(!this.props.isFromViewer||!this.props.showDeliveryState||this.props.message.is_like_preview)return null;var a=b("MessengerMessage.bs").getDeliveryState(this.props.message,this.props.deliveryTimestamp);if(a===b("MercuryMessageDeliveryState").UNKNOWN)return null;var c={};this.props.customColor&&(a===b("MercuryMessageDeliveryState").SENT||a===b("MercuryMessageDeliveryState").SENDING||a===b("MercuryMessageDeliveryState").DELIVERED)&&(c.color=this.props.customColor);var d=l(a);return b("React").createElement("span",{className:"_2her"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6ybq":"")+(a===b("MercuryMessageDeliveryState").SENDING?" _4jzp":"")+(a===b("MercuryMessageDeliveryState").SENT?" _3zzf":"")+(a===b("MercuryMessageDeliveryState").DELIVERED?" _9ah":"")+(a===b("MercuryMessageDeliveryState").ERROR?" _5ei9":""),style:c,title:d},b("React").createElement("i",{"aria-label":d,"aria-roledescription":i._("Status icon"),className:"_57e_",role:"img"}))};m.prototype.$6=function(){var a=this.props.message;return!b("MessengerMessage.bs").hasError(a)?null:b("React").createElement(b("MercuryMessageError.react"),{className:"_3058 _2ygi",message:a,authorFBID:this.props.authorFBID})};m.prototype.$4=function(){var a=this.props.message,b=!1;a&&(b=!!(a.reactions&&Object.keys(a.reactions).length>0));return b};m.propTypes={customColor:a.string,deliveryTimestamp:a.number.isRequired,hideBeforeDecorator:a.bool,isActive:a.bool,isFromViewer:a.bool,isPageMessage:a.bool,message:a.object.isRequired,messageTimestamp:a.number,nextTimestamp:a.number.isRequired,onAttachmentLoad:a.func.isRequired,onDeselect:a.func.isRequired,onSelect:a.func.isRequired,onReplyToMessage:a.func,participants:a.instanceOf(b("immutable").Map).isRequired,readReceipts:a.instanceOf(b("immutable").OrderedMap).isRequired,showDeliveryState:a.bool,authorFBID:a.string,threadCustomColor:a.string,pageID:a.string,isSavedView:a.bool,scrollToRepliedMessage:a.func,thread:a.object};m.defaultProps={onAttachmentLoad:b("emptyFunction"),threadCustomColor:"#0084ff"};function n(a){return b("getViewportDimensions")().width<=parseInt("700px".replace("px",""),10)||b("MessengerSettingsStore").getSettings().info_sidebar_collapsed&&a?"above":a?"right":"left"}e.exports=m}),null);
__d("MessengerPageAdminNoteList.react",["cx","fbt","LeftRight.react","MessengerBubble.react","PagesMessengerCreatorInfo.react","React","ReactComponentWithPureRenderMixin","classWithMixins","enumerate","immutable","mixin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("classWithMixins")(b("React").Component,b("mixin")(b("ReactComponentWithPureRenderMixin"))));i&&i.prototype;a.prototype.render=function(){var a=[],c=this.calculateGroups(this.props.notes);c.forEach(function(c,d){a.push(b("React").createElement("li",{className:"_4kd2",key:"group:"+d},this.$MessengerPageAdminNoteList1(c)))}.bind(this));return b("React").createElement("ul",{className:"_4kd3"},a)};a.prototype.$MessengerPageAdminNoteList1=function(a){var c=[];a.forEach(function(d,e){c.push(b("React").createElement("div",{className:"_4kd4",key:"note:"+e},this.$MessengerPageAdminNoteList2(d,a)))}.bind(this));return c};a.prototype.$MessengerPageAdminNoteList2=function(a,c){c=b("immutable").List([b("React").createElement(b("LeftRight.react"),{className:"_561k"},b("React").createElement("div",{className:"_561l"},h._("Private note")),b("React").createElement(b("PagesMessengerCreatorInfo.react"),{key:"creator_info",creator_info:c[0].creator_info,isNote:!0}))]);return b("React").createElement("div",{className:"_o46 _3i_m _nd_"},b("React").createElement("div",{className:"clearfix"},b("React").createElement(b("MessengerBubble.react"),{body:a.body.text,attachments:c,className:"_3058 _4kd5"})))};a.prototype.calculateGroups=function(a){__p&&__p();var c=[],d=null,e=null;a=b("enumerate")(a);var f;while(!(f=a.next()).done){var g=e&&e.value.creator_info.creatorID===f.value.creator_info.creatorID;g||(d=[],c.push(d));d&&d.push(f.value);e=f}return c};function a(){i.apply(this,arguments)}a.propTypes={notes:c.arrayOf(c.shape({id:c.string,body:c.object.isRequired,creator_info:c.shape({creatorID:c.string.isRequired,creatorName:c.string.isRequired,creatorType:c.string.isRequired,labelType:c.string.isRequired,pageID:c.string.isRequired,profileURI:c.string}),timestamp:c.number.isRequired})).isRequired};e.exports=a}),null);
__d("MessengerRemovedMessageTombstone.react",["cssVar","cx","fbt","MercuryTimestamp","MessengerDecorator","MessengerDotComAndInboxM4Check.bs","MessengerInnerDecorators.react","MessengerMessageActionsWrapper.react","MessengerMessageSeenHeadsReact.bs","MessengerSettingsStore","React","RemovedMessageTombstoneContent","TooltipData","getViewportDimensions","immutable","joinClasses","messengerRTLClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("MessengerMessageSeenHeadsReact.bs").jsComponent;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.state={shown:{}},this.$2=function(a,b){this.setState(function(c){return{shown:babelHelpers["extends"]({},c.shown,(c={},c[a]=b,c))}})}.bind(this),b}a.prototype.render=function(){var a=this.props,c=a.isActive,d=a.isFromViewer;a=a.message;var e=[],f=this.props.message;f&&b("MessengerDecorator").getInnerDecorators().forEach(function(a){a.check(f)&&e.push(a.getAdditionalClassNames())});var g=this.$1();return b("React").createElement(b("MessengerMessageActionsWrapper.react"),{className:b("joinClasses").apply(void 0,["clearfix _o46 _3erg"+(c?" _-5k":"")+(d?" _3i_m":"")+(d?" _nd_":"")+(d?"":" _29_7")+"",b("messengerRTLClasses")(a.body)].concat(e)),message:a,onShowMenu:this.$2},g,b("React").createElement(k,{className:"_4jzq",isFromViewer:d,message:a,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts}))};a.prototype.$1=function(){var a=this.props.message,c=b("RemovedMessageTombstoneContent").getTombstoneContent(a,this.props.participants),d=this.$3();d=b("TooltipData").propsFor(d,l(this.props.isFromViewer));return b("React").createElement("div",babelHelpers["extends"]({className:"_3058 _ui9"+(a.isSelected?" _3xsz":"")+" _7301 _hh7"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6ybn":"")+" _s1- _52mr _3oh-"},d||{}),b("React").createElement(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:a,isFromViewer:!!this.props.isFromViewer,hovered:this.state.shown[a.message_id],messageProps:{},isSavedView:!1}),b("React").createElement("div",{className:"_aok",tabIndex:0,"aria-label":c},b("React").createElement("span",null,c)))};a.prototype.$3=function(){var a=this.props.message.timestamp,c=this.props.message.removed_timestamp;a=i._("Sent: {sent time}",[i._param("sent time",b("MercuryTimestamp").getPreciseTimestamp(a))]);c=i._("Removed: {removed time}",[i._param("removed time",b("MercuryTimestamp").getPreciseTimestamp(c))]);return a.toString()+"\n"+c.toString()};a.propTypes={isActive:c.bool,isFromViewer:c.bool,message:c.object.isRequired,nextTimestamp:c.number.isRequired,onSelect:c.func.isRequired,participants:c.instanceOf(b("immutable").Map).isRequired,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired};function l(a){return b("getViewportDimensions")().width<=parseInt("700px".replace("px",""),10)||b("MessengerSettingsStore").getSettings().info_sidebar_collapsed&&a?"above":a?"right":"left"}e.exports=a}),null);
__d("MessengerMessageGroup.react",["cx","fbt","invariant","BootloadOnRender.react","CurrentUser","Image.react","ImmutableObject","JSResource","LazyComponent.react","Link.react","MercuryIDs","MercuryParticipantSilhouettes","MessengerActions","MessengerContactActions.bs","MessengerEnvironment","MessengerMessage.react","MessengerPageAdminNoteList.react","MessengerParticipants.bs","MessengerProfileImageWrapperReact.bs","MessengerRemovedMessageTombstone.react","MessengerStickerUtils","MessengerTextWithEmoticons.react","MessengerURIUtils.bs","PagesMessengerCreatorInfo.react","React","ReactDOM","SimpleXUIDialog","WorkForeignEntityType","gkx","goURI","immutable"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerContactActions.bs").actions,k=b("MessengerProfileImageWrapperReact.bs").jsComponent;a=b("immutable").List;c=b("immutable").OrderedMap;f=b("React").PropTypes;var l=32,m=new(b("ImmutableObject"))({image_src:b("MercuryParticipantSilhouettes").neutralSilhouette,is_messenger_user:!0,name:""});g=b("React").createClass({displayName:"MessengerMessageGroup",_subscription:null,propTypes:{author:f.string.isRequired,activeMessageID:f.string,deliveryTimestamp:f.number.isRequired,hasDateBreak:f.bool,isCanonical:f.bool,isFromViewer:f.bool,isPageMessage:f.bool,lastReadTimestamp:f.number.isRequired,messages:f.instanceOf(a).isRequired,nextTimestamp:f.number.isRequired,onAttachmentLoad:f.func.isRequired,onMessageDeselect:f.func.isRequired,onMessageSelect:f.func.isRequired,persona:f.object,onReplyToMessage:f.func,readReceipts:f.instanceOf(c).isRequired,thread:f.object,pageID:f.string,scrollToRepliedMessage:f.func},getInitialState:function(){return{participants:{}}},componentDidMount:function(){this._subscription=this._computeParticipants()},shouldComponentUpdate:function(a,c){var d=a.thread,e=this.props.thread;d=Boolean(d&&e&&(d.solid_color!==e.solid_color||d.custom_nickname!==e.custom_nickname));return this.props.activeMessageID!==a.activeMessageID||this.props.isFromViewer!==a.isFromViewer||this.props.deliveryTimestamp!==a.deliveryTimestamp||this.props.lastReadTimestamp!==a.lastReadTimestamp||this.props.onAttachmentLoad!==a.onAttachmentLoad||!b("immutable").is(this.props.messages,a.messages)||this.props.messages!==a.messages||!b("immutable").is(this.props.readReceipts,a.readReceipts)||this.state.participants!==c.participants||d},componentDidUpdate:function(){var a=n(this.props);!this._subscription&&!a.every(function(a){return this.state.participants[a]}.bind(this))&&(this._subscription=this._computeParticipants())},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},render:function(){return b("React").createElement("div",null,b("React").createElement("div",{className:"_1t_p clearfix"+(b("MessengerStickerUtils").isStickerMessageGroup(this.props.messages)?" _5tx1":"")+(this._hasSeenHeadsAtBottom()?" _35fy":"")},this._renderProfileColumn(),b("React").createElement("div",{className:"_41ud"},this._renderName(),this._renderMessages())),this.props.isPageMessage?this._renderNotes():null)},_renderProfileColumn:function(){__p&&__p();var a;if(this.props.isFromViewer)return null;var c=this.props.messages.last();c=this.state.participants[c.author]||m;var d=c.name,e=c.image_src;this.props.persona&&(d=this.props.persona.name,e=this.props.persona.profile_picture_url);var f=h._("{name}",[h._param("name",d)]);a=(a=c)!=null?(a=a.work_foreign_entity_info)!=null?a.type:a:a;a=b("CurrentUser").isWorkUser()&&a===b("WorkForeignEntityType").FOREIGN;a=b("React").createElement(k,{className:"_1t_r",isMessengerUser:c.is_messenger_user,size:l,showBadge:a,isMultiCompany:a,tooltipContent:f},b("React").createElement(b("Image.react"),{alt:d,src:e,height:l,width:l}));if(c.fbid){f=b("MessengerURIUtils.bs").getURIForUserID(c.fbid);!this.props.persona&&b("gkx")("678278")?a=b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerAvatarActions.react").__setRef("MessengerMessageGroup.react"),placeholder:this.props.isCanonical?a:b("React").createElement(b("Link.react"),{className:"_5f0v",href:f.toString(),onClick:this._handleContactSelect.bind(this,c),tabIndex:-1},a),component:b("React").createElement(b("LazyComponent.react"),{avatar:a,contact:c,showSendMessageItem:!this.props.isCanonical,onAction:this._handleContactAction})}):this.props.isCanonical||(a=b("React").createElement(b("Link.react"),{className:"_5f0v",href:f.toString(),onClick:this._handleContactSelect.bind(this,c),tabIndex:-1},a))}return b("React").createElement("div",{className:"_1t_q"},a)},_handleContactAction:function(a,c,e){__p&&__p();switch(a){case j.MESSAGE:this._handleContactSelect(c,e);break;case j.PROFILE:a=this.state.participants[c.id];if(a&&a.href){var f=b("MessengerEnvironment").messengerdotcom;f?window.open(a.href):b("goURI")(a.href)}else this._handleContactSelect(c,e);break;case j.FREE_CALL:d(["FBRTCCore","MNRTCCallabilityStore"],function(a,d){var e=c.fbid;e||i(0,1247);a.isAvailableForWebrtcCalling(e)||d.isCallable(e)?a.startOutgoingCall(e,"messenger_group_bubble_free_call",!1):b("SimpleXUIDialog").show(h._("{firstname} can't be reached at the moment.",[h._param("firstname",c.short_name)]),h._("Can't Connect Call"))});break}},_renderMessages:function(){__p&&__p();var a=this.props.messages.size,c=[];this.props.messages.forEach(function(d,e,f){var g=d.message_id===this.props.activeMessageID,h=b("MercuryIDs").getUserIDFromParticipantID(this.props.author),i=this.props.thread?this.props.thread.solid_color:"",j=this.props.onAttachmentLoad,k=d.timestamp;if(!!d.removed_timestamp&&d.removed_timestamp!==0){c.push(b("React").createElement(b("MessengerRemovedMessageTombstone.react"),{isActive:g,isFromViewer:this.props.isFromViewer,key:d.message_id,message:d,participants:b("immutable").Map(this.state.participants),nextTimestamp:this._getNextTimestamp(f,a,e),onSelect:this.props.onMessageSelect,onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.props.readReceipts,ref:d.message_id}));return}c.push(b("React").createElement(b("MessengerMessage.react"),{thread:this.props.thread,customColor:i,deliveryTimestamp:this.props.deliveryTimestamp,isActive:g,isFromViewer:this.props.isFromViewer,isPageMessage:this.props.isPageMessage,key:d.message_id,message:d,messageTimestamp:k,messageActionsWrapper:this.props.messageActionWrapper,onAttachmentLoad:j,participants:b("immutable").Map(this.state.participants),nextTimestamp:this._getNextTimestamp(f,a,e),onDeselect:this.props.onMessageDeselect,onSelect:this.props.onMessageSelect,onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.props.readReceipts,showDeliveryState:d.timestamp>this.props.lastReadTimestamp,ref:d.message_id,authorFBID:h==null?void 0:h,threadCustomColor:i,pageID:this.props.pageID,scrollToRepliedMessage:this.props.scrollToRepliedMessage}));o(this.props.isPageMessage,f,e,d)&&c.push(b("React").createElement(b("PagesMessengerCreatorInfo.react"),{key:"creator_info:"+e,creator_info:d.creator_info}))}.bind(this));return c},_renderNotes:function(){var a=[];this.props.messages.forEach(function(c,d,e){this.props.isPageMessage&&c.page_admin_notes&&a.push(b("React").createElement(b("MessengerPageAdminNoteList.react"),{key:"notes:"+c.message_id,notes:c.page_admin_notes}))}.bind(this));return a},_renderName:function(){__p&&__p();var a=this.props.messages.first(),c=this.state.participants[a.author];if(!c)return null;if(a.replied_to_message)return null;var d=c.short_name,e=d;if(this.props.thread){var f=this.props.thread.custom_nickname?this.props.thread.custom_nickname:null;c=b("MercuryIDs").getUserIDFromParticipantID(c.id);f&&c&&f[c]&&(d=f[c],e=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:f[c]}))}if(this.props.persona){f=this.state.participants[a.author];e=f?h._("{persona name} from {page name}",[h._param("persona name",this.props.persona.name),h._param("page name",f.short_name)]):this.props.persona.name;d=e.toString()}return b("React").createElement("h5",{"aria-label":d,className:"_ih3"+(this.props.isFromViewer?" accessible_elem":"")+(this.props.isCanonical&&!this.props.persona?" _-ne":"")},e)},getMessageElement:function(a){return b("ReactDOM").findDOMNode(this.refs[a])},_hasSeenHeadsAtBottom:function(){var a=this.props,b=a.messages,c=a.nextTimestamp;a=a.readReceipts;var d=b.last().timestamp,e=0;a.forEach(function(a){if(a>=d&&a<c&&++e===2)return!1});return e===2},_getNextTimestamp:function(a,b,c){return c<b-1?a.get(c+1).timestamp:this.props.nextTimestamp},_handleContactSelect:function(a,c){c&&c.preventDefault();c=b("MercuryIDs").getThreadIDFromParticipantID(a.id);c&&b("MessengerActions").selectThread(c)},_computeParticipants:function(){__p&&__p();var a=n(this.props),c={},d=[];a.forEach(function(a){var e=b("MessengerParticipants.bs").getNow(a);c[a]=e;e||d.push(a)});this.setState({participants:c});return d.length>0?b("MessengerParticipants.bs").getMulti(d,function(b){var a=Object.assign({},this.state.participants);d.forEach(function(c){a[c]=b[c]});this._subscription=null;this.setState({participants:a})}.bind(this)):null}});function n(a){var b=[a.messages.first().author];a.readReceipts.forEach(function(a,c){return b.push(c)});return b}function o(a,b,c,d){if(!a||!d.creator_info)return!1;if(c===b.size-1)return!0;a=b.get(c+1).creator_info;return!a?!0:d.creator_info.creatorID!==a.creatorID}e.exports=g}),null);
__d("MessengerNewMessagesNoticeReact.bs",["cx","ix","fbt","Image.bs","React","LinkReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=h("86939"),k=i._("New messages"),l=b("ReasonReact.bs").statelessComponent("MessengerNewMessagesNoticeReact");function m(a,c,d,e){var f=d!==void 0?d:k;return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],function(){return b("React").createElement("div",{"aria-hidden":!a,className:"_4wzq"+(a?" _4wzr":"")+(a?"":" _4-je")},b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,"_5f0v _4wzs",void 0,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,void 0,void 0,void 0,void 0,a?0:-1,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make("_4wzt",void 0,void 0,void 0,j,void 0,void 0,void 0,void 0,[])),b("React").createElement("div",{className:"_1bqr"},f)])))},l[9],l[10],l[11],l[12]]}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){return m(a.isOpen,a.onClick,a.label,[])});f.newMessageSrc=j;f.defaultLabel=k;f.component=l;f.make=m;f.jsComponent=a}),null);
__d("MessengerPlatformSubscriptionMessageClassification",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EXEMPTED_TEMPLATE_MESSAGE:"exempted_template_message",MESSAGE_WITHIN_24HRS:"message_within_24hrs",SUBSCRIPTION_MESSAGE:"subscription_message",ACCEPTABLE_EXTRA_MESSAGE:"acceptable_extra_message",UNACCEPTABLE_EXTRA_MESSAGGE:"unacceptable_extra_message",AD_MESSAGE:"ad_message",FREE_LIMIT:"FREE_LIMIT"})}),null);
__d("MercuryTypingAnimationReact.bs",["cx","React","ReasonReact.bs","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";var h=b("ReasonReact.bs").statelessComponent("MercuryTypingAnimationReact");function a(a,c){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return b("React").createElement("div",{className:b("joinClasses")("_4a0v _1x3z",a!==void 0?a:"")},b("React").createElement("div",{className:"_4b0g"},b("React").createElement("div",{className:"_5pd7"}),b("React").createElement("div",{className:"_5pd7"}),b("React").createElement("div",{className:"_5pd7"})))},h[9],h[10],h[11],h[12]]}f.component=h;f.make=a}),null);
__d("MessengerBubbleReact.re",["react","MessengerBubble.react","ReasonReact.bs"],(function(a,b,c,d,e,f){function a(a){return b("react").createElement(b("MessengerBubble.react"),a)}f.MessengerBubbleTypeChecked=a;c=function(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerBubble.react"),{attachments:a,body:c,className:d},e)};f.make=c}),null);
__d("MessengerTypingIndicatorReact.bs",["cx","bs_block","bs_curry","Image.bs","React","bs_caml_obj","immutable","MercuryIDs","bs_belt_Option","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerPersonas.bs","MessengerParticipants.bs","WorkForeignEntityType","MessengerBubbleReact.re","MercuryTypingAnimationReact.bs","MessengerProfileImageWrapperReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").reducerComponent("MessengerTypingIndicatorReact");function a(a,c,d,e){__p&&__p();var f=function(c,a){return b("bs_js_primitive").nullable_to_opt(b("MessengerParticipants.bs").getMulti([a],function(d){b("bs_curry")._1(c[3],b("bs_block").__(0,[b("bs_js_primitive").undefined_to_opt(d[a])]));return 0}))},g=function(){if(c==null)return void 0;else{var a=b("MercuryIDs").getUserIDFromParticipantID(c);if(a==null)return void 0;else return b("bs_js_primitive").nullable_to_opt(b("MessengerPersonas.bs").getNow(a))}};return[h[0],h[1],h[2],h[3],function(a){var d=a[1][0];if(d!==void 0||c==null)return 0;else{d=b("MessengerParticipants.bs").getNow(c);if(d==null)return b("bs_curry")._1(a[3],b("bs_block").__(1,[f(a,c)]));else return b("bs_curry")._1(a[3],b("bs_block").__(0,[d==null?void 0:b("bs_js_primitive").some(d)]))}},function(a){__p&&__p();a=a[1];var d=a[1][1][0],e=a[1][0];if(d!==void 0)return 0;else{if(e!==void 0&&(c==null||b("bs_caml_obj").caml_equal(b("bs_js_primitive").valFromOption(e).id,c)))return 0;else d=1;if(d===1)if(c==null)return 0;else return b("bs_curry")._1(a[3],b("bs_block").__(1,[f(a,c)]))}},function(a){a=a[1][1][0];if(a!==void 0)return b("MessengerParticipants.bs").removeCallback(b("bs_js_primitive").valFromOption(a));else return 0},h[7],function(c){__p&&__p();var d=g(0);if(c[1][0]===void 0&&d===void 0)return null;else{var e=c[1][0];d=d!==void 0?b("bs_js_primitive").valFromOption(d).profile_picture_url:e!==void 0?b("bs_js_primitive").nullable_to_opt(b("bs_js_primitive").valFromOption(e).image_src):void 0;e=b("bs_belt_Option").flatMap(b("bs_belt_Option").flatMap(c[1][0],function(a){return b("bs_js_primitive").nullable_to_opt(a.work_foreign_entity_info)}),function(a){return b("bs_js_primitive").some(a.type)});e=e!==void 0?b("CurrentUser").isWorkUser()&&b("bs_caml_obj").caml_equal(b("bs_js_primitive").valFromOption(e),b("WorkForeignEntityType").FOREIGN):!1;c=c[1][0];return b("React").createElement("div",{className:"_1t_p _1hbw"},b("React").createElement("div",{className:"_1t_q"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerProfileImageWrapperReact.bs").make(void 0,void 0,c!==void 0?b("bs_js_primitive").valFromOption(c).is_messenger_user:!1,void 0,void 0,void 0,void 0,32,void 0,"_1t_r",e,[d!==void 0?b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,"",void 0,void 0,d,32,void 0,32,void 0,[])):b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,"",void 0,void 0,void 0,32,void 0,32,void 0,[]))]))),b("React").createElement("div",{className:"_41ud"},b("React").createElement("div",{className:"_o46 _3erg _29_7"},b("ReasonReact.bs").element(void 0,a,b("MessengerBubbleReact.re").make(b("immutable").List([b("ReasonReact.bs").element("animation",void 0,b("MercuryTypingAnimationReact.bs").make(void 0,[]))]),"","_3058",[])))))}},function(){return[c==null?void 0:b("bs_js_primitive").nullable_to_opt(b("MessengerParticipants.bs").getNow(c)),[void 0]]},h[10],function(a,c){if(a.tag){c[1][0]=a[0];return 0}else{c[1][0]=void 0;return b("bs_block").__(0,[[a[0],c[1]]])}},h[12]]}c=32;f.component=h;f.cIMAGE_SIZE=c;f.make=a}),null);
__d("MessengerTypingIndicatorReact.re",["bs_curry","MessengerTypingIndicatorReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){a=b("ReasonReact.bs").wrapReasonForJs(b("MessengerTypingIndicatorReact.bs").component,function(a){return b("bs_curry")._4(b("MessengerTypingIndicatorReact.bs").make,a.setBubbleRef,a.userID,a.showName,a.children)});f.component=a;f["default"]=a}),null);
__d("MessengerConversation.react",["ix","csx","cx","fbt","Bootloader","BootloadOnRender.react","ChatTypingIndicatorsWrapper.bs","CSS","CurrentUser","DOM","DOMDimensions","ErrorBoundary.react","Event","EventProfiler","FantaPageGreetingLoader.react","Image.react","ImmutableObject","JSResource","KeyEventController","LazyComponent.react","Link.react","MercuryActionType","MercuryIDs","MercuryShareAttachmentRenderLocations","MessageList.react","MessengerActions","MessengerAttachmentRenderer","MessengerBootloadedLogMessage.react","MessengerButtonReact.bs","MessengerCollapsedLogMessageGroup.react","MessengerContextBannerContainer.react","MessengerDateBreak.react","MessengerDotComAndInboxM4Check.bs","MessengerFlexScrollableArea.react","MessengerMessageGroup.react","MessengerNewMessagesNoticeReact.bs","MessengerPlatformSubscriptionMessageClassification","MessengerQuickCamOrigins","MessengerQuickReplyUtils","MessengerReadReceipt.bs","MessengerSpinner.react","MessengerThreadFetchLoggerUtil","MessengerTypingIndicatorReact.re","MessengerVideoAutoplayActions","MessengerVideoAutoplayStore","MessengerViewerContactMethodsWebGraphQLQuery","Parent","React","ReactDOM","SubscriptionsHandler","UserActivity","WebGraphQL","WebMessengerConstants","WorkBotLandingPageHelper","asset","emptyFunction","getPageIDFromThreadID","gkx","ifRequired","immutable","joinClasses","lazyLoadComponent","promiseDone","setImmediate","setTimeout","throttle"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("ChatTypingIndicatorsWrapper.bs").jsComponent,m=b("MessengerButtonReact.bs").jsComponent,n=b("MessengerNewMessagesNoticeReact.bs").jsComponent,o=b("MessengerTypingIndicatorReact.re").component,p=b("WorkBotLandingPageHelper").shouldShowBotLandingPage;b("immutable").OrderedMap;c=b("React").PropTypes;var q=20,r=100,s=1e3,t=b("lazyLoadComponent")(b("JSResource")("WorkChatBotConversationGreetingContainer.react").__setRef("MessengerConversation.react"));function u(a,c){return!!(b("KeyEventController").filterEventTypes(a,c)&&b("KeyEventController").filterEventModifiers(a,c)&&a.target instanceof Element&&b("Parent").bySelector(a.target,"._4_j4"))}var v={};d=babelHelpers.inherits(a,b("React").PureComponent);k=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.state={readReceipts:w(this.props),scrollingToUnreadMessage:!1,showUnreadNotice:!1,unreadCount:this.props.thread?this.props.thread.unread_count:0,width:0,viewerEmail:null,viewerPhone:null,shouldJumpToMessage:!1,isLandingPageDismissed:!1},this.$1=null,this.$2=null,this.$4=[],this.$5={originalScrollHeight:0,originalScrollTop:0},this.$15=function(){__p&&__p();var a=this.$17();if(!this.refs||!a||this.props.isLoading){this.$4=[];return}var c=b("getPageIDFromThreadID")(this.props.threadID),d=this.refs.messageList;if(!d||!c){this.$4=[];return}var e=10,f=a.getElement().getBoundingClientRect(),g=[];this.$3.forEach(function(a){var d=a.message_id,h=this.refs.messageList.getMessageElement(d);if(h){h=h.getBoundingClientRect();h.top>f.top-e&&h.bottom<f.bottom+e&&(g.push(d),this.$4.includes(d)||b("Bootloader").loadModules(["MessengerAdsWebLogger","MNAdsLoggerEventEnum"],function(b,e){b.log(a.ad_client_token,a.ad_id,e.MESSAGE_SEEN_THREAD,!0,d,c)},"MessengerConversation.react"))}}.bind(this),this);this.$4=g}.bind(this),this.$18=function(){b("MessengerThreadFetchLoggerUtil").markerEnd(this.props.threadID,"SUCCESS"),this.$18=b("emptyFunction")}.bind(this),this.$36=function(){var a;return((a=this.props.contact)==null?void 0:a.user_type)==="page"&&b("getPageIDFromThreadID")(this.props.threadID)!==null}.bind(this),this.$37=function(){this.setState({isLandingPageDismissed:!0})}.bind(this),this.$8=function(){var a=this.$17();a&&a.pageUp();return!1}.bind(this),this.$9=function(){var a=this.$17();a&&a.pageDown();return!1}.bind(this),this.$10=function(a){if(a.target===document.body){this.scrollToTop();return!1}return null}.bind(this),this.$11=function(a){if(a.target===document.body){this.scrollToBottom();return!1}return null}.bind(this),this.$14=function(){__p&&__p();if(!this.refs)return;if(!this.refs.scrollable)return;var a=this.$17(),c=this.refs.quickReply;c&&b("CSS").conditionClass(c,"_1mzg",!this.isScrolledToBottom());this.$12();this.$13();a&&this.state.unreadCount&&this.$23(a)&&this.setState({showUnreadNotice:!1,unreadCount:0});this.$39(a);this.$40(a);this.$7()}.bind(this),this.$38=function(a){a.preventDefault(),this.setState({showUnreadNotice:!1}),this.$20()}.bind(this),this.$13=function(){if(this.props.messages.size===0||this.props.thread&&this.props.thread.unread_count===0||!this.isScrolledToBottom())return;b("UserActivity").isOnTab()&&b("UserActivity").isActive()?this.props.onRead(this.props.threadID):this.$2||(this.$2=b("UserActivity").subscribe(function(){b("UserActivity").isOnTab()&&(this.$16(),this.props.onRead(this.props.threadID))}.bind(this)))}.bind(this),this.handleResize=function(){__p&&__p();if(!this.refs)return;if(this.refs.scrollable){this.refs.scrollable.handleResize();var a=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(this.refs.scrollable)).width;a!==this.state.width&&this.setState({width:a})}a=this.refs.quickReply;a&&b("CSS").conditionClass(a,"_1mzg",!this.isScrolledToBottom());this.trackBottomIfRequired()}.bind(this),this.$34=function(a){this.props.messages.some(function(b){return b.message_id===a})?this.$22(a):(this.setState({shouldJumpToMessage:!0}),b("MessengerActions").changeMid(a))}.bind(this),c}a.prototype.componentDidMount=function(){__p&&__p();var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("Event").listen(window,"resize",b("throttle")(this.handleResize,50)),b("KeyEventController").registerKey("PAGE_UP",this.$8,u),b("KeyEventController").registerKey("PAGE_DOWN",this.$9,u),b("KeyEventController").registerKey("HOME",this.$10,u),b("KeyEventController").registerKey("END",this.$11,u));this.$1=a;this.$12();this.handleResize();this.$13();this.$6=b("throttle")(this.$14,r);this.$7=b("throttle")(this.$15,s);this.$3=this.props.messages.filter(function(a){return a.is_sponsored});this.$7()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){var b=a.threadID!==this.props.threadID;b&&(this.$16(),this.setState({scrollingToUnreadMessage:!1,showUnreadNotice:!1,unreadCount:a.thread?a.thread.unread_count:0,isLandingPageDismissed:!1}));(b||a.messages!==this.props.messages)&&(this.$3=a.messages.filter(function(a){return a.is_sponsored}));this.setState({readReceipts:w(a)})};a.prototype.componentWillUnmount=function(){this.$16(),this.$1&&this.$1.release()};a.prototype.UNSAFE_componentWillUpdate=function(a){a=this.$17();a?this.$5={originalScrollHeight:a.getScrollHeight(),originalScrollTop:a.getScrollTop()}:this.$5={originalScrollHeight:0,originalScrollTop:0}};a.prototype.componentDidUpdate=function(a,c){__p&&__p();if(!this.refs)return;if(!this.refs.scrollable)return;(!this.props.isLoading||!this.props.messages.isEmpty())&&this.$18();c=this.props.threadID!==a.threadID;if(c||x(a,this.props))this.scrollToBottom(),this.$19();else{var d=this.$17();if(d){var e=d.getScrollHeight();if(e!==this.$5.originalScrollHeight){e=d.getScrollHeight()-this.$5.originalScrollHeight+this.$5.originalScrollTop;this.refs.scrollable.scrollToPosition(e)}else this.$19()}}this.props.messages!==a.messages&&(this.$13(),this.state.scrollingToUnreadMessage&&this.$20(),this.$21());d=this.props.selectedMessage;this.state.shouldJumpToMessage&&d&&this.$22(d,function(){this.setState({shouldJumpToMessage:!1})}.bind(this));b("setTimeout")(function(){var a=this.$17();this.trackBottomIfRequired();a&&this.state.unreadCount&&!this.state.scrollingToUnreadMessage&&!this.props.isLoading&&(this.$23(a)?this.setState({showUnreadNotice:!1,unreadCount:0}):this.props.messages.size==1&&this.props.messages.last().log_message_type!==null?this.setState({showUnreadNotice:!1,unreadCount:0}):this.setState({showUnreadNotice:!0}));this.$12();this.$7()}.bind(this),0);e=a.messages&&a.messages.size||0;d=this.props.messages&&this.props.messages.size||0;(c||e===0&&(d>0||!this.props.isLoading))&&b("EventProfiler").informManualInteractionTimestamp(["MessengerThredRow"],!0,"click")};a.prototype.render=function(){__p&&__p();if(this.props.isLoading&&this.props.messages.isEmpty())return this.$24();var a=this.props.messages.last(),c=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),d=this.$25(a),e=this.$26(a);this.$27(a);c=a&&a.author!==c?d||e:null;d=null;if(Array.isArray(c)){e=c.every(function(a){return a.content_type==="user_email"&&this.state.viewerEmail===null||a.content_type==="user_phone_number"&&this.state.viewerPhone===null}.bind(this));if(!e){e=b("MessengerQuickReplyUtils").localizeTitleIfNecessary(c);d=b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{options:e,threadID:a.thread_id,onVoiceClipCreate:this.props.onVoiceClipCreate,viewer:this.props.viewer,quickCamOriginLocation:b("MessengerQuickCamOrigins").MESSENGER,messageId:a.message_id,pageId:b("MercuryIDs").getUserIDFromParticipantID(a.author),isMessengerAdPreview:this.props.isMessengerAdPreview,isSponsored:a.is_sponsored,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone}),loader:b("JSResource")("MessengerBotsQuickReplyButtonList.react").__setRef("MessengerConversation.react"),placeholder:b("React").createElement("div",null)})}}c=null;e=null;d&&(c=b("React").createElement("div",{className:"_51op"},b("React").createElement("div",{className:"_51oq",onResize:this.handleResize})),e=b("React").createElement("div",{ref:"quickReply",className:"_1mzb",onResize:this.handleResize},d));a=j._("Messages");d=j._("Load more...");var f=this.$28();return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("MessengerFlexScrollableArea.react"),{className:this.props.className,flexChildren:this.$29(),footerChildren:e,onMount:function(){return b("setImmediate")(this.$13)}.bind(this),onScroll:this.props.useManualFetch?void 0:this.$6,ref:"scrollable",shouldStickToBottom:!0,tabIndex:0},b("React").createElement("div",{"aria-label":a,className:b("joinClasses")("__i_"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7i2k":""),this.props.innerClassName),role:"region"},b("React").createElement("h3",{className:"accessible_elem"},a),this.$30(),this.props.useManualFetch&&!this.props.upExhausted?b("React").createElement("div",{className:"_7fim"},b("React").createElement(m,{className:"_41jf",label:d,onClick:function(){return this.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP)}.bind(this),type:"primary",use:"default"})):null,this.$31(),this.$32()&&b("React").createElement(b("FantaPageGreetingLoader.react"),{thread:this.props.thread,threadID:this.props.threadID}),f||b("React").createElement(b("MessageList.react"),{DateBreak:b("MessengerDateBreak.react"),deliveryTimestamp:this.props.deliveryTimestamp,isCanonical:this.props.isCanonical,LogMessage:b("MessengerBootloadedLogMessage.react"),CollapsedLogMessageGroup:b("MessengerCollapsedLogMessageGroup.react"),MessageGroup:b("MessengerMessageGroup.react"),messages:this.props.messages,onAttachmentLoad:this.$33(this.props.threadID),onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.state.readReceipts,ref:"messageList",location:b("MercuryShareAttachmentRenderLocations").MESSENGER,viewer:this.props.viewer,thread:this.props.thread,scrollToRepliedMessage:this.$34}),this.props.useManualFetch&&!this.props.downExhausted?b("React").createElement("div",{className:"_7fim"},b("React").createElement(m,{className:"_41jf",label:d,onClick:function(){return this.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_DOWN)}.bind(this),type:"primary",use:"default"})):null,b("React").createElement(l,{indicatorClass:o,indicatorsDidShow:function(){this.trackBottomIfRequired()}.bind(this),rootClassName:"clearfix _17pz",threadID:this.props.threadID,viewer:this.props.viewer}),b("gkx")("678591")&&b("React").createElement(b("ErrorBoundary.react"),{project:"omnim"},b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("OmniMSuggestionsContainer.react").__setRef("MessengerConversation.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:this.props.threadID,trackBottom:function(){return this.trackBottomIfRequired()}.bind(this)})})),c)),this.$35())};a.prototype.$28=function(){if(!b("CurrentUser").isWorkUser())return null;if(!this.$36())return null;if(this.state.isLandingPageDismissed===!0)return null;return b("gkx")("678590")&&this.props.contact&&p(this.props.messages)?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement(b("MessengerSpinner.react"),null)},b("React").createElement(t,{contact:this.props.contact,threadID:this.props.threadID,onDismiss:this.$37})):null};a.prototype.$35=function(){__p&&__p();var a=this.$17();if(a){a=a.getElement().getBoundingClientRect().height;a=a-74;a+="px";a={top:a}}else a={bottom:"15%"};return this.props.useManualFetch&&!this.props.isSearchResult?b("React").createElement(b("Link.react"),{style:a,className:"_69xg",onClick:function(){return b("MessengerActions").changeMid(null)}},b("React").createElement(b("Image.react"),{className:"_69xi",src:g("415099")})):null};a.prototype.$25=function(a){var c=null;a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);var d=a&&a.message_classification===b("MessengerPlatformSubscriptionMessageClassification").AD_MESSAGE;d&&Array.isArray(a&&a.quick_replies)&&(c=a&&a.quick_replies);return c};a.prototype.$26=function(a){a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);return Array.isArray(a&&a.quick_replies)?a&&a.quick_replies:null};a.prototype.$12=function(){if(this.props.useManualFetch)return;var a=this.$17();a&&a.getScrollTop()<q&&(this.props.fetchMessages(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP),this.$21())};a.prototype.$27=function(a){__p&&__p();a=this.$26(a);if(!a)return;a.some(function(a){return a.content_type==="user_email"||a.content_type==="user_phone_number"})&&b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerViewerContactMethodsWebGraphQLQuery"))({})),function(a){var b;b=(b=a)!=null?(b=b.viewer)!=null?(b=b.user)!=null?b.all_phones:b:b:b;a=(a=a)!=null?(a=a.viewer)!=null?a.all_emails:a:a;var c=b?b.find(function(a){return a.is_preferred}):null;!c&&b&&(c=b[0]);b=a?a.find(function(a){return a.is_primary}):null;this.setState({viewerEmail:(a=b)!=null?a.display_email:a,viewerPhone:(b=c)!=null?(b=b.phone_number)!=null?b.universal_number:b:b})}.bind(this))};a.prototype.isScrolledToBottom=function(){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottom())};a.prototype.isScrolledToBottomWithHeight=function(a){return!!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottomWithHeight(a))};a.prototype.$29=function(){return b("React").createElement(n,{isOpen:this.state.showUnreadNotice,label:j._({"*":"{number} unread messages","_1":"1 unread message"},[j._plural(this.state.unreadCount,"number")]),onClick:this.$38})};a.prototype.$30=function(){return!this.props.isLoaded||this.props.hideContextBanner?null:b("React").createElement(b("MessengerContextBannerContainer.react"),{location:b("MercuryShareAttachmentRenderLocations").MESSENGER,thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer})};a.prototype.$31=function(){return this.props.isLoaded?null:b("React").createElement("div",{className:"_2k8v"},this.props.isLoading?b("React").createElement(b("MessengerSpinner.react"),null):null)};a.prototype.$24=function(){return b("React").createElement("div",{className:"_4xu0"},b("React").createElement(b("MessengerSpinner.react"),{className:"_4xu1",size:b("MessengerSpinner.react").large_size}))};a.prototype.trackBottomIfRequired=function(){if(!this.refs)return;this.refs.scrollable&&this.refs.scrollable.trackBottomIfRequired()};a.prototype.scrollToBottom=function(){if(!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToBottom()};a.prototype.scrollToTop=function(a){if(!this.refs)return;this.refs.scrollable&&this.refs.scrollable.scrollToTop(a)};a.prototype.$33=function(a){if(v[a])return v[a];var b=function(){if(this.props.threadID!==a)return;this.trackBottomIfRequired()}.bind(this);v[a]=b;return b};a.prototype.$19=function(){b("DOM").scry(b("ReactDOM").findDOMNode(this),"img").forEach(function(a){if(a.complete)return;var c=this.props.threadID,d=b("Event").listen(a,"load",function(){this.props.threadID===c&&this.trackBottomIfRequired(),d.remove()}.bind(this))}.bind(this))};a.prototype.$41=function(){var a=this.props.messages,b=this.state.unreadCount;return!b||b>a.size?null:a.get(a.size-b)};a.prototype.$23=function(a){__p&&__p();var b=this.props.messages,c=this.$41();if(!c)return!1;var d=a.getElement().getBoundingClientRect();return b.filter(function(a){return a&&a.timestamp<=c.timestamp}).some(function(a){a=this.refs.messageList.getMessageElement(a.message_id);if(!a)return!1;a=a.getBoundingClientRect();return a.bottom>d.top&&a.top<d.bottom}.bind(this))};a.prototype.$42=function(a){return!!this.props.messages.find(function(b){return b.message_id===a})};a.prototype.$20=function(){__p&&__p();if(!this.state.unreadCount)return;this.setState({scrollingToUnreadMessage:!0});var a=this.$41();if(!a){this.scrollToTop(!1);return}this.$22(a.message_id,function(){this.setState({scrollingToUnreadMessage:!1,unreadCount:0})}.bind(this))};a.prototype.$22=function(a,c){this.refs.scrollable&&this.refs.scrollable.overrideTrackBottom(!1);a=this.refs.messageList.getMessageElement(a,!0);var d=this.$17();if(!a||!d)return;a=a.getBoundingClientRect().top;var e=b("ReactDOM").findDOMNode(this.refs.messageList).getBoundingClientRect().top,f=d.getElement().getBoundingClientRect().height;a=a+Math.abs(e)-f/2;d.setScrollTop(a,!0,{callback:c})};a.prototype.$17=function(){if(!this.refs)return;return this.refs.scrollable&&this.refs.scrollable.getArea()};a.prototype.$16=function(){this.$2&&this.$2.unsubscribe(),this.$2=null};a.prototype.$43=function(){return this.props.messages.filter(function(a){return b("MessengerAttachmentRenderer").isSingleVideoAttachment(a)||b("MessengerAttachmentRenderer").isSharedVideoAttachmentMessage(a)}).reverse().map(function(a){return a.message_id})};a.prototype.$39=function(a){__p&&__p();var c=this.refs.messageList;if(!c||!a)return;var d=[];a=a.getElement().getBoundingClientRect();var e=b("MessengerVideoAutoplayStore").getMessageIDs(this.props.threadID),f=e||this.$43()||b("immutable").List();f.map(function(a){var e=b("MessengerAttachmentRenderer").getVideoElem(a,c);e&&d.push([a,e.getBoundingClientRect()])});d.length&&b("MessengerVideoAutoplayActions").onScroll(this.props.threadID,e?null:f,b("immutable").Map(d),a)};a.prototype.$44=function(){return this.props.messages.filter(function(a){return b("MessengerAttachmentRenderer").isSingleSphericalPhotoAttachment(a)}).map(function(a){return a.message_id})};a.prototype.$40=function(a){__p&&__p();b("ifRequired")("MessengerSphericalRendererActions",function(c){__p&&__p();b("ifRequired")("MessengerSphericalRendererStore",function(d){__p&&__p();var e=this.refs.messageList;if(!e||!a)return;var f=[],g=a.getElement().getBoundingClientRect();d=d.getMessageIDs(this.props.threadID);d=d||this.$44()||b("immutable").List();d.map(function(a){var c=b("MessengerAttachmentRenderer").getSphericalPhotoElem(a,e);c&&f.push([a,c.getBoundingClientRect()])});f.length&&c.onScroll(this.props.threadID,d,b("immutable").Map(f),g)}.bind(this),function(){})}.bind(this),function(){})};a.prototype.$21=function(){b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$43());var a=this.$44();a&&a.count()!==0&&b("ifRequired")("MessengerSphericalRendererActions",function(b){b.updateStore(this.props.threadID,a)}.bind(this),function(){b("Bootloader").loadModules(["MessengerSphericalRendererActions","MessengerSphericalRendererStore"],function(b,c){b.updateStore(this.props.threadID,a)}.bind(this),"MessengerConversation.react")}.bind(this))};a.prototype.$32=function(){if(b("CurrentUser").isWorkUser())return!1;if(this.props.messages.size!==0)return!1;return!b("gkx")("793458")?!1:!0};a.propTypes={contact:c.instanceOf(b("ImmutableObject")),deliveryTimestamp:c.number.isRequired,downExhausted:c.bool,fetchMessages:c.func.isRequired,hideContextBanner:c.bool,innerClassName:c.string,isCanonical:c.bool,isLoaded:c.bool,isLoading:c.bool,isMessengerAdPreview:c.bool,messages:c.instanceOf(b("immutable").List).isRequired,onVoiceClipCreate:c.func,onReplyToMessage:c.func,readReceipts:c.any,thread:c.object,threadID:c.string.isRequired,upExhausted:c.bool,useManualFetch:c.bool,viewer:c.string.isRequired,selectedMessage:c.string,isSearchResult:c.bool};function w(a){__p&&__p();var c=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),d=b("MessengerReadReceipt.bs").getSeenTimestamps(a.readReceipts,a.threadID),e=new Set(a.thread?a.thread.participants:d.keys());e["delete"](c);var f=null;b("immutable").Seq(a.messages).reverse().forEach(function(a){if(a.action_type!==b("MercuryActionType").LOG_MESSAGE){f=a;return!1}return!0});return d.withMutations(function(c){__p&&__p();b("immutable").Seq(a.messages).reverse().forEach(function(a){__p&&__p();if(e.size===0)return!1;if(!e.has(a.author))return;c.update(a.author,function(b){if(!b)return void 0;var c=b;b.watermark<=a.timestamp&&(c={watermark:a.timestamp,action:a.timestamp});f&&f.timestamp<c.watermark&&(c={watermark:f.timestamp,action:f.timestamp});return c});e["delete"](a.author)})})}function x(a,c){var d=b("MercuryIDs").getParticipantIDFromUserID(c.viewer);return c.threadID===a.threadID&&c.messages!==a.messages&&!c.messages.isEmpty()&&c.messages.last()!==a.messages.last()&&c.messages.last().author===d}e.exports=a}),null);
__d("MessengerResponsiveBlock.react",["React","createCancelableFunction","requestAnimationFrame","shallowEqual","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;var h={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,visibility:"hidden",zIndex:-1},i={left:0,position:"absolute",top:0,transition:"0s"},j={height:"200%",left:0,position:"absolute",top:0,transition:"0s",width:"200%"};d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.dirty=!1,this.lastWidth=null,this.lastHeight=null,this.lastBreakpointsToggles=null,this.setupWeirdScrollTracking=function(){this.refs.expandChild.style.width="10000px",this.refs.expandChild.style.height="10000px",this.refs.expand.scrollLeft=1e5,this.refs.expand.scrollTop=1e5,this.refs.shrink.scrollLeft=1e5,this.refs.shrink.scrollTop=1e5}.bind(this),this.$2=function(){__p&&__p();var a=this.refs.outer.offsetWidth,c=this.refs.outer.offsetHeight;if((a!=this.lastWidth||c!=this.lastHeight)&&!this.dirty){if(Math.abs(a-(this.lastWidth||0))<10&&Math.abs(c-(this.lastHeight||0))<16)return;this.dirty=!0;this.lastWidth=a;this.lastHeight=c;a=this.props.breakpointsToggles(a,c);b("shallowEqual")(this.lastBreakpointsToggles,a)?this.dirty=!1:this.forceUpdate(function(){b("requestAnimationFrame")(function(){this.dirty=!1}.bind(this))}.bind(this));this.lastBreakpointsToggles=a}this.setupWeirdScrollTracking()}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=b("createCancelableFunction")(this.$2),this.onScroll=b("throttle")(this.$1,50),this.setupWeirdScrollTracking(),this.onScroll()};a.prototype.componentWillUnmount=function(){this.$1.cancel()};a.prototype.render=function(){return b("React").createElement("div",{ref:"outer"},this.props.children(this.props.breakpointsToggles(this.lastWidth,this.lastHeight)),b("React").createElement("div",{style:h,onScroll:this.onScroll,ref:"expand"},b("React").createElement("div",{style:i,ref:"expandChild"})),b("React").createElement("div",{style:h,onScroll:this.onScroll,ref:"shrink"},b("React").createElement("div",{style:j})))};a.propTypes={children:c.func.isRequired,breakpointsToggles:c.func.isRequired};e.exports=a}),null);
__d("MessengerThreadListGridWrapper.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=this.props.label;return b("React").createElement("div",null,b("React").createElement("h2",{className:"accessible_elem"},a),b("React").createElement("ul",{"aria-label":a,role:"grid"},this.props.children))};function a(){h.apply(this,arguments)}a.propTypes={label:c.string.isRequired};e.exports=a}),null);
__d("MessengerContextualDialog.react",["cx","AccessibleLayer","ContextualLayerAutoFlipHorizontal","ContextualLayerUpdateOnScroll","LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer"],(function(a,b,c,d,e,f,g){"use strict";a=12;c=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({addedBehaviors:[b("ContextualLayerAutoFlipHorizontal"),b("ContextualLayerUpdateOnScroll"),b("LayerHideOnEscape"),b("AccessibleLayer")],displayName:"MessengerContextualDialog",shouldSetARIAProperties:!1,theme:{wrapperClassName:"_1r_9",arrowDimensions:{offset:a,length:16}}}));e.exports=c}),null);
__d("MessengerRadioButtonReact.bs",["cx","React","bs_js_primitive","XUIRadioInput.react"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c={checked:a.checked,className:"__rm",disabled:a.disabled,name:a.name,onChange:a.onChange,value:a.value};a=b("bs_js_primitive").undefined_to_opt(a.id);a!==void 0&&(c.id=b("bs_js_primitive").valFromOption(a));return b("React").createElement(b("XUIRadioInput.react"),c)}f.make=a}),null);
__d("MessengerRadioList.react",["invariant","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","MessengerRadioButtonReact.bs","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i;d=b("React").PropTypes;f=babelHelpers.inherits(a,b("React").Component);h=f&&f.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.$1=function(a){a.target instanceof HTMLInputElement||g(0,761),this.props.onSelect&&this.props.onSelect(this.props.value)}.bind(this),b}a.prototype.render=function(){return b("React").createElement("li",{className:this.props.className},b("React").createElement(b("InputLabel_DEPRECATED.react"),{display:"inline"},b("React").createElement(b("MessengerRadioButtonReact.bs").make,{checked:this.props.selectedValue===this.props.value,disabled:!!this.props.disabled,name:this.props.name,onChange:this.$1,value:this.props.value}),b("React").createElement(b("InputLabelLabel_DEPRECATED.react"),null,this.props.children)))};a.propTypes={disabled:d.bool,name:d.string,onSelect:d.func,selectedValue:d.any,value:d.any};i=babelHelpers.inherits(c,b("React").Component);i&&i.prototype;c.prototype.render=function(){var a=b("React").Children.map(this.props.children,function(a){return b("React").cloneElement(a,{name:this.props.name,onSelect:this.props.onValueChange,selectedValue:this.props.selectedValue})},this);return b("React").createElement("ul",babelHelpers["extends"]({},this.props,{name:null}),a)};function c(){i.apply(this,arguments)}c.propTypes={name:d.string,onValueChange:d.func,selectedValue:d.any};c.Item=a;e.exports=c}),null);
__d("MessengerDeleteAllDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("messengerDeleteAllDialogReactComponent").__setRef("MessengerDeleteAllDialogBootloader.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerMarkSpamDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),this.props),loader:b("JSResource")("messengerMarkSpamDialogReactComponent").__setRef("MessengerMarkSpamDialogBootloader.react"),placeholder:b("React").createElement("div",null)})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MessengerMessageRequestsTypedLoggerBootloader",["Promise","Bootloader"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_loggerLoader:null,_loadLogger:function(){this._loggerLoader||(this._loggerLoader=new(b("Promise"))(function(a,c){b("Bootloader").loadModules(["MessengerMessageRequestsTypedLogger"],function(b){b=new b();a(b)},"MessengerMessageRequestsTypedLoggerBootloader")}));return this._loggerLoader},log:function(a,b,c,d,e,f){this._loadLogger().done(function(g){g.setAction(a).setThreadKeyList(b).setSurface(c).setFolderType(d).setEntryPoint(e).setExtraClientData(f).log()})}};e.exports=a}),null);
__d("XMessengerDotComSpoofIFrameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/spoof/fb_iframe_target/",{gk_spoof:{type:"String"}})}),null);
__d("XSpoofMessengerDotComIFrameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/spoof/messenger_dot_com_iframe/",{redirect_uri:{type:"String",required:!0}})}),null);
__d("MessengerSpoof",["Arbiter","DOM","JSXDOM","URI","XMessengerDotComSpoofIFrameController","XSpoofMessengerDotComIFrameController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=6e3;function a(a){var c=b("JSXDOM").iframe({src:h().toString(),width:0,height:0});b("DOM").appendContent(document.body,c);b("Arbiter").subscribeOnce("messengerdotcom_spoof",function(){b("DOM").remove(c),a()});setTimeout(function(){b("Arbiter").inform("messengerdotcom_spoof")},g)}function h(){var a=new(b("URI"))(document.URL),c=b("XMessengerDotComSpoofIFrameController").getURIBuilder().getURI().getQualifiedURI().toString();c=b("XSpoofMessengerDotComIFrameController").getURIBuilder().setString("redirect_uri",c).getURI();return c.setDomain(a.getDomain().replace("messenger.com","facebook.com")).setPort(a.getPort()).setProtocol("https")}e.exports={init:a}}),null);
__d("MessengerThreadlistMessageRequestsRow.react",["cx","fbt","ix","Image.react","ImmutableObject","Keys","LinkWithHiddenURLBar.react","MercuryIDs","MessagingTag","MessengerActions","MessengerParticipants.bs","MNAdsLogMessageUtils","React","shallowEqual"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=50,l=i("86936");c=b("React").PropTypes;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.shouldComponentUpdate=function(a){return!b("shallowEqual")(this.props,a)};a.prototype.componentDidUpdate=function(a){this.props.isFocused&&(this.$1&&this.$1.focus&&this.$1.focus())};a.prototype.render=function(){var a=this.props.newMessageRequestThreads.length;return a===0?null:b("React").createElement("li",{className:"_5l-3 _1ht1 _2il3 _2kt",ref:function(a){this.$1=a}.bind(this),onKeyPress:this.$2,role:"row",tabIndex:-1},b("React").createElement(b("LinkWithHiddenURLBar.react"),{tabIndex:-1,onAllClicks:this.$3,className:"_1ht5 _5l-3"},b("React").createElement("div",{className:"_5l-3 _1qt3 _5nxe"},b("React").createElement(b("Image.react"),{alt:"",height:k,src:l,width:k}),this.$4()?this.$5():null),b("React").createElement("div",{className:"_1qt4 _5l-m"},b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1ht6 _5nxa"+(this.$4()?" _3xsd":"")},this.$6())),b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1htf"+(this.$4()?" _3xsd":"")},this.$7())))))};a.prototype.$4=function(){return this.props.pendingFolderUnseenCount!==0};a.prototype.$6=function(){var a=this.props.newMessageRequestThreads;return h._({"*":"New message requests","_1":"New message request"},[h._plural(a.length)])};a.prototype.$5=function(){return b("React").createElement("span",{className:"_3xse"})};a.prototype.$7=function(){__p&&__p();var a=this.props.newMessageRequestThreads,c=h._({"someone":"From someone you may know","people":"From people you may know"},[h._enum(a.length===1?"someone":"people",{someone:"someone",people:"people"})]),d=a[0];if(!d)return c;var e=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),f=d.participants.find(function(a){return a!==e});if(!f)return c;f=b("MessengerParticipants.bs").getNow(f);if(!f||!f.name)return c;b("MNAdsLogMessageUtils").logAdsThreadListImpression(d);return a.length===1?h._("From {name}",[h._param("name",f.name)]):h._({"*":"From {name} and {count} more"},[h._param("name",f.name),h._param("count",a.length-1,[0])])};a.prototype.$3=function(a){a.preventDefault(),b("MessengerActions").changeFolder(b("MessagingTag").PENDING)};a.prototype.$8=function(a){a.preventDefault();a=this.props.newMessageRequestThreads;this.props.onFocus(a[0].thread_id)};a.prototype.$2=function(a){a.preventDefault();a=a.charCode;a===b("Keys").RETURN&&b("MessengerActions").changeFolder(b("MessagingTag").PENDING)};function a(){j.apply(this,arguments)}a.propTypes={isFocused:c.bool,newMessageRequestThreads:c.arrayOf(c.instanceOf(b("ImmutableObject"))).isRequired,pendingFolderUnseenCount:c.number,viewer:c.string.isRequired};e.exports=a}),null);
__d("MessengerComposerState",["immutable"],(function(a,b,c,d,e,f){"use strict";a=b("immutable").Record({step:null,recipients:b("immutable").List()});a.__TCmeta={type:"MessengerComposerState"};e.exports=a}),null);
__d("MessengerComposerSteps",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({NULL:null,SELECT_RECIPIENTS:null,COMPOSE:null});e.exports=a}),null);
__d("MessengerComposerStore",["EditorState","MessengerActions","MessengerComposerActions","MessengerComposerState","MessengerComposerSteps","MessengerConstants","MessengerDispatcher","MessengerEditorStateManager","MessengerStore","MessengerURIStore","MessengerView","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=new(b("MessengerComposerState"))({step:b("MessengerComposerSteps").NULL,recipients:b("immutable").List()});c=babelHelpers.inherits(a,b("MessengerStore"));g=c&&c.prototype;function a(){g.constructor.call(this),this.$MessengerComposerStore1=h}a.prototype.getState=function(){return this.$MessengerComposerStore1};a.prototype.__onDispatch=function(a){__p&&__p();b("MessengerDispatcher").waitFor([b("MessengerURIStore").getDispatchToken()]);var c=b("MessengerURIStore").getState().detailView,d=this.$MessengerComposerStore1.recipients,e=this.$MessengerComposerStore1.step,f=null,g=null;switch(a.type){case b("MessengerComposerActions").Types.ADD_TOKEN:if(d.some(function(b){return b.getUniqueID()===a.entry.getUniqueID()}))break;f=d.push(a.entry);break;case b("MessengerComposerActions").Types.REMOVE_TOKEN:var h=a.entry.getUniqueID(),i=d.findIndex(function(a){return a.getUniqueID()===h});i!==-1&&(f=d["delete"](i));break;case b("MessengerComposerActions").Types.FOCUS_COMPOSER:e===b("MessengerComposerSteps").SELECT_RECIPIENTS&&(g=b("MessengerComposerSteps").COMPOSE);break;case b("MessengerComposerActions").Types.FOCUS_TYPEAHEAD:e===b("MessengerComposerSteps").COMPOSE&&(g=b("MessengerComposerSteps").SELECT_RECIPIENTS);break;case b("MessengerActions").Types.REPLACE_STATE:i=b("MessengerURIStore").getPrevState().detailView;i!==b("MessengerView").DETAIL.COMPOSE&&c===b("MessengerView").DETAIL.COMPOSE&&(g=b("MessengerComposerSteps").SELECT_RECIPIENTS);break;case b("MessengerComposerActions").Types.MOVE_DRAFT:b("MessengerEditorStateManager").set(a.threadID,b("MessengerEditorStateManager").get(b("MessengerConstants").NEW_THREAD_KEY));break;case b("MessengerComposerActions").Types.EXIT_COMPOSE_STATE:var j=b("EditorState").createEmpty();setTimeout(function(){b("MessengerEditorStateManager").set(b("MessengerConstants").NEW_THREAD_KEY,b("EditorState").forceSelection(j,j.getSelection()))},0);g=b("MessengerComposerSteps").NULL;f=b("immutable").List();break}(f||g)&&(this.$MessengerComposerStore1=new(b("MessengerComposerState"))({step:g||e,recipients:f||d}),this.emitChange())};e.exports=new a()}),null);
__d("MessengerCrossIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"18px",width:"18px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"cross",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"Cancel"},b("React").createElement("polygon",{id:"Bounding-Box",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-1",d:"M24.4386402,26.5608358 L18.4998126,20.6218774 L12.5614847,26.5608358 C11.9754458,27.1463881 11.0251934,27.1463881 10.4391545,26.5608358 C9.85361517,25.974784 9.85361517,25.0250103 10.4391545,24.4389584 L16.377982,18.5 L10.4391545,12.5610416 C9.85361517,11.9754893 9.85361517,11.025216 10.4391545,10.4391642 C11.0251934,9.85361194 11.9754458,9.85361194 12.5614847,10.4391642 L18.4998126,16.3786222 L24.4386402,10.4391642 C25.0246791,9.85361194 25.9744319,9.85361194 26.5604708,10.4391642 C27.1465097,11.025216 27.1465097,11.9754893 26.5604708,12.5610416 L20.6211437,18.5 L26.5604708,24.4389584 C27.1465097,25.0250103 27.1465097,25.974784 26.5604708,26.5608358 C25.9744319,27.1463881 25.0246791,27.1463881 24.4386402,26.5608358 Z",fill:"#000000"}))));f.icon=a}),null);
__d("MessengerThreadlistNewMessageRow.react",["cx","fbt","ix","Image.react","LinkWithHiddenURLBar.react","MercuryIDs","MercuryParticipantListRenderer","MercuryParticipantsImage.react","MessengerActions","MessengerComposerStore","MessengerCrossIconSVGM4React.bs","MessengerDotComAndInboxM4Check.bs","MessengerParticipants.bs","MessengerProfileImageWrapperReact.bs","MessengerView","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("MessengerProfileImageWrapperReact.bs").jsComponent,l=50,m=i("86935");c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.state={participants:this.$3()},this.$8=function(a){a.preventDefault(),this.props.onClose&&this.props.onClose(a)}.bind(this),b}a.prototype.componentDidMount=function(){this.$1=b("MessengerComposerStore").addListener("change",function(){var a=this.$3();this.setState({participants:a})}.bind(this))};a.prototype.$3=function(){this.$2&&b("MessengerParticipants.bs").removeCallback(this.$2);var a=b("MessengerParticipants.bs").getMultiEager(this.$4(),function(a){this.$2=null,this.setState({participants:a})}.bind(this)),c=a[0];a=a[1];this.$2=a;return c};a.prototype.$4=function(){return b("MessengerComposerStore").getState().recipients.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.getUniqueID())}).toArray()};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.remove(),this.$2&&b("MessengerParticipants.bs").removeCallback(this.$2)};a.prototype.renderM4=function(){return b("React").createElement("li",{className:"_5l-3 _1ht1 _6zk9"+(this.props.isActive?" _1ht2":"")},b("React").createElement(b("LinkWithHiddenURLBar.react"),{onAllClicks:this.$5,className:"_1ht5 _2il3 _6zka _5l-3"},b("React").createElement("div",{className:"_6zkb _6zkc"},this.$6(),b("React").createElement("div",{className:"_1qt4 _5l-m"},b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1ht6"},this.$7()))),b("React").createElement("div",{className:"_6zv8"},b("React").createElement(b("ShimButton.react"),{className:"_23ct _6zv9"+(this.props.isActive?" _6zva":""),onClick:this.$8},b("MessengerCrossIconSVGM4React.bs").icon)))))};a.prototype.render=function(){if(b("MessengerDotComAndInboxM4Check.bs").yes)return this.renderM4();else return b("React").createElement("li",{className:"_5l-3 _1ht1"+(this.props.isActive?" _1ht2":"")},b("React").createElement(b("LinkWithHiddenURLBar.react"),{onAllClicks:this.$5,className:"_1ht5 _2il3 _5l-3"},this.$6(),b("React").createElement("div",{className:"_1qt4 _5l-m"},b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1ht6"},this.$7()),b("React").createElement(b("ShimButton.react"),{className:"_23ct",onClick:this.$8})),b("React").createElement("div",{className:"_1qt5 _5l-3"},"\xa0"))))};a.prototype.$6=function(){var a=this.state.participants;return a.length>0?b("React").createElement("div",{className:"_1qt3 _5l-3"},b("React").createElement(k,{isMessengerUser:a.length===1&&a[0].is_messenger_user,size:l,showBadge:!1},b("React").createElement(b("MercuryParticipantsImage.react"),{participants:a.map(function(a){return a.id}).slice(0,3),size:l}))):b("React").createElement("div",{className:"_1qt3 _5l-3"},b("React").createElement(b("Image.react"),{height:l,src:m,width:l}))};a.prototype.$7=function(){return this.state.participants.length===0?h._("New message"):h._("New message to {List of message recipients}",[h._param("List of message recipients",new(b("MercuryParticipantListRenderer"))().renderParticipantList(this.state.participants))])};a.prototype.$5=function(a){a.preventDefault(),b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE)};a.propTypes={isActive:c.bool,onClose:c.func.isRequired};e.exports=a}),null);
__d("MNAdsMessageRequestUtils",["fbt","AdPageMessageTypeEnum","MessagingTag","React"],(function(a,b,c,d,e,f,g){"use strict";e.exports={isAdsMessageRequest:function(a){return a.folder==b("MessagingTag").PENDING&&!!a.last_message_type&&a.last_message_type!==b("AdPageMessageTypeEnum").NON_AD},renderAdsMessageRequestStatus:function(){var a=g._("Sponsored");return b("React").createElement("span",null,a)}}}),null);
__d("MessengerGalahadGating.bs",["WorkGalahadSettings","MessengerEnvironment"],(function(a,b,c,d,e,f){"use strict";function a(){if(b("WorkGalahadSettings").isGalahadEnabled)return b("MessengerEnvironment").facebookdotcom;else return!1}f.isGalahadUIEnabled=a}),null);
__d("MessengerPinIconSVGReact.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"0 0 22 22"},b("React").createElement("title",void 0,"PinChatIcon"),b("React").createElement("path",{id:"Fill-1",d:"M13.9355,-3.55271368e-15 C13.4005,-3.55271368e-15 12.8985,0.208 12.5205,0.586 L11.5435,1.562 C11.0045,2.102 10.8195,2.886 11.0605,3.609 L11.3765,4.559 L8.5715,7.364 L7.2425,7.364 C5.3635,7.364 3.5955,8.096 2.2675,9.425 C1.9845,9.707 1.8285,10.084 1.8285,10.485 C1.8285,10.886 1.9845,11.263 2.2675,11.546 L9.3385,18.617 C9.6225,18.9 9.9985,19.057 10.3995,19.057 C10.8005,19.057 11.1775,18.9 11.4605,18.617 C12.7895,17.289 13.5205,15.521 13.5205,13.643 L13.5205,12.313 L16.3265,9.508 L17.2755,9.824 C17.4795,9.893 17.6925,9.927 17.9075,9.927 C18.4415,9.927 18.9445,9.719 19.3225,9.341 L20.2985,8.363 C20.6765,7.986 20.8845,7.484 20.8845,6.949 C20.8845,6.415 20.6765,5.913 20.2985,5.535 L15.3495,0.586 C14.9715,0.208 14.4695,-3.55271368e-15 13.9355,-3.55271368e-15 M13.9355,1 C14.1915,1 14.4475,1.098 14.6425,1.293 L19.5915,6.242 C19.9825,6.633 19.9825,7.267 19.5915,7.656 L18.6155,8.634 C18.4235,8.824 18.1675,8.927 17.9075,8.927 C17.8015,8.927 17.6955,8.91 17.5915,8.876 L16.6425,8.56 C16.5395,8.525 16.4325,8.508 16.3275,8.508 C16.0655,8.508 15.8105,8.61 15.6195,8.801 L12.8135,11.606 C12.6255,11.794 12.5205,12.049 12.5205,12.313 L12.5205,13.643 C12.5205,15.243 11.8845,16.778 10.7525,17.91 C10.6555,18.008 10.5275,18.057 10.3995,18.057 C10.2715,18.057 10.1435,18.008 10.0455,17.91 L2.9745,10.839 C2.7795,10.644 2.7795,10.327 2.9745,10.132 C4.1065,9 5.6415,8.364 7.2425,8.364 L8.5715,8.364 C8.8355,8.364 9.0905,8.259 9.2785,8.071 L12.0835,5.266 C12.3515,4.998 12.4455,4.602 12.3255,4.242 L12.0085,3.293 C11.8895,2.934 11.9825,2.538 12.2505,2.27 L13.2285,1.293 C13.4235,1.098 13.6795,1 13.9355,1",fill:c}),b("React").createElement("path",{id:"Fill-3",d:"M0.1465,20.7383 C-0.0485,20.5433 -0.0485,20.2263 0.1465,20.0313 L4.3885,15.7883 C4.5835,15.5933 4.9015,15.5933 5.0965,15.7883 C5.2915,15.9833 5.2915,16.3013 5.0965,16.4963 L0.8535,20.7383 C0.6585,20.9333 0.3415,20.9333 0.1465,20.7383",fill:c})))}f.make=a}),null);
__d("MNCommerceReportConversationDialogBootloader.react",["JSResource","React","lazyLoadComponent"],(function(a,b,c,d,e,f){__p&&__p();var g,h=b("lazyLoadComponent")(b("JSResource")("MNCommerceReportConversationDialog.react").__setRef("MNCommerceReportConversationDialogBootloader.react"));g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){"use strict";return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(h,{pageID:this.props.pageID}))};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("MNCommerceReportConversationDialogReact.bs",["ReasonReact.bs","MNCommerceReportConversationDialogBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MNCommerceReportConversationDialogBootloader.react"),{pageID:a},c)}f.make=a}),null);
__d("MessengerBlockDialogReact.bs",["cx","fbt","bs_block","bs_curry","React","LinkReact.bs","bs_belt_Option","CurrentUser","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","IgnoreMessagesTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").reducerComponent("MessengerBlockDialogReact");function j(a,c){return b("React").createElement("div",{className:"_1q73"},h._("If you want, you can also {link}",[h._param("link",b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"_blank",void 0,h._("block {short_name_or_description} on Facebook.",[h._param("short_name_or_description",b("bs_belt_Option").getWithDefault(a,h._("this person")))]))))]))}function k(a,c,d,e){__p&&__p();return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(a){__p&&__p();if(c!==void 0){var e=b("bs_js_primitive").valFromOption(c),f=b("CurrentUser").isMessengerOnlyUser()||b("CurrentUser").isWorkUser();f=[e.short_name,f?void 0:b("bs_js_primitive").nullable_to_opt(e.href)]}else f=[void 0,void 0];e=f[1];f=f[0];if(!(d==null)){var g=new(b("IgnoreMessagesTypedLogger"))().setEvent("block_clicked").setThreadID(d).setPlatform("messengerdotcom");g.log()}g=b("CurrentUser").isWorkUser();return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,a[1][0],void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,h._("Block messages"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[b("React").createElement("div",{className:"_1q73"},h._({"Workplace Chat":"Stop getting messages and calls from {short_name_or_description} in Workplace Chat.","Messenger":"Stop getting messages and calls from {short_name_or_description} in Messenger."},[h._param("short_name_or_description",b("bs_belt_Option").getWithDefault(f,h._("this person"))),h._enum(g?"Workplace Chat":"Messenger",{"Workplace Chat":"Workplace Chat",Messenger:"Messenger"})])),e!==void 0?j(f,e):null,b("React").createElement("div",void 0,b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"https://www.facebook.com/help/389645087895231",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"_blank",void 0,h._("Learn more"))))])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,h._("Block messages"),void 0,"danger",function(){return b("bs_curry")._1(a[3],0)},0,void 0,void 0,void 0,[]))]))]))},function(){return[!0]},i[10],function(c,d){return b("bs_block").__(2,[[!1],function(){return b("bs_curry")._1(a,0)}])},i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return k(a.onBlock,b("bs_js_primitive").nullable_to_opt(a.contact),a.threadID,[])});c=b("bs_belt_Option").getWithDefault;f.$pipe$unknown=c;f.component=i;f.renderBlockOnFacebook=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerDeleteDialogReact.bs",["fbt","bs_block","bs_curry","gkx","CurrentUser","ReasonReact.bs","MessagingTag","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").reducerComponent("MessengerDeleteDialogReact");function a(a,c,d,e,f,i,j){__p&&__p();return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(h){__p&&__p();var j=b("CurrentUser").isWorkUser()&&b("gkx")("762398");if(!c&&a===b("MessagingTag").INBOX){var k=b("CurrentUser").isWorkUser()&&b("gkx")("762398");k=b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,k?g._("Hide"):g._("Archive"),void 0,"danger",function(a){b("bs_curry")._1(e,a);return b("bs_curry")._1(h[3],0)},0,void 0,void 0,void 0,[]))}else k=a===b("MessagingTag").PENDING?b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,d?g._("Ignore"):g._("Block"),void 0,"danger",function(){b("bs_curry")._1(f,0);return b("bs_curry")._1(h[3],0)},0,void 0,void 0,void 0,[])):null;return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,h[1][0],void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,g._("Delete Conversation"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[j?g._("Deleting message history cannot be undone. You will still receive any new messages in this chat."):g._("This will permanently delete the conversation history.")])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,g._("Delete"),void 0,"danger",function(){b("bs_curry")._1(i,0);return b("bs_curry")._1(h[3],0)},0,void 0,void 0,void 0,[])),k]))]))},function(){return[!0]},h[10],function(a,c){return b("bs_block").__(0,[[!1]])},h[12]]}f.component=h;f.make=a}),null);
__d("MessengerDotsIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"22px",width:"22px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"dots-3-horizontal",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"Page-1",fill:"#000000"},b("React").createElement("path",{id:"Fill-1",d:"M7,18 C7,16.4815417 8.23154167,15.25 9.75,15.25 C11.2684583,15.25 12.5,16.4815417 12.5,18 C12.5,19.5189167 11.2684583,20.75 9.75,20.75 C8.23154167,20.75 7,19.5189167 7,18 Z M15.25,18 C15.25,16.4815417 16.4815417,15.25 18,15.25 C19.5184583,15.25 20.75,16.4815417 20.75,18 C20.75,19.5189167 19.5184583,20.75 18,20.75 C16.4815417,20.75 15.25,19.5189167 15.25,18 Z M23.5,18 C23.5,16.4815417 24.7315417,15.25 26.25,15.25 C27.7684583,15.25 29,16.4815417 29,18 C29,19.5189167 27.7684583,20.75 26.25,20.75 C24.7315417,20.75 23.5,19.5189167 23.5,18 Z"}))));f.icon=a}),null);
__d("MessengerFRXBootloaderUtils",["Bootloader"],(function(a,b,c,d,e,f){"use strict";a={bootloadFRXDialog:function(a){b("Bootloader").loadModules(["MessengerFRXUtils"],function(b){b.openFRXDialog(a)},"MessengerFRXBootloaderUtils")}};e.exports=a}),null);
__d("MessengerIgnoreDialogReact.bs",["cx","fbt","bs_curry","React","bs_belt_Option","ReasonReact.bs","bs_js_primitive","MessengerDialogReact.bs","MessengerDialogBodyReact.bs","IgnoreMessagesTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerIgnoreDialogReact");function j(a,c,d,e,f,g){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){var g=function(){b("bs_curry")._1(a,0);return b("bs_curry")._1(c,!1)},i=d!==void 0?b("bs_js_primitive").valFromOption(d).short_name:void 0;if(!(e==null)){var j=new(b("IgnoreMessagesTypedLogger"))().setEvent("ignore_clicked").setThreadID(e).setPlatform("messengerdotcom");j.log()}return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,c,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,f?h._("Ignore group?"):h._("Ignore this conversation?"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[b("React").createElement("div",{className:"_1q73"},f?h._("You won't be notified when someone messages this group, and the group will be moved to Filtered messages. We won't tell anyone in the group that the messages have been ignored."):h._("You won't be notified when {short_name_or_description} messages you directly, and the conversation will be moved to 'Filtered messages'. We won't tell {sameParam} that the messages have been ignored.",[h._param("short_name_or_description",b("bs_belt_Option").getWithDefault(i,h._("this person"))),h._param("sameParam",b("bs_belt_Option").getWithDefault(i,h._("this person")))]))])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,h._("Ignore Messages"),void 0,"danger",g,0,void 0,void 0,void 0,[]))]))]))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.onIgnore,a.onToggle,b("bs_js_primitive").nullable_to_opt(a.contact),a.threadID,a.isGroupChat,[])});c=b("bs_belt_Option").getWithDefault;f.$pipe$unknown=c;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerMarkSpamDialogBootloaderReact.bs",["ReasonReact.bs","MessengerMarkSpamDialogBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMarkSpamDialogBootloader.react"),{onMarkSpam:a,onToggle:c},d)}f.make=a}),null);
__d("MessengerMenuReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerMenu.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMenu.react"),{},a)}e=[a];function c(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMenu.react").Item,{href:b("bs_js_null_undefined").fromOption(a),label:c,onclick:b("bs_js_null_undefined").fromOption(d),target:b("bs_js_null_undefined").fromOption(e)},f)}a=[c];function d(a){return b("ReasonReact.bs").wrapJsForReason(b("MessengerMenu.react").Separator,{},a)}c=[d];f.Menu=e;f.MenuItem=a;f.MenuSeparator=c}),null);
__d("MessengerRadioList.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerRadioList.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerRadioList.react"),{name:b("bs_js_null_undefined").fromOption(a),onValueChange:c,selectedValue:d},e)}d=[a];function c(a,c,d,e,f,g,h){a=a!==void 0?a:!1;return b("ReasonReact.bs").wrapJsForReason(b("MessengerRadioList.react").Item,{disabled:a,className:b("bs_js_null_undefined").fromOption(c),name:b("bs_js_null_undefined").fromOption(d),onSelect:b("bs_js_null_undefined").fromOption(e),selectedValue:b("bs_js_null_undefined").fromOption(f),value:g},h)}e=[c];f.List=d;f.Item=e}),null);
__d("MessengerMuteDialogReact.bs",["cx","fbt","bs_block","bs_curry","React","ReasonReact.bs","MessengerDomIDs.bs","MessengerRadioList.bs","MessengerDialogReact.bs","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){if(typeof a==="number")return-1;else if(a.tag)return a[0]*3600;else return a[0]*60}var j=b("bs_block").__(0,[30]),k=b("bs_block").__(1,[1]),l=b("bs_block").__(1,[8]),m=b("bs_block").__(1,[24]),n=b("ReasonReact.bs").reducerComponent("MessengerMuteDialogReact");function a(a,c){__p&&__p();return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],function(a){var c=a[1];return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,c[1],b("MessengerDomIDs.bs").ids.MUTE_DIALOG_TITLE,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,h._("Mute Conversation"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[b("React").createElement("div",{className:"_3-96"},h._("You will continue to receive \u0040mention notifications while muted.")),b("ReasonReact.bs").element(void 0,void 0,b("MessengerRadioList.bs").List[0]("messengerMuteOptions",function(c){return b("bs_curry")._1(a[3],[c])},c[0],[b("ReasonReact.bs").element(void 0,void 0,b("MessengerRadioList.bs").Item[0](void 0,void 0,void 0,void 0,void 0,j,[h._("For 30 minutes")])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerRadioList.bs").Item[0](void 0,void 0,void 0,void 0,void 0,k,[h._("For 1 hour")])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerRadioList.bs").Item[0](void 0,void 0,void 0,void 0,void 0,l,[h._("For 8 hours")])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerRadioList.bs").Item[0](void 0,void 0,void 0,void 0,void 0,m,[h._("For 24 hours")])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerRadioList.bs").Item[0](void 0,void 0,void 0,void 0,void 0,0,[h._("Until I turn it back on")]))]))])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,h._("Mute"),void 0,void 0,function(){return b("bs_curry")._1(a[3],0)},0,void 0,void 0,void 0,[]))]))]))},function(){return[j,!0]},n[10],function(c,d){if(c)return b("bs_block").__(0,[[c[0],d[1]]]);else return b("bs_block").__(2,[[d[0],!1],function(c){return b("bs_curry")._1(a,i(c[1][0]))}])},n[12]]}c=0;f.convertMuteToSeconds=i;f.thirtyMinutes=j;f.oneHour=k;f.eightHours=l;f.twentyFourHours=m;f.always=c;f.component=n;f.make=a}),null);
__d("MessengerP2BFRXBootloaderUtils",["Bootloader"],(function(a,b,c,d,e,f){"use strict";a={bootloadOpenFRXDialog:function(a){b("Bootloader").loadModules(["MessengerP2BFRXUtils","FRXEntryPoint","NFXStoryLocation"],function(b,c,d){b.openFRXDialog(a,d.MESSENGER_P2B_DIRECT_THREAD_DETAILS,c.REPORT_BUTTON)},"MessengerP2BFRXBootloaderUtils")}};e.exports=a}),null);
__d("MessengerPopoverMenuReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerPopoverMenu.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h){return b("ReasonReact.bs").wrapJsForReason(b("MessengerPopoverMenu.react"),{className:b("bs_js_null_undefined").fromOption(a),disableArrowKeyActivation:b("bs_js_null_undefined").fromOption(c),isOpen:b("bs_js_null_undefined").fromOption(d),menu:e,onHide:b("bs_js_null_undefined").fromOption(f),onShow:b("bs_js_null_undefined").fromOption(g)},h)}f.make=a}),null);
__d("WorkChatHideDialogReactBootloader.bs",["bs_block","bs_curry","Bootload.bs","Bootloader","ReasonReact.bs","MessengerSpinnerReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableWorkChatHideDialogReact.bs"],a,"WorkChatHideDialogReactBootloader.bs");return 0}d=[a];var g=b("Bootload.bs").Create(d),h=b("ReasonReact.bs").reducerComponent("WorkChatHideDialogReactBootloader");function i(a,c){if(a[1][1][0])return b("bs_curry")._1(a[3],[c]);else return 0}function c(a,c,d,e){__p&&__p();return[h[0],h[1],h[2],h[3],function(a){a[1][1][0]=!0;return b("bs_curry")._1(g[0],function(b){return i(a,b)})},h[5],function(a){a[1][1][0]=!1;return 0},h[7],function(e){e=e[1][0];if(e!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._4(e[2],c,a,d,[]));else return b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,void 0,void 0,[]))},function(){return[void 0,[!1]]},h[10],function(a,c){return b("bs_block").__(0,[[a[0],c[1]]])},h[12]]}f.BootloadableWorkChatHideDialogReact=d;f.LoadableWorkChatHideDialogReact=g;f.component=h;f.handleHideDialogLoad=i;f.make=c}),null);
__d("XNFXStartForMessageThreadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/nfx/start_message_thread/",{thread_fbid:{type:"String",required:!0},responsible_fbid:{type:"Int"},location:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("MessengerThreadlistRowActionsReact.bs",["cx","fbt","Keys","bs_block","bs_curry","React","Utils.bs","gkx","bs_caml_obj","QE2Logger","MercuryIDs","AsyncDialog","CurrentUser","ReasonReact.bs","joinClasses","AsyncRequest","bs_js_primitive","MessagingTag","WorkModeConfig","MessengerDialogs.bs","MercuryThreadIDMap","MessengerMenuReact.bs","MessengerAdminGroupUtils","MessengerMuteDialogReact.bs","MessengerP2BFRXWWWConfig","MessengerBlockDialogReact.bs","MessengerPopoverMenuReact.bs","MessengerDeleteDialogReact.bs","MessengerIgnoreDialogReact.bs","MessengerDotsIconSVGM4React.bs","MessengerFRXBootloaderUtils","MessengerDotComAndInboxM4Check.bs","MessengerP2BFRXBootloaderUtils","WorkChatHideDialogReactBootloader.bs","XNFXStartForMessageThreadController","MessengerMarkSpamDialogBootloaderReact.bs","MNCommerceReportConversationDialogReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a,c,d){if(!(b("CurrentUser").isWorkUser()&&b("gkx")("762398"))&&!c&&!a.is_archived&&a.folder!==b("MessagingTag").OTHER)if(d)return!0;else if(a.folder===b("MessagingTag").INBOX)return b("MercuryIDs").isGroupChat(a.thread_id);else return!1;else return!1}function j(a){if(a)return 0;else return b("MessengerDialogs.bs").removeDialog(void 0,0)}function k(a){a.preventDefault();a.stopPropagation();return 0}var l=b("ReasonReact.bs").reducerComponentWithRetainedProps("MessengerThreadlistRowActionsReact"),m="_5blh _4-0h"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zl2":""),n="_5blh _4-0h _4-0i"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zl2":"");function o(a){__p&&__p();if(b("MessengerP2BFRXWWWConfig").frx_enabled){b("MessengerP2BFRXBootloaderUtils").bootloadOpenFRXDialog(a.other_user_fbid);return 0}else{var c=a.other_user_fbid;if(c==null)return 0;else return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MNCommerceReportConversationDialogReact.bs").make(c,[]))})}}function p(a){__p&&__p();if(b("gkx")("723840")){b("MessengerFRXBootloaderUtils").bootloadFRXDialog(a.thread_id);return 0}else{var c=b("MercuryThreadIDMap").get();c.getServerIDFromClientID(a.thread_id,function(a){b("AsyncDialog").send(new(b("AsyncRequest"))(b("XNFXStartForMessageThreadController").getURIBuilder().setString("thread_fbid",a).getURI()));return 0});return 0}}function q(a,c,d,e,f,g,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,aa){__p&&__p();var P=a!==void 0?a:"",Q=function(){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDeleteDialogReact.bs").make(O.folder,O.is_archived,d,t,G,u,[]))})},R=function(){if(f)return b("bs_curry")._1(D,0);else return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMuteDialogReact.bs").make(z,[]))})},S=function(){if(s)if(E!==void 0)return b("bs_curry")._1(E,0);else return 0;else if(A!==void 0)return b("bs_curry")._1(A,0);else return 0},T=function(){if(q)return b("bs_curry")._1(w,0);else return b("bs_curry")._1(y,0)},U=function(){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMarkSpamDialogBootloaderReact.bs").make(x,j,[]))})},V=function(){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerIgnoreDialogReact.bs").make(F,j,c,O.thread_fbid,b("MercuryIDs").isGroupChat(O.thread_id),[]))})},W=function(){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("WorkChatHideDialogReactBootloader.bs").make(t,F,j,[]))})},X=function(){if(r)return b("bs_curry")._1(H,0);else return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerBlockDialogReact.bs").make(G,c,O.thread_fbid,[]))})},Y=function(){return p(O)},Z=function(){return o(O)},$=function(){return[V,X,W,Q,T,U,R,S,Z,Y]};return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],function(a){var b=a[1];a=a[0];if(b[2]||b[2]!==a[2])return!0;else return b[1]!==a[1]},function(a){__p&&__p();var c=a[1];b("QE2Logger").logExposureForUser("messenger_pin_threads_universe",b("CurrentUser").getID());if(g){var j=s?h._("Unpin"):h._("Pin"),l=b("MessengerAdminGroupUtils").isWorkSyncedGroupChat(O);l=l?h._("Leave group and chat"):e?d?h._("Leave chat"):h._("Leave room"):h._("Leave Group");var o=h._("Ignore messages"),p=r?h._("Unblock messages"):h._("Block messages"),u=b("bs_caml_obj").caml_equal(O.other_user_fbid,b("CurrentUser").getID()),w=O.message_count===0,x=b("Utils.bs").isSomeTrue(L),y=b("Utils.bs").isSomeTrue(L),z=b("CurrentUser").isWorkUser()&&b("gkx")("762398")||O.is_archived||O.folder!==b("MessagingTag").INBOX,A=!b("CurrentUser").isWorkUser()||!b("gkx")("762398")||O.is_archived||O.folder!==b("MessagingTag").INBOX,C=b("CurrentUser").isWorkUser()&&b("gkx")("762398"),D=O.is_archived,E=b("Utils.bs").isSomeTrue(M)||b("gkx")("723840");u=u||w||b("WorkModeConfig").is_work_user&&b("WorkModeConfig").is_premium;if(u)w=null;else{u=b("Utils.bs").isSomeTrue(M);if(u){u=b("MessengerP2BFRXWWWConfig").frx_enabled;w=b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,u?h._("Something's wrong"):h._("Report..."),c[8],void 0,[]))}else{u=b("gkx")("723840");w=b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,u?h._("Something's wrong"):h._("Report Spam or Abuse..."),c[9],void 0,[]))}}u=i(O,r,J);x=b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").Menu[0]([x?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Rename"),B,void 0,[])):null,y?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([])):null,K!==void 0&&K?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,j,c[7],void 0,[])):null,b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,f?h._("Unmute"):h._("Mute"),c[6],void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([])),I?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,l,v,void 0,[])):null,z?null:b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Archive"),t,void 0,[])),A?null:b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Hide chat"),W,void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,C?h._("Delete message history"):h._("Delete"),c[3],void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([])),D?null:b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,q?h._("Mark as Read"):h._("Mark as Unread"),c[4],void 0,[])),E?null:b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Mark as spam"),c[5],void 0,[])),w,u?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,o,c[0],void 0,[])):null,J?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,p,c[1],void 0,[])):null]));y=P==="";j=y?n:b("joinClasses")(P,n);return b("React").createElement("div",{className:"_3d85"},b("ReasonReact.bs").element(void 0,function(c){return b("bs_curry")._1(a[3],[c==null?void 0:b("bs_js_primitive").some(c)])},b("MessengerPopoverMenuReact.bs").make(void 0,!0,g,x,function(){return b("bs_curry")._1(a[3],1)},void 0,[b("React").createElement("div",{ref:"button","aria-label":h._("Conversation actions"),className:j,role:"button",tabIndex:0,onClick:k},b("MessengerDotComAndInboxM4Check.bs").yes?b("MessengerDotsIconSVGM4React.bs").icon:null)])))}else{l=P==="";z=l?m:b("joinClasses")(P,m);return b("React").createElement("div",{className:"_3d85"},b("React").createElement("div",{ref:"button","aria-label":h._("Conversation actions"),className:z,role:"button",tabIndex:N,onKeyUp:function(c){c=c.keyCode===b("Keys").RETURN;return b("bs_curry")._1(a[3],c?0:2)},onClick:function(){return b("bs_curry")._1(a[3],0)}},b("MessengerDotComAndInboxM4Check.bs").yes?b("MessengerDotsIconSVGM4React.bs").icon:null))}},$,g,function(c,a){__p&&__p();if(typeof c==="number")switch(c){case 0:return b("bs_block").__(2,[$(0),function(){return b("bs_curry")._1(C,!0)}]);case 1:return b("bs_block").__(1,[function(){return b("bs_curry")._1(C,!1)}]);case 2:return 0}else{a=c[0];if(a!==void 0){var d=b("bs_js_primitive").valFromOption(a);return b("bs_block").__(1,[function(){return d.showPopover()}])}else return 0}},l[12]]}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){var c=a.tabIndex;return q(b("bs_js_primitive").nullable_to_opt(a.className),b("bs_js_primitive").nullable_to_opt(a.contact),a.isGroupChat,a.isJoinableThread,a.isMuted,a.isOpen,a.isUnread,a.isBlocked,a.isPinned,a.onArchive,a.onDelete,b("bs_js_primitive").nullable_to_opt(a.onLeaveGroup),a.onMarkRead,a.onMarkSpam,a.onMarkUnread,a.onMute,a.onPin,b("bs_js_primitive").nullable_to_opt(a.onRename),a.onToggle,a.onUnmute,a.onUnpin,a.onIgnore,a.onBlock,a.onUnblock,a.showLeaveGroup,a.showBlock,b("bs_js_primitive").nullable_to_opt(a.showPin),b("bs_js_primitive").nullable_to_opt(a.showRename),b("bs_js_primitive").nullable_to_opt(a.showReport),c==null?-1:c,a.thread,[])});f.shouldRenderIgnoreMessagesButton=i;f.handleReasonDialogToggle=j;f.handleClick=k;f.component=l;f.actionButtonClassesClosed=m;f.actionButtonClassesOpen=n;f.handleReportPageThread=o;f.handleReportThread=p;f.make=q;f.jsComponent=a}),null);
__d("MessengerThreadlistRowSeenHeadReact.bs",["cx","Image.bs","MercuryIDs","ReasonReact.bs","joinClasses","bs_js_primitive","MessengerMessage.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,c,d,e){__p&&__p();var f=d.snippet_sender;if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);if(e.author===a&&c.watermark>=e.timestamp&&!b("MessengerMessage.bs").isSending(e))return!b("MessengerMessage.bs").hasError(e);else return!1}else if(!(f==null)&&f===a)return c.watermark>=d.timestamp;else return!1}var i=b("ReasonReact.bs").statelessComponent("MessengerThreadlistRowSeenHeadReact");function j(a,c,d,e,f,g,j,k){__p&&__p();var l=a!==void 0?a:"";return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){__p&&__p();var a=g.is_canonical,i=g.other_user_fbid;if(c!==void 0&&a&&!(i==null||c)){a=b("MercuryIDs").getParticipantIDFromUserID(j);i=b("MercuryIDs").getParticipantIDFromUserID(i);var k=f.get(i);i=e.get(i);if(!(i==null)&&!(k==null)&&h(a,k,g,d))return b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(b("joinClasses")(l,"_2_a2"),void 0,void 0,void 0,i.image_src,void 0,i.name,void 0,void 0,[]));else return null}else return null},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(b("bs_js_primitive").nullable_to_opt(a.className),b("bs_js_primitive").nullable_to_opt(a.isHidden),b("bs_js_primitive").nullable_to_opt(a.lastMessage),a.participants,a.readReceipts,a.thread,a.viewer,[])});f.shouldRender=h;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("WorkGalahadChannelStatusBadge.react",["cx","fbt","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){var c=a.canToggle,d=a.onClick,e=a.unread;a=a.isNested;a=a===void 0?!1:a;var f=i({canToggle:c,unread:e});return b("React").createElement("div",{"aria-label":f,className:(a?"":"_2ph-")+(a?" _6u1_":"")+(e?"":" _1qum")+(e?" _1qun":"")+(c?" _1quo":""),"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":f,onClick:c?function(a){a.stopPropagation(),a.preventDefault(),d&&d()}:void 0,role:c?"button":void 0},b("React").createElement("div",{className:"_1qvo"}))}function i(a){var b=a.canToggle;a=a.unread;return!b?null:a?h._("Mark as Read"):h._("Mark as Unread")}e.exports=a}),null);
__d("WorkGalahadMessageRow.react",["cx","React","WorkGalahadHoverHelper"],(function(a,b,c,d,e,f,g){var h=b("WorkGalahadHoverHelper").useHover;function a(a){var c=a.children,d=a.isActive;a=a.meta;var e=h(),f=e[0];e=e[1];return b("React").createElement("div",babelHelpers["extends"]({className:"_3-gp _23dk _6inw"+(d?" _69pu":"")+(f?" _6aio":"")},e),c,a!=null?b("React").createElement("div",{className:"_3-gq _3nmu"},a):null)}e.exports=a}),null);
__d("MessengerThreadlistRow.react",["cx","fbt","ix","Bootloader","CurrentUser","Image.react","ImmutableObject","LinkWithHiddenURLBar.react","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryParticipantListRenderer","MercuryThreadActions","MercuryThreadSnippet.react","MercuryThreadTimestampReact.bs","MercuryThreadTitleSafe.react","MercuryTimestamp","MessageRequestUtils","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerButtonReact.bs","MessengerConfig","MessengerDialogs.bs","MessengerDotComAndInboxM4Check.bs","MessengerGalahadGating.bs","MessengerMessage.bs","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MessengerPinIconSVGReact.bs","MessengerPresenceStatusUtils","MessengerThreadImageReact.bs","MessengerThreadlistRowActionsReact.bs","MessengerThreadlistRowSeenHeadReact.bs","MessengerURIUtils.bs","MNAdsMessageRequestUtils","React","ReactDOM","RTCCallState","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","Tooltip","UserAgent","WorkGalahadChannelStatusBadge.react","WorkGalahadMessageRow.react","asset","clearTimeout","getPageIDFromThreadID","gkx","immutable","joinClasses","messengerRTLClasses","setTimeout"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("MercuryThreadTimestampReact.bs").jsComponent,l=b("MessengerButtonReact.bs").jsComponent,m=b("MessengerThreadImageReact.bs").jsComponent,n=b("MessengerThreadlistRowActionsReact.bs").jsComponent,o=b("MessengerThreadlistRowSeenHeadReact.bs").jsComponent;c=b("React").PropTypes;var p=50,q=32,r=i("86913"),s=i("86914"),t=function(a){var b;switch(a){case"pending":case"other":case"inbox":case"thread":b=a;break;default:b=null}return b};d=babelHelpers.inherits(a,b("React").PureComponent);j=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.state={actionsOpen:!1,participantNames:""},this.$1=0,this.$2=null,this.$18=function(){var a=b("CurrentUser").getID();a=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,a);b("MercuryThreadActions").get()["delete"](this.props.thread.thread_id);this.props.isActive&&b("MessengerActions").selectThread(null);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(t(this.props.folder)).setFolderType("pending").setThreadKey(a).setEntryPoint("inbox_banner").log()}.bind(this),this.$19=function(a){var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,c);a||(b("MessengerDialogs.bs").removeDialog(),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(t(this.props.folder)).setFolderType("pending").setThreadKey(c).setEntryPoint("inbox_banner").log())}.bind(this),this.$5=function(a){a.preventDefault(),this.props.onFocus(this.props.thread.thread_id)}.bind(this),this.$6=function(a){this.$1++;if(this.$2)return;this.$2=b("setTimeout")(function(){this.props.onSelect&&this.props.onSelect(),this.$1=0,this.$2=null}.bind(this),1e3)}.bind(this),this.$7=function(a){this.$1--,this.$1===0&&(b("clearTimeout")(this.$2),this.$2=null)}.bind(this),this.$9=function(a){this.props.onSelect()}.bind(this),this.$10=function(a){if(this.props.logClickHandler){a=this.props.thread.is_canonical?b("MercuryIDs").getUserIDFromThreadID(this.props.thread.thread_id)||"0":this.props.thread.thread_fbid;this.props.logClickHandler&&this.props.logClickHandler(a)}}.bind(this),this.$16=function(a){this.setState({actionsOpen:a})}.bind(this),this.$20=function(a){__p&&__p();a.preventDefault();a.stopPropagation();a=window.callWindow&&!window.callWindow.closed&&window.callWindow.focus;if(a)window.callWindow.focus();else{a=this.props.thread;var c=a.rtc_call_data;a=a.thread_fbid;var d="GROUP:"+a,e=c.call_state===b("RTCCallState").VIDEO_GROUP_CALL;b("RTWebUserActionLogger").logClick({callType:b("RTWebLoggingCallType").MW,component:b("RTWebLoggingComponent").JOIN_CALL,conferenceName:d,surface:b("RTWebLoggingSurface").THREAD_LIST,mediaType:b("RTWebUserActionLogger").getMediaType(!e)});b("Bootloader").loadModules(["FBRTCCore","FBRTCLogger"],function(a,b){b=b.Trigger;a.startGroupCall({conferenceName:d,hasVideo:e,serverInfoData:c.server_info_data,trigger:b.MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON})},"MessengerThreadlistRow.react")}}.bind(this),c}a.prototype.componentDidMount=function(){this.getParticipantNames()};a.prototype.componentDidUpdate=function(a){__p&&__p();this.props.isFocused&&(!a.isFocused?this.props.isActionsFocused?b("ReactDOM").findDOMNode(this.refs.actions.refs.button).focus():b("ReactDOM").findDOMNode(this.refs.link).focus():!a.isActionsFocused&&this.props.isActionsFocused?b("ReactDOM").findDOMNode(this.refs.actions.refs.button).focus():a.isActionsFocused&&!this.props.isActionsFocused&&b("ReactDOM").findDOMNode(this.refs.link).focus());if(this.$3(this.props.thread)&&!this.$3(a.thread)){a=this.props.thread;var c=a.rtc_call_data;a=a.thread_fbid;a="GROUP:"+a;c=c.call_state===b("RTCCallState").VIDEO_GROUP_CALL;b("RTWebUserActionLogger").logImpression({callType:b("RTWebLoggingCallType").MW,component:b("RTWebLoggingComponent").JOIN_CALL,conferenceName:a,surface:b("RTWebLoggingSurface").THREAD_LIST,mediaType:b("RTWebUserActionLogger").getMediaType(!c)})}this.getParticipantNames()};a.prototype.getParticipantNames=function(){__p&&__p();if(this.state.participantNames!=="")return;var a=this.props,c=a.thread;a=a.viewer;var d=c.participants||[],e=b("MercuryIDs").getParticipantIDFromUserID(a);d.length>1&&(d=d.filter(function(a){return a!=e}));var f=c.custom_nickname?{}:null;if(f)for(var g in c.custom_nickname)f[g]=c.custom_nickname[g];b("MessengerParticipants.bs").getMulti(d,function(a){var c=d.map(function(b){return a[b]});c=new(b("MercuryParticipantListRenderer"))().setNickname(f).renderParticipantList(c);this.setState({participantNames:c})}.bind(this))};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.isActive,d=a.isActionsFocused,e=a.isTabbable,f=a.participants,g=a.thread;a=a.viewer;var i=g.unread_count>0,j=b("MessengerURIUtils.bs").getURIForThreadID(g.thread_id),k=g.name?g.name:this.state.participantNames,l=b("MNAdsMessageRequestUtils").isAdsMessageRequest(g)?b("MNAdsMessageRequestUtils").renderAdsMessageRequestStatus():this.$4(g),n=b("CurrentUser").isWorkUser()&&b("gkx")("779201"),o=b("CurrentUser").isWorkUser()&&b("gkx")("795634")&&i;o=o?b("React").createElement("div",{className:"_7c25"},g.unread_count):null;c=b("React").createElement("li",{"aria-live":i?"polite":null,"aria-relevant":c||i?"additions text":null,onFocus:this.$5,className:"_5l-3 _1ht1"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zk9":"")+(g.folder===b("MessagingTag").PENDING?" _4as3":"")+(this.props.isActive?" _1ht2":"")+(i?" _1ht3":"")+(b("gkx")("795634")?" _7c1w":"")+(this.state.actionsOpen?" _13aa":"")+(this.props.isMuted?" _569x":"")+((b("gkx")("678624")||b("MessengerConfig").MPT>0)&&g.is_pinned?" _1oh3":"")+(this.props.isFocused?" _23_m":"")+(i&&b("UserAgent").isBrowser("Chrome")&&b("UserAgent").isPlatform("Mac")?" _5fx8":"")+(n?" _79nz":""),onDragEnter:c?null:this.$6,onDragLeave:c?null:this.$7,role:"row",ref:function(a){return a&&this.props.registerThreadRefs&&this.props.registerThreadRefs(a)}.bind(this),tabIndex:-1},b("React").createElement("div",{className:"_5l-3 _1ht5",id:this.$8(g.thread_id),role:"gridcell",tabIndex:-1},b("React").createElement(b("LinkWithHiddenURLBar.react"),{href:j.toString(),onClick:this.$9,onAllClicks:this.$10,className:"_1ht5 _2il3"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zka":"")+" _5l-3 _3itx",s:"true",ref:"link",role:"link",tabIndex:e&&!d?0:-1},b("React").createElement("div",{className:"_6zkb"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zkc":"")},this.props.isMuted&&b("React").createElement("div",{className:"accessible_elem"},h._("Muted conversation")),b("React").createElement("div",babelHelpers["extends"]({},b("Tooltip").propsFor(k,"right","center"),{"data-tooltip-root-class":"_33g_","aria-hidden":!0,className:"_1qt3"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6-5k":"")+" _5l-3"}),b("React").createElement(m,{isPresenceForWork:this.props.isPresenceForWork,isDoNotDisturb:this.props.isDoNotDisturb,participants:f,size:n?q:p,thread:g,viewer:a})),b("React").createElement("div",{className:"_1qt4 _5l-m"},b("MessengerDotComAndInboxM4Check.bs").yes?b("React").createElement(b("React").Fragment,null,b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement(b("MercuryThreadTitleSafe.react"),{className:"_1ht6",showUnreadCount:!1,thread:g,useShortName:!1,viewer:a})),b("React").createElement("div",{className:"_1qt5 _6zkd _5l-3"},b("React").createElement(b("MercuryThreadSnippet.react"),{className:b("joinClasses")("_1htf _6zke",b("messengerRTLClasses")(g.snippet,!0)),participants:f,shouldRenderYou:!0,thread:g,viewer:a}),b("React").createElement("div",{className:"_6zkf"},"\xb7"),l)):b("React").createElement(b("React").Fragment,null,b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement(b("MercuryThreadTitleSafe.react"),{className:"_1ht6",showUnreadCount:!1,thread:g,useShortName:!1,viewer:a}),b("React").createElement("div",null,l)),b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement(b("MercuryThreadSnippet.react"),{className:b("joinClasses")("_1htf",b("messengerRTLClasses")(g.snippet,!0)),participants:f,shouldRenderYou:!0,thread:g,viewer:a}))),this.$11(),this.$12(),o)))),this.$13());if(b("MessengerGalahadGating.bs").isGalahadUIEnabled())return b("React").createElement(b("WorkGalahadMessageRow.react"),{isActive:this.props.isActive,meta:b("React").createElement(b("WorkGalahadChannelStatusBadge.react"),{canToggle:!0,onClick:function(){i?this.props.onMarkRead():this.props.onMarkUnread()}.bind(this),unread:this.props.thread.unread_count>0})},c);else return c};a.prototype.$13=function(){__p&&__p();if(this.props.showActions===!1)return null;var a=this.props,c=a.blockedIds,d=a.isActionsFocused,e=a.isTabbable,f=a.participants,g=a.thread;a=a.viewer;var i=b("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(this.props.participants,g);i=i&&i.contact;c=b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(a,c,g);var j=b("MessengerAdminGroupUtils").isJoinableThread(g),k=b("MercuryIDs").isGroupChat(this.props.thread.thread_id),l=g.unread_count>0,m;b("MessengerDotComAndInboxM4Check.bs").yes&&l?m=this.state.actionsOpen?null:b("React").createElement("div",{className:"_6zv_"}):m=b("React").createElement(o,{className:"_5bli",isHidden:this.state.actionsOpen&&!(b("CurrentUser").isWorkUser()&&b("gkx")("678624")||b("MessengerConfig").MPT>0),lastMessage:this.props.lastMessage,participants:f,readReceipts:this.props.readReceipts,thread:g,viewer:a});return b("React").createElement("div",{role:"gridcell"},b("React").createElement("div",{"aria-describedby":this.$8(g.thread_id),"aria-haspopup":"true","aria-label":h._("Actions"),className:"_2j6"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zkg":"")+" _5l-3",tabIndex:e&&d?0:-1,role:"button"},this.$14(),b("React").createElement("div",{className:"_56ck"}),m,this.$15(),b("React").createElement(n,{contact:i,isGroupChat:k,isJoinableThread:j,isMuted:this.props.isMuted,isOpen:this.state.actionsOpen,isPinned:g.is_pinned,isUnread:l,isBlocked:c,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onPin:this.props.onPin,onToggle:this.$16,onUnmute:this.props.onUnmute,onUnpin:this.props.onUnpin,onIgnore:this.props.onIgnore,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showLeaveGroup:this.props.showLeaveGroup,showMute:!0,showBlock:b("MercuryIgnoredBlockedParticipants.bs").shouldShowBlock(this.props.thread,this.props.viewer,i),showPin:this.$17(),showReport:b("getPageIDFromThreadID")(this.props.thread.thread_id),tabIndex:-1,thread:g,ref:"actions"})))};a.prototype.$14=function(){if(b("CurrentUser").isWorkUser()&&b("gkx")("678624"))return b("React").createElement(b("Image.react"),{src:i("572538"),className:"_6q64"});else if(b("MessengerConfig").MPT>0)return b("MessengerPinIconSVGReact.bs").make("_1oh5","#808080");return null};a.prototype.$15=function(){var a=this.props.lastMessage;if(this.state.actionsOpen||!a)return null;var c=b("MessengerMessage.bs").isSending(a),d=b("MessengerMessage.bs").hasError(a);if(!c&&!d)return null;d=b("MessengerMessage.bs").getError(a);return b("React").createElement("div",b("Tooltip").propsFor(d,"right","center"),b("React").createElement(b("Image.react"),{className:"_wtw"+(c?" _3qh2":""),src:c?s:r}))};a.prototype.$4=function(a){return b("React").createElement(k,{className:"_1ht7"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zkh":""),time:a.timestamp,title:b("MercuryTimestamp").getAbsoluteTimestamp(a.timestamp),text:b("MercuryTimestamp").getRelativeTimestamp(a.timestamp)})};a.prototype.$11=function(){__p&&__p();if(!b("MessageRequestUtils").shouldShowThreadlistPendingActions(this.props.thread))return null;var a=b("CurrentUser").getID(),c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,a);return b("React").createElement("div",{className:"_5l-3"},b("React").createElement(l,{className:"_3yvh",type:"primary",label:h._("Accept"),onClick:function(a){a.preventDefault(),a.stopPropagation(),b("MercuryThreadActions").get().changeFolder(this.props.thread.thread_id,b("MessagingTag").INBOX),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(t(this.props.folder)).setFolderType("pending").setThreadKey(c).setEntryPoint("inbox_banner").log()}.bind(this)}),b("React").createElement(l,{className:"_3yvh _1d-z",type:"faded",label:h._("Decline"),onClick:function(a){a.preventDefault(),a.stopPropagation(),b("Bootloader").loadModules(["MessengerDeclineDialogReact.bs"],function(a){var d=a.jsComponent,e=b("MercuryIDs").isGroupChat(this.props.thread.thread_id);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(d,{onBlock:this.props.onBlock,onDelete:this.$18,onToggle:this.$19,isGroupChat:e})}.bind(this));new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(this.props.thread.thread_id)).setSurface(t(this.props.folder)).setFolderType("pending").setThreadKey(c).setEntryPoint("inbox_banner").log()}.bind(this),"MessengerThreadlistRow.react")}.bind(this)}))};a.prototype.$12=function(){if(!this.$3(this.props.thread))return null;var a=window.callWindow&&!window.callWindow.closed?h._("Return To Call"):h._("Join Call");return b("React").createElement(l,{className:"_4ry5",label:a,onClick:this.$20,type:"primary"})};a.prototype.$8=function(a){return"row_header_id_"+a};a.prototype.$3=function(a){return!!(a.rtc_call_data&&a.rtc_call_data.call_state!==b("RTCCallState").NO_ONGOING_CALL)};a.prototype.$17=function(){var a=b("CurrentUser").isWorkUser()&&b("gkx")("678624")||b("MessengerConfig").MPT>0,c=b("getPageIDFromThreadID")(this.props.thread.thread_id);return a&&c===null};a.propTypes={isActive:c.bool.isRequired,blockedIds:c.any,isActionsFocused:c.bool,isFocused:c.bool,isMuted:c.bool.isRequired,isDoNotDisturb:c.bool,isPresenceForWork:c.bool,lastMessage:c.object,logClickHandler:c.func,onArchive:c.func.isRequired,onDelete:c.func.isRequired,onMarkRead:c.func.isRequired,onMarkSpam:c.func.isRequired,onMarkUnread:c.func.isRequired,onMute:c.func.isRequired,onPin:c.func.isRequired,onSelect:c.func.isRequired,onUnmute:c.func.isRequired,onIgnore:c.func.isRequired,onBlock:c.func.isRequired,onUnblock:c.func.isRequired,onUnpin:c.func.isRequired,participants:c.instanceOf(b("immutable").Map).isRequired,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired,registerThreadRefs:c.func,thread:c.instanceOf(b("ImmutableObject")).isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("ChatPinnedThreadsEntryPoint",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MENU_ITEM_IN_OVERFLOW_MENU:"menu_item_in_overflow_menu",MENU_ITEM_IN_INFO_PANEL:"menu_item_in_info_panel",MENU_ITEM_IN_THREAD_ROW:"menu_item_in_thread_row",INFO_PANEL_SECTION_ITEM:"info_panel_section_item",CHAT_TAB_MENU:"chat_tab_menu",INTEGRATION_TEST:"integration_test",INBOX_THREAD_ROW_SWIPE:"inbox_thread_row_swipe"})}),null);
__d("MercuryThreadlistRowContainer.react",["Arbiter","AvailableListConstants","Bootloader","CurrentUser","ImmutableObject","MercuryIDs","MessengerParticipants.bs","PresenceStatus","React","SubscriptionsHandler","gkx","immutable","shallowEqual","AvailableList"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("AvailableList");a=b("React").PropTypes;var g=function(a){return!b("gkx")("678641")||!b("CurrentUser").isWorkUser()?!1:b("immutable").Seq(a).some(function(a){a=b("MercuryIDs").getUserIDFromParticipantID(a);if(a===b("CurrentUser").getID())return!1;else return b("PresenceStatus").get(a)===b("AvailableListConstants").ACTIVE})},h=function(a){return a.thread.is_canonical_user?a.thread.other_user_fbid:null},i=b("React").createClass({displayName:"MercuryThreadlistRowContainer",propTypes:{ChildClass:a.func.isRequired,thread:a.instanceOf(b("ImmutableObject")).isRequired,viewer:a.string.isRequired},_availabilityStatusActions:null,_availabilityStatusStore:null,subscriptions:new(b("SubscriptionsHandler"))(),_participantsSubscription:null,getInitialState:function(){return{participants:b("immutable").Map(),isPresenceForWork:g(this.props.thread.participants),isDoNotDisturb:this._getDoNotDisturb()}},componentDidMount:function(){__p&&__p();b("gkx")("678641")&&b("CurrentUser").isWorkUser()&&this.subscriptions.addSubscriptions(b("Arbiter").subscribe(b("AvailableListConstants").ON_AVAILABILITY_CHANGED,function(){return this.setState({isPresenceForWork:g(this.props.thread.participants)})}.bind(this)));if(b("gkx")("678573")&&b("CurrentUser").isWorkUser()){var a=h(this.props);a&&b("Bootloader").loadModules(["WorkChatAvailabilityStatusActions","WorkChatAvailabilityStatusStore"],function(b,c){i._availabilityStatusActions=b,i._availabilityStatusStore=c,b.subscribeUser(a,this),this.setState({isDoNotDisturb:c.getIsDoNotDisturb(a)}),this.subscriptions.addSubscriptions(c.addListener(function(){var a=this.props.thread.is_canonical_user?this.props.thread.other_user_fbid:null;a&&this.setState({isDoNotDisturb:c.getIsDoNotDisturb(a)})}.bind(this)))}.bind(this),"MercuryThreadlistRowContainer.react")}var c=this._getDoNotDisturb(),d=this._computeParticipants();this.setState({participants:d,isPresenceForWork:g(this.props.thread.participants),isDoNotDisturb:c})},componentDidUpdate:function(){__p&&__p();var a=[];this.props.thread.participants.map(function(b){var c=this.state.participants.get(b);c||a.push(b)}.bind(this));var b=this._getDoNotDisturb();if(a.length>0)this.setState({participants:this._computeParticipants(),isPresenceForWork:g(this.props.thread.participants),isDoNotDisturb:b});else{var c=g(this.props.thread.participants);c!==this.state.isPresenceForWork&&this.setState({isPresenceForWork:c});b!==this.state.isDoNotDisturb&&this.setState({isDoNotDisturb:b})}},_computeParticipants:function(){this._participantsSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantsSubscription);var a=b("MessengerParticipants.bs").getMultiEagerMap(this.props.thread.participants,function(a){this._participantsSubscription=null,this.setState({participants:a})}.bind(this)),c=a[0];a=a[1];this._participantsSubscription=a;return c},_getDoNotDisturb:function(){var a=h(this.props);return i._availabilityStatusStore&&a&&b("gkx")("678573")&&b("CurrentUser").isWorkUser()?i._availabilityStatusStore.getIsDoNotDisturb(a):!1},componentWillUnmount:function(){var a=h(this.props);a&&(b("gkx")("678573")&&b("CurrentUser").isWorkUser()&&i._availabilityStatusActions&&i._availabilityStatusActions.unsubscribeUser(a,this));this.subscriptions.release();this._participantsSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantsSubscription)},shouldComponentUpdate:function(a,c){return!b("shallowEqual")(a,this.props)||c.isPresenceForWork!==this.state.isPresenceForWork||c.isDoNotDisturb!==this.state.isDoNotDisturb||!b("immutable").is(c.participants,this.state.participants)},render:function(){var a=this.props,c=a.ChildClass;a=babelHelpers.objectWithoutPropertiesLoose(a,["ChildClass"]);return b("React").createElement(c,babelHelpers["extends"]({},a,{participants:this.state.participants,isPresenceForWork:b("gkx")("678641")&&this.state.isPresenceForWork,isDoNotDisturb:b("gkx")("678573")&&this.state.isDoNotDisturb}))}});e.exports=i}),null);
__d("MessengerConfirmLeaveGroupDialogReact.bs",["bs_curry","ReasonReact.bs","MessengerDialogs.bs","MessengerDialogReact.bs","MessengerAdminGroupUtils","MessengerDialogBodyReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerConfirmLeaveGroupDialogReact");function h(a,c,d,e){var f=function(a,d){b("bs_curry")._1(c,0);return b("MessengerDialogs.bs").removeDialog(void 0,0)};return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(c){var e=b("MessengerAdminGroupUtils").getLeaveGroupBodyText(a,d),g=b("MessengerAdminGroupUtils").getLeaveGroupButtonText(a,d),h=b("MessengerAdminGroupUtils").getLeaveGroupTitleText(a,d);return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,h)),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogBodyReact.bs").make(void 0,[e])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Footer[0](void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").CancelButton[0](void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,g,void 0,"danger",b("bs_curry")._1(c[0],f),0,void 0,void 0,void 0,[]))]))]))},g[9],g[10],g[11],g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return h(a.isViewerAdmin,a.onLeave,a.thread,[])});f.component=g;f.make=h;f.jsComponent=a}),null);
__d("MessengerThreadlistRowContainer.react",["fbt","ChatPinnedThreadsEntryPoint","CurrentUser","IgnoreMessagesTypedLogger","ImmutableObject","MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercuryThreadActions","MercuryThreadInfo","MercuryThreadlistRowContainer.react","MercuryTriodeSourceUtil","MessageRequestUtils","MessagingSourceEnum","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerConfirmLeaveGroupDialogReact.bs","MessengerDialogs.bs","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MessengerReadReceipt.bs","MessengerState.bs","MessengerThreadlistRow.react","MNPlatformTagsDataManager","React","ReactComponentWithPureRenderMixin","ReactDOM"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerThreadlistRowContainer",mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{blockedIds:a.any,isActive:a.bool.isRequired,isTabbable:a.bool,folder:a.string,onScrollIntoView:a.func,onOverrideSelect:a.func,showActions:a.bool,readReceipts:a.any,thread:a.instanceOf(b("ImmutableObject")).isRequired,viewer:a.string.isRequired},componentDidUpdate:function(a){var c=this.props,d=c.onScrollIntoView;c=c.isActive;c&&!a.isActive&&d&&d(b("ReactDOM").findDOMNode(this))},render:function(){var a=this.props.thread.thread_id;a=b("MessengerState.bs").getThreadMessagesRangeNow(this.props.viewer,a,0,1)[0]||null;var c=b("MessengerReadReceipt.bs").getSeenTimestamps(this.props.readReceipts,this.props.thread.thread_id);return b("React").createElement(b("MercuryThreadlistRowContainer.react"),babelHelpers["extends"]({},this.props,{ChildClass:b("MessengerThreadlistRow.react"),isMuted:b("MercuryThreadInfo").isMuted(this.props.thread),lastMessage:a,onArchive:this._handleArchive,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onPin:this._handlePin,onSelect:this._handleSelect,onUnmute:this._handleUnmute,onUnpin:this._handleUnpin,onIgnore:this._handleIgnore,onBlock:this._handleBlockFromSettingOrDecline,onUnblock:this._handleUnblock,readReceipts:c,showActions:this.props.showActions,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical}))},_handleArchive:function(){var a=this.props.isActive;this._getThreadActions().archive(this.props.thread.thread_id);a&&b("MessengerActions").selectThread(null)},_handleDelete:function(){var a=this.props.isActive;this._getThreadActions()["delete"](this.props.thread.thread_id);a&&b("MessengerActions").selectThread(null)},_handleMarkRead:function(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function(){var a=this.props.isActive;this._getThreadActions().markSpam(this.props.thread.thread_id);a&&b("MessengerActions").selectThread(null)},_handleMarkUnread:function(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function(a){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,a)},_handlePin:function(){this._getThreadActions().pin(this.props.thread.thread_id,b("ChatPinnedThreadsEntryPoint").MENU_ITEM_IN_THREAD_ROW)},_handleUnpin:function(){this._getThreadActions().unpin(this.props.thread.thread_id,b("ChatPinnedThreadsEntryPoint").MENU_ITEM_IN_THREAD_ROW)},_handleSelect:function(){__p&&__p();var a=b("CurrentUser").getID();a=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,a);if(this.props.onOverrideSelect){this.props.onOverrideSelect(this.props.thread);return}b("MessengerActions").selectThread(this.props.thread.thread_id);var c=b("MercuryIDs").getUserIDFromThreadID(this.props.thread.thread_id),d;switch(this.props.folder){case"inbox":d="inbox";break;case"pending":d="pending";break;case"other":d="other";break}this.props.thread.folder!==b("MessagingTag").INBOX&&new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_thread_open").setThreadID(c).setSurface(d).setFolderType(this.props.thread.folder).setThreadKey(a).log();b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(b("MessagingSourceEnum").MESSENGER_WEB_SEARCH,c)},_handleUnmute:function(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleLeaveGroup:function(){if(this.props.viewer){var a=b("MessengerAdminGroupUtils").isAdmin(this.props.thread.admins,this.props.viewer);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(h,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:a,thread:this.props.thread})}.bind(this))}},_handleIgnore:function(){var a=this.props.isActive;this._getThreadActions().changeFolder(this.props.thread.thread_id,"other");a&&b("MessengerActions").selectThread(null);new(b("IgnoreMessagesTypedLogger"))().setEvent("ignore_confirmed").setThreadID(this.props.thread.thread_fbid).setPlatform("messengerdotcom").log()},_handleBlockFromSettingOrDecline:function(){var a=this.props.thread.thread_id;a=b("MercuryIDs").isGroupChat(a);if(a){this._handleIgnore();return}a=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(this.props.thread.other_user_fbid));a=a&&a.short_name||g._("sender");this._handleConfirmBlock(a)},_handleConfirmBlock:function(a){var b=this.props.thread.thread_id;b&&this._getThreadActions().blockIgnoreOnMessengerDotCom(this.props.isActive,b,function(){this._handleAfterBlock(a)}.bind(this))},_handleAfterBlock:function(a){a=this.props.thread;var c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(a.thread_id,b("CurrentUser").getID()),d=!!a&&b("MessageRequestUtils").isFiltered(a);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id)).setSurface("thread").setFolderType(d?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(c).setEntryPoint(null).log()},_handleUnblock:function(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_onLeaveGroupConfirm:function(){if(!b("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)){var a=this._getMessageObject().constructLogMessageObject(b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),this.props.thread.thread_id,b("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)]});this._getMessageActions().send(a)}},_getThreadActions:function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)},_getMessageActions:function(){return b("MercuryMessageActions").getForFBID(this.props.viewer)},_getMessageObject:function(){return b("MercuryMessageObject").getForFBID(this.props.viewer)}});e.exports=c}),null);
__d("AbstractPopoverButtonReact.bs",["ReasonReact.bs","bs_js_null_undefined","AbstractPopoverButton.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){return b("ReasonReact.bs").wrapJsForReason(b("AbstractPopoverButton.react"),{config:b("bs_js_null_undefined").fromOption(a),haschevron:b("bs_js_null_undefined").fromOption(c),image:b("bs_js_null_undefined").fromOption(d),label:b("bs_js_null_undefined").fromOption(e),maxwidth:b("bs_js_null_undefined").fromOption(f)},g)}f.make=a}),null);
__d("MessengerSearchLoggerUtil",["MercuryTypeaheadConstants","MessengerSearchFunnelLoggerConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c;switch(a){case b("MercuryTypeaheadConstants").THREAD_TYPE:c=b("MessengerSearchFunnelLoggerConstants").GROUP;break;case b("MercuryTypeaheadConstants").FRIEND_TYPE:c=b("MessengerSearchFunnelLoggerConstants").USER_CONTACT;break;case b("MercuryTypeaheadConstants").NON_FRIEND_TYPE:c=b("MessengerSearchFunnelLoggerConstants").USER_NON_CONTACT;break;case b("MercuryTypeaheadConstants").FB4C_TYPE:c=b("MessengerSearchFunnelLoggerConstants").COWORKER;break;case b("MercuryTypeaheadConstants").GAME_TYPE:c=b("MessengerSearchFunnelLoggerConstants").GAME;break;case b("MercuryTypeaheadConstants").PAGE_TYPE:case b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:case b("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE:case b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE:c=b("MessengerSearchFunnelLoggerConstants").PAGE;break;default:c=b("MessengerSearchFunnelLoggerConstants").OTHER}return c}e.exports={getLoggingTypeFromMercuryType:a}}),null);
__d("MessengerUniversalSearchFunnelLoggerConstants",[],(function(a,b,c,d,e,f){"use strict";a={END:"end",IMPRESSIONS:"impressions",QUERY_CHANGED:"query_changed",REENTERED:"reentered",RESULT_SELECTED:"result_selected",SOURCE_ENDED:"source_ended",SOURCE_STARTED:"source_started",START:"start"};b={USER_CONTACT:"user_contact",USER_NON_CONTACT:"user_non_contact",GROUP:"group",PAGE:"page",GAME:"game",TINCAN:"tincan",COWORKER:"coworker",OTHER:"other"};c={MESSENGER_DOT_COM:"messenger_dot_com",WWW:"www"};d=Object.freeze({INBOX:"inbox",SIDEBAR:"sidebar"});f={NULL_STATE:"null_state",TYPEAHEAD:"typeahead"};var g={LOCAL:"local",SERVER:"server",SERVER_XCONTROLLER:"server_xcontroller",LOCAL_AND_SERVER:"local_and_server",SERVER_USERS_GROUPS:"server_users_groups",SERVER_PAGES:"server_pages",SERVER_ROOMS:"server_rooms"},h={FAILED:"failed",FINISHED:"finished"},i={LOCAL:"local",SERVER:"server"},j={END_ACTION:"end_action"},k={ABANDON:"abandon",RESULT_SELECTED:"result_selected",MESSAGE_SEARCH:"message_search",SEND:"send",CALL:"call"};e.exports={NAME:"MESSENGER_UNIVERSAL_SEARCH_FUNNEL",END_ACTIONS:k,END_REASONS:j,ENTRY_SURFACES:d,EVENTS:a,INTERFACES:c,QUERY_PROGRESS:h,RESULT_SURFACES:f,RESULT_TYPES:b,SOURCES:g,UI_SECTIONS:i}}),null);
__d("MessengerUniversalSearchFunnelLogger",["FunnelLogger","MessengerSearchLoggerUtil","MessengerUniversalSearchFunnelLoggerConstants","compactArray","gkx","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerUniversalSearchFunnelLoggerConstants").NAME,h=b("MessengerUniversalSearchFunnelLoggerConstants").EVENTS,i=h.END,j=h.IMPRESSIONS,k=h.REENTERED,l=h.RESULT_SELECTED,m=h.SOURCE_ENDED,n=h.SOURCE_STARTED,o=h.START,p=h.QUERY_CHANGED,q=b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL,r=b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.NULL_STATE,s,t,u,v=b("gkx")("678635");function a(a,d,e){if(!v)return;c=e;u=c.getSessionID();t=null;s=null;b("FunnelLogger").startFunnel(g,u);b("FunnelLogger").appendActionWithPayloadIfNew(g,u,o,{entry_interface:d,entry_surface:a})}function d(a){if(!v)return;b("FunnelLogger").appendActionWithPayload(g,u,p,{query_string:a})}function f(){return u}function w(a,c){__p&&__p();if(!s){if(a===null||a===void 0)return;var d=b("immutable").OrderedMap();a=a.map(function(a){var c=a.getUniqueID();a=b("MessengerSearchLoggerUtil").getLoggingTypeFromMercuryType(a.getType());return{result_fbid:c,result_type:a,rank_section:a,data_source:[b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL]}});a=b("compactArray")(a).slice(0,c);a.forEach(function(a){d=d.set(a.result_fbid,a)});s=d}t=s;b("FunnelLogger").appendActionWithPayload(g,u,j,{impression_list:Array.from(t.values()),query_string:"",result_surface:r})}function x(a,c,d,e){if(!a)return;e===q&&a;t=a;if(!v||!b("gkx")("678636"))return;b("FunnelLogger").appendActionWithPayload(g,u,j,{impression_list:Array.from(a.values()),query_string:c,result_surface:d})}function y(a,c){if(!v)return;b("FunnelLogger").appendActionWithPayload(g,u,n,{query_string:a,data_source:c})}function z(a,c,d,e,f){if(!v)return;b("FunnelLogger").appendActionWithPayload(g,u,m,{query_string:a,data_source:c,results_count:d,status:e,result_used:f})}function A(a,c,d,e){if(!v||!t)return;var f=c.split(":")[1];c=t.get(f);b("FunnelLogger").appendActionWithPayload(g,u,l,{query_string:a,result_fbid:f,result_type:d,result_index:t.keySeq().findIndex(function(a){return a===f}),data_source:[c.data_source[0]],rank_section:c.rank_section,rank_section_index:0,result_surface:e})}function B(){if(!v)return;b("FunnelLogger").appendAction(g,u,k)}function C(a,c,d,e){if(!v)return;b("FunnelLogger").appendActionWithPayload(g,u,i,{end_reason:a,action_name:c,error_name:d,entry_surface:e});b("FunnelLogger").endFunnel(g,u)}e.exports={endFunnel:C,getCurrentFunnelID:f,logNullStateImpressions:w,logImpressions:x,logQueryChanged:d,logReentered:B,logResultSelected:A,logSourceEnded:z,logSourceStarted:y,startFunnel:a}}),null);
__d("BootloadableMessengerUniversalSearchFunnelLogger.bs",["Bootload.bs","Bootloader","MessengerUniversalSearchFunnelLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger.bs"],a,"BootloadableMessengerUniversalSearchFunnelLogger.bs");return 0}a=[a];var g=b("Bootload.bs").Create(a);function c(a,c,d,e){b("MessengerUniversalSearchFunnelLogger").startFunnel(a,c,d);return 0}function d(a,c,d,e,f){b("MessengerUniversalSearchFunnelLogger").endFunnel(a,c,d,e);return 0}function e(a,c){b("MessengerUniversalSearchFunnelLogger").logQueryChanged(a);return 0}function h(a,c,d,e,f){b("MessengerUniversalSearchFunnelLogger").logResultSelected(a,c,d,e);return 0}c=[c,d,e,h];f.FunnelLoggerForBootload=a;f.Loadable=g;f.FunnelLogger=c}),null);
__d("ChatEmojiSkinTonePreferencePickerReact.bs",["ReasonReact.bs","ChatEmojiSkinTonePreferencePicker.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("ChatEmojiSkinTonePreferencePicker.react"),{currentPreference:a,onSelect:c},d)}f.make=a}),null);
__d("ChatSidebarSheetChatOffline.react",["fbt","Link.react","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){var a=b("gkx")("678660")?g._("Turn on Active Status"):g._("Turn on chat");return b("React").createElement("div",null,g._("{=Go online} to see who's available.",[g._param("=Go online",b("React").createElement(b("Link.react"),{className:"fbChatGoOnlineLink",onClick:this.props.onGoOnlineClick},a))]))};function a(){h.apply(this,arguments)}a.propTypes={onGoOnlineClick:c.func.isRequired};e.exports=a}),null);
__d("ChatSidebarSheetChatReconnectMsg.react",["fbt","ChannelConstants","Link.react","MessengerSpinner.react","Network","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a=this.props,c=a.isMessenger;a=a.msecs;var d=b("React").createElement(b("Link.react"),{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},g._("No Internet connection"));if(a==null||!b("Network").isOnline())return c?d:b("React").createElement("div",null,g._("Unable to connect to chat. Check your Internet connection."));else if(a>b("ChannelConstants").WARNING_COUNTDOWN_THRESHOLD_MSEC)return c?d:b("React").createElement("div",null,g._("Unable to connect to chat. {try-again-link}",[g._param("try-again-link",b("React").createElement(b("Link.react"),{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},g._("Try again")))]));else if(a>1e3)return c?d:b("React").createElement("div",null,g._("Unable to connect to chat. Reconnecting in {seconds}",[g._param("seconds",Math.floor(a/1e3))]));else return c?b("React").createElement("div",null,b("React").createElement(b("MessengerSpinner.react"),{color:"grey"}),g._("Connecting...")):b("React").createElement("div",null,g._("Unable to connect to chat. Reconnecting..."))};function a(){h.apply(this,arguments)}a.propTypes={isMessenger:c.bool,msecs:c.number,onManuallyConnectClick:c.func};e.exports=a}),null);
__d("ChatSidebarSheetChatShutdownMsg.react",["fbt","ChannelConstants","CurrentUser","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a=this.props,c=a.hint;a=a.isMessenger;switch(c){case b("ChannelConstants").HINT_AUTH:return b("React").createElement("div",null,g._("Your session has timed out. Please log in."));case b("ChannelConstants").HINT_MAINT:return a?b("React").createElement("div",null,g._("Messenger is currently down for maintenance.")):b("React").createElement("div",null,g._("{Chat} is currently down for maintenance.",[g._param("Chat",g._("Chat"))]));case b("ChannelConstants").HINT_CONN:default:if(!a)return b("React").createElement("div",null,g._("{Chat} is currently unavailable.",[g._param("Chat",g._("Chat"))]));else if(b("CurrentUser").isWorkUser())return b("React").createElement("div",null,g._("Workplace Chat is currently unavailable."));else return b("React").createElement("div",null,g._("Messenger is currently unavailable."))}};function a(){h.apply(this,arguments)}a.propTypes={hint:c.string,isMessenger:c.bool};e.exports=a}),null);
__d("ChatSidebarSheet.react",["fbt","Arbiter","Bootloader","ChannelConnection","ChatBehavior","ChatConfig","ChatSidebarSheetChatOffline.react","ChatSidebarSheetChatReconnectMsg.react","ChatSidebarSheetChatShutdownMsg.react","ChatVisibility","LogHistory","MercurySyncConstants","MercurySyncEventsProxy","MessengerEnvironment","MessengerMQTTGating","PresencePrivacy","React","SubscriptionsHandler","clearTimeout","gkx","joinClasses","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("LogHistory").getInstance("sidebar_sheet");c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$3=b("MercurySyncEventsProxy").getForFBID(this.props.viewer),this.state={connectionStatus:null,channelData:null,isConnected:!b("ChannelConnection").disconnected(),isOnline:b("ChatVisibility").isOnline(),notifiesUserMessages:b("ChatBehavior").notifiesUserMessages(),syncStateInvalid:!1,syncStateReconnecting:!1},this.$5=function(a,c){var d=b("ChannelConnection").CONNECTED;switch(a){case this.$3.getArbiterType(b("MercurySyncEventsProxy").Events.SHUTDOWN):d=b("ChannelConnection").SHUTDOWN;break;case this.$3.getArbiterType(b("MercurySyncEventsProxy").Events.RECONNECTING):d=b("ChannelConnection").RECONNECTING;break}this.setState({connectionStatus:d,channelData:c});this.$6()}.bind(this),this.$6=function(){this.setState({isConnected:!b("ChannelConnection").disconnected(),isOnline:b("ChatVisibility").isOnline(),notifiesUserMessages:b("ChatBehavior").notifiesUserMessages()})}.bind(this),c}a.prototype.$4=function(){this.$1=new(b("SubscriptionsHandler"))(),this.$1.addSubscriptions(b("Arbiter").subscribe([this.$3.getArbiterType(b("MercurySyncEventsProxy").Events.CONNECTED),this.$3.getArbiterType(b("MercurySyncEventsProxy").Events.SHUTDOWN),this.$3.getArbiterType(b("MercurySyncEventsProxy").Events.RECONNECTING)],this.$5),b("ChannelConnection").subscribe([b("ChannelConnection").MUTE_WARNING,b("ChannelConnection").UNMUTE_WARNING],this.$6),b("PresencePrivacy").subscribe("privacy-user-presence-changed",this.$6),b("ChatBehavior").subscribe(b("ChatBehavior").ON_CHANGED,this.$6),b("Arbiter").subscribe(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE,function(){i.log("invalid state fatal","{}"),this.setState({syncStateInvalid:!0,syncStateReconnecting:!1})}.bind(this)),b("Arbiter").subscribe(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RETRY,function(){i.log("retry from invalid state","{}"),this.$7()}.bind(this)),b("Arbiter").subscribe(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RECOVER,function(){i.log("recover from invalid state","{}"),this.$8()}.bind(this)),b("Arbiter").subscribe("messenger-mqtt-drop-down-to-channel",function(){this.$1.release(),this.$4()}.bind(this)))};a.prototype.componentDidMount=function(){this.$4()};a.prototype.componentDidUpdate=function(){this.$2&&(b("clearTimeout")(this.$2),this.$2=null)};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.release(),b("clearTimeout")(this.$2)};a.prototype.render=function(){var a=b("MessengerEnvironment").messengerui,c,d;!this.state.isOnline&&!a?(c="offline",d=this.$9()):this.$10()?(c="error",d=this.$11(a)):!this.state.notifiesUserMessages&&!a&&(c="notice",d=this.$12());(this.state.connectionStatus===b("ChannelConnection").RECONNECTING&&this.state.channelData<1e3||this.state.syncStateReconnecting)&&(c=b("joinClasses")(c,"reconnecting"));return c==="offline"&&this.$13()?null:b("React").createElement("div",{className:b("joinClasses")(this.props.className,c)},a?null:b("React").createElement("div",{className:"img"}),b("React").createElement("div",{className:"message"},d))};a.prototype.$13=function(){return b("gkx")("697231")&&!this.props.isSidebar};a.prototype.$10=function(){var a=this.state.connectionStatus;if(b("MessengerMQTTGating").isEnabled())return a&&(a===b("ChannelConnection").SHUTDOWN||a===b("ChannelConnection").RECONNECTING&&this.state.channelData!==void 0)||this.state.syncStateInvalid||this.state.syncStateReconnecting;else return!this.state.isConnected||this.state.syncStateInvalid||this.state.syncStateReconnecting};a.prototype.$11=function(a){__p&&__p();if(this.state.connectionStatus===b("ChannelConnection").SHUTDOWN||this.state.syncStateInvalid)return b("React").createElement(b("ChatSidebarSheetChatShutdownMsg.react"),{hint:this.state.syncStateInvalid?void 0:this.state.channelData,isMessenger:a});else if(this.state.connectionStatus===b("ChannelConnection").RECONNECTING||this.state.syncStateReconnecting){var c=this.state.channelData;if(c===void 0&&!this.state.syncStateReconnecting)return null;c=this.state.syncStateReconnecting?1:c;c>1e3&&(this.$2=b("setTimeoutAcrossTransitions")(this.$5.bind(this,this.$3.getArbiterType(b("MercurySyncEventsProxy").Events.RECONNECTING),c-1e3),1e3));return b("React").createElement(b("ChatSidebarSheetChatReconnectMsg.react"),{isMessenger:a,msecs:c,onManuallyConnectClick:function(){this.state.syncStateReconnecting||b("ChannelConnection").reconnect()}.bind(this)})}return null};a.prototype.$9=function(){return b("React").createElement(b("ChatSidebarSheetChatOffline.react"),{onGoOnlineClick:function(a){this.$14(),i.log("sidebar_go_online"),b("ChatVisibility").goOnline()}.bind(this)})};a.prototype.$14=function(){b("Bootloader").loadModules(["FunnelLogger"],function(a){a.startFunnel("WWW_PRESENCE_FUNNEL"),a.appendActionWithTag("WWW_PRESENCE_FUNNEL","sidebar_turn_on_chat",b("PresencePrivacy").getOnlinePolicyStr()),a.endFunnel("WWW_PRESENCE_FUNNEL")},"ChatSidebarSheet.react")};a.prototype.$12=function(){return b("React").createElement("div",null,g._("Alerts are off while you use another client to chat."))};a.prototype.$7=function(){this.setState({syncStateReconnecting:!0})};a.prototype.$8=function(){this.setState({syncStateInvalid:!1,syncStateReconnecting:!1})};e.exports=a}),null);
__d("ChatSidebarSheetReact.bs",["ReasonReact.bs","ChatSidebarSheet.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("ChatSidebarSheet.react"),{className:a,viewer:c},d)}f.make=a}),null);
__d("LinkWithHiddenURLBarReact.bs",["ReasonReact.bs","bs_js_null_undefined","LinkWithHiddenURLBar.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return b("ReasonReact.bs").wrapJsForReason(b("LinkWithHiddenURLBar.react"),{"aria-label":b("bs_js_null_undefined").fromOption(a),"data-hover":b("bs_js_null_undefined").fromOption(d),"data-tooltip-content":b("bs_js_null_undefined").fromOption(e),"data-tooltip-alignh":b("bs_js_null_undefined").fromOption(f),"data-tooltip-position":b("bs_js_null_undefined").fromOption(g),className:b("bs_js_null_undefined").fromOption(c),href:b("bs_js_null_undefined").fromOption(h),linkRef:b("bs_js_null_undefined").fromOption(i),onClick:b("bs_js_null_undefined").fromOption(j),onAllClicks:b("bs_js_null_undefined").fromOption(k),onMouseDown:b("bs_js_null_undefined").fromOption(l),onMouseEnter:b("bs_js_null_undefined").fromOption(m),role:b("bs_js_null_undefined").fromOption(n),rel:b("bs_js_null_undefined").fromOption(o),style:b("bs_js_null_undefined").fromOption(p),tabIndex:b("bs_js_null_undefined").fromOption(q),target:b("bs_js_null_undefined").fromOption(r),title:b("bs_js_null_undefined").fromOption(s)},t)}f.make=a}),null);
__d("MessageRequestLogger.bs",["MessengerMessageRequestsTypedLogger"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){new(b("MessengerMessageRequestsTypedLogger"))().setSurface("inbox").setFolderType(d).setAction("message_requests_thread_impression").addToExtraData("threads",a).setThreadKeyList(c).log();return 0}f.logItemImpression=a}),null);
__d("MessengerAddIconSVGReact.bs",["fbt","React","ReasonReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=g._("add to group"),i=b("ReasonReact.bs").statelessComponent("MessengerAddIconSVGReact");function j(a,c,d){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){return b("React").createElement("div",{className:a},b("React").createElement("svg",{viewBox:"-8 -8 48 48"},b("React").createElement("title",void 0,h),b("React").createElement("path",{clipRule:"evenodd",d:"M16,0 V32 M0,16 H32",fill:"none",fillRule:"evenodd",stroke:c,strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2"})))},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.className,a.customColor,[])});f.addToGroup=h;f.component=i;f.make=j;f.jsComponent=a}),null);
__d("MessengerAddIconSVGReact.re",["bs_curry","MessengerAddIconSVGReact.bs","ReasonReact.bs"],(function(a,b,c,d,e,f){a=b("ReasonReact.bs").wrapReasonForJs(b("MessengerAddIconSVGReact.bs").component,function(a){return b("bs_curry")._3(b("MessengerAddIconSVGReact.bs").make,a.className,a.customColor,a.children)});f.component=a;f["default"]=a}),null);
__d("MessengerAudioAvailableIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").createElement("svg",{height:"32px",width:"32px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"phone",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("polygon",{id:"Fill-8",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-11",d:"M12.8546683,23.0915802 C10.2003459,20.4371382 8.18827548,17.4933995 7.18895039,14.801598 C6.11677282,11.9134196 6.30082118,9.54827444 7.70754499,8.14106577 C8.38574404,7.46332572 9.22115105,6.9556194 9.80301228,6.64860076 C10.1768605,6.45174482 10.6202062,6.44887101 10.9902201,6.6495587 C12.2608248,7.33735708 14.2542027,9.8624776 14.6055242,11.228016 C14.6980277,11.5867632 14.6266131,11.9694589 14.4094936,12.2774354 L12.8029047,14.5630718 C12.7056083,14.7019726 12.682123,14.8820647 12.7415553,15.0406032 C13.4096892,16.8233229 14.2192144,18.3129141 15.9254961,20.01852 C17.6303399,21.7246049 19.1209399,22.5340612 20.904867,23.2027008 C21.0635129,23.2625718 21.2432476,23.2391024 21.3822424,23.1413929 L23.6205389,21.5679822 C23.9339963,21.3476569 24.313596,21.2868279 24.6572488,21.3696894 C26.1948195,21.7356211 28.7992956,23.6898115 29.3811568,24.9135753 C29.5474713,25.2637011 29.5388441,25.6674713 29.3576715,26.0209499 C29.0993327,26.5267404 28.5534185,27.4875506 27.8018877,28.2395308 C24.2474537,31.7915592 16.8807262,27.1187451 12.8546683,23.0915802",fill:a})))}f.make=a}),null);
__d("MessengerAudioUnavailableIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").createElement("svg",{height:"32px",width:"32px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"phone-missed",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("polygon",{id:"Fill-4",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"new",d:"M21.3821106,23.1416542 L23.6204291,21.5682415 C23.9343688,21.3479158 24.313493,21.2866078 24.6571492,21.3694694 C26.194735,21.7354016 28.7997159,23.6900735 29.3811036,24.9138389 C29.5474198,25.2639652 29.5387924,25.667257 29.3580973,26.0212149 C29.0997561,26.5265271 28.5538364,27.4878176 27.8022982,28.2393197 C24.24735,31.7918318 16.8805501,27.1185326 12.8549319,23.0918414 C10.200104,20.437396 8.18849316,17.4931744 7.18915824,14.8013694 C6.11649083,11.9131872 6.3010203,9.54803895 7.70775794,8.14130741 C8.38548436,7.4630875 9.22137889,6.95538051 9.80276654,6.64884044 C10.1766185,6.45150527 10.6199685,6.44911042 10.989986,6.64931941 C12.2610825,7.33759766 14.2544801,9.86224252 14.605805,11.2282617 C14.6978301,11.5865304 14.6264148,11.9692265 14.4097724,12.2776825 L12.8031678,14.5633219 C12.7053911,14.7017439 12.6823849,14.8818362 12.7418177,15.0403749 C13.4099582,16.823097 14.2194914,18.3126901 15.9253105,20.0182982 C17.6306504,21.7243853 19.1212651,22.5343216 20.9047304,23.2029622 C21.0633779,23.2623543 21.2435936,23.2388848 21.3821106,23.1416542 M29.7074342,7.70752502 L25.9144427,11.4999687 L29.7074342,15.2929126 C30.0975219,15.6835613 30.0975219,16.3168024 29.7069347,16.7074511 C29.3163475,17.0975996 28.6835163,17.0975996 28.2929291,16.7069509 L24.4999376,12.9145072 L20.7074455,16.7069509 C20.3168583,17.0975996 19.6835276,17.0975996 19.2929404,16.7074511 C18.9023532,16.3168024 18.9023532,15.6835613 19.2929404,15.2929126 L23.0859319,11.4999687 L19.2929404,7.70752502 C18.9023532,7.31687631 18.9023532,6.68363525 19.2929404,6.29348672 L19.2929404,6.29298653 C19.6835276,5.90233782 20.3168583,5.90233782 20.7074455,6.29298653 L24.4999376,10.0859304 L28.2929291,6.29298653 C28.6835163,5.90233782 29.3163475,5.90233782 29.7069347,6.29298653 L29.7074342,6.29348672 C30.0975219,6.68363525 30.0975219,7.31687631 29.7074342,7.70752502",fill:a})))}f.make=a}),null);
__d("MessengerToggleReact.bs",["cx","bs_curry","React","ReactDOMRe.bs","ReasonReact.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("ReasonReact.bs").statelessComponent("MessengerToggleReact");function a(a,c,d,e){var f=d!==void 0?d:!1,g=function(c,d){return b("bs_curry")._1(a,!f)};return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(a){return b("ReactDOMRe.bs").createElementVariadic("button",{className:"_6ufm",onClick:b("bs_curry")._1(a[0],g),"aria-label":c,"aria-pressed":f,"data-hover":"tooltip","data-tooltip-content":c,"data-tooltip-alignh":"center","data-tooltip-position":"above"},[b("React").createElement("div",{className:"_6ufn"+(f?" _6ufo":"")},b("React").createElement("div",{className:"_6ufp"+(f?" _6ufq":"")}))])},h[9],h[10],h[11],h[12]]}f.component=h;f.make=a}),null);
__d("MessengerChatOnOffToggleReact.bs",["fbt","ReasonReact.bs","MessengerToggleReact.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("ReasonReact.bs").statelessComponent("MessengerChatOnOffToggleReact");function a(a,c,d){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var d=a?g._("Go Offline"):g._("Go Online");return b("ReasonReact.bs").element(void 0,void 0,b("MessengerToggleReact.bs").make(c,d,a,[]))},h[9],h[10],h[11],h[12]]}f.component=h;f.make=a}),null);
__d("MessengerCheckboxInputReact.bs",["cx","React","ReasonReact.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=b("ReasonReact.bs").statelessComponent("MessengerCheckboxInputReact");function a(a,c,d,e){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return b("React").createElement("label",{className:"_4ng2"},b("React").createElement("input",{className:"_6bkz",checked:a,type:"checkbox",onChange:c}),b("React").createElement("div",{className:"_6bk-"}),d)},h[9],h[10],h[11],h[12]]}f.component=h;f.make=a}),null);
__d("MessengerDeleteAllDialogBootloaderReact.bs",["ReasonReact.bs","MessengerDeleteAllDialogBootloader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerDeleteAllDialogBootloader.react"),{onDeleteAll:a,getThreadIDs:c,logConnectionRequestEvent:d},e)}f.make=a}),null);
__d("MessengerSettingsIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createElement("svg",{height:"30px",width:"30px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"settings",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"Settings"},b("React").createElement("polygon",{id:"Bounding-Box",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-1",d:"M18,11.00025 C14.1345,11.00025 11.0005,14.13425 11.0005,18.00025 C11.0005,21.86575 14.1345,24.99975 18,24.99975 C21.8655,24.99975 24.9995,21.86575 24.9995,18.00025 C24.9995,14.13425 21.8655,11.00025 18,11.00025 Z M31,17.42725 L31,18.57325 C31,19.14125 30.679,19.66025 30.171,19.91475 L28.638,20.68075 C28.2975,20.85125 28.0215,21.13725 27.8915,21.49475 C27.7675,21.83575 27.624,22.16775 27.4665,22.49175 C27.3,22.83375 27.286,23.23025 27.406,23.59175 L27.96,25.25225 C28.1395,25.79125 27.999,26.38575 27.5975,26.78725 L26.787,27.59775 C26.3855,27.99925 25.791,28.13975 25.2525,27.95975 L23.595,27.40725 C23.234,27.28725 22.837,27.30125 22.495,27.46775 C22.1705,27.62575 21.837,27.76975 21.4945,27.89425 C21.1355,28.02475 20.849,28.30125 20.6785,28.64275 L19.9145,30.17075 C19.6605,30.67875 19.141,31.00025 18.573,31.00025 L17.427,31.00025 C16.859,31.00025 16.3395,30.67875 16.0855,30.17075 L15.3215,28.64275 C15.151,28.30125 14.864,28.02475 14.5055,27.89425 C14.1625,27.76975 13.83,27.62575 13.505,27.46775 C13.163,27.30125 12.766,27.28725 12.405,27.40725 L10.7475,27.95975 C10.2085,28.13975 9.6145,27.99925 9.213,27.59775 L8.4025,26.78725 C8.0005,26.38575 7.8605,25.79125 8.04,25.25225 L8.594,23.59175 C8.714,23.23025 8.7,22.83375 8.5335,22.49175 C8.376,22.16775 8.2325,21.83575 8.1085,21.49475 C7.9785,21.13725 7.7025,20.85125 7.362,20.68075 L5.829,19.91475 C5.321,19.66025 5,19.14125 5,18.57325 L5,17.42725 C5,16.85875 5.321,16.33925 5.829,16.08525 L7.362,15.31925 C7.7025,15.14875 7.9785,14.86275 8.1085,14.50525 C8.2325,14.16425 8.376,13.83225 8.5335,13.50825 C8.7,13.16625 8.714,12.76975 8.594,12.40825 L8.04,10.74775 C7.8605,10.20875 8.0005,9.61475 8.4025,9.21275 L9.213,8.40275 C9.6145,8.00075 10.2085,7.86025 10.7475,8.04025 L12.405,8.59275 C12.766,8.71275 13.163,8.69875 13.505,8.53225 C13.83,8.37425 14.1625,8.23025 14.5055,8.10575 C14.864,7.97525 15.151,7.69875 15.3215,7.35725 L16.0855,5.82925 C16.3395,5.32125 16.859,5.00025 17.427,5.00025 L18.573,5.00025 C19.141,5.00025 19.6605,5.32125 19.9145,5.82925 L20.6785,7.35725 C20.849,7.69875 21.1355,7.97525 21.4945,8.10575 C21.837,8.23025 22.1705,8.37425 22.495,8.53225 C22.837,8.69875 23.234,8.71275 23.595,8.59275 L25.2525,8.04025 C25.791,7.86025 26.3855,8.00075 26.787,8.40275 L27.5975,9.21275 C27.999,9.61475 28.1395,10.20875 27.96,10.74775 L27.406,12.40825 C27.286,12.76975 27.3,13.16625 27.4665,13.50825 C27.624,13.83225 27.7675,14.16425 27.8915,14.50525 C28.0215,14.86275 28.2975,15.14875 28.638,15.31925 L30.171,16.08525 C30.679,16.33925 31,16.85875 31,17.42725 Z",fill:"#000000"}))));f.icon=a}),null);
__d("MessengerDeleteAllMenuReact.bs",["cx","fbt","bs_array","LinkReact.bs","MercuryIDs","ReasonReact.bs","bs_js_primitive","MessengerActions","MessengerDialogs.bs","bs_js_null_undefined","MessengerURIStore","MessengerMenuReact.bs","MercuryThreadActions","MessengerPopoverMenuReact.bs","AbstractPopoverButtonReact.bs","MessengerDotComAndInboxM4Check.bs","MessengerSettingsIconSVGM4React.bs","MessagingThreadCustomizationSource","MessengerDeleteAllDialogBootloaderReact.bs","MessengerMessageRequestsTypedLoggerBootloader"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDotComAndInboxM4Check.bs").yes?"_30yy _6ymd":"_30yy _2fug",j=b("ReasonReact.bs").statelessComponent("messengerDeleteAllMenuReact");function a(a,c,d,e,f){__p&&__p();return[j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],function(){__p&&__p();var f=function(a,d){if(a.length!==0){var f=b("bs_array").map(function(a){return b("MercuryIDs").getThreadKeyfromThreadIDUserID(a,e)},a);f=f.join(",");a=JSON.stringify({number_of_threads:a.length});b("MessengerMessageRequestsTypedLoggerBootloader").log(d,f,c,c,"settings",b("bs_js_null_undefined").fromOption(a===void 0?void 0:b("bs_js_primitive").some(a)));return 0}else return 0},g=function(){__p&&__p();if(d==null)return[];else{var b=d[c];if(b!==void 0){b=b[a];if(b!==void 0)return b.threadlist;else return[]}else return[]}},j=function(){__p&&__p();var a=g(0);a.forEach(function(a){__p&&__p();var c=b("MessengerURIStore").getState().activeThreadID;if(c==null)return 0;else{c=c===a;if(c){b("MessengerActions").selectThread("");return 0}else return 0}});f(a,"message_requests_delete_request_multiple");b("MercuryThreadActions").get().batchDelete(a,b("MessagingThreadCustomizationSource").DELETE_ALL_SETTING);return 0},k=function(){var a=g(0);f(a,"message_requests_delete_attempt_multiple");return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDeleteAllDialogBootloaderReact.bs").make(j,g,f,[]))})},l=function(){var a=g(0);b("MercuryThreadActions").get().batchMarkRead(a,b("MessagingThreadCustomizationSource").DELETE_ALL_SETTING);return f(a,"message_requests_read_request_multiple")};k=b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").Menu[0]([b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Delete All"),k,void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Mark All As Read"),l,void 0,[]))]));l=h._("Settings, help and more");l={button:b("MessengerDotComAndInboxM4Check.bs").yes?b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,l,i,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,l,[b("MessengerSettingsIconSVGM4React.bs").icon])):b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,l,i,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,l,[])),defaultMaxWidth:200};return b("ReasonReact.bs").element(void 0,void 0,b("MessengerPopoverMenuReact.bs").make(void 0,void 0,void 0,k,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("AbstractPopoverButtonReact.bs").make(b("bs_js_primitive").some(l),!1,void 0,void 0,200,[]))]))},j[9],j[10],j[11],j[12]]}f.settingsIconClasses=i;f.component=j;f.make=a}),null);
__d("MessengerDeliveryReceipt.bs",["bs_belt_Option","bs_belt_MapString"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("bs_belt_Option").getWithDefault(b("bs_belt_MapString").get(a,c),0)}c=b("bs_belt_Option").getWithDefault;f.$pipe$unknown=c;f.getDeliveryTimeOfThread=a}),null);
__d("MessengerForeignUserCompanyNameReact.bs",["React","ReasonReact.bs","bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").statelessComponent("MessengerForeignUserCompanyNameReact");function a(a,c,d){return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],function(){if(c!==void 0){var d={};a!==void 0&&(d.className=b("bs_js_primitive").valFromOption(a));return b("React").createElement("span",d,c)}else return null},g[9],g[10],g[11],g[12]]}f.component=g;f.make=a}),null);
__d("MessengerInfoIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").createElement("svg",{height:"32px",width:"32px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"info-circle",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("g",{id:"Group"},b("React").createElement("polygon",{id:"Fill-8",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"Fill-17",d:"M18,10 C16.6195,10 15.5,11.119 15.5,12.5 C15.5,13.881 16.6195,15 18,15 C19.381,15 20.5,13.881 20.5,12.5 C20.5,11.119 19.381,10 18,10 Z M16,25 C16,25.552 16.448,26 17,26 L19,26 C19.552,26 20,25.552 20,25 L20,18 C20,17.448 19.552,17 19,17 L17,17 C16.448,17 16,17.448 16,18 L16,25 Z M18,30 C11.3725,30 6,24.6275 6,18 C6,11.3725 11.3725,6 18,6 C24.6275,6 30,11.3725 30,18 C30,24.6275 24.6275,30 18,30 Z",fill:a}))))}f.make=a}),null);
__d("MessengerInfoPanelButtonReact.bs",["ix","cx","Image.bs","React","asset","CurrentUser","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i={height:"32px",width:"32px"};function j(a){return b("React").createElement("svg",{viewBox:"0 0 64 64"},b("React").createElement("g",void 0,b("React").createElement("g",void 0,b("React").createElement("path",{style:{fill:a},d:"M32,10c-12.2,0-22,9.8-22,22s9.8,22,22,22s22-9.8,22-22S44.2,10,32,10z M32,19c1.6,0,3,1.4,3,3s-1.4,3-3,3 c-1.6,0-3-1.4-3-3S30.4,19,32,19z M36,45h-2h-4h-2v-1h2V29h-2v-1h2h4v1v15h2V45z"}))))}function k(a){var c={fill:a};return b("React").createElement("svg",{style:{stroke:a},viewBox:"0 0 64 64"},b("React").createElement("g",void 0,b("React").createElement("polygon",{style:c,points:"34,44 34,29 34,28 30,28 28,28 28,29 30,29 30,44 28,44 28,45 30,45 34,45 36,45 36,44"}),b("React").createElement("circle",{style:c,cx:"32",cy:"22",r:"3"})),b("React").createElement("path",{style:{fill:"none",stroke:a,strokeMiterlimit:"10",strokeWidth:"2"},d:"M32,11c11.6,0,21,9.4,21,21s-9.4,21-21,21s-21-9.4-21-21S20.4,11,32,11z"}))}function a(a,c){var d=b("CurrentUser").isWorkUser();if(d)return b("React").createElement("div",{className:"_2phz"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,c?g("413962"):g("413953"),void 0,void 0,void 0,void 0,[])));else return b("React").createElement("div",{style:i},c?k(a):j(a))}f.svgWrapperStyle=i;f.selected=j;f.notSelected=k;f.make=a}),null);
__d("MessengerPresenceStatusReact.bs",["fbt","React","ReasonReact.bs","bs_js_primitive"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerPresenceStatusReact");function i(a,c,d,e,f){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){var f,h=0;c&&e!==void 0?f=g._("Active on {platform}",[g._param("platform",e)]):h=1;h===1&&(f=d!==void 0?g._("Active {time} ago",[g._param("time",d)]):null);h={};a!==void 0&&(h.className=b("bs_js_primitive").valFromOption(a));return b("React").createElement("div",h,f)},h[9],h[10],h[11],h[12]]}a=b("ReasonReact.bs").wrapReasonForJs(h,function(a){return i(b("bs_js_primitive").nullable_to_opt(a.className),a.isUserActive,b("bs_js_primitive").nullable_to_opt(a.lastActive),b("bs_js_primitive").nullable_to_opt(a.platform),[])});f.component=h;f.make=i;f.jsComponent=a}),null);
__d("MessengerRTCUnavailableDialog.react",["fbt","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogs.bs","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("MessengerDialogBodyReact.bs").jsComponent,j=b("MessengerDialogHeaderReact.re").component;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.$1},b("React").createElement(j,null,g._("Can't make call")),b("React").createElement(i,null,this.$2()),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",label:g._("OK"),type:"primary"})))};a.prototype.$2=function(){return b("React").createElement("div",null,g._("{name} is not available at the moment.",[g._param("name",this.props.name)]))};a.prototype.$1=function(a){a||b("MessengerDialogs.bs").removeDialog()};function a(){h.apply(this,arguments)}a.propTypes={name:c.string.isRequired};e.exports=a}),null);
__d("MessengerRTCGroupCallUnsupportedBrowserDialog.react",["fbt","CurrentUser","Link.react","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","React","XWorkplaceMarketingDefaultController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerDialogBodyReact.bs").jsComponent,i=b("MessengerDialogHeaderReact.re").component;a=function(a){var c=a.browserName,d=a.hasVideo,e=a.onUnmount;a=a.hideDialog;return b("React").createElement(b("MessengerDialog.react"),{onToggle:e},b("React").createElement(i,null,j(d)),b("React").createElement(h,null,k(c,d,a)),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{label:g._("OK"),onClick:a,type:"primary"})))};function j(a){return a?g._("Switch browsers to start group video chats"):g._("Switch browsers to make group calls")}function k(a,c,d){return b("CurrentUser").isWorkUser()?g._({"video call":"Unfortunately, our Workplace Chat group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group video call, open in {link to install chrome} or the {link to install Workplace chat desktop} app.","call":"Unfortunately, our Workplace Chat group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group call, open in {link to install chrome} or the {link to install Workplace chat desktop} app."},[g._param("browser name, i.e. Internet Explorer or Safari",a),g._enum(c?"video call":"call",{"video call":"video call",call:"call"}),g._param("link to install chrome",l(d)),g._param("link to install Workplace chat desktop",m(d))]):g._({"video call":"Unfortunately, our group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group video call, open in {link to install chrome}.","call":"Unfortunately, our group calling feature doesn't support {browser name, i.e. Internet Explorer or Safari} yet. To make a group call, open in {link to install chrome}."},[g._param("browser name, i.e. Internet Explorer or Safari",a),g._enum(c?"video call":"call",{"video call":"video call",call:"call"}),g._param("link to install chrome",l(d))])}function l(a){return b("React").createElement(b("Link.react"),{onClick:a,href:"https://www.google.com/chrome/index.html",target:"_blank"},"Google Chrome")}function m(a){var c=b("XWorkplaceMarketingDefaultController").getURIBuilder().setString("path","chat-app").setString("ref","rtc_unsupported_dialog").getURI();return b("React").createElement(b("Link.react"),{onClick:a,href:c,target:"_blank"},"Workplace Chat")}e.exports=a}),null);
__d("MessengerRTCUnsupportedBrowserDialog.react",["cx","fbt","CurrentUser","FBRTCConfig","Link.react","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","React","XWorkplaceMarketingDefaultController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("MessengerDialogBodyReact.bs").jsComponent,k=b("MessengerDialogHeaderReact.re").component;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props,c=a.browserName,d=a.hasVideo,e=a.onUnmount;a=a.hideDialog;return b("React").createElement(b("MessengerDialog.react"),{onToggle:e},b("React").createElement(k,null,h._("Switch browsers to make calls")),b("React").createElement(j,null,this.$1(c,d)),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{className:"_30vt",label:h._("Learn More"),onClick:a,type:"secondary",href:b("FBRTCConfig").unsupportedBrowserUrl(),target:"_blank"}),b("React").createElement(b("MessengerDialogButton.react"),{label:h._("OK"),onClick:a,type:"primary"})))};a.prototype.$1=function(a,c){if(b("CurrentUser").isWorkUser())return h._({"video calling":"Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our video calling feature yet. To make a call, open Workplace Chat in {link to install chrome}, {link to install firefox} or the {link to install Workplace chat desktop} app.","calling":"Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our calling feature yet. To make a call, open Workplace Chat in {link to install chrome}, {link to install firefox} or the {link to install Workplace chat desktop} app."},[h._param("browser name, i.e. Internet Explorer or Safari",a),h._enum(c?"video calling":"calling",{"video calling":"video calling",calling:"calling"}),h._param("link to install chrome",this.$2()),h._param("link to install firefox",this.$3()),h._param("link to install Workplace chat desktop",this.$4())]);else return h._({"video calling":"Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our video calling feature yet. To make a call, open Messenger in {link to install chrome} or {link to install firefox}.","calling":"Unfortunately, {browser name, i.e. Internet Explorer or Safari} doesn't support our calling feature yet. To make a call, open Messenger in {link to install chrome} or {link to install firefox}."},[h._param("browser name, i.e. Internet Explorer or Safari",a),h._enum(c?"video calling":"calling",{"video calling":"video calling",calling:"calling"}),h._param("link to install chrome",this.$2()),h._param("link to install firefox",this.$3())])};a.prototype.$2=function(){return b("React").createElement(b("Link.react"),{onClick:this.props.hideDialog,href:"https://www.google.com/chrome/index.html",target:"_blank"},"Google Chrome")};a.prototype.$3=function(){return b("React").createElement(b("Link.react"),{onClick:this.props.hideDialog,href:"https://www.mozilla.org/en-US/firefox/new/",target:"_blank"},"Mozilla Firefox")};a.prototype.$4=function(){var a=b("XWorkplaceMarketingDefaultController").getURIBuilder().setString("path","chat-app").setString("ref","rtc_unsupported_dialog").getURI();return b("React").createElement(b("Link.react"),{onClick:this.props.hideDialog,href:a,target:"_blank"},"Workplace Chat")};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("MessengerRTCUnsupportedBrowserDialogController",["fbt","MessengerDialogs.bs","MessengerRTCGroupCallUnsupportedBrowserDialog.react","MessengerRTCUnsupportedBrowserDialog.react","React","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={_dialog:null,_handleToggle:function(a){a||b("MessengerDialogs.bs").removeAllDialogs()},hideDialog:function(){b("MessengerDialogs.bs").removeAllDialogs()},_browserName:function(){if(b("UserAgent").isBrowser("Firefox"))return g._("Firefox");else if(b("UserAgent").isBrowser("IE"))return g._("Internet Explorer");else if(b("UserAgent").isBrowser("Safari"))return g._("Safari");else return g._("your browser")},render:function(a){var c=a.hasVideo,d=a.isGroupCall;b("MessengerDialogs.bs").showDialog(function(){return d?b("React").createElement(b("MessengerRTCGroupCallUnsupportedBrowserDialog.react"),{browserName:this._browserName(),hasVideo:c,hideDialog:this.hideDialog,onUnmount:this._handleToggle}):b("React").createElement(b("MessengerRTCUnsupportedBrowserDialog.react"),{browserName:this._browserName(),hasVideo:c,hideDialog:this.hideDialog,onUnmount:this._handleToggle})}.bind(this))},dismiss:b("MessengerDialogs.bs").removeAllDialogs};e.exports=a}),null);
__d("MessengerRTCInvokeHandler",["invariant","MercuryIDs","MercuryThreadIDMap","MessengerDialogs.bs","MessengerRTCUnavailableDialog.react","MNRTCCallabilityStore","React","RTCCallState","FBRTCLogger","RTWebLoggingCallType","RTWebLoggingSurface","RTWebUserActionLogger","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MercuryThreadIDMap").get(),i=b("FBRTCLogger").Trigger;a={isCallable:function(a,c){var d;if(b("MercuryIDs").isGroupChat(a))d=!0;else{a=b("MercuryIDs").getUserIDFromThreadID(a);d=a!=null?b("MNRTCCallabilityStore").isCallable(a,c):!1}return d},handleStartCall:function(a,c,e,f,k,l,m){__p&&__p();m?b("MercuryIDs").isGroupChat(a)?(b("RTWebUserActionLogger").logPreCallClick({conferenceName:c.thread_fbid!=null?"GROUP:"+c.thread_fbid:null,surface:b("RTWebLoggingSurface").MESSENGER_HEADER,component:b("RTWebUserActionLogger").getAudioVideoComponent(!e),callType:b("RTWebLoggingCallType").MW,mediaType:b("RTWebUserActionLogger").getMediaType(!e)}),d(["FBRTCCore","FBRTCSupport","MessengerRTCUnsupportedBrowserDialogController","MessengerRTCGroupCallParticipantsPickerDialogController"],function(d,g,l,m){__p&&__p();var n=c.rtc_call_data,o=b("MercuryIDs").isGroupChat(a)&&k.size===1;if(n&&(n.call_state!==b("RTCCallState").NO_ONGOING_CALL&&n.server_info_data||o)){d.startGroupCall({conferenceName:"GROUP:"+b("nullthrows")(c.thread_fbid),hasVideo:e,serverInfoData:n.server_info_data,trigger:o?e?i.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:n.call_state!==b("RTCCallState").AUDIO_GROUP_CALL?e?i.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:e?i.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON});return}if(!g.isGroupCallWebtrcSupported()){j(a,c,e);l.render({hasVideo:e,isGroupCall:!0});return}var p=function(a){m.render({participants:k.filter(function(a){a=a.fbid;return a!==f}),thread:c,viewerID:f,trigger:e?i.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:i.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON,conferenceName:"GROUP:"+a,hasVideo:e})};b("MercuryIDs").isLocalThread(a)?h.getServerIDFromClientID(a,function(a){return p(a)}):p(b("MercuryIDs").getThreadFBIDFromThreadID(a))})):d(["FBRTCCore","FBRTCSupport","MessengerRTCUnsupportedBrowserDialogController"],function(d,f,h){if(!f.isWebrtcSupported()){j(a,c,e);h.render({hasVideo:e,isGroupCall:!1});return}f=b("MercuryIDs").getUserIDFromThreadID(a);f!=null||g(0,2744);h=e?"messenger_dot_com_video_call":"messenger_dot_com_audio_call";d.startOutgoingCall(f,h,!e)}):(j(a,c,e),b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("MessengerRTCUnavailableDialog.react"),{name:l})}))}};function j(a,c,d){b("RTWebUserActionLogger").logError({callType:b("MercuryIDs").isGroupChat(a)?b("RTWebLoggingCallType").MW:b("RTWebLoggingCallType").P2P,conferenceName:c.thread_fbid!=null?"GROUP:"+c.thread_fbid:null,mediaType:b("RTWebUserActionLogger").getMediaType(!d),errorDomain:"unsupported browser"})}e.exports=a}),null);
__d("MessengerVideoAvailableIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").createElement("svg",{height:"32px",width:"32px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"camcorder",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("polygon",{id:"Fill-8",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"original",d:"M20,27 L9,27 C6.791,27 5,25.209 5,23 L5,13 C5,10.791 6.791,9 9,9 L20,9 C22.209,9 24,10.791 24,13 L24,23 C24,25.209 22.209,27 20,27 M30.5525,23.3995 L26.829,21.536 C26.321,21.282 26,20.762 26,20.193 L26,15.808 C26,15.2395 26.321,14.719 26.829,14.465 L30.5525,12.6015 C31.218,12.269 32,12.753 32,13.497 L32,22.504 C32,23.2485 31.218,23.732 30.5525,23.3995",fill:a})))}f.make=a}),null);
__d("MessengerVideoUnavailableIconSVGM4React.bs",["React"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("React").createElement("svg",{height:"32px",width:"32px",viewBox:"0 0 36 36"},b("React").createElement("g",{id:"camcorder-cross",fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},b("React").createElement("polygon",{id:"Fill-1",points:"0 36 36 36 36 0 0 0"}),b("React").createElement("path",{id:"original",d:"M6.52219159,23.73575 C6.00847773,24.24975 5.008035,24.00175 5.008035,23.01175 L5.008035,13.00725 C5.008035,10.79725 6.79803794,9.00525 9.00680761,9.00525 L19.1191748,9.00575 C19.9062364,9.00575 20.3005168,9.95775 19.7438269,10.51425 L6.52219159,23.73575 Z M27.1966755,8.70725 L24.589128,11.31625 C24.2143368,11.69125 24.0039539,12.19925 24.0039539,12.72875 L24.0019551,23.01175 C24.0019551,25.22175 22.2149504,27.00675 20.0061808,27.00675 L9.73590149,27.00675 C9.20569683,27.00675 8.69698019,27.21725 8.32218896,27.59225 L5.20642449,30.70925 C4.81614189,31.10025 4.18249484,31.10025 3.79271195,30.70925 C3.40242935,30.31875 3.40242935,29.68575 3.79271195,29.29525 L25.782963,7.29325 C26.1727459,6.90225 26.8063929,6.90225 27.1966755,7.29325 C27.5869581,7.68375 27.5869581,8.31725 27.1966755,8.70725 Z M30.5533058,23.41125 L26.8308793,21.54725 C26.3226624,21.29275 26.0018411,20.77225 26.0018411,20.20375 L26.0018411,15.81625 C26.0018411,15.24725 26.3226624,14.72725 26.8308793,14.47275 L30.5533058,12.60875 C31.2179356,12.27575 32,12.75975 32,13.50425 L32,22.51575 C32,23.25975 31.2179356,23.74425 30.5533058,23.41125 Z",fill:a})))}f.make=a}),null);
__d("MessengerRTCVideoCallButtonReact.bs",["ix","cx","fbt","Image.bs","React","asset","CurrentUser","ReasonReact.bs","RTWebUserActionLogger","MessengerDotComAndInboxM4Check.bs","MessengerVideoAvailableIconSVGM4React.bs","MessengerVideoUnavailableIconSVGM4React.bs","VideoCallWebDriverIDs","RTWebLoggingComponent","RTWebLoggingSurface"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={height:"32px",width:"32px"},k=b("ReasonReact.bs").statelessComponent("MessengerRTCVideoCallButtonReact");function l(a,c,d,e){__p&&__p();return[k[0],k[1],k[2],k[3],function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(d),component:b("RTWebLoggingComponent").AUDIO_CALL,surface:b("RTWebLoggingSurface").MESSENGER_HEADER});return 0},k[5],k[6],k[7],function(){__p&&__p();var e=d?i._("Start a group video chat"):i._("Start a video chat"),f=b("React").createElement("div",{"aria-label":e,className:"_2phz"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,g("470488"),void 0,e,void 0,void 0,[]))),h;if(b("MessengerDotComAndInboxM4Check.bs").yes)h=b("React").createElement("div",{"aria-label":e,style:j,title:e},c?b("MessengerVideoAvailableIconSVGM4React.bs").make(a):b("MessengerVideoUnavailableIconSVGM4React.bs").make(a));else{var k=c?a:"#888888";k={clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:k,strokeMiterlimit:"10",strokeWidth:"2"};h=b("React").createElement("div",{"aria-label":e,style:j,title:e},b("React").createElement("svg",{style:k,viewBox:"0 0 64 64"},b("React").createElement("title",void 0,e),b("React").createElement("g",void 0,b("React").createElement("g",void 0,b("React").createElement("path",{d:"M47,27.8v7.5l9,4.5V23.2L47,27.8z M37.2,17H13.8C10.6,17,8,19.6,8,22.8v17.4c0,3.2,2.6,5.8,5.8,5.8h23.3\nc3.2,0,5.8-2.6,5.8-5.8V22.8C43,19.6,40.4,17,37.2,17z"})))))}k=b("VideoCallWebDriverIDs").START_VIDEO_CALL;e=b("CurrentUser").isWorkUser();return b("React").cloneElement(e?f:h,{"data-testid":k})},k[9],k[10],k[11],k[12]]}a=b("ReasonReact.bs").wrapReasonForJs(k,function(a){return l(a.customColor,a.isAvailable,a.isGroupChat,[])});f.videoCallWebDriverIDs=b("VideoCallWebDriverIDs");f.rtWebLoggingComponent=b("RTWebLoggingComponent");f.rtWebLoggingSurface=b("RTWebLoggingSurface");f.svgWrapperStyle=j;f.component=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerRTCVoiceCallButtonReact.bs",["ix","cx","fbt","Image.bs","React","asset","CurrentUser","ReasonReact.bs","RTWebUserActionLogger","MessengerDotComAndInboxM4Check.bs","MessengerAudioAvailableIconSVGM4React.bs","MessengerAudioUnavailableIconSVGM4React.bs","VideoCallWebDriverIDs","RTWebLoggingComponent","RTWebLoggingSurface"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={height:"32px",width:"32px"},k=b("ReasonReact.bs").statelessComponent("MessengerRTCVoiceCallButtonReact");function l(a,c,d,e){__p&&__p();return[k[0],k[1],k[2],k[3],function(){b("RTWebUserActionLogger").logImpression({callType:b("RTWebUserActionLogger").getCallType(d),component:b("RTWebLoggingComponent").VIDEO_CALL,surface:b("RTWebLoggingSurface").MESSENGER_HEADER});return 0},k[5],k[6],k[7],function(){__p&&__p();var e=d?i._("Start a group call"):i._("Start a voice call"),f=b("React").createElement("div",{"aria-label":e,className:"_2phz"},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make(void 0,void 0,void 0,void 0,g("470545"),void 0,e,void 0,void 0,[]))),h;if(b("MessengerDotComAndInboxM4Check.bs").yes)h=b("React").createElement("div",{"aria-label":e,style:j,title:e},c?b("MessengerAudioAvailableIconSVGM4React.bs").make(a):b("MessengerAudioUnavailableIconSVGM4React.bs").make(a));else{var k=c?a:"#888888";k={clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:k,strokeMiterlimit:"10",strokeWidth:"2"};h=b("React").createElement("div",{"aria-label":e,style:j,title:e},b("React").createElement("svg",{style:k,viewBox:"0 0 64 64"},b("React").createElement("title",void 0,e),b("React").createElement("path",{d:"M48.3,50.5c-7.7,6.5-24.2-10-24.5-10.3C23.5,39.9,7,23.4,13.5,15.7c4.8-5.7,6.3-3.4,7-2.7\nc0.6,0.5,5.7,7.8,6,9.2c0.3,1.4-2.4,4.6-2.2,5.9c0.2,1.2,3.6,5,5.1,6.5c1.5,1.5,5.3,4.9,6.5,5.1c1.2,0.2,4.4-2.5,5.9-2.2\nc1.4,0.3,8.7,5.4,9.2,6C51.6,44.2,54,45.7,48.3,50.5z"})))}k=b("VideoCallWebDriverIDs").START_VOICE_CALL;e=b("CurrentUser").isWorkUser();return b("React").cloneElement(e?f:h,{"data-testid":k})},k[9],k[10],k[11],k[12]]}a=b("ReasonReact.bs").wrapReasonForJs(k,function(a){return l(a.customColor,a.isAvailable,a.isGroupChat,[])});f.videoCallWebDriverIDs=b("VideoCallWebDriverIDs");f.rtWebLoggingComponent=b("RTWebLoggingComponent");f.rtWebLoggingSurface=b("RTWebLoggingSurface");f.svgWrapperStyle=j;f.component=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerRTCCallButton.react",["ImmutableObject","Link.react","MercuryIDs","MessengerRTCInvokeHandler","MessengerRTCVideoCallButtonReact.bs","MessengerRTCVoiceCallButtonReact.bs","MNRTCCallabilityStore","React","StoreAndPropBasedStateMixin","immutable"],(function(a,b,c,d,e,f){"use strict";var g=b("MessengerRTCVideoCallButtonReact.bs").jsComponent,h=b("MessengerRTCVoiceCallButtonReact.bs").jsComponent;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerRTCCallButton",mixins:[b("StoreAndPropBasedStateMixin")(b("MNRTCCallabilityStore"))],statics:{calculateState:function(a){return{isCallable:b("MessengerRTCInvokeHandler").isCallable(a.threadID,a.thread)}}},propTypes:{className:a.string.isRequired,customColor:a.string.isRequired,isVideo:a.bool.isRequired,participants:a.instanceOf(b("immutable").Map).isRequired,thread:a.instanceOf(b("ImmutableObject")).isRequired,threadID:a.string.isRequired,viewer:a.string.isRequired,calleeName:a.string.isRequired},render:function(){var a={customColor:this.props.customColor,isAvailable:this.state.isCallable,isGroupChat:b("MercuryIDs").isGroupChat(this.props.threadID)};return b("React").createElement(b("Link.react"),{className:this.props.className,onClick:this._handleStartCall},this.props.isVideo?b("React").createElement(g,a):b("React").createElement(h,a))},_handleStartCall:function(a){a.preventDefault(),b("MessengerRTCInvokeHandler").handleStartCall(this.props.threadID,this.props.thread,this.props.isVideo,this.props.viewer,this.props.participants,this.props.calleeName,this.state.isCallable)}});e.exports=c}),null);
__d("MessengerRTCCallButtonReact.bs",["ReasonReact.bs","MessengerRTCCallButton.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j){return b("ReasonReact.bs").wrapJsForReason(b("MessengerRTCCallButton.react"),{className:a,customColor:c,isVideo:d,participants:e,thread:f,threadID:g,viewer:h,calleeName:i},j)}f.make=a}),null);
__d("MontageThreadViewContainer.react",["CurrentUser","JSResource","React","gkx","immutable","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("lazyLoadComponent")(b("JSResource")("MessengerStateMontageThreadView.react").__setRef("MontageThreadViewContainer.react")),i=b("lazyLoadComponent")(b("JSResource")("MontageThreadViewContainerImpl.react").__setRef("MontageThreadViewContainer.react"));g=babelHelpers.inherits(a,b("React").PureComponent);g&&g.prototype;a.prototype.render=function(){__p&&__p();if(b("gkx")("678586")&&!this.props.shouldUseRelay){var a=b("CurrentUser").getID();if(this.props.montageData!=null&&this.props.participants!=null){var c=this.props.montageData,d=this.props.participants;d=Array.from(d.values()).map(function(a){return a.fbid!=null?a.fbid:""}).filter(function(b){return b!==a});var e=d.length===0;e=e?c[a]:c[d[0]];return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(h,{montageData:e?e:[]}))}return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(h,{montageData:[]}))}return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(i,this.props))};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("MontageThreadViewContainerReact.bs",["ReasonReact.bs","bs_js_null_undefined","MontageThreadViewContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){return b("ReasonReact.bs").wrapJsForReason(b("MontageThreadViewContainer.react"),{threadID:a,montageData:c,onResize:b("bs_js_null_undefined").fromOption(f),participants:d,shouldUseRelay:e},g)}f.make=a}),null);
__d("WorkChatDoNotDisturbStatusReact.bs",["ReasonReact.bs","WorkChatDoNotDisturbStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){var g=b("WorkChatDoNotDisturbStatus").component;if(g==null){var h=b("ReasonReact.bs").statelessComponent("WorkChatDoNotDisturbStatusReact.re");return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return null},h[9],h[10],h[11],h[12]]}else return b("ReasonReact.bs").wrapJsForReason(g,{className:a,thread:c,isDoNotDisturb:d,description:e},f)}f.make=a}),null);
__d("messengerCalculateTruncationState",["Style"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){__p&&__p();if(!e||!c)return;f=f?f.offsetWidth:0;e=Math.ceil(.5*(a.offsetWidth+e.offsetWidth));var g=a.offsetWidth-d.offsetWidth-12;if(e<=g)b("Style").set(a,"text-align","center"),b("Style").set(c,"width","auto"),b("Style").set(c,"margin-left","auto");else{document.body.dir==="rtl"?b("Style").set(a,"text-align","right"):(b("Style").set(a,"text-align","left"),b("Style").set(c,"margin-left",f+"px"));e=Math.max(a.offsetWidth-f-d.offsetWidth-11,0);b("Style").set(c,"width",e+"px")}}e.exports=a}),null);
__d("MessengerDetailViewHeaderReact.bs",["cx","fbt","FBID.bs","bs_curry","Event","React","gkx","Bootload.bs","ReactDOM","debounce","LinkReact.bs","Bootloader","bs_belt_Option","CurrentUser","ReasonReact.bs","FBRTCSupport","bs_js_primitive","MercuryConfig","MessengerDomIDs.bs","bs_js_null_undefined","MercuryThreadInfo","ArchiveWarningReact.bs","MessageRequestUtils","MessagingThreadType","WorkForeignEntityInfo.bs","MercuryParticipantTypes","MercuryThreadTitleReact.bs","MessengerLocalTimeReact.bs","MessengerCustomColorUtils.bs","MessengerJoinableModeType","MessengerThreadImageReact.bs","MessengerWebDriverTestIDs","MessengerInfoIconSVGM4React.bs","MessengerRTCCallButtonReact.bs","MessengerPresenceStatusReact.bs","MessengerInfoPanelButtonReact.bs","MessengerDotComAndInboxM4Check.bs","MontageThreadViewContainerReact.bs","WorkChatDoNotDisturbStatusReact.bs","messengerCalculateTruncationState","MessengerForeignUserCompanyNameReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableMessengerUserControlsButtonReact.bs"],a,"MessengerDetailViewHeaderReact.bs");return 0}c=[a];var i=b("Bootload.bs").Create(c);function j(a){var c=b("bs_js_null_undefined").fromOption(a[0][0]),d=b("bs_js_null_undefined").fromOption(a[1][0]),e=b("bs_js_null_undefined").fromOption(a[2][0]),f=b("bs_js_null_undefined").fromOption(a[3][0]);a=b("bs_js_null_undefined").fromOption(a[4][0]);return b("messengerCalculateTruncationState")(c,d,e,f,a)}function k(a,c){c[1][3][0]=a==null?void 0:b("bs_js_primitive").some(b("ReactDOM").findDOMNode(a));return 0}function l(a,c){c[1][1][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function m(a,c){c[1][0][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function n(a,c){c[1][2][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function o(a,c){c[1][4][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function p(a,c,d,e){if(a.has_montage&&b("MercuryConfig").MontageThreadViewer&&!b("gkx")("686397"))return b("React").createElement("div",{ref:b("bs_curry")._1(e[0],o),className:"_1cwz"},b("ReasonReact.bs").element(void 0,void 0,b("MontageThreadViewContainerReact.bs").make(a.thread_id,c,d,!1,void 0,[])));else return null}function q(a,c,d,e){__p&&__p();if(b("CurrentUser").isWorkUser()||a===void 0)return null;else{a=b("bs_js_primitive").valFromOption(a);var f=a.contact.user_type===b("MercuryParticipantTypes").PAGE;if(f){f=e[1][5][0];if(f!==void 0){e=a.contact.is_messenger_blocked;a=a.contact.fbid;f=b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._7(f[9],"_3xb9 _30yy",b("MercuryThreadInfo").isMuted(c),e,a,c.thread_id,d,[]))}else f=null;return b("React").createElement("li",void 0,f)}else return null}}function r(a,c){c=c.filter(function(b,c,d){if(b==null)return!1;else return b.fbid!==a});var d=c.count();c=c.first();if(d!==1||c==null)return null;else return b("ReasonReact.bs").element(void 0,void 0,b("MessengerLocalTimeReact.bs").make("_5eu7",b("bs_js_primitive").nullable_to_opt(c.timezone),[]))}function s(a,c){__p&&__p();var d=!b("FBRTCSupport").isMobileDevice();a=a!==void 0?b("bs_js_primitive").valFromOption(a).contact.user_type===b("MercuryParticipantTypes").PAGE:!1;var e=c!==void 0?b("bs_js_primitive").valFromOption(c).joinable_mode===b("MessengerJoinableModeType").JOINABLE:!1;if(c!==void 0){var f=b("bs_js_primitive").valFromOption(c);f=(f.participants.length>1||f.thread_type===b("MessagingThreadType").GROUP)&&b("MercuryThreadInfo").canReply(f)&&!b("MessageRequestUtils").isMessageRequest(f)}else f=!1;c=c!==void 0?b("bs_js_primitive").valFromOption(c).thread_type===b("MessagingThreadType").MARKETPLACE:!1;if(d&&!a&&!e&&f)return!c;else return!1}var t=b("MessengerDotComAndInboxM4Check.bs").yes?"_17w2 _6ybr":"_17w2",u=b("MessengerDotComAndInboxM4Check.bs").yes?"_5743 _6y4y":"_5743",v=b("MessengerDotComAndInboxM4Check.bs").yes?"_fl2 _6ymr":"_fl2",w=b("ReasonReact.bs").reducerComponent("MessengerDetailViewHeaderReact");function x(a,c,d,e,f,g,o,x,y){__p&&__p();var z=function(c){if(s(a,g)&&g!==void 0){var d=b("bs_js_primitive").valFromOption(g),e=d.thread_id;return b("React").createElement("li",void 0,b("ReasonReact.bs").element(void 0,void 0,b("MessengerRTCCallButtonReact.bs").make("_30yy",b("MessengerCustomColorUtils.bs").customColorOrBlue(d),!1,f,d,e,c,a!==void 0?b("bs_js_primitive").valFromOption(a).contact.name:"",[])))}else return null},A=function(c){__p&&__p();if(s(a,g)&&g!==void 0){var d=b("bs_js_primitive").valFromOption(g),e=d.thread_id;if(a!==void 0){var h=b("bs_js_primitive").valFromOption(a).isUserActive;h=h?"_3qfl":""}else h="";return b("React").createElement("li",void 0,b("ReasonReact.bs").element(void 0,void 0,b("MessengerRTCCallButtonReact.bs").make("_30yy",b("MessengerCustomColorUtils.bs").customColorOrBlue(d),!0,f,d,e,c,a!==void 0?b("bs_js_primitive").valFromOption(a).contact.name:"",[])),b("React").createElement("div",{className:h}))}else return null};if(a!==void 0){y=b("bs_js_primitive").valFromOption(a).availabilityStatusData;y=y==null?[!1,""]:[y.isDoNotDisturb,y.description]}else y=[!1,""];var B=y[1],C=y[0],D=a!==void 0?!b("WorkForeignEntityInfo.bs").isCoworker(b("bs_js_primitive").valFromOption(a).contact):!1,E=function(){var a=b("gkx")("678573");if(a)return b("ReasonReact.bs").element(void 0,void 0,b("WorkChatDoNotDisturbStatusReact.bs").make("_6f6k",b("bs_js_null_undefined").fromOption(g),C,B,[]));else return null},F=function(){if(a!==void 0){var c=b("bs_js_primitive").valFromOption(a);return[!0,b("ReasonReact.bs").element(void 0,void 0,b("MessengerPresenceStatusReact.bs").make("_2v6o",c.isUserActive,b("bs_js_primitive").nullable_to_opt(c.lastActive),b("bs_js_primitive").nullable_to_opt(c.platform),[]))]}else return[!1,null]},G=function(){if(!b("CurrentUser").isWorkUser()||!D||a===void 0)return[!1,null];else{var c=b("bs_js_primitive").valFromOption(a),d=c.contact.company_name;if(d==null)return[!1,null];else return[!0,b("ReasonReact.bs").element(void 0,void 0,b("MessengerForeignUserCompanyNameReact.bs").make("_6krh",b("bs_js_primitive").nullable_to_opt(c.contact.company_name),[]))]}};return[w[0],w[1],w[2],w[3],function(a){__p&&__p();if(!b("MessengerDotComAndInboxM4Check.bs").yes){var c=b("Event").listen(window,"resize",b("debounce")(function(){return j(a[1])},20));b("bs_curry")._1(a[4],function(){return c.remove()})}return b("bs_curry")._1(i[0],function(b){var c=a;b=b;c[1][5][0]=b;return 0})},function(a){if(b("MessengerDotComAndInboxM4Check.bs").yes)return 0;else return j(a[1][1])},w[6],w[7],function(i){if(o!==void 0&&g!==void 0){var j=b("bs_js_primitive").valFromOption(g),s=b("bs_js_primitive").valFromOption(o),w=!f.isEmpty()&&f.every(function(b,a,c){if(b==null)return!1;else return b.employee}),B=h._("Conversation information"),H=F(0),I=H[0],J=G(0),K=E(0),L=b("MessengerCustomColorUtils.bs").customColorOrBlue(j);return b("React").createElement("div",{ref:b("bs_curry")._1(i[0],m),className:"_673w"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6ynl":"")+(!J[0]&&(!I||C)?" _1_fz":"")},p(j,x,f,i),b("React").createElement("div",{key:"threadTitle",ref:b("bs_curry")._1(i[0],l),className:u},b("MessengerDotComAndInboxM4Check.bs").yes?b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadImageReact.bs").make("_6ynm",void 0,void 0,void 0,40,f,j,s,[])):null,b("React").createElement("div",{className:b("MessengerDotComAndInboxM4Check.bs").yes?"_6ynn":""},b("React").createElement("h2",{className:t,id:b("MessengerDomIDs.bs").ids.THREAD_TITLE},K,b("ReasonReact.bs").element(void 0,b("bs_curry")._1(i[0],k),b("MercuryThreadTitleReact.bs").make("_3oh-",b("bs_belt_Option").getWithDefault(d,0),j,s,void 0,void 0,void 0,void 0,[]))),C||!I||b("CurrentUser").isWorkUser()&&D?null:H[1],r(s,f),J[1])),b("React").createElement("ul",{key:"buttonsContainer",ref:b("bs_curry")._1(i[0],n),className:v},b("React").createElement("li",void 0,b("ReasonReact.bs").element(void 0,void 0,b("ArchiveWarningReact.bs").make(w,[]))),q(a,j,s,i),z(s),A(s),b("React").createElement("li",void 0,b("React").cloneElement(b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(!c,void 0,B,"_30yy",void 0,void 0,void 0,void 0,void 0,void 0,void 0,e,void 0,void 0,"button",void 0,void 0,void 0,void 0,B,[])),{"data-testid":b("MessengerWebDriverTestIDs").INFO_PANEL_BUTTON},b("MessengerDotComAndInboxM4Check.bs").yes?c?b("React").createElement("div",{className:"_6yms"},b("MessengerInfoIconSVGM4React.bs").make(L)):b("React").createElement("div",{className:"_6yms"},b("React").createElement("div",{className:"_6y4z",style:{backgroundColor:b("MessengerCustomColorUtils.bs").customColorOrBlue(j)}}),b("MessengerInfoIconSVGM4React.bs").make(L)):b("MessengerInfoPanelButtonReact.bs").make(L,c)),b("React").createElement("div",{"aria-owns":b("MessengerDomIDs.bs").ids.THREAD_INFO_PANEL}))))}else return null},function(){return[[void 0],[void 0],[void 0],[void 0],[void 0],[void 0]]},w[10],function(a,b){return 0},w[12]]}d=b("ReasonReact.bs").wrapReasonForJs(w,function(a){return x(b("bs_js_primitive").nullable_to_opt(a.contactData),a.infoPanelCollapsed,b("bs_js_primitive").nullable_to_opt(a.maxTitle),a.onInfoPanelToggle,a.participants,b("bs_js_primitive").nullable_to_opt(a.thread),b("FBID.bs").ofString(a.viewer),a.montageData,[])});f.BootloadableMessengerUserControlsButtonReact=c;f.LoadableMessengerUserControlsButtonReact=i;f.calculateTruncationState=j;f.findMercuryTitle=k;f.findTitle=l;f.findRoot=m;f.findButtons=n;f.findMontage=o;f.renderMontageThread=p;f.renderUserControls=q;f.renderLocalTime=r;f.shouldShowCallButton=s;f.titleElemClasses=t;f.titleClasses=u;f.buttonsContainerClasses=v;f.component=w;f.make=x;f.jsComponent=d}),null);
__d("MessengerFlexScrollableAreaReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerFlexScrollableArea.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("MessengerFlexScrollableArea.react"),{onScroll:b("bs_js_null_undefined").fromOption(a),className:b("bs_js_null_undefined").fromOption(c),maxHeight:b("bs_js_null_undefined").fromOption(d)},e)}f.make=a}),null);
__d("MessengerGraphQLSearchTypeaheadReact.bs",["ReasonReact.bs","bs_js_null_undefined","MessengerGraphQLSearchTypeahead.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){return b("ReasonReact.bs").wrapJsForReason(b("MessengerGraphQLSearchTypeahead.react"),{className:a,enableMessageSearch:c,excludeGroups:d,excludePages:e,hasHoverState:f,hideClearButton:b("bs_js_null_undefined").fromOption(g),hideResults:b("bs_js_null_undefined").fromOption(h),isFocused:b("bs_js_null_undefined").fromOption(i),onBlur:j,onChange:k,onClear:l,onClearAndRefocus:b("bs_js_null_undefined").fromOption(m),onFocus:n,onScrollIntoView:o,onSelect:p,placeholder:q,queryString:b("bs_js_null_undefined").fromOption(r),shouldQueryInternalBot:s,shouldQueryVCEndpoint:t,typeaheadViewClassName:u,viewer:v},w)}f.make=a}),null);
__d("WorkplaceDotComMigrationUtils",["invariant","URI","isFacebookURI","isWorkplaceDotComURI"],(function(a,b,c,d,e,f,g){__p&&__p();var h="facebook.com",i="workplace.com";a={getFacebookURIFromWorkplaceURI:function(a){if(b("isFacebookURI")(a)&&!b("isWorkplaceDotComURI")(a))return a;var c=a.getDomain();c||g(0,11673);b("isWorkplaceDotComURI")(a)||g(0,13496);c=c.replace(new RegExp("workplace\\.com$"),h);c=c.replace(new RegExp("^my\\."),"workplace.");return new(b("URI"))(a).setDomain(c)},getWorkplaceURIFromFacebookURI:function(a){if(b("isWorkplaceDotComURI")(a))return a;b("isFacebookURI")(a)||g(0,13497);var c=a.getDomain();c||g(0,11673);c=c.replace(new RegExp("facebook\\.com$"),i);c=c.replace(new RegExp("^workplace\\."),"my.");return new(b("URI"))(a).setDomain(c)},chooseWorkplaceOrFacebookDomain:function(a){var c=b("URI").getRequestURI();return b("isWorkplaceDotComURI")(c)?this.getWorkplaceURIFromFacebookURI(a):this.getFacebookURIFromWorkplaceURI(a)}};e.exports=a}),null);
__d("MessengerSettingsDialogReact.bs",["cx","fbt","URI","bs_block","bs_curry","React","gkx","Bootload.bs","bs_caml_obj","LinkReact.bs","Bootloader","MercuryIDs","CurrentUser","ReasonReact.bs","EmojiActions","bs_js_primitive","EmojiStateStore","PresencePrivacy","MessengerDialogs.bs","MessengerDialogReact.bs","SubscriptionsHandler","MessengerParticipants.bs","MessengerSpinnerReact.bs","MessengerSettingsStore","MessengerSettingsActions","MessengerContactImageReact.bs","MessengerCheckboxInputReact.bs","MessengerChatOnOffToggleReact.bs","MessengerDesktopNotifications","WorkplaceDotComMigrationUtils","MessengerDotComAndInboxM4Check.bs","ChatEmojiSkinTonePreferencePickerReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableMessengerSettingsMessengerOnlyChangePhoneNumberRowReact.bs"],a,"MessengerSettingsDialogReact.bs");return 0}d=[a];var i=b("Bootload.bs").Create(d);function c(a){b("Bootloader").loadModules(["BootloadableMessengerSettingsMessageSettingsDialogReact.bs"],a,"MessengerSettingsDialogReact.bs");return 0}e=[c];var j=b("Bootload.bs").Create(e);g=b("CurrentUser").isWorkUser();a=g?b("WorkplaceDotComMigrationUtils").chooseWorkplaceOrFacebookDomain(new(b("URI"))("https://work.facebook.com/help/work/1859929074302172")):new(b("URI"))("https://www.facebook.com/help/448141485230424");c=b("MessengerDotComAndInboxM4Check.bs").yes?"_6ct7 _6y57":"_6ct7";g=b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,c,void 0,void 0,void 0,void 0,void 0,a.toString(),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"_blank",void 0,[h._("Learn more")]));var k=b("CurrentUser").isWorkUser(),l=k?h._("Your colleagues and contacts will see when you're active or that you were recently active. You'll appear as active or recently active unless you turn off the setting wherever you're using Workplace Chat or Workplace. You'll also see when your colleagues and contacts are active or that they were recently active. {learn more}",[h._param("learn more",g)]):h._("Your friends and contacts will see when you're active or that you were recently active. You'll appear as active or recently active unless you turn off the setting wherever you're using Messenger or Facebook. You'll also see when your friends and contacts are active or that they were recently active. {learn more}",[h._param("learn more",g)]);k=b("CurrentUser").isWorkUser();var m=k?h._("You'll still appear as active or recently active unless you turn off the setting wherever you're using Workplace Chat or Workplace. You won't see when your colleagues and contacts are active or that they were recently active from here. {learn more}",[h._param("learn more",g)]):h._("You'll still appear as active or recently active unless you turn off the setting wherever you're using Messenger or Facebook. You won't see when your friends and contacts are active or that they were recently active from here. {learn more}",[h._param("learn more",g)]),n=b("MessengerDotComAndInboxM4Check.bs").yes?"_6ct8 _6y58":"_6ct8",o=b("ReasonReact.bs").reducerComponent("MessengerSettingsDialogReact");function p(a,c){a=c[1][3];b("PresencePrivacy").setVisibility(a?b("PresencePrivacy").OFFLINE:b("PresencePrivacy").ONLINE);return 0}function q(a,c){var d=c[3];b("MessengerSettingsActions").changeDesktopNotifs(!c[1][5].desktopNotifsEnabled,function(){return b("bs_curry")._1(d,1)});return 0}function r(a){var c=a[1];if(c[0]){var d=b("CurrentUser").isWorkUser();return h._({"Workplace Chat":"You can allow Workplace Chat to send you desktop notifications in your browser preferences.","Messenger":"You can allow Messenger to send you desktop notifications from your browser preferences."},[h._enum(d?"Workplace Chat":"Messenger",{"Workplace Chat":"Workplace Chat",Messenger:"Messenger"})])}else return b("ReasonReact.bs").element(void 0,void 0,b("MessengerCheckboxInputReact.bs").make(c[5].desktopNotifsEnabled&&c[1],b("bs_curry")._1(a[0],q),h._("Desktop notifications enabled"),[]))}function s(a){if(b("MessengerDesktopNotifications").isSupported())return b("React").createElement("div",{className:"_374b"},b("React").createElement("div",{className:"_374c"},h._("Notifications")),b("React").createElement("div",{className:"_374d"},r(a)));else return null}function t(){if(b("CurrentUser").isWorkUser()||b("CurrentUser").isMessengerOnlyUser())return null;else return b("React").createElement("div",{className:"_374b"},b("React").createElement("div",{className:"_374c"},h._("Payments")),b("React").createElement("div",{className:"_374d"},b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,n,void 0,void 0,void 0,void 0,void 0,"https://secure.facebook.com/settings?tab=payments&ref=messengerdotcom_settings",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"_blank",void 0,[h._("Manage on Facebook")]))))}function u(){if(b("CurrentUser").isWorkUser()||b("CurrentUser").isMessengerOnlyUser())return null;else return b("React").createElement("div",{className:"_374b"},b("React").createElement("div",{className:"_374c"},h._("Blocking")),b("React").createElement("div",{className:"_374d"},b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,n,void 0,void 0,void 0,void 0,void 0,"https://www.facebook.com/settings?tab=blocking",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"_blank",void 0,[h._("Manage on Facebook")]))))}function v(a,c){c=c[1][2];if(c!==void 0&&a===c)return 0;else{b("EmojiActions").changeEmojiColor(a);return 0}}function w(a){var c=a[1][2];if(c!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("ChatEmojiSkinTonePreferencePickerReact.bs").make(c,b("bs_curry")._1(a[0],v),[]));else return b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,void 0,void 0,[]))}function x(a){a=a.target;b("MessengerSettingsActions").changeSettings({sound_enabled:a.checked});return 0}function y(a,c){return b("bs_curry")._1(a[3],b("bs_block").__(1,[c]))}function z(a){a=a[1][7];if(a!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._1(a[2],[]));else return null}function A(){b("MessengerDialogs.bs").removeDialog(void 0,0);return b("bs_curry")._1(j[0],function(a){return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._1(a[7],[]))})})}function B(){var a=!b("CurrentUser").isWorkUser()&&b("gkx")("678631");if(a)return b("React").createElement("div",{className:"_374b"},b("React").createElement("div",{className:"_374c"},h._("Message settings")),b("React").createElement("div",{className:"_374d"},b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,n,void 0,void 0,void 0,void 0,void 0,void 0,void 0,A,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[h._("Change")]))));else return null}function C(a,c){__p&&__p();return[o[0],o[1],o[2],o[3],function(c){__p&&__p();var d=new(b("SubscriptionsHandler"))();d.addSubscriptions(b("PresencePrivacy").subscribe("privacy-changed",function(){return b("bs_curry")._1(c[3],0)}),b("PresencePrivacy").subscribe("privacy-user-presence-changed",function(){return b("bs_curry")._1(c[3],0)}),b("MessengerSettingsStore").addListener("change",function(){return b("bs_curry")._1(c[3],0)}),b("EmojiStateStore").addListener(function(){return b("bs_curry")._1(c[3],0)}));var e=b("MercuryIDs").getParticipantIDFromUserID(a),f=c[1][2];f===void 0&&b("EmojiActions").getEmojiColor();f=c[1][8];if(f!==void 0){if(b("bs_js_primitive").valFromOption(f).id!==e){f=b("MessengerParticipants.bs").get(e,function(a){return b("bs_curry")._1(c[3],b("bs_block").__(0,[a]))});c[1][4][0]=f==null?void 0:b("bs_js_primitive").some(f)}}else{f=b("MessengerParticipants.bs").get(e,function(a){return b("bs_curry")._1(c[3],b("bs_block").__(0,[a]))});c[1][4][0]=f==null?void 0:b("bs_js_primitive").some(f)}b("bs_curry")._1(c[4],function(){d.release();return 0});if(b("CurrentUser").isMessengerOnlyUser()&&b("gkx")("678632"))return b("bs_curry")._1(i[0],function(a){return y(c,a)});else return 0},function(c){__p&&__p();var d=c[1];c=b("MercuryIDs").getParticipantIDFromUserID(a);var e=d[1][8];e=e!==void 0?b("bs_caml_obj").caml_notequal(b("bs_js_primitive").valFromOption(e).id,c):!0;if(e){e=b("MessengerParticipants.bs").get(c,function(a){return b("bs_curry")._1(d[3],b("bs_block").__(0,[a]))});d[1][4][0]=e==null?void 0:b("bs_js_primitive").some(e);return 0}else return 0},function(a){a=a[1][4][0];if(a!==void 0)return b("MessengerParticipants.bs").removeCallback(b("bs_js_primitive").valFromOption(a));else return 0},o[7],function(c){var d=c[1],e=b("React").createElement(b("React").Fragment,void 0,b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._2(b("MessengerDialogReact.bs").Title[0],void 0,h._("Settings"))),b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Button[0](void 0,h._("Done"),void 0,void 0,function(){return b("bs_curry")._1(c[3],2)},0,void 0,void 0,void 0,[]))),f=d[8];if(f!==void 0){f=b("bs_js_primitive").valFromOption(f);f=b("React").createElement("div",{className:"_6ct9"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerContactImageReact.bs").StraightJSComponent[0]("_6cs4",void 0,!0,void 0,32,b("bs_js_primitive").nullable_to_opt(f.image_src),void 0,[])),f.name)}else f=b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,void 0,void 0,[]));var a=d[3];return b("ReasonReact.bs").element(void 0,void 0,b("MessengerDialogReact.bs").Dialog[0](void 0,void 0,void 0,d[6],void 0,"default",544,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._3(b("MessengerDialogReact.bs").Header[0],void 0,void 0,e)),b("React").createElement("div",{className:"_374b"},b("React").createElement("div",{className:"_374c"},h._("Account")),b("React").createElement("div",{className:"_374d"},f)),b("React").createElement("div",{className:"_374b"},b("React").createElement("div",{className:"_374c"},h._("Active Status")),b("React").createElement("div",{className:"_374d _6cs5"},b("React").createElement("div",{className:"_6cs6"},h._("Show when you're active"),b("ReasonReact.bs").element(void 0,void 0,b("MessengerChatOnOffToggleReact.bs").make(d[3],b("bs_curry")._1(c[0],p),[]))),b("React").createElement("div",{className:"_6cs7"},a?l:m))),B(0),z(c),b("React").createElement("div",{className:"_374b"},b("React").createElement("div",{className:"_374c"},h._("Sounds")),b("React").createElement("div",{className:"_374d"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerCheckboxInputReact.bs").make(d[5].sound_enabled,x,h._("Enabled"),[])))),s(c),t(0),u(0),b("React").createElement("div",{className:"_374b"},b("React").createElement("div",{className:"_374c"},h._("Emoji")),b("React").createElement("div",{className:"_374d _5jb0"},w(c)))]))},function(){return[b("MessengerDesktopNotifications").isDenied(),b("MessengerDesktopNotifications").isGranted(),b("bs_js_primitive").nullable_to_opt(b("EmojiStateStore").getState().emojiColor),b("PresencePrivacy").getVisibility()===b("PresencePrivacy").ONLINE,[void 0],b("MessengerSettingsStore").getSettings(),!0,void 0,b("bs_js_primitive").nullable_to_opt(b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)))]},o[10],function(c,d){if(typeof c==="number")switch(c){case 0:return b("bs_block").__(0,[[b("MessengerDesktopNotifications").isDenied(),b("MessengerDesktopNotifications").isGranted(),b("bs_js_primitive").nullable_to_opt(b("EmojiStateStore").getState().emojiColor),b("PresencePrivacy").getVisibility()===b("PresencePrivacy").ONLINE,d[4],b("MessengerSettingsStore").getSettings(),!0,d[7],b("bs_js_primitive").nullable_to_opt(b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)))]]);case 1:return b("bs_block").__(0,[[!0,d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8]]]);case 2:return b("bs_block").__(0,[[d[0],d[1],d[2],d[3],d[4],d[5],!1,d[7],d[8]]])}else if(c.tag)return b("bs_block").__(0,[[d[0],d[1],d[2],d[3],d[4],d[5],d[6],c[0],d[8]]]);else return b("bs_block").__(0,[[d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],b("bs_js_primitive").some(c[0])]])},o[12]]}k=b("ReasonReact.bs").wrapReasonForJs(o,function(a){return C(a.viewer,a.children)});f.BootloadableMessengerSettingsMessengerOnlyChangePhoneNumberRowReact=d;f.LoadableMessengerSettingsMessengerOnlyChangePhoneNumberRowReact=i;f.BootloadableMessengerSettingsMessageSettingsDialogReact=e;f.LoadableMessengerSettingsMessageSettingsDialogReact=j;f.activeLearnMoreLink=a;f.activeStatusLinkClasses=c;f.activeLearnMore=g;f.activeStatusDescription=l;f.inactiveStatusDescription=m;f.linkClasses=n;f.component=o;f.handleTogglePresence=p;f.handleNotificationsChange=q;f.renderNotificationsContent=r;f.renderNotificationsSection=s;f.renderPaymentsSection=t;f.renderBlockingSection=u;f.handleChooseEmojiColor=v;f.renderEmojiColorSection=w;f.handleSoundChange=x;f.handleLoadMessengerOnlyChangePhoneNumberRowReact=y;f.renderMessengerOnlyChangePhoneNumber=z;f.renderMessageSettingsDialog=A;f.renderMessageSettingsSection=B;f.make=C;f.jsComponent=k}),null);
__d("SRPinningNub",["Event","SRDevModeParams","URI"],(function(a,b,c,d,e,f){__p&&__p();a={watchForm:function(a){__p&&__p();b("Event").listen(a,"submit",function(a){__p&&__p();var c=b("URI").getRequestURI();a=a.target.getElementsByTagName("input");for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;c.addQueryData(f.name,f.value)}c.go(!0);return!1})},watchLink:function(a){__p&&__p();a=b("URI").getRequestURI();for(var c=b("SRDevModeParams").items,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;a.removeQueryData(f)}a.go(!0);return!1},resetPage:function(a){a=b("URI").getRequestURI();a.addQueryData(b("SRDevModeParams").escapeParam,"");a.go(!0);return!1}};e.exports=a}),null);
__d("WorkChatCustomMenuItem",["cx","CSS","DOM","MenuItem","React","ReactDOM","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=["href","rel","ajaxify","target","accesskey"];function j(a,c){var d={};i.forEach(function(a){c[a]&&(d[a]=c[a])});b("DOM").setAttributes(a,d)}c=babelHelpers.inherits(a,b("MenuItem"));h=c&&c.prototype;function a(a){h.constructor.call(this,a)}a.prototype._renderItemContent=function(){__p&&__p();this._anchor=b("DOM").create(this._data.renderas==="label"?"label":"a",{className:"_54nc"+(this._data.icon?" _54nu":"")});if(this._data.children){var a=this._data.icon?b("React").cloneElement(this._data.icon,{className:b("joinClasses")(this._data.icon.props.className,"mrs")}):null;b("ReactDOM").render(b("React").createElement("div",null,a,b("React").createElement("div",{className:"_54nh"},this._data.children)),this._anchor);this._data.label=this._anchor.innerText||this._anchor.textContent}else{a=b("DOM").create("div",null,b("DOM").create("div",{className:"_54nh"},this._data.markup||this._data.label));this._data.icon&&b("DOM").prependContent(a,this._data.icon);b("DOM").setContent(this._anchor,a)}this._data.href||(this._data.href="#");this.isDisabled()||j(this._anchor,this._data);b("DOM").setAttributes(this._anchor,this.__getAttributesFromData());this._anchor.setAttribute("role",this._ARIARole);return this._anchor};a.prototype.render=function(){var a=h.render.call(this);b("CSS").addClass(a,"_1ydp");this._disabled&&b("CSS").addClass(a,"_5arm");return a};e.exports=a}),null);
__d("WorkChatCustomMenuItem.bs",["ReasonReact.bs","bs_js_null_undefined","WorkChatCustomMenuItem"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("WorkChatCustomMenuItem"),{href:b("bs_js_null_undefined").fromOption(a),label:c,onclick:b("bs_js_null_undefined").fromOption(d),target:b("bs_js_null_undefined").fromOption(e)},f)}f.make=a}),null);
__d("WorkChatDoNotDisturbDialogReactBootloader.bs",["bs_block","bs_curry","React","Bootload.bs","Bootloader","ReasonReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableWorkChatDoNotDisturbDialogReact.bs"],a,"WorkChatDoNotDisturbDialogReactBootloader.bs");return 0}d=[a];var g=b("Bootload.bs").Create(d),h=b("ReasonReact.bs").reducerComponent("WorkChatDoNotDisturbDialogReactBootloader");function i(a,c){return b("bs_curry")._1(a[3],[c])}function c(a,c){return[h[0],h[1],h[2],h[3],function(a){return b("bs_curry")._1(g[0],function(b){return i(a,b)})},h[5],h[6],h[7],function(c){c=c[1][0];if(c!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._2(c[10],a,[]));else return b("React").createElement("div",void 0)},function(){return[void 0]},h[10],function(c,a){return b("bs_block").__(0,[[c[0]]])},h[12]]}f.BootloadableWorkChatDoNotDisturbDialogReact=d;f.LoadableWorkChatDoNotDisturbDialogReact=g;f.component=h;f.handleDoNotDisturbDialogLoad=i;f.make=c}),null);
__d("WorkChatDoNotDisturbMenuItemContentReactBootloader.bs",["fbt","bs_block","bs_curry","Bootload.bs","Bootloader","ReasonReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["BootloadableWorkChatDoNotDisturbMenuItemContentReact.bs"],a,"WorkChatDoNotDisturbMenuItemContentReactBootloader.bs");return 0}d=[a];var h=b("Bootload.bs").Create(d),i=b("ReasonReact.bs").reducerComponent("WorkChatDoNotDisturbMenuItemContentReactBootloader");function j(a,c){if(a[1][1][0])return b("bs_curry")._1(a[3],[c]);else return 0}function c(a,c){__p&&__p();return[i[0],i[1],i[2],i[3],function(a){a[1][1][0]=!0;return b("bs_curry")._1(h[0],function(b){return j(a,b)})},i[5],function(a){a[1][1][0]=!1;return 0},i[7],function(c){c=c[1][0];if(c!==void 0)return b("ReasonReact.bs").element(void 0,void 0,b("bs_curry")._2(c[2],a,[]));else return g._("Do Not Disturb")},function(){return[void 0,[!1]]},i[10],function(a,c){return b("bs_block").__(0,[[a[0],c[1]]])},i[12]]}f.BootloadableWorkChatDoNotDisturbMenuItemContentReact=d;f.LoadableWorkChatDoNotDisturbMenuItemContentReact=h;f.component=i;f.handleDoNotDisturbMenuItemContentLoad=j;f.make=c}),null);
__d("WorkUserDoNotDisturbSettingsEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({IMPRESSION:"impression",TURN_OFF:"turn_off",TURN_ON:"turn_on"})}),null);
__d("WorkUserDoNotDisturbSettingsSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BLUE_BAR_MODERN_MENU:"blue_bar_modern_menu",BOOKMARK_NAV_MENU:"bookmark_nav_menu",WORKPLACE_CHAT_MENU:"workplace_chat_menu"})}),null);
__d("XMessengerDotComDYIController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/dyi/",{tab:{type:"String"},start:{type:"Int"},end:{type:"Int"},quality:{type:"Enum",enumType:0},format:{type:"Enum",enumType:0},sections:{type:"EnumKeyset",enumType:null}})}),null);
__d("XWorkLogoutController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/logout/",{next:{type:"String"}})}),null);
__d("MessengerSettingsMenuReact.bs",["cx","fbt","Run","Form","goURI","gkx","LinkReact.bs","AsyncDialog","bs_belt_Option","CurrentUser","ReasonReact.bs","AsyncRequest","bs_js_primitive","MessagingTag","SRPinningNub","MercuryConfig","MessengerView","MercuryFilters.bs","MessengerSpoof","MessengerConfig","MessengerActions","MessengerDialogs.bs","WebStorageMonster","MessengerMenuReact.bs","MessengerEnvironment","XWorkLogoutController","WorkChatCustomMenuItem.bs","MessengerPopoverMenuReact.bs","AbstractPopoverButtonReact.bs","ServiceWorkerLoginAndLogout","MessengerSettingsDialogReact.bs","XMessengerDotComDYIController","MessengerDotComAndInboxM4Check.bs","MessengerSettingsIconSVGM4React.bs","XMessengerDotComLogoutController","WorkUserDoNotDisturbSettingsEvent","WorkUserDoNotDisturbSettingsSource","WorkDoNotDisturbSettingsTypedLogger","WorkChatDoNotDisturbDialogReactBootloader.bs","WorkChatDoNotDisturbMenuItemContentReactBootloader.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){a.preventDefault();return 0}function i(){var a=b("CurrentUser").isWorkUser();return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](a?"https://www.facebook.com/workplace":"https://www.messenger.com/about",h._("About"),void 0,"_blank",[]))}function j(){var a=b("bs_belt_Option").getWithDefault(b("MercuryConfig").WorkTermsURI==null?void 0:b("bs_js_primitive").some(b("MercuryConfig").WorkTermsURI),"https://www.facebook.com/policies");return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](a,h._("Terms"),void 0,"_blank",[]))}function k(){var a=b("bs_belt_Option").getWithDefault(b("MercuryConfig").WorkPrivacyURI==null?void 0:b("bs_js_primitive").some(b("MercuryConfig").WorkPrivacyURI),"https://www.facebook.com/privacy/explanation");return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](a,h._("Privacy Policy"),void 0,"_blank",[]))}function l(){var a=b("bs_belt_Option").getWithDefault(b("MercuryConfig").WorkCookiesURI==null?void 0:b("bs_js_primitive").some(b("MercuryConfig").WorkCookiesURI),"https://www.facebook.com/help/cookies");return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](a,h._("Cookie Policy"),void 0,"_blank",[]))}var m=b("MessengerDotComAndInboxM4Check.bs").yes?"_30yy _6ymd":"_30yy _2fug",n=b("ReasonReact.bs").statelessComponent("MessengerSettingsMenuReact");function c(a,c,d,e,f){__p&&__p();var g=function(a){a.preventDefault();return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerSettingsDialogReact.bs").make(e,[]))})};f=function(a){a.preventDefault();new(b("WorkDoNotDisturbSettingsTypedLogger"))().setEvent(b("WorkUserDoNotDisturbSettingsEvent").IMPRESSION).setSource(b("WorkUserDoNotDisturbSettingsSource").WORKPLACE_CHAT_MENU).log();return b("MessengerDialogs.bs").showDialog(function(){return b("ReasonReact.bs").element(void 0,void 0,b("WorkChatDoNotDisturbDialogReactBootloader.bs").make(e,[]))})};var o=function(a){a.preventDefault();a=d===b("MessengerView").MASTER.RECENT;b("MessengerActions").changeMasterView(a?b("MessengerView").MASTER.PEOPLE:b("MessengerView").MASTER.RECENT);return 0},p=function(a){a.preventDefault();a=c===b("MessagingTag").PENDING;b("MessengerActions").changeFolder(a?b("MessagingTag").INBOX:b("MessagingTag").PENDING);return 0},q=function(a){a.preventDefault();a=c===b("MessagingTag").OTHER;b("MessengerActions").changeFolder(a?b("MessagingTag").INBOX:b("MessagingTag").OTHER);return 0},r=function(a){a.preventDefault();a=c===b("MessagingTag").ACTION_ARCHIVED;b("MessengerActions").changeFolder(a?b("MessagingTag").INBOX:b("MessagingTag").ACTION_ARCHIVED);return 0},s=function(a){a.preventDefault();b("MessengerSpoof").init(function(){b("goURI")(window.location.href,!0,void 0);return 0});return 0},t=function(){b("Run").onUnload(function(){b("WebStorageMonster").cleanOnLogout(0);b("ServiceWorkerLoginAndLogout").logout();return 0});var a=b("CurrentUser").isWorkUser();b("Form").post((a?b("XWorkLogoutController"):b("XMessengerDotComLogoutController")).getURIBuilder().getURI(),{});return 0},u=function(a){a.preventDefault();b("AsyncDialog").send(new(b("AsyncRequest"))("/ajax/bugs/report"));return 0},v=function(c){c.preventDefault();c=a===b("MercuryFilters.bs").unread;b("MessengerActions").changeFilter(c?b("MercuryFilters.bs").all:b("MercuryFilters.bs").unread);return 0},w=function(){var a=b("XMessengerDotComDYIController").getURIBuilder().getURI();return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](a,h._("Download your information"),void 0,"_blank",[]))},x=function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Log Out"),t,void 0,[]))},y=function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Message requests"),p,void 0,[]))},z=function(){var a=b("CurrentUser").isWorkUser()&&b("gkx")("762398");if(a)return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Permanently hidden"),q,void 0,[]));else return null},A=function(){var a=b("CurrentUser").isWorkUser()&&b("gkx")("762398");return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,a?h._("Hidden chats"):h._("Archived threads"),r,void 0,[]))},B=b("CurrentUser").isWorkUser(),C=B?"/help/work/682468881954082":"https://www.facebook.com/help/735006619902401",D=function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,"[FB-Only] Copy Spoofs",s,void 0,[]))},E=function(){return b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,"[FB-Only] Reset SPIN Pin",function(){b("SRPinningNub").resetPage();return 0},void 0,[]))};B=b("CurrentUser").isWorkUser()&&b("gkx")("678573");B=B?[b("ReasonReact.bs").element(void 0,void 0,b("WorkChatCustomMenuItem.bs").make(void 0,h._("Do Not Disturb"),f,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("WorkChatDoNotDisturbMenuItemContentReactBootloader.bs").make(e,[]))])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([]))]:[null,null];var F=B[1],G=B[0];return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],function(){__p&&__p();var e=d===b("MessengerView").MASTER.RECENT;if(e){e=b("CurrentUser").isWorkUser();e=e?h._("People"):h._("Active contacts")}else e=h._("Recent messages");var f=d===b("MessengerView").MASTER.RECENT,n=d===b("MessengerView").MASTER.RECENT,p=d===b("MessengerView").MASTER.RECENT&&c===b("MessagingTag").INBOX,q=a===b("MercuryFilters.bs").unread,r=b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser(),s=b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser(),t=b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser()&&(b("MercuryConfig").WorkTermsURI==null?void 0:b("bs_js_primitive").some(b("MercuryConfig").WorkTermsURI))!==void 0,H=b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser()&&(b("MercuryConfig").WorkPrivacyURI==null?void 0:b("bs_js_primitive").some(b("MercuryConfig").WorkPrivacyURI))!==void 0,I=b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser()&&(b("MercuryConfig").WorkCookiesURI==null?void 0:b("bs_js_primitive").some(b("MercuryConfig").WorkCookiesURI))!==void 0,J=b("CurrentUser").isMessengerOnlyUser()||b("CurrentUser").isDeactivatedAllowedOnMessenger(),K=b("MessengerConfig").GKSpoof,L=b("CurrentUser").isEmployee(),M=b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser(),N=b("MessengerEnvironment").messengerdotcom||b("CurrentUser").isWorkUser();e=b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").Menu[0]([G,F,b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Settings"),g,void 0,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,e,o,void 0,[])),f?y(0):null,n?z(0):null,p?A(0):null,b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,q?h._("All threads"):h._("Unread threads"),v,void 0,[])),r?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([])):null,s?i(0):null,t?j(0):null,H?k(0):null,I?l(0):null,J?w(0):null,b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](C,h._("Help"),void 0,"_blank",[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuItem[0](void 0,h._("Report a Problem"),u,void 0,[])),K?D(0):null,L?E(0):null,M?b("ReasonReact.bs").element(void 0,void 0,b("MessengerMenuReact.bs").MenuSeparator[0]([])):null,N?x(0):null]));f=h._("Settings, help and more");n={button:b("MessengerDotComAndInboxM4Check.bs").yes?b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,f,m,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,f,[b("MessengerSettingsIconSVGM4React.bs").icon])):b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,f,m,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,f,[])),defaultMaxWidth:200};return b("ReasonReact.bs").element(void 0,void 0,b("MessengerPopoverMenuReact.bs").make(void 0,void 0,void 0,e,void 0,void 0,[b("ReasonReact.bs").element(void 0,void 0,b("AbstractPopoverButtonReact.bs").make(b("bs_js_primitive").some(n),!1,void 0,void 0,200,[]))]))},n[9],n[10],n[11],n[12]]}d=b("bs_belt_Option").getWithDefault;f.preventDefault=a;f.$pipe$unknown=d;f.renderAbout=i;f.renderPolicies=j;f.renderPrivacy=k;f.renderCookies=l;f.settingsIconClasses=m;f.component=n;f.make=c}),null);
__d("MessengerMasterViewHeaderReact.bs",["cx","fbt","React","ReasonReact.bs","MessagingTag","MessengerView","MessengerActions","MessengerURIConstants","LinkWithHiddenURLBarReact.bs","MessengerSettingsMenuReact.bs","MessengerDeleteAllMenuReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){a.preventDefault();b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);b("MessengerActions").changeQuery(null);return 0}function j(a){a.preventDefault();b("MessengerActions").changeFolder(b("MessagingTag").PENDING);return 0}var k="_30yy _2oc8",l="_4kzu",m="_36ic _5l-3",n=b("ReasonReact.bs").statelessComponent("MessengerMasterViewHeaderReact");function o(a,c,d,e,f,g){__p&&__p();var o=function(a){a.preventDefault();e!==b("MessengerView").MASTER.RECENT&&b("MessengerActions").changeMasterView(b("MessengerView").MASTER.RECENT);b("MessengerActions").changeFolder(b("MessagingTag").INBOX);return 0},p=function(){var a=c===b("MessagingTag").PENDING||c===b("MessagingTag").ACTION_ARCHIVED||e!==b("MessengerView").MASTER.RECENT,d=a?o:j;a=a?h._("Back to Recent Messages"):h._("Back to Message Requests");return b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(a,"_30yy _2oc9",void 0,void 0,void 0,void 0,void 0,void 0,d,void 0,void 0,void 0,"button",void 0,void 0,void 0,void 0,a,[]))},q=c===b("MessagingTag").ACTION_ARCHIVED?h._("Archived threads"):c===b("MessagingTag").PENDING?h._("Message requests"):c===b("MessagingTag").OTHER?h._("Filtered messages"):e===b("MessengerView").MASTER.PEOPLE?h._("Active now"):h._("Messenger");return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],function(){var g=c!==b("MessagingTag").INBOX||e!==b("MessengerView").MASTER.RECENT?p(0):b("React").createElement("div",{className:l},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSettingsMenuReact.bs").make(a,c,e,f,[]))),j=c!==b("MessagingTag").PENDING&&c!==b("MessagingTag").OTHER;if(j){j=h._("New Message");j=b("ReasonReact.bs").element(void 0,void 0,b("LinkWithHiddenURLBarReact.bs").make(j,k,void 0,void 0,void 0,void 0,b("MessengerURIConstants").COMPOSE_SUBPATH,void 0,i,void 0,void 0,void 0,"button",void 0,void 0,0,void 0,j,[]))}else j=b("React").createElement("div",{className:l},b("ReasonReact.bs").element(void 0,void 0,b("MessengerDeleteAllMenuReact.bs").make(a,c,d,f,[])));return b("React").createElement("div",{className:m,role:"banner"},g,b("React").createElement("h1",{className:"_1tqi"},q),j)},n[9],n[10],n[11],n[12]]}a=b("ReasonReact.bs").wrapReasonForJs(n,function(a){return o(a.filter,a.folder,a.threadlistOrderMap,a.view,a.viewer,[])});f.handleAddClick=i;f.handleFilteredRequestsBackArrowClick=j;f.composeButtonClasses=k;f.settingsMenuClasses=l;f.rootClasses=m;f.component=n;f.make=o;f.jsComponent=a}),null);
__d("MessengerMessageRequestsInfoReact.bs",["fbt","CurrentUser","ReasonReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ReasonReact.bs").statelessComponent("MessengerMessageRequestsInfoReact");function i(){if(b("CurrentUser").isWorkUser())return g._("Open a request to see who wants to chat. Your information and actions will remain private until you accept the request. Verify the identity of others before you share information.");else return g._("Open a thread to get more information about who's messaging you. They won't know that you've seen it until you reply.")}function a(){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],function(){return i(0)},h[9],h[10],h[11],h[12]]}f.component=h;f.getText=i;f.make=a}),null);
__d("MessengerThreadListGridWrapperReact.bs",["ReasonReact.bs","MessengerThreadListGridWrapper.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadListGridWrapper.react"),{label:a},c)}f.make=a}),null);
__d("MessengerThreadlistLinkRowReact.bs",["cx","fbt","React","Link.react","MessengerDotComAndInboxM4Check.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("MessengerDotComAndInboxM4Check.bs").yes?"_2ogt _6yb-":"_2ogt";function a(a){return b("React").createElement("li",{className:"_5l-3 _1ht1 _2ogr"},b("React").createElement("div",{className:"_2ogs"},b("React").createElement(b("Link.react"),{className:i,onClick:a,children:h._("See filtered messages")})))}f.linkClasses=i;f.make=a}),null);
__d("MessengerThreadlistMessageRequestsRowReact.bs",["ReasonReact.bs","MessengerThreadlistMessageRequestsRow.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadlistMessageRequestsRow.react"),{isFocused:a,onFocus:c,pendingFolderUnseenCount:e,newMessageRequestThreads:d,viewer:f},g)}f.make=a}),null);
__d("MessengerThreadlistNewMessageRowReact.bs",["ReasonReact.bs","MessengerThreadlistNewMessageRow.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadlistNewMessageRow.react"),{isActive:a,onClose:c},d)}f.make=a}),null);
__d("MessengerSearchFunnelState",[],(function(a,b,c,d,e,f){"use strict";function a(){this.$1}a.prototype.setSessionID=function(a){this.$1=a};a.prototype.getSessionID=function(){return this.$1};e.exports=a}),null);
__d("MessengerThreadlistRowContainerReact.bs",["Utils.bs","ReasonReact.bs","bs_js_null_undefined","MessengerThreadlistRowContainer.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l,m){return b("ReasonReact.bs").wrapJsForReason(b("MessengerThreadlistRowContainer.react"),{folder:b("bs_js_null_undefined").fromOption(a),blockedIds:l,isActive:b("Utils.bs").optionBoolToBool(c),isFocused:b("Utils.bs").optionBoolToBool(d),isActionsFocused:b("Utils.bs").optionBoolToBool(e),isTabbable:b("Utils.bs").optionBoolToBool(f),onFocus:g,onScrollIntoView:h,thread:i,viewer:j,readReceipts:k},m)}f.make=a}),null);
__d("WorkChatActivityTypedLogger.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();switch(a){case 0:return"group_sync_new_post_button_click";case 1:return"notifs_jewel_links_click";case 2:return"nav_tab_click";case 3:return"info_panel_profile_link_click";case 4:return"notifs_jewel_click";case 5:return"info_panel_group_sync_top_link_click";case 6:return"info_panel_group_sync_about_link_click";case 7:return"info_panel_group_sync_posts_link_click";case 8:return"info_panel_group_sync_saved_link_click";case 9:return"info_panel_group_sync_events_link_click"}}f.string_of_event=a}),null);
__d("WorkChatThreadlistTabsReact.bs",["cx","fbt","React","LinkReact.bs","ReasonReact.bs","bs_js_primitive","MessagingTag","MessengerView","MercuryFilters.bs","MessengerActions","MessengerSettingsMenuReact.bs","WorkChatActivityTypedLogger.bs","WorkChatActivityTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("WorkChatThreadlistTabsReact");function a(a,c,d,e,f){__p&&__p();var g=a!==void 0?b("bs_js_primitive").valFromOption(a):b("MercuryFilters.bs").all,j=c!==void 0?c:"",k=function(a){j!==b("MessagingTag").INBOX&&b("MessengerActions").changeFolder(b("MessagingTag").INBOX);var c=a===b("MessengerView").MASTER.RECENT;new(b("WorkChatActivityTypedLogger"))().setEvent(b("WorkChatActivityTypedLogger.bs").string_of_event(2)).addToExtraData("data",[c?"recent":"people"]).log();b("MessengerActions").changeMasterView(a);return 0};return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){var a=h._("Home"),c=h._("People"),f=d===b("MessengerView").MASTER.RECENT&&j===b("MessagingTag").INBOX;return b("React").createElement("div",{className:"_65ty"},b("React").createElement("div",{className:"_65tz"},b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,a,"_65t-"+(f?"":" _65t_")+(f?" _65u0":""),void 0,void 0,void 0,void 0,void 0,void 0,void 0,function(){return k(b("MessengerView").MASTER.RECENT)},void 0,void 0,"button",void 0,void 0,void 0,void 0,a,[]))),b("React").createElement("div",{className:"_65tz"},b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,c,"_65t-"+(d!==b("MessengerView").MASTER.PEOPLE?" _65u1":"")+(d===b("MessengerView").MASTER.PEOPLE?" _65u2":""),void 0,void 0,void 0,void 0,void 0,void 0,void 0,function(){return k(b("MessengerView").MASTER.PEOPLE)},void 0,void 0,"button",void 0,void 0,void 0,void 0,c,[]))),b("React").createElement("div",{className:"_65tz"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSettingsMenuReact.bs").make(g,j,d,e,[]))))},i[9],i[10],i[11],i[12]]}f.component=i;f.make=a}),null);
__d("WorkChatUnifyTypeahead.bs",["WorkplaceSearchTypeaheadConfigs"],(function(a,b,c,d,e,f){"use strict";function a(){return b("WorkplaceSearchTypeaheadConfigs").unifySearchBox}f.unifySearchBox=a}),null);
__d("WorkGalahadAppTabChatsAction.react",["ix","Image.react","Link.react","MessengerURIConstants","React","asset"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("React").createElement(b("Link.react"),{href:b("MessengerURIConstants").FACEBOOK_PREFIX+b("MessengerURIConstants").COMPOSE_SUBPATH},b("React").createElement(b("Image.react"),{src:g("470511")}))}e.exports=a}),null);
__d("WorkGalahadChatsThreadlistMenu",["fbt","MercuryFilters.bs","MessagingTag","MessengerDialogs.bs","MessengerSettingsDialogReact.bs","React","WorkGalahadChatChannelActions","WorkGalahadDropdownMenuItem.react","gkx"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("MessengerSettingsDialogReact.bs").jsComponent;function i(){b("WorkGalahadChatChannelActions").changeFolder(b("MessagingTag").INBOX),b("WorkGalahadChatChannelActions").changeFilter(b("MercuryFilters.bs").all)}function j(){b("WorkGalahadChatChannelActions").changeFolder(b("MessagingTag").INBOX),b("WorkGalahadChatChannelActions").changeFilter(b("MercuryFilters.bs").unread)}function k(){b("WorkGalahadChatChannelActions").changeFolder(b("MessagingTag").ACTION_ARCHIVED),b("WorkGalahadChatChannelActions").changeFilter(b("MercuryFilters.bs").all)}function l(){b("WorkGalahadChatChannelActions").changeFolder(b("MessagingTag").OTHER),b("WorkGalahadChatChannelActions").changeFilter(b("MercuryFilters.bs").all)}function m(){b("WorkGalahadChatChannelActions").changeFolder(b("MessagingTag").PENDING),b("WorkGalahadChatChannelActions").changeFilter(b("MercuryFilters.bs").all)}function n(a){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(h,{viewer:a})})}function a(a,c,d){var e=b("gkx")("762398"),f=[b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"inbox",id:"inbox",icons:a===b("MercuryFilters.bs").all&&c===b("MessagingTag").INBOX?"checkmark_selected":"checkmark_unselected",label:g._("Inbox"),onClick:i,hideOnClick:!0}),b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"unread",id:"unread",icons:a===b("MercuryFilters.bs").unread&&c===b("MessagingTag").INBOX?"checkmark_selected":"checkmark_unselected",label:g._("Unread"),onClick:j,hideOnClick:!0}),b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"hidden",id:"hidden",icons:a===b("MercuryFilters.bs").all&&c===b("MessagingTag").ACTION_ARCHIVED?"checkmark_selected":"checkmark_unselected",label:e?g._("Hidden"):g._("Archived"),onClick:k,hideOnClick:!0})];e&&f.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"permanently-hidden",id:"permanentlyHidden",icons:a===b("MercuryFilters.bs").all&&c===b("MessagingTag").OTHER?"checkmark_selected":"checkmark_unselected",label:g._("Permanently hidden"),onClick:l,hideOnClick:!0}));f.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"message-requests",id:"messageRequests",icons:a===b("MercuryFilters.bs").all&&c===b("MessagingTag").PENDING?"checkmark_selected":"checkmark_unselected",label:g._("Message requests"),onClick:m,hideOnClick:!0}));f.push(b("React").createElement(b("WorkGalahadDropdownMenuItem.react").Separator,{key:"workchat-settings-separator"}),b("React").createElement(b("WorkGalahadDropdownMenuItem.react"),{key:"settings",id:"settings",icons:"settings",label:g._("Settings"),onClick:function(){return n(d)},hideOnClick:!0}));return f}e.exports={getMenuItems:a}}),null);
__d("WorkGalahadChatsThreadlistHeader.react",["cx","fbt","MercuryFilters.bs","MessagingTag","React","WorkGalahadAppTabChatsAction.react","WorkGalahadChatsThreadlistMenu","WorkGalahadNavHeader.react","gkx"],(function(a,b,c,d,e,f,g,h){__p&&__p();function i(a,c){a=a===b("MercuryFilters.bs").unread;switch(c){case b("MessagingTag").INBOX:return a?h._("Unread"):h._("Chats");case b("MessagingTag").ACTION_ARCHIVED:return b("gkx")("762398")?h._("Hidden"):h._("Archived");case b("MessagingTag").PENDING:return h._("Message requests");case b("MessagingTag").OTHER:return h._("Permanently hidden")}return null}function a(a){var c=a.filter,d=a.folder;a=a.viewer;return b("React").createElement(b("WorkGalahadNavHeader.react"),{className:"_3-8p",title:i(c,d),action:{items:b("WorkGalahadChatsThreadlistMenu").getMenuItems(c,d,a),extraAction:b("React").createElement(b("WorkGalahadAppTabChatsAction.react"),null)}})}e.exports=a}),null);
__d("WorkGalahadChatsThreadlistHeaderReact.bs",["ReasonReact.bs","WorkGalahadChatsThreadlistHeader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){return b("ReasonReact.bs").wrapJsForReason(b("WorkGalahadChatsThreadlistHeader.react"),{filter:c,folder:a,viewer:d},e)}f.make=a}),null);
__d("WorkGalahadNewMessageRow.react",["MessengerThreadlistNewMessageRow.react","React","WorkGalahadMessageRow.react"],(function(a,b,c,d,e,f){function a(a){return b("React").createElement(b("WorkGalahadMessageRow.react"),{isActive:a.isActive},b("React").createElement(b("MessengerThreadlistNewMessageRow.react"),a))}e.exports=a}),null);
__d("WorkGalahadNewMessageRowReact.bs",["ReasonReact.bs","WorkGalahadNewMessageRow.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("WorkGalahadNewMessageRow.react"),{isActive:a,onClose:c},d)}f.make=a}),null);
__d("WorkchatThreadListInviteRow.react",["cssVar","cx","fbt","Link.react","MercuryConfig","MessengerAddIconSVGReact.re","React","WorkInviteSource","XWorkInviteCoworkersDialogController"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("MessengerAddIconSVGReact.re").component;function a(){if(!b("MercuryConfig").ShowInviteSurface)return null;var a=b("XWorkInviteCoworkersDialogController").getURIBuilder().setEnum("source",b("WorkInviteSource").WWW_CHAT_THREAD_LIST).getURI();return b("React").createElement("li",{className:"_5l-3 _1q5x",role:"row",tabIndex:0},b("React").createElement("div",{className:"_5l-3 _1q5y",id:"work_thread_list_invite_row",role:"gridcell",tabIndex:-1},b("React").createElement(b("Link.react"),{href:"#",ajaxify:a,rel:"dialog",className:"_1q5y _1q61 _5l-3",s:"true",role:"link",tabIndex:-1},b("React").createElement("div",{className:"_5l-3 _1q60"},b("React").createElement("div",{"aria-hidden":!0,className:"_1qt3 _5l-3"},b("React").createElement(j,{className:"_1q5z",customColor:"#0084ff"})),b("React").createElement("div",{className:"_1qt4 _5l-m"},b("React").createElement("div",{className:"_1qt5 _5l-3"},b("React").createElement("div",{className:"_1ht6"},i._("Invite Colleagues"))))))))}e.exports=a}),null);
__d("WorkchatThreadListInviteRowReact.bs",["ReasonReact.bs","WorkchatThreadListInviteRow.react"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("ReasonReact.bs").wrapJsForReason(b("WorkchatThreadListInviteRow.react"),{},a)}f.make=a}),null);
__d("MessengerThreadlistReact.bs",["cx","csx","fbt","bs_array","bs_block","bs_curry","React","Parent","gkx","bs_belt_Set","ReactDOM","debounce","LinkReact.bs","UserAgent","bs_caml_array","MercuryIDs","bs_belt_Option","CurrentUser","ReasonReact.bs","bs_js_primitive","MessagingTag","MessengerView","ParticipantId.bs","bs_caml_primitive","MercuryFilters.bs","MessengerConfig","MessengerActions","MercuryThreadInfo","KeyEventController","MessageRequestLogger.bs","SubscriptionsHandler","ChatSidebarSheetReact.bs","MessengerSpinnerReact.bs","MessengerGalahadGating.bs","QuickPerformanceLogger","WorkChatUnifyTypeahead.bs","MessengerTypeaheadUtils","MessengerComposerActions","MercuryTypeaheadConstants","MessengerSearchFunnelState","WorkChatThreadlistTabsReact.bs","WorkGalahadNewMessageRowReact.bs","MessengerDotComAndInboxM4Check.bs","MessengerNewMessagesNoticeReact.bs","MessengerThreadlistLinkRowReact.bs","MessengerFlexScrollableAreaReact.bs","WorkchatThreadListInviteRowReact.bs","MessengerMessageRequestsInfoReact.bs","MessengerThreadListGridWrapperReact.bs","MessengerGraphQLSearchTypeaheadReact.bs","MessengerSearchFunnelLoggerConstants","MessengerThreadlistRowContainerReact.bs","MessengerThreadlistNewMessageRowReact.bs","WorkGalahadChatsThreadlistHeaderReact.bs","MessengerThreadlistMessageRequestsRowReact.bs","MessengerUniversalSearchFunnelLoggerConstants","BootloadableMessengerUniversalSearchFunnelLogger.bs"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a,c,d){if(d!==void 0&&a.length>0&&c.length>0){a=b("bs_caml_array").caml_array_get(a,0);c=b("bs_caml_array").caml_array_get(c,0);if(a.unread_count>0&&a.thread_id!==b("bs_js_primitive").valFromOption(d)&&a!==c)return b("MercuryThreadInfo").isMuted(a);else return!1}else return!1}function k(a,c){var d=a.ctrlKey,e=a.metaKey,f=a.shiftKey,g=b("KeyEventController").filterEventTypes(a,c);c=b("KeyEventController").filterEventTargets(a,c);a=b("Parent").bySelector(a.target,"._150g");if(d||e||f||!(g&&c))return!1;else return(a==null?void 0:b("bs_js_primitive").some(a))===void 0}function l(a,c){__p&&__p();var d=a.ctrlKey,e=a.metaKey,f=b("UserAgent").isPlatform("Mac OS X"),g=b("UserAgent").isPlatform("iOS");c=b("KeyEventController").filterEventTypes(a,c);a=b("Parent").bySelector(a.target,"._150g");a=a==null?void 0:b("bs_js_primitive").some(a);if(d)if(e||f||g||!c)return!1;else return a===void 0;else if(e)if(f)if(g||!c)return!1;else return a===void 0;else if(g&&c)return a===void 0;else return!1;else return!1}a=b("UserAgent").isPlatform("Mac OS X")||b("UserAgent").isPlatform("iOS")?"Cmd":"Ctrl";var m="K",n=a+" + K";function o(a,c){c[1][6][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function p(a,c,d){var e=d.findIndex(function(c){if(a!==void 0)return c.thread_id===b("bs_js_primitive").valFromOption(a);else return!1});e=b("bs_caml_primitive").caml_int_min(b("bs_caml_primitive").caml_int_max(e+c|0,0),d.length-1|0);return b("bs_caml_array").caml_array_get(d,e).thread_id}function q(a,c){a.preventDefault();a=c[1][4][0];if(a!==void 0)return b("bs_js_primitive").valFromOption(a).focusInput();else return 0}function r(a,c){c[1][4][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function s(a,c){var d=c[1];setTimeout(function(){var c=d[6][0];if(c!==void 0){b("MessengerTypeaheadUtils").scrollEntryIntoView(a,b("bs_js_primitive").valFromOption(c));return 0}else return 0},0);return 0}function t(a){a.preventDefault();b("MessengerActions").changeFolder(b("MessagingTag").OTHER);return 0}function u(a){a.preventDefault();b("MessengerActions").changeFilter(b("MercuryFilters.bs").all);b("MessengerActions").changeFolder(b("MessagingTag").INBOX);return 0}function v(a,c,d,e){__p&&__p();var f=[];b("bs_array").iter(function(d){__p&&__p();d=c[d];if(d!==void 0){var e=d[1];d=d[0];if(d==null)return 0;else{d=b("ReactDOM").findDOMNode(d).getBoundingClientRect();if(d.top>a.top-10&&d.bottom<a.bottom+10){f.push({threadID:e.thread_id,unread:e.unread_count>0});return 0}else return 0}}else return 0},Object.keys(c));if(f.length){var g=b("bs_array").map(function(a){return b("MercuryIDs").getThreadKeyfromThreadIDUserID(a.threadID,e)},f);g=g.join(",");return b("MessageRequestLogger.bs").logItemImpression(f,g,d)}else return 0}var w=b("debounce")(function(a){__p&&__p();var c=a[1];a=a[0];var d=a[6][0];if(d!==void 0){d=b("bs_js_primitive").valFromOption(d).getArea();if(d==null)return 0;else{d=d.getElement().getBoundingClientRect();v(d,a[7],b("MessagingTag").PENDING,c);return v(d,a[8],b("MessagingTag").OTHER,c)}}else return 0},500);function x(a,c,d){__p&&__p();d=d[1];if(a.folder===b("MessagingTag").PENDING){d[7][a.thread_id]=[c,a];return 0}else if(a.folder===b("MessagingTag").OTHER){d[8][a.thread_id]=[c,a];return 0}else return 0}function y(a,c){return b("bs_curry")._1(a[3],b("bs_block").__(2,[c]))}function z(a,c,d,e,f,g,h){__p&&__p();var i=d[1];a=a!==void 0?b("bs_js_primitive").valFromOption(a)===h.thread_id:!1;var j=i[0];j=j!==void 0;var k=i[0];k=k!==void 0?b("bs_js_primitive").valFromOption(k)===h.thread_id:!1;j=a?j&&!k?!1:!0:k?!0:!1;var l=h.folder===b("MessagingTag").PENDING||h.folder===b("MessagingTag").OTHER;return b("ReasonReact.bs").element(h.thread_id,l?b("bs_curry")._1(d[0],function(a,b){return x(h,a,b)}):function(){return 0},b("MessengerThreadlistRowContainerReact.bs").make(e,a,k,i[2],j,b("bs_curry")._1(d[1][17],[d,y]),b("bs_curry")._1(d[1][16],[d,s]),h,c,g,f,[]))}function A(a,c){c=c[1];var d=a[1],e=a[0],f=d==null?b("MessengerSearchFunnelLoggerConstants").OTHER:d===b("MercuryTypeaheadConstants").FRIEND_TYPE?b("MessengerSearchFunnelLoggerConstants").USER_CONTACT:d===b("MercuryTypeaheadConstants").NON_FRIEND_TYPE?b("MessengerSearchFunnelLoggerConstants").USER_NON_CONTACT:d===b("MercuryTypeaheadConstants").FB4C_TYPE?b("MessengerSearchFunnelLoggerConstants").COWORKER:d===b("MercuryTypeaheadConstants").GAME_TYPE?b("MessengerSearchFunnelLoggerConstants").GAME:d===b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE||d===b("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE||d===b("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE||d===b("MercuryTypeaheadConstants").PAGE_TYPE?b("MessengerSearchFunnelLoggerConstants").PAGE:d===b("MercuryTypeaheadConstants").THREAD_TYPE?b("MessengerSearchFunnelLoggerConstants").GROUP:b("MessengerSearchFunnelLoggerConstants").OTHER;b("MessengerActions").selectThread(e,d);a=c[3];var g=a===""?b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.NULL_STATE:b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD,h=c[3],i=b("BootloadableMessengerUniversalSearchFunnelLogger.bs").FunnelLogger[3];return b("bs_curry")._1(b("BootloadableMessengerUniversalSearchFunnelLogger.bs").Loadable[0],function(a){return i(h,e,f,g,a)})}var B=b("MessengerDotComAndInboxM4Check.bs").yes?"_3bll _6ybw":"_3bll",C=b("ReasonReact.bs").reducerComponent("MessengerThreadlistReact");function D(a,c,d,e,f,g,h,v,x,y,D,E,F,G,H,I,J,K,L,M){__p&&__p();var N=function(c,d,e){__p&&__p();var f=e[1],a=f[9];c=typeof c==="number"?c!==0?a.length-1|0:(-a.length|0)-1|0:c[0];var g=d.altKey,h=b("Parent").bySelector(d.target,"._4rv3"),i=f[0],j=b("Parent").bySelector(d.target,"._1ht1");if(g&&!(h==null)){g=f[14];if(g)if(c===1&&a.length>0){b("MessengerActions").selectThread(b("bs_caml_array").caml_array_get(a,0).thread_id,null);return 0}else return 0;else{h=a.findIndex(function(c){var a=f[12];if(a!==void 0)return b("bs_js_primitive").valFromOption(a)===c.thread_id;else return!1});if(h!==-1){g=b("bs_caml_array").caml_array_get(a,h+c|0);b("MessengerActions").selectThread(g.thread_id);f[10]&&h===0&&c===-1&&b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);if(h===(a.length-1|0))return b("bs_curry")._1(f[13],0);else return 0}else return 0}}else g=1;if(g===1)if(i!==void 0&&!(j==null)){d.preventDefault();return b("bs_curry")._1(e[3],b("bs_block").__(3,[c]))}else return 0},O=function(c,a){c.stopPropagation();b("MessengerComposerActions").exitComposeState();if(x){a=I.find(function(a){return a.unread_count===0});b("MessengerActions").selectThread(a!==void 0?a.thread_id:null,null);return 0}else return 0},P=function(c,a){c.preventDefault();return b("bs_curry")._1(E,0)},Q=function(a,c,d){__p&&__p();var e=0;if(a!==void 0&&a)return null;else a=2;if(a===2)if(c!==void 0&&c)return b("React").createElement("div",{className:"_19hf"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,void 0,void 0,[])));else e=1;if(e===1)return b("React").createElement("div",{className:"_19hf"},b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"#",void 0,b("bs_curry")._1(d[0],P),void 0,void 0,void 0,void 0,void 0,-1,void 0,void 0,[i._("Show older")])))},R=function(d){if(J.length<1)return null;else return b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadListGridWrapperReact.bs").make(i._("Pinned conversations"),[b("bs_array").map(function(b){if(b.length!==1)return null;else{b=b[0];return z(a,K,d,f,c,L,b)}},J)]))},S=function(d){__p&&__p();if(I.length===0){if(f===b("MessagingTag").INBOX){var g=e===b("MercuryFilters.bs").unread;g=g?i._("No unread messages found."):i._("No messages found.")}else g=f===b("MessagingTag").PENDING?i._("No message requests found."):i._("No filtered messages found.");var h=f!==b("MessagingTag").INBOX||e!==b("MercuryFilters.bs").all;h=h?b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,u,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,[i._("Return to inbox.")])):null;return b("React").createElement("div",{className:"_3blk"},g,b("React").createElement("div",{className:B},h))}else return b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadListGridWrapperReact.bs").make(i._("Conversation list"),[b("bs_array").map(function(e){if(e.is_pinned===!0&&(b("gkx")("678624")||b("MessengerConfig").MPT>0))return null;else return z(a,K,d,f,c,L,e)},I)]))};return[C[0],C[1],C[2],function(c){__p&&__p();var d=c[6][0];d=d!==void 0?b("bs_js_primitive").valFromOption(d).isScrolledToTop():!1;var e=j(I,c[9],a),h=0,i=0;if(d||!e)i=2;else if(G!==void 0){e=G;var k=e.length===0;return[c[0],c[1],c[2],k?e:c[3],c[4],!0,c[6],c[7],c[8],I,g,c[11],a,E,x,f,c[16],c[17]]}else h=1;if(i===2)if(G!==void 0){k=G;e=k.length===0;return[c[0],c[1],c[2],e?k:c[3],c[4],c[5]&&!d,c[6],c[7],c[8],I,g,c[11],a,E,x,f,c[16],c[17]]}else h=1;if(h===1)return[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],I,g,c[11],a,E,x,f,c[16],c[17]]},function(a){__p&&__p();var c=function(c,d){var e=b("Parent").bySelector(d.target,"._1ht1");if(e==null)return 0;else{d.preventDefault();return b("bs_curry")._1(a[3],b("bs_block").__(1,[c]))}},d=new(b("SubscriptionsHandler"))(),e=[-1],f=[1],g=[-5],h=[5];d.addSubscriptions(b("KeyEventController").registerKey("UP",b("bs_curry")._1(a[0],function(a,b){return N(e,a,b)}),k),b("KeyEventController").registerKey("DOWN",b("bs_curry")._1(a[0],function(a,b){return N(f,a,b)}),k),b("KeyEventController").registerKey("PAGE_UP",b("bs_curry")._1(a[0],function(a,b){return N(g,a,b)})),b("KeyEventController").registerKey("PAGE_DOWN",b("bs_curry")._1(a[0],function(a,b){return N(h,a,b)})),b("KeyEventController").registerKey("HOME",b("bs_curry")._1(a[0],function(a,b){return N(0,a,b)})),b("KeyEventController").registerKey("END",b("bs_curry")._1(a[0],function(a,b){return N(1,a,b)})),b("KeyEventController").registerKey("LEFT",function(a){return c(!1,a)}),b("KeyEventController").registerKey("RIGHT",function(a){return c(!0,a)}),b("KeyEventController").registerKey(m,b("bs_curry")._1(a[0],q),l));b("bs_curry")._1(a[4],function(){d.release();return 0});b("QuickPerformanceLogger").markerStartFromNavStart(25296901);b("QuickPerformanceLogger").markerEnd(25296901,"SUCCESS");return w([a[1],K])},function(a){__p&&__p();var c=a[1];a=a[0];c[1][15]!==f&&w([c[1],K]);var d=c[1][1]!==a[1][1];a=g&&!a[1][10];c=c[1][6][0];if(d&&a&&c!==void 0){b("bs_js_primitive").valFromOption(c).scrollToTop();return 0}else return 0},C[6],C[7],function(a){__p&&__p();var c=a[1],j=c[5]&&!c[1],k=b("MessengerGalahadGating.bs").isGalahadUIEnabled(0),l=!c[1]&&b("MessengerConfig").MPT>0&&J.length>0&&f===b("MessagingTag").INBOX,m=b("CurrentUser").isWorkUser()&&!c[1]&&b("gkx")("678624")&&J.length>0&&f===b("MessagingTag").INBOX,p=i._("Conversations"),q=G!==void 0,u=k&&b("WorkChatUnifyTypeahead.bs").unifySearchBox(0);if(u)u=null;else{var w=f===b("MessagingTag").INBOX;if(w){w=b("CurrentUser").isWorkUser();if(w){w=c[1];w=i._("Search chats {keyboard shortcut help}",[i._param("keyboard shortcut help",w?"":" ("+(n+")"))])}else w=i._("Search Messenger");u=b("ReasonReact.bs").element(void 0,b("bs_curry")._1(a[0],r),b("MessengerGraphQLSearchTypeaheadReact.bs").make("_5iwm"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6-_b":"")+(c[1]||c[3].length>0?" _5iwn":"")+" _150g",!0,!1,!1,!1,c[3]===""&&!q,q,c[1],function(){var d=c[3]==="",e=d?b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.NULL_STATE:b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD,f=b("MessengerUniversalSearchFunnelLoggerConstants").END_ACTIONS.ABANDON,g=b("MessengerUniversalSearchFunnelLoggerConstants").END_REASONS.END_ACTION,h=b("BootloadableMessengerUniversalSearchFunnelLogger.bs").FunnelLogger[1];b("bs_curry")._1(b("BootloadableMessengerUniversalSearchFunnelLogger.bs").Loadable[0],function(a){return h(g,f,"",e,a)});return b("bs_curry")._1(a[3],1)},function(c){return b("bs_curry")._1(a[3],b("bs_block").__(0,[c.target.value]))},function(){d!==void 0&&b("bs_curry")._1(d,0);return b("bs_curry")._1(a[3],2)},function(){return b("bs_curry")._1(a[3],3)},function(){return b("bs_curry")._1(a[3],0)},b("bs_curry")._1(a[1][16],[a,s]),function(e,f){var d=c[3]==="",g=d?b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.NULL_STATE:b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD;b("bs_curry")._2(a[0],A,[e,f]);var h=b("MessengerUniversalSearchFunnelLoggerConstants").END_ACTIONS.RESULT_SELECTED,i=b("MessengerUniversalSearchFunnelLoggerConstants").END_REASONS.END_ACTION,j=b("BootloadableMessengerUniversalSearchFunnelLogger.bs").FunnelLogger[1];return b("bs_curry")._1(b("BootloadableMessengerUniversalSearchFunnelLogger.bs").Loadable[0],function(a){return j(i,h,"",g,a)})},w,c[3],!0,!0,"_11_d"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _705p":""),K,[]))}else u=k?b("React").createElement("div",{className:"_7cyu"}):null}w=b("CurrentUser").isWorkUser()&&!c[1];var z=k&&!c[1];m=m||l;var B=f===b("MessagingTag").PENDING,C=f===b("MessagingTag").INBOX&&D.length>0,E=f===b("MessagingTag").PENDING&&!(b("CurrentUser").isWorkUser()&&b("gkx")("762398")),I=b("CurrentUser").isWorkUser()&&!k&&b("gkx")("678606");return b("React").createElement("div",{className:"_2xhi"+(b("MessengerConfig").MPT>0?" _6q63":"")},b("ReasonReact.bs").element(void 0,void 0,b("ChatSidebarSheetReact.bs").make("_p0g",K,[])),b("ReasonReact.bs").element(void 0,void 0,b("MessengerNewMessagesNoticeReact.bs").make(j,function(c){c.preventDefault();return b("bs_curry")._1(a[3],5)},void 0,[])),b("ReasonReact.bs").element(void 0,b("bs_curry")._1(a[0],o),b("MessengerFlexScrollableAreaReact.bs").make(function(){return b("bs_curry")._1(a[3],4)},"_3_e8",y,[u,w?b("ReasonReact.bs").element(void 0,void 0,b("WorkchatThreadListInviteRowReact.bs").make([])):null,z?b("ReasonReact.bs").element(void 0,void 0,b("WorkGalahadChatsThreadlistHeaderReact.bs").make(f,e,K,[])):null,m?b("React").createElement("div",void 0,R(a),l?null:b("React").createElement("div",{className:"_1s38"})):null,B?b("React").createElement("div",{className:"_5u15"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerMessageRequestsInfoReact.bs").make([]))):null,b("React").createElement("div",{"aria-label":p,className:c[1]&&!q?"accessible_elem":"",role:"navigation"},C?b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadlistMessageRequestsRowReact.bs").make(!1,function(c){return b("bs_curry")._1(a[3],b("bs_block").__(2,[c]))},D,F,K,[])):null,g?k?b("ReasonReact.bs").element(void 0,void 0,b("WorkGalahadNewMessageRowReact.bs").make(x,b("bs_curry")._1(a[0],O),[])):b("ReasonReact.bs").element(void 0,void 0,b("MessengerThreadlistNewMessageRowReact.bs").make(x,b("bs_curry")._1(a[0],O),[])):null,S(a),E?b("MessengerThreadlistLinkRowReact.bs").make(t):null,H!==void 0?b("bs_curry")._1(H,0):Q(h,v,a))])),I?b("ReasonReact.bs").element(void 0,void 0,b("WorkChatThreadlistTabsReact.bs").make(b("bs_js_primitive").some(e),f,b("MessengerView").MASTER.RECENT,K,[])):null)},function(){return[void 0,!1,!1,"",[void 0],!1,[void 0],{},{},I,g,void 0,a,E,x,f,b("ReasonReact.bs").Props[0](function(a,b){return a[1]===b[1]},function(a){return b("bs_curry")._1(a[0][0],a[1])}),b("ReasonReact.bs").Props[0](function(a,b){return a[1]===b[1]},function(a){return b("bs_curry")._1(a[1],a[0])})]},C[10],function(c,d){__p&&__p();if(typeof c==="number")switch(c){case 0:var e=new(b("MessengerSearchFunnelState"))();e.setSessionID(0);var f=b("MessengerUniversalSearchFunnelLoggerConstants").INTERFACES.MESSENGER_DOT_COM,g=b("MessengerUniversalSearchFunnelLoggerConstants").ENTRY_SURFACES.INBOX,h=b("BootloadableMessengerUniversalSearchFunnelLogger.bs").FunnelLogger[0];b("bs_curry")._1(b("BootloadableMessengerUniversalSearchFunnelLogger.bs").Loadable[0],function(a){return h(g,f,e,a)});return b("bs_block").__(0,[[d[0],!0,d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],b("bs_js_primitive").some(e),d[12],d[13],d[14],d[15],d[16],d[17]]]);case 1:return b("bs_block").__(0,[[d[0],!1,d[2],"",d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17]]]);case 2:return b("bs_block").__(0,[[d[0],d[1],d[2],"",d[4],d[5],d[6],d[7],d[8],d[9],d[10],void 0,d[12],d[13],d[14],d[15],d[16],d[17]]]);case 3:return b("bs_block").__(0,[[d[0],!0,d[2],"",d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17]]]);case 4:if(d[1])return 0;else{var i=d[6][0];if(i!==void 0){i=b("bs_js_primitive").valFromOption(i);var j=i.isScrolledToBottom();i=i.isScrolledToTop();var k=d[5];if(j){if(i&&k)return b("bs_block").__(2,[[d[0],d[1],d[2],d[3],d[4],!1,d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17]],function(a){b("bs_curry")._1(E,0);return w([a[1],K])}]);else j=1;if(j===1)return b("bs_block").__(1,[function(a){b("bs_curry")._1(E,0);return w([a[1],K])}])}else{if(i&&k)return b("bs_block").__(2,[[d[0],d[1],d[2],d[3],d[4],!1,d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17]],function(a){return w([a[1],K])}]);else j=1;if(j===1)return b("bs_block").__(1,[function(a){return w([a[1],K])}])}}else return 0}break;case 5:return b("bs_block").__(2,[[d[0],d[1],d[2],d[3],d[4],!1,d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17]],function(a){a=a[1][6][0];if(a!==void 0){b("bs_js_primitive").valFromOption(a).scrollToTop();return 0}else return 0}])}else switch(c.tag|0){case 0:var a=c[0],l=b("BootloadableMessengerUniversalSearchFunnelLogger.bs").FunnelLogger[2];b("bs_curry")._1(b("BootloadableMessengerUniversalSearchFunnelLogger.bs").Loadable[0],function(b){return l(a,b)});return b("bs_block").__(0,[[d[0],d[1],d[2],a,d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17]]]);case 1:return b("bs_block").__(0,[[d[0],d[1],c[0],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17]]]);case 2:return b("bs_block").__(0,[[b("bs_js_primitive").some(c[0]),d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17]]]);case 3:return b("bs_block").__(0,[[b("bs_js_primitive").some(p(d[0],c[0],I)),d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17]]])}},C[12]]}c=b("ReasonReact.bs").wrapReasonForJs(C,function(a){var c=a.blockedIds,d=a.isComposing;return D(b("bs_js_primitive").nullable_to_opt(a.activeThreadID),c==null?b("bs_belt_Set").make([b("ParticipantId.bs").cmp]):c,b("bs_js_primitive").nullable_to_opt(a.clearQuery),a.filter,a.folder,d==null?!1:d,b("bs_js_primitive").nullable_to_opt(a.isLoaded),b("bs_js_primitive").nullable_to_opt(a.isLoading),a.isNewMessageActive,b("bs_js_primitive").nullable_to_opt(a.maxHeight),a.newMessageRequestThreads,a.onLoadMoreRequest,a.pendingFolderUnseenCount,b("bs_js_primitive").nullable_to_opt(a.queryString),b("bs_js_primitive").nullable_to_opt(a.renderLoadMore),a.threads,b("bs_array").map(function(a){return[].concat(a)},b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.pinnedThreads),[])),a.viewer,a.readReceipts,[])});d=b("bs_belt_Option").getWithDefault;e=25296901;g=10;f.$pipe$unknown=d;f.qpl_module_page_load_mdotcom=e;f.hasNewUnreadMessages=j;f.filterKeyEvent=k;f.filterPlatformSpecificModifierKey=l;f.platformSpecificModiferKeyLabel=a;f.searchKeyboardMainKey=m;f.searchKeyboardShortcut=n;f.setScrollable=o;f.getFocusedThreadId=p;f.handleFocusSearchBar=q;f.setSearchInputNode=r;f.handleScrollIntoView=s;f.handleFilteredRequestsClick=t;f.handleReturnToInboxClick=u;f.impressionOffset=g;f.logNodeImpressions=v;f.checkAndUpdateMessageRequestImpressions=w;f.setter=x;f.onFocus=y;f.renderThread=z;f.handleSelect=A;f.emptyInboxLinkClasses=B;f.component=C;f.make=D;f.jsComponent=c}),null);
__d("MercuryMessageStore",["CurrentUser","LogHistory","MercuryAPIArgsSource","MercuryThreadInformer","MercuryThreadlistConstants","MessengerState.bs","SubscriptionsHandler","mixInEventEmitter","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LogHistory").getInstance("mercury_message_store");function h(a,c,d){__p&&__p();this.$5=a;this.$1=d||b("CurrentUser").getID();this.$2=1;this.$3=c||b("MercuryThreadlistConstants").RECENT_MESSAGES_LIMIT;this.$6=d?b("MercuryThreadInformer").getForFBID(d):b("MercuryThreadInformer").get();this.$4=new(b("SubscriptionsHandler"))();this.$4.addSubscriptions(this.$6.subscribe("messages-received",function(a,b){return this.$7(b)}.bind(this)),this.$6.subscribe("messages-updated",function(a,b){return b[this.$5]&&this.$8(b[this.$5])}.bind(this)),this.$6.subscribe("messages-reordered",function(a,b){return b[this.$5]&&this.$9()}.bind(this)),this.$6.subscribe("thread-invalidated",function(a,b){return b[this.$5]&&this.$10()}.bind(this)));a=this.$11();g.debug("constructed",JSON.stringify({threadID:this.$5,messageCount:a}));a<this.$3?this.$12():b("setImmediate")(function(){this.$9()}.bind(this))}h.prototype.destroy=function(){this.$4&&this.$4.release(),g.debug("destroyed",JSON.stringify({threadID:this.$5}))};h.prototype.subscribe=function(a){return this.addRetroactiveListener("updated",a)};h.prototype.fetchMoreMessages=function(){if(this.hasFetchedAll())return!1;this.$12();return!0};h.prototype.hasFetchedAll=function(){return b("MessengerState.bs").hasLoadedAllMessages(this.$1,this.$5)||b("MessengerState.bs").isNewEmptyLocalThread(this.$1,this.$5)};h.prototype.$11=function(){return b("MessengerState.bs").getCurrentlyLoadedMessages(this.$1,this.$5).length};h.prototype.$12=function(){var a=this.$3;b("MessengerState.bs").getThreadMessagesRange(this.$1,this.$5,this.$11(),a,this.$13.bind(this),null,b("MercuryAPIArgsSource").MERCURY);this.$2<10&&(this.$2+=1);b("MessengerState.bs").hasLoadedNMessages(this.$1,this.$5,a+this.$11())&&b("setImmediate")(function(){this.$9()}.bind(this))};h.prototype.$13=function(a){g.debug("fetch_messages",JSON.stringify({threadID:this.$5,fetchedMessagesCount:a&&a.length||0,messageCount:this.$11()})),a&&!a.length&&!this.$11()&&this.$14(h.THREAD_IS_EMPTY)};h.prototype.$7=function(a){var b=[];a=a[this.$5];a&&a.length&&(b=b.concat(a.filter(function(a){return!!a})));b.length&&this.$14(h.MESSAGES_RECEIVED)};h.prototype.$8=function(a){this.$14(h.MESSAGES_CHANGED)};h.prototype.$9=function(){this.$14(h.MESSAGES_REORDERED)};h.prototype.$10=function(){this.$2=1,this.$12()};h.prototype.$14=function(a){var c=b("MessengerState.bs").getCurrentlyLoadedMessages(this.$1,this.$5);this.releaseHeldEventType("updated");this.emitAndHold("updated",{messages:c,eventType:a})};Object.assign(h,{MESSAGES_FETCHED:"fetched",MESSAGES_CHANGED:"changed",MESSAGES_RECEIVED:"received",MESSAGES_REORDERED:"reordered",THREAD_IS_EMPTY:"thread-is-empty"});b("mixInEventEmitter")(h,{updated:!0});e.exports=h}),null);
__d("MNCommerceDialogStateActions",["MessengerDispatcher","MNCommerceActionTypes"],(function(a,b,c,d,e,f){"use strict";a={showDialog:function(a,c){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").DIALOG.SHOW,dialogContainer:a,state:c})},hideDialog:function(){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").DIALOG.HIDE})}};e.exports=a}),null);
__d("MessengerSortParticipants",["immutable"],(function(a,b,c,d,e,f){a={sortAlphabeticalWithAdmins:function(a,b){var c=b.filter(function(b){return!!b&&a&&a.indexOf(b.fbid)!==-1}).toArray().sort(function(a,b){return a.name.localeCompare(b.name)});b=b.filter(function(b){return!!b&&(!a||a.indexOf(b.fbid)===-1)}).toArray().sort(function(a,b){return a.name.localeCompare(b.name)});return c.concat(b)}};e.exports=a}),null);