if (self.CavalryLogger) { CavalryLogger.start_js(["l8Jpm"]); }

__d("MessengerPlatformInterfaceType",[],(function(a,b,c,d,e,f){e.exports={UNKNOWN_INTERFACE:0,MESSENGER_INTERFACE:1,FB_INTERFACE:2,FB_POST_INTERFACE:3}}),null);
__d("PagesPrivateReplyConstants",[],(function(a,b,c,d,e,f){e.exports={Status:{REPLYABLE:"replyable",ALREADY_REPLIED:"already_replied",RECIPIENT_FILTER:"recipient_filter",EXPIRED:"expired",NOT_USER_CREATED:"not_user_created",CANNOT_MESSAGE:"cannot_message",MESSAGING_DISABLED:"messaging_disabled"},Type:{COMMENT_PAGE_POST:"comment_page_post",COMMENT_WALL_POST:"comment_wall_post",COMMENT_CUSTOMER_GROUP_USER_POST:"comment_customer_group_user_post",COMMENT_REVIEW:"comment_review",REVIEW:"review",RECOMMENDATION:"recommendation",WALL_POST:"wall_post"}}}),null);
__d("ConstituentBadgeEventEmitter",["EventEmitter"],(function(a,b,c,d,e,f){e.exports=new(b("EventEmitter"))()}),null);
__d("AuthorPinnedCommentEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COMMENT_PINNED:"comment_pinned",PINNED_COMMENT_REPLACED:"pinned_comment_replaced",COMMENT_UNPINNED:"comment_unpinned",PINNING_ATTEMPT:"pinning_attempt",REPLACING_ATTEMPT:"replacing_attempt",UNPINNING_ATTEMPT:"unpinning_attempt",NUX_DISPLAYED:"nux_displayed",NUX_DISMISSED:"nux_dismissed",NUX_IMPRESSION:"nux_impression",PIN_BUTTON_SHOWN:"pin_button_shown",UNPIN_BUTTON_SHOWN:"unpin_button_shown"})}),null);
__d("AuthorPinnedCommentsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:AuthorPinnedCommentsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:AuthorPinnedCommentsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:AuthorPinnedCommentsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setCommentID=function(a){this.$1.comment_id=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={comment_id:!0,event:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("AuthorPinnedCommentLogger",["AuthorPinnedCommentEvent","AuthorPinnedCommentsTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.logPinningCommentAttempt=function(a){this.$1(a,b("AuthorPinnedCommentEvent").PINNING_ATTEMPT)};a.prototype.logUnpinningCommentAttempt=function(a){this.$1(a,b("AuthorPinnedCommentEvent").UNPINNING_ATTEMPT)};a.prototype.logReplacingPinnedCommentAttempt=function(a){this.$1(a,b("AuthorPinnedCommentEvent").REPLACING_ATTEMPT)};a.prototype.logNuxDisplayed=function(a){this.$1(a,b("AuthorPinnedCommentEvent").NUX_DISPLAYED)};a.prototype.logNuxDismissed=function(a){this.$1(a,b("AuthorPinnedCommentEvent").NUX_DISMISSED)};a.prototype.logPinButtonShown=function(a){this.$1(a,b("AuthorPinnedCommentEvent").PIN_BUTTON_SHOWN)};a.prototype.logUnpinButtonShown=function(a){this.$1(a,b("AuthorPinnedCommentEvent").UNPIN_BUTTON_SHOWN)};a.prototype.$1=function(a,c){new(b("AuthorPinnedCommentsTypedLogger"))().setCommentID(a).setEvent(c).log()};function a(){}e.exports=new a()}),null);
__d("UFICommentVPVs",["MarauderLogger"],(function(a,b,c,d,e,f){"use strict";var g=new Map();function a(a,c){b("MarauderLogger").log("comment_vpv",void 0,null,"comment",c),g.has(a)||g.set(a,new Set()),g.get(a).add(c)}function c(a,b){return g.has(a)?g.get(a).has(b):!1}d={logVPV:a,hasLoggedVPV:c};e.exports=d}),null);
__d("UFIAddCommentAction",["CommentPrivacyValue","UFIAddCommentActionType","requireWeak"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={logPost:function(a,b){return void 0}};b("requireWeak")("PrivateCommentsLogger",function(a){g=a});a={cancel:function(a){return{type:b("UFIAddCommentActionType").CANCEL,instanceID:a.instanceid,ftentidentifier:a.ftentidentifier}},changeContent:function(a,c,d){return{type:b("UFIAddCommentActionType").CHANGE_CONTENT,instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,text:c,replyFBID:d}},retrySubmit:function(a,c){return{type:b("UFIAddCommentActionType").RETRY_SUBMIT,instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,comment:c}},submitEdit:function(a,c,d,e){return{type:b("UFIAddCommentActionType").SUBMIT_EDIT,instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,comment:c,commentData:d,target:e}},submitNew:function(a,c,d,e){g.logPost(c.privacy_value===b("CommentPrivacyValue").OWNER_OR_COMMENTER,a.ftentidentifier);return{type:b("UFIAddCommentActionType").SUBMIT_NEW,instanceID:a.instanceid,ftentidentifier:a.ftentidentifier,comment:c,target:d,replyCommentID:e,timestamp:Date.now()}}};e.exports=a}),null);
__d("UFICommercialBreakAdapter",["SubscriptionsHandler","UFIInstanceAction","UFISharedDispatcher","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){var d=c.getOption("VideoWithCommercialBreak","controller"),e=new(b("SubscriptionsHandler"))();if(b("gkx")("678266"))return e;d&&d.getIsCommercialBreakOngoing()&&b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").toggleCommercialBreak(a,!0));e.addSubscriptions(c.addListener("commercialBreak/hideUFI",function(){return b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").toggleCommercialBreak(a,!0))}),c.addListener("commercialBreak/showUFI",function(){return b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").toggleCommercialBreak(a,!1))}));return e}var h=new Map();e.exports={start:function(a,b){var c=a.instanceid;if(h.get(c))return;h.set(c,g(a,b))},stop:function(a){var b=h.get(a);if(!b)return;b.release();h["delete"](a)}}}),null);
__d("UFIDomRootAdapter",["csx","DOMQuery","FeedbackSourceType","Parent","UFIRootRegistry"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,b){"use strict";this.$2=null,this.$3=null,this.$5=null,this.$4=a,this.$1=b}a.prototype.getParentForm=function(){"use strict";if(!this.$2){var a=b("Parent").byTag(this.$4,"form");this.$2=a instanceof HTMLElement?a:null}return this.$2};a.prototype.getHeadRoot=function(){"use strict";if(!this.$3){var a=b("UFIRootRegistry").isSnowliftNode(this.$1.rootid);a=a&&this.$1.source!==b("FeedbackSourceType").LIVE_VIDEO_STORIES?"^.fbPhotosSnowliftFeedback ._37uu":"^form ._37uu";a=b("DOMQuery").scry(this.$4,a);this.$3=a&&a[0]||null}return this.$3};a.prototype.getSnowliftActionRoot=function(){"use strict";if(!this.$5){var a=b("DOMQuery").scry(this.$4,"^.snowliftPayloadRoot ._29qf ._37uu");this.$5=a&&a[0]||null}return this.$5};e.exports=a}),null);
__d("UFIPlayLiveVODHighlightsAdapter",["SubscriptionsHandler","UFIInstanceAction","UFISharedDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){c&&c.isPlayingVODHighlights()&&b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").playLiveVODHighlights(a,!0));var d=new(b("SubscriptionsHandler"))();d.addSubscriptions(c.addListener("playLiveVODHighlights/hideUFI",function(){return b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").playLiveVODHighlights(a,!0))}),c.addListener("playLiveVODHighlights/showUFI",function(){return b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").playLiveVODHighlights(a,!1))}));return d}var h=new Map();e.exports={start:function(a,b){var c=a.instanceid;if(h.get(c))return;h.set(c,g(a,b))},stop:function(a){var b=h.get(a);if(!b)return;b.release();h["delete"](a)}}}),null);
__d("UFICommentVPVDLoggingConfig",[],(function(a,b,c,d,e,f){"use strict";e.exports={idleTimeout:3e4,minDurationToLog:100,minVisibleSize:200}}),null);
__d("onCommentIsVisible",["cx","Arbiter","Parent","SubscriptionsHandler","UFICommentVPVDLoggingConfig","getFBAlphaConsoleSize","intersectionObserverEntryIsIntersecting","killswitch","observeIntersection","onViewportChanged"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1],i={height:0};function a(a,c,d){__p&&__p();var e;function f(a){return c(a)}function g(a){e!==a&&(e=a,d(a))}function j(a){if(b("intersectionObserverEntryIsIntersecting")(a)===!1)d(!1);else{var c=a.boundingClientRect,e=a.intersectionRect,f=a.rootBounds;c=c||i;e=e||i;f=f||i;e.height>=b("UFICommentVPVDLoggingConfig").minVisibleSize||e.height>=f.height/2||e.height===c.height||a.intersectionRatio>.95&&a.intersectionRatio<=1?d(!0):d(!1)}}function k(a){return b("Parent").byClass(a,"uiScrollableAreaWrap")}if(b("killswitch")("LOG_COMMENT_VPVD_USING_INTERSECTION_OBSERVER"))return b("onViewportChanged")(g,f);else{var l=function(){var c=n==null?"-44px 0px -"+b("getFBAlphaConsoleSize")().height+"px 0px":void 0;o&&o.remove();o=b("observeIntersection")(a,j,{root:n,rootMargin:c,threshold:h});m.addSubscriptions(o)},m=new(b("SubscriptionsHandler"))(),n=k(a),o=null;b("Arbiter").subscribe(["PhotoSnowlift.DATA_CHANGE","PhotoSnowlift.GO"],function(){var b=k(a);b&&b!==n&&(n=b,l())});l();var p=!1;return{remove:function(){if(p)return;p=!0;m.release()}}}}e.exports=a}),null);
__d("PinnedCommentEventCreateSubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"2250727954977320",queryID:"2218482948478923"})}),null);
__d("PinnedCommentEventCreateSubscription",["BaseGraphQLSubscription","PinnedCommentEventCreateSubscriptionWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("BaseGraphQLSubscription"));g&&g.prototype;a.prototype.getTopic=function(a){"use strict";return"gqls/"+this.getSubscriptionCallName()+"/video_id_"+a};a.prototype.getQueryID=function(){"use strict";return b("PinnedCommentEventCreateSubscriptionWebGraphQLSubscription").getDocID()};a.prototype.getQueryParameters=function(a){"use strict";return{input:JSON.stringify({client_subscription_id:b("uuid")(),video_id:a})}};a.prototype.getSubscriptionCallName=function(){"use strict";return"pinned_comment_event_create_subscribe"};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("FbFeedCommentUFIScroller",["DOMScroll","containsNode","ge","ifRequired"],(function(a,b,c,d,e,f){a={reveal:function(a){if(a){var c=b("ge")("content");c&&b("containsNode")(c,a)?b("DOMScroll").ensureVisible(a,null,60,250):b("ifRequired")("ScrollableArea",function(b){b=b.getInstance(a);b&&b.scrollIntoView(a)})}}};e.exports=a}),null);
__d("ClipboardPhotoUploader",["ArbiterMixin","AsyncRequest","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g;a=babelHelpers.inherits(h,b("mixin")(b("ArbiterMixin")));g=a&&a.prototype;function h(a,b){"use strict";g.constructor.call(this),this.uploadURIString=a,this.data=b}h.prototype.handlePaste=function(a){"use strict";__p&&__p();a=h.getImages(a);for(var c=0;c<a.length;++c){var d=new FormData();d.append("pasted_file",a[c]);var e=new(b("AsyncRequest"))();e.setURI(this.uploadURIString).setData(this.data).setRawData(d).setHandler(function(a){this.inform("upload_success",a)}.bind(this)).setErrorHandler(function(a){this.inform("upload_error",a)}.bind(this)).setAbortHandler(function(a){this.inform("upload_error",a)}.bind(this));this.inform("upload_start");e.send();break}};h.getImages=function(a){"use strict";__p&&__p();if(!a.clipboardData)return[];a=a.clipboardData.items;if(!a)return[];var b,c=[];for(var d=0;d<a.length;++d){b=a[d];if(b.kind==="string")return[];b.kind==="file"&&b.type.indexOf("image/")!==-1&&c.push(b.getAsFile());b.kind==="blob"&&c.push(b.blob)}return c};e.exports=h}),null);
__d("MentionsInputUtils",[],(function(a,b,c,d,e,f){a={generateDataFromTextWithEntities:function(a){var b=a.text,c=[];(a.ranges||[]).forEach(function(a){var d=a.entity;!d.external&&!a.videoTimestamp&&!a.sphericalViewport&&!a.campaign&&!/\D/.test(d.id)&&c.push({uid:d.id,text:b.substr(a.offset,a.length),offset:a.offset,length:a.length,weakreference:!!d.weakreference})});a={value:b,mentions:c,delights:(a.ranges||[]).filter(function(a){return a.campaign})};return a}};e.exports=a}),null);
__d("PrivateConversationsTreatment",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NONE:"none",FRIEND_CONVERSATIONS:"friend_conversations",SIDE_CONVERSATIONS:"side_conversations"})}),null);
__d("UFIAttachMediaSection.react",["cx","fbt","Bootloader","Focus","React","UFICommentFileInputAcceptValues","XUIError.react","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={bootloaded:!1,hasUploadFailure:!1},this.$1=null,this.$2=null,this.$3=function(){this.setState({hasUploadFailure:!1})}.bind(this),this.$4=function(){this.setState({hasUploadFailure:!1})}.bind(this),this.$5=function(){this.setState({hasUploadFailure:!0})}.bind(this),this.$6=function(a){this.props.onClick&&this.props.onClick();if(this.state.bootloaded)return;b("Bootloader").loadModules(["UFIUploader"],function(a){this.$1=new a(this.refs.inputContainer,this.refs.inputControl,this.refs.input,this.props.getPhotoUploadData,this.props.getFileUploadData,this.props.prepareForAttachedPhotoPreview,this.props.prepareForAttachedVideoPreview,this.props.prepareForAttachedFilePreview,this.props.onPhotoUploadComplete,this.props.onVideoEncodeUpdate,this.props.onVideoUploadUpdate,this.props.onVideoUploadComplete,this.props.onFileUploadComplete,this.props.setFileInput,this.props.viewerActorID,this.$3,this.$4,this.$5)}.bind(this),"UFIAttachMediaSection.react");this.setState({bootloaded:!0})}.bind(this),c}a.prototype.componentDidMount=function(){var a=this.refs,c=a.input;a=a.inputControl;c&&a&&(this.$2=b("Focus").relocate(c,a))};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.destroy(),this.$2&&(this.$2.remove(),this.$2=null)};a.prototype.render=function(){var a=b("gkx")("678288")&&this.props.allowFileAttachments,c=a?h._("Attach a file"):this.props.allowVideoAttachments?h._("Attach a photo or video"):h._("Attach a photo"),d=a?h._("There was a problem with attaching the file. Please try again"):h._("There was a problem with attaching the file, please try again"),e=this.state.hasUploadFailure;a=b("React").createElement("div",{className:"_r1a UFIPhotoAttachLinkWrapper _m"+(this.props.attachment?" _5t1p":""),"data-hover":e?null:"tooltip","data-tooltip-alignh":e?null:"center","data-tooltip-content":e?null:c,onClick:this.$6,ref:"inputContainer",role:"presentation"},b("React").createElement("span",{className:a?"UFICommentFileIcon":"UFICommentPhotoIcon",ref:"inputControl"},b("React").createElement("input",{accept:a?b("UFICommentFileInputAcceptValues").files:this.props.allowVideoAttachments?b("UFICommentFileInputAcceptValues").both:b("UFICommentFileInputAcceptValues").photos,"aria-label":c,className:"_n",name:"file",ref:"input",title:c,type:"file",key:"0"})));return b("React").createElement(b("XUIError.react"),{xuiError:e?d:null,xuiErrorPosition:"above",xuiErrorAlignh:"center"},a)};a.propTypes={getPhotoUploadData:c.func.isRequired,getFileUploadData:c.func,prepareForAttachedPhotoPreview:c.func.isRequired,prepareForAttachedVideoPreview:c.func,prepareForAttachedFilePreview:c.func,onPhotoUploadComplete:c.func.isRequired,onVideoUploadComplete:c.func,onVideoUploadUpdate:c.func,onVideoEncodeUpdate:c.func,onFileUploadComplete:c.func,onClick:c.func,setFileInput:c.func.isRequired,targetId:c.string,allowVideoAttachments:c.bool,allowFileAttachments:c.bool,attachment:c.object,viewerActorID:c.string.isRequired};e.exports=a}),null);
__d("UFIGifButton.react",["cx","fbt","Arbiter","Bootloader","FocusRelocator.react","LayerTabIsolation","Link.react","MessengerPlatformInterfaceType","React","SubscriptionsHandler"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=278;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){__p&&__p();i.constructor.call(this),this.$5=function(){this.setState({flyoutShown:!1,query:""})}.bind(this),this.$8=function(){this.$3=this.state.flyoutShown}.bind(this),this.$7=function(a){__p&&__p();a.preventDefault();if(this.state.renderFlyout!==null){this.$3||(this.props.onGifFlyoutShow&&this.props.onGifFlyoutShow(),this.setState({flyoutShown:!0}));return}a=b("Bootloader").loadModules(["XUIContextualDialog.react","ChatContentSearchFlyout.react","ContextualLayerAutoFlip"],function(a,c,d){this.setState({flyoutShown:!0,renderFlyout:function(){return b("React").createElement(a,{alignment:"right",behaviors:{flip:d,LayerTabIsolation:b("LayerTabIsolation")},className:"_5trk",contextRef:function(){return this.$1}.bind(this),onBlur:this.$5,onToggle:function(a){!a&&this.state.flyoutShown&&this.$5()}.bind(this),position:"above",shown:this.state.flyoutShown,hasActionableContext:!0,width:j},b("React").createElement("div",null,b("React").createElement(c,{onEscKeyDown:this.$5,onSelect:this.$9,query:this.state.query,shown:this.state.flyoutShown,searchInterface:b("MessengerPlatformInterfaceType").FB_INTERFACE,queryDefault:this.props.defaultGifSelection})))}.bind(this)}),this.props.onGifFlyoutShow&&this.props.onGifFlyoutShow()}.bind(this),"UFIGifButton.react");this.$4.addSubscriptions(a)}.bind(this),this.$9=function(a){this.props.onGifSelected(a),this.$5()}.bind(this),this.$6=function(a){this.$1=a}.bind(this),this.state={renderFlyout:null,flyoutShown:!1,query:""}}a.prototype.componentDidMount=function(){this.$4=new(b("SubscriptionsHandler"))(),this.$2=b("Arbiter").subscribe("page_transition",function(){return this.$5()}.bind(this))};a.prototype.componentWillUnmount=function(){this.$2&&this.$2.unsubscribe(),this.$4&&this.$4.release(),delete this.$4};a.prototype.render=function(){var a=h._("Post a GIF"),c=this.state.renderFlyout&&this.state.flyoutShown?this.state.renderFlyout():null;return b("React").createElement(b("FocusRelocator.react"),{from:this.$1,to:this.refs.icon},b("React").createElement(b("Link.react"),{"aria-label":a,className:"_r1a UFICommentGifButton","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":this.props.showTooltip?a:null,linkRef:this.$6,onClick:this.$7,onMouseDown:this.$8,role:"button"},b("React").createElement("div",{ref:"icon",className:"UFICommentGifIcon"+(this.state.flyoutShown?" UFICommentGifIconActive":"")}),this.props.children,c))};a.defaultProps={children:[],showTooltip:!0,defaultGifSelection:null};e.exports=a}),null);
__d("UFIGroupedInputTabs",["CacheStorage"],(function(a,b,c,d,e,f){"use strict";var g=Object.freeze({EMOJI:"EMOJI",STICKER:"STICKER",GIF:"GIF"}),h="last_used_input_on_composer",i=new(b("CacheStorage"))("localstorage");a=function(){return i.get(h,g.STICKER)};c=function(a){i.set(h,a)};e.exports={InputTitleEnum:g,getLastUsedTab:a,setLastUsedTab:c}}),null);
__d("UFIMarkdownButton.react",["cx","fbt","Link.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=h._("Format text with markdown");return b("React").createElement(b("Link.react"),{className:"_r1a _45-m","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":a,"aria-label":a,onClick:this.props.onClick},b("React").createElement("div",{tabIndex:0,className:"_45-n"+(this.props.active?" _45-o":"")}))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("XConstituentBadgeV2OptInDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/constituent_badge/v2_opt_in_dialog/",{ft_id:{type:"String"},should_refresh:{type:"Bool",defaultValue:!1},__asyncDialog:{type:"Int"}})}),null);
__d("XUFICommentGIFPreprocessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/gif_preprocess/",{})}),null);
__d("XUFICommentMarkdownPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/markdown_preview/",{comment_body:{type:"String"}})}),null);
__d("UFIAddComment.react",["cx","fbt","invariant","AccessibilityConfig","ActorURI","Arbiter","AsyncRequest","Badge.react","BootloadedComponent.react","Bootloader","ClipboardPhotoUploader","CommentPrivacyValue","ConstituentBadgeEventEmitter","CurrentUser","DOMScroll","EmojiInputButton.react","Event","FeedbackSourceType","JSResource","Keys","Link.react","LitestandStoryInsertionStatus","MentionsInputUtils","MercuryIDs","PrivateCommentsConfig","PrivateConversationsTreatment","React","ReactDOM","Run","SearchableEntry","SubscriptionsHandler","SutroStoryHeaderUFIGatingConfig","TextWithEntities.react","TrackingNodes","UFIActorIconContainer.react","UFIAddCommentAction","UFIAttachMediaSection.react","UFIBotsButton","UFICommercialBreakStore","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIComposerIsTypingStore","UFIConfig","UFIGifButton.react","UFIGroupedInputTabs","UFIImageBlock.react","UFIInsightsSharingCommentTag.react","UFIMarkdownButton.react","UFINavigationCheck","UFIODSLogger","UFIPlayLiveVODHighlightsStore","UFISharedDispatcher","UFIStickerButton.react","UFIThreadedFacecastCommentsStore","UFIVersion","WebFunnelLogger","WritingAssistanceTypedLogger","XBasicFBNuxDismissController","XBasicFBNuxGenShouldShowController","XBasicFBNuxViewController","XConstituentBadgeV2OptInDialogController","XFeedNUXSaveSeenStateController","XUFICommentGIFPreprocessController","XUFICommentMarkdownPreviewController","XUISpinner.react","XUIText.react","getActiveElement","ifRequired","immutable","joinClasses","lazyLoadComponent","promiseDone","requireCond","requireWeak","textProbablyWritingMarkdown","throttle","uuid","cr:682211","cr:719006"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("UFIBotsButton").module,l=b("UFIGroupedInputTabs").InputTitleEnum,m=b("UFIGroupedInputTabs").setLastUsedTab,n={startFunnel:function(a){return void 0},logViewerInteracted:function(a){return void 0},logToggle:function(a,b){return void 0}};b("requireWeak")("PrivateCommentsLogger",function(a){n=a});var o=a.URL||a.webkitURL||{};c=b("React").PropTypes;var p=h._("Write a comment..."),q=h._("Write a reply..."),r="fcg fss UFICommentTip",s=h._("Write something..."),t=19,u="/ajax/ufi/upload/",v="/ajax/ufi/sticker_preview/",w=1e3,x="comment_content_change",y=Object.freeze({UPLOAD:"uploading",ENCODE:"encoding"}),z=5572,A=/@\[([0-9;]+):((?:[^\\\]]|\\.)*)\]/g,B=b("lazyLoadComponent")(b("JSResource")("UFICommentPivotBlock.react").__setRef("UFIAddComment.react")),C=b("lazyLoadComponent")(b("JSResource")("UFICommentPivotFailedDialog.react").__setRef("UFIAddComment.react")),D=b("lazyLoadComponent")(b("JSResource")("UFIAddMentionsButton.react").__setRef("UFIAddComment.react")),E=!1,F=!1,G=!1;d=babelHelpers.inherits(H,b("React").Component);j=d&&d.prototype;H.renderEditCommentBox=function(a,c,d){__p&&__p();a=babelHelpers["extends"]({},a);delete a.addcommentautoflip;delete a.collapseaddcomment;delete a.hideActorPhoto;delete a.issnowlift;delete a.loggedOutLinkConfig;delete a.monitorHeight;delete a.sht;delete a.viewoptionstypeobjects;delete a.viewoptionstypeobjectsorder;return b("React").createElement(H,{key:"editing_comment"+c.id,viewerActorID:d.actorforpost,targetID:d.ownerid,groupID:d.grouporeventid,mentionsDataSource:d.mentionsdatasource,contextArgs:a,isEditing:!0,editingComment:c,allowVideoAttachments:d.allowvideoattachments,allowPhotoAttachments:d.allowphotoattachments,allowFileAttachments:d.allowfileattachments,allowStickerAttachments:d.allowstickerattachments,allowGifAttachments:d.allowgifattachments,allowBotMentions:d.allowbotmentions,allowTogglePrivateComments:!1,privateCommentTarget:d.actorname,allowCommentMarkdown:d.iscommentmarkdowneligible,showconstituentbadgev2optin:d.showconstituentbadgev2optin,constituentBanner:d.constituentbanneruri})};function H(c){__p&&__p();j.constructor.call(this,c);this.$4=!1;this.$19=function(a){this.props.isEditing&&b("Event").getKeyCode(a.nativeEvent)===b("Keys").ESC&&this.context.dispatch(b("UFIAddCommentAction").cancel(this.props.contextArgs));this.$1&&!this.$5&&(b("Run").onBeforeUnload(this.$20),this.$5=!0);var c=b("getActiveElement")();c&&b("Event").getKeyCode(a.nativeEvent)===b("Keys").ESC&&c.blur()}.bind(this);this.$21=function(a){this.$2&&!this.$4&&(new(b("WebFunnelLogger"))("GUFIComposerWebFunnelDefinition").setSessionKey(this.$2).setAction("first_input").log(),this.$4=!0),b("UFISharedDispatcher").dispatch(b("UFIAddCommentAction").changeContent(this.props.contextArgs,a,this.$22())),b("Arbiter").inform(x,{fbid:this.$22(),text:a,instanceid:this.props.contextArgs.instanceid,ftentidentifier:this.props.contextArgs.ftentidentifier}),this.props.allowCommentMarkdown&&this.state.commentMarkdownEnabled&&this.$23(a),this.props.allowCommentFixSuggestions&&(this.$24(a),this.state.commentSuggestionsShowing&&!this.state.hasStaleSuggestions&&this.setState({hasStaleSuggestions:!0})),this.props.contextArgs.messengerCommentPivotsParams&&this.props.contextArgs.messengerCommentPivotsParams.enabled&&this.$25(a),this.state.groupedInputNUXShown&&this.$26()}.bind(this);this.$23=function(a){a=b("XUFICommentMarkdownPreviewController").getURIBuilder().setString("comment_body",a).getURI();new(b("AsyncRequest"))(a).setHandler(this.$30).send()}.bind(this);this.$30=function(a){if(!a)return;this.setState({commentMarkdownPreviewContent:a.payload?a.payload.markup:null})}.bind(this);this.$20=function(){if(a.PageTransitions&&!b("UFINavigationCheck").isLeaving(a.PageTransitions))return;if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return h._("You haven't finished your comment yet. Do you want to leave without finishing?")}.bind(this);this.$32=function(){this.setState({markdownNUXVisible:!1,gifsInCommentsNUXVisible:!1,groupedInputNUXShown:!1,privateCommentNUXVisible:!1});window.setTimeout(function(){this.$1&&this.setState({isFocused:!1})}.bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:!1})}.bind(this);this.$33=function(a){var c=new(b("ClipboardPhotoUploader"))(u,this.$34());this.$35();this.$6=[c.subscribe("upload_start",this.$36),c.subscribe("upload_error",this.$37),c.subscribe("upload_success",function(a,b){this.$38(b)}.bind(this))];c.handlePaste(a)}.bind(this);this.$42=function(a,b){var c=this.props.isEditing||this.state.hasAttachment,d=a.encodedValue&&a.encodedValue.trim(),e=this.state.isLoadingPhoto||this.$43()||this.state.isLoadingFile;if(e||!c&&!d)return!1;else if(!c&&this.state.showMessengerPivot&&this.state.shouldSendAsMessage){e=a.encodedValue=a.encodedValue?a.encodedValue.trim():"";return this.$44(e)}else return this.$45(a,b)}.bind(this);this.$49=function(){this.$39()}.bind(this);this.focus=function(){__p&&__p();this.$39();var a={isCommenting:!0,isFocused:!0},c=this.props.contextArgs.loggedOutLinkConfig;c&&c.showAddComment&&b("Bootloader").loadModules(["AsyncDialog"],function(a){a.bootstrap(c.addCommentAjaxifyURI,null,"dialog")},"UFIAddComment.react");this.refs.groupedInputButton&&b("Bootloader").loadModules(["SimpleNUXMessage","SimpleNUXMessageTypes"],function(a,b){a.hasUserSeenMessage(b.MERGE_INPUT_COMPOSER_NUX)||(this.setState({groupedInputNUXShown:!0}),a.markMessageSeenByUser(b.MERGE_INPUT_COMPOSER_NUX))}.bind(this),"UFIAddComment.react");if(this.props.allowGifAttachments&&b("UFIConfig").shouldShowGIFsInCommentsNux&&!E){E=!0;var d=b("XFeedNUXSaveSeenStateController").getURIBuilder().setString("key","gif_comments").setBool("seen",!0).getURI();new(b("AsyncRequest"))(d).send();a.gifsInCommentsNUXVisible=!0}if(this.props.allowCommentMarkdown&&b("UFIConfig").shouldShowMarkdownCommentNUX&&!b("UFIConfig").shouldShowGIFsInCommentsNux&&!F){F=!0;d=b("XFeedNUXSaveSeenStateController").getURIBuilder().setString("key","markdown_comments").setBool("seen",!0).getURI();new(b("AsyncRequest"))(d).send();a.markdownNUXVisible=!0}if(this.props.allowTogglePrivateComments&&!(this.state.gifsInCommentsNUXVisible||a.gifsInCommentsNUXVisible)&&!(this.state.markdownNUXVisible||a.markdownNUXVisible)&&!G){G=!0;d=b("XBasicFBNuxGenShouldShowController").getURIBuilder().setInt("nux_id",z).getURI();new(b("AsyncRequest"))().setURI(d).setMethod("GET").setReadOnly(!0).setHandler(function(a){a=a.getPayload();if(a&&a.should_show_nux){a=b("XBasicFBNuxViewController").getURIBuilder().setInt("nux_id",z).getURI();new(b("AsyncRequest"))().setURI(a).send();this.setState({privateCommentNUXVisible:!0})}}.bind(this)).send()}if(this.state.showConstituentBadgeV2OptIn){d=b("XConstituentBadgeV2OptInDialogController").getURIBuilder().setString("ft_id",this.props.commentsTargetID).getURI();new(b("AsyncRequest"))().setURI(d).send()}this.setState(a);this.markViewerHasInteracted();this.props.onFocus&&this.props.onFocus();b("Arbiter").inform("UFIAddComment/focus",{instanceid:this.props.contextArgs.instanceid,ftentidentifier:this.props.contextArgs.ftentidentifier,isTopLevelComposer:this.props.isTopLevelComposer})}.bind(this);this.$59=function(a,b){this.setState({fileInput:a,fileUploader:b})}.bind(this);this.handleMessengerPivotClick=function(){this.setState(function(a){this.$28(a.shouldSendAsMessage?"pivot disabled":"pivot enabled");return{shouldSendAsMessage:!a.shouldSendAsMessage}}.bind(this)),this.refs.mentionsinput.focus()}.bind(this);this.$60=function(a){m(l.EMOJI),this.refs.mentionsinput.insertEmoji(a)}.bind(this);this.$61=function(a){m(l.STICKER),this.$66(a),this.$65(!1)}.bind(this);this.$64=function(a,b){m(l.STICKER),this.onStickerSelected(a,b),this.$65(!1)}.bind(this);this.$62=function(a){m(l.GIF),this.onGifSelected(a),this.$65(!1)}.bind(this);this.$65=function(a){a!==this.state.flyoutShown&&this.setState({flyoutShown:a})}.bind(this);this.$67=function(){this.state.customStickerNUXShown&&this.$51()}.bind(this);this.$63=function(){this.state.flyoutShown||this.markViewerHasInteracted(),this.state.groupedInputNUXShown&&this.$26(),this.state.customStickerNUXShown&&this.$51()}.bind(this);this.$34=function(){var a=this.props.viewerActorID,c={profile_id:a,target_id:this.props.targetID,source:t};c[b("ActorURI").PARAMETER_ACTOR]=a;return c}.bind(this);this.$38=function(a){if(!this.state.isLoadingPhoto)return;a=a.getPayload();a&&a.fbid?this.setState({attachedPhoto:a,isLoadingPhoto:!1}):this.$37(null)}.bind(this);this.$68=function(){var a=this.props.viewerActorID,c={profile_id:a,target_id:this.props.targetID};c[b("ActorURI").PARAMETER_ACTOR]=a;return c}.bind(this);this.$71=function(a){if(!this.state.isLoadingFile)return;a=a.getPayload();a&&a.fbid?this.setState({attachedFile:a,isLoadingFile:!1}):this.$37(null)}.bind(this);this.$73=function(a,b){if(!this.state.attachedVideo||this.state.videoStatus!==y.ENCODE)return;if(b.obj.progress<this.state.videoProgress)return;b.obj.fbid=b.obj.videoID;if(this.state.attachedVideo.fbid&&this.state.attachedVideo.fbid!==b.obj.fbid)return;this.setState({attachedVideo:b.obj,videoProgress:b.obj.progress,videoStatus:y.ENCODE});this.$85(b.obj.stage)&&this.$86()}.bind(this);this.$74=function(a){this.setState({videoProgress:a})}.bind(this);this.$72=function(a){if(this.state.videoStatus!==y.UPLOAD)return;a&&a.video_id&&this.setState({videoProgress:0,attachedVideo:a,videoStatus:y.ENCODE})}.bind(this);this.$37=function(a){b("Arbiter").inform("video_upload_cancel",{}),this.state.fileInput&&this.state.fileInput.clear(),this.setState({attachedPhoto:null,attachedVideo:null,attachedFile:null,attachedGIF:null,attachedStars:null,videoStatus:null,videoFileURL:null,isLoadingPhoto:!1,videoProgress:0,isVideoFileTranscodedGIF:!1,hasAttachment:!1})}.bind(this);this.$36=function(){this.setState({attachedPhoto:null,isLoadingPhoto:!0})}.bind(this);this.$70=function(){this.setState({attachedFile:null,isLoadingFile:!0})}.bind(this);this.$69=function(){var a,b=this.state.fileInput?this.state.fileInput.input:null;b=b?b.files[0]:null;b&&o.createObjectURL&&(a=o.createObjectURL(b));this.setState({attachedVideo:null,videoStatus:y.UPLOAD,videoFileURL:a,videoProgress:0,isVideoFileTranscodedGIF:Boolean(b&&b.type==="image/gif")})}.bind(this);this.$87=function(a){if(!this.state.isLoadingPhoto)return;a=a.getPayload();a&&a.fbid?this.$84({attachedSticker:a,isLoadingPhoto:!1}):(b("Bootloader").loadModules(["Dialog"],function(a){var b=h._("Sticker Failed"),c=h._("There was a problem with attaching the sticker.");new a().setTitle(b).setBody(c).setButtons(a.OK).show()},"UFIAddComment.react"),this.$76(null))}.bind(this);this.$76=function(a){this.setState({attachedSticker:null,isLoadingPhoto:!1,hasAttachment:!1})}.bind(this);this.$75=function(a){b("Bootloader").loadModules(["FunnelLogger"],function(a){a.appendAction("FLEXIBLE_STARS_WWW_FUNNEL","dismissed_star_attachment"),a.endFunnel("FLEXIBLE_STARS_WWW_FUNNEL")},"UFIAddComment.react"),this.$37(a)}.bind(this);this.onStickerSelected=function(a,b){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this.$83(a);return}this.sendSticker(a,b)}.bind(this);this.onStarsSelected=function(a){var b=this.getMatchingStarTippedValue(a.quantity,a.promotionEvent),c=a.quantity;this.setState({attachedStars:{previewImageSrc:a.previewImageSrc,metadata:c+b,userTippedQuantity:c,matchingQuantity:b,promotionEvent:this.isPromotionMatchingEnabled(a.promotionEvent)?a.promotionEvent:null,type:"SEND_STARS"}})}.bind(this);this.$66=function(a){__p&&__p();b("Bootloader").loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],function(c,d,e,f){__p&&__p();c=c.symbols[a];if(!c)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(c);return}this.$16||(this.$16=new f(b("ReactDOM").findDOMNode(this.refs.mentionsinput.refs.textarea)));f=this.refs.mentionsinput.refs.getTextFieldDOM();e=e.getInstance(f);f=e.getValue();this.$16||i(0,1935);d=d.insertEmoticon(c,f,this.$16.getPos());e.setValue(d.result);this.$16||i(0,1935);this.$16.setPos(d.start,d.end)}.bind(this),"UFIAddComment.react")}.bind(this);this.$51=function(){this.setState({customStickerNUXShown:!1})}.bind(this);this.$54=function(){this.setState({markdownNUXVisible:!1})}.bind(this);this.$26=function(){this.setState({groupedInputNUXShown:!1})}.bind(this);this.$58=function(){var a=b("XBasicFBNuxDismissController").getURIBuilder().setInt("nux_id",z).getURI();new(b("AsyncRequest"))().setURI(a).send();this.setState({privateCommentNUXVisible:!1})}.bind(this);this.onGifSelected=function(a){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this.$84({attachedGIF:a});this.preprocessGIF(a);return}this.sendGIF(a)}.bind(this);this.$77=function(a,b){this.setState(function(c){c[a]=b;return{mentionsData:c}},function(){this.props.contextArgs.messengerCommentPivotsParams&&this.props.contextArgs.messengerCommentPivotsParams.enabled&&this.$27()}.bind(this))}.bind(this);this.$1=!1;var d=this.props.editingComment,e=d.attachment,f=e?e.type:null,g=f==="photo"?e:null;this.state={attachedPhoto:d.photo_comment||g,attachedVideo:d.video_comment||null,attachedFile:d.file_comment||null,attachedSticker:f=="sticker"?e:null,attachedGIF:f=="gif"?e:null,attachedStars:f=="SEND_STARS"?e:null,commentMarkdownPreviewContent:d.body?d.body.markup||null:null,commentMarkdownEnabled:d.body?d.body.markdown_enabled||!1:!1,currentThreadedFacecastCommentID:b("UFIThreadedFacecastCommentsStore").getCommentID(c.contextArgs.instanceid),addCommentNUXShown:this.props.contextArgs.permalinkAddCommentNuxShown||!1,commentPrivacy:d.privacy_value||this.props.replyCommentPrivacy||b("CommentPrivacyValue").DEFAULT_PRIVACY,showConstituentBadgeV2OptIn:Boolean(this.props.showConstituentBadgeV2OptIn),constituentBannerState:String(this.props.constituentBanner),customStickerNUXShown:!1,commentSuggestionsShowing:!1,videoStatus:null,videoFileURL:null,videoProgress:0,isVideoFileTranscodedGIF:!1,fileInput:null,fileUploader:null,flyoutShown:!1,isCommenting:!1,isLoadingPhoto:!1,isLoadingFile:!1,isFocused:Boolean(this.props.isEditing),gifsInCommentsNUXVisible:!1,groupedInputNUXShown:!1,markdownNUXVisible:!1,privateCommentNUXVisible:!1,hasPotentialSuggestions:!1,hasStaleSuggestions:!1,isInitialSuggestionCheck:!0,inCommercialBreak:!1,isPlayingLiveVODHighlights:!1,showFailedMessageDialog:!1,showMessengerPivot:!1,shouldSendAsMessage:!1,isSendingMessage:!1,hasAttachment:!1,mentionsData:{},currentMentionIds:[],currentMentionOffsets:[],videoTrimParams:null,selectedInsightPoint:null};g=this.state.attachedPhoto||this.state.attachedVideo||this.state.attachedFile||this.state.attachedGIF||this.state.attachedSticker||this.state.attachedStars;this.state.hasAttachment=!!g;b("Run").onLoad(function(){b("Bootloader").loadModules(["UFIAddCommentLiveTypingController"],function(){},"UFIAddComment.react")})}H.prototype.$25=function(a){this.setState(function(){var b=this.parseTextForMentions(a).map(function(a){return a.uid}),c=this.parseTextForMentions(a).map(function(a){return a.offset});return{currentMentionIds:b,currentMentionOffsets:c}}.bind(this),function(){this.$27()}.bind(this))};H.prototype.$27=function(){__p&&__p();if(this.props.contextArgs.shareLinkConfig&&!this.$22()&&!this.props.isEditing){var a=this.state.currentMentionIds.length>=1,b=this.state.currentMentionOffsets.findIndex(function(a){return a===0})!==-1;if((!a||!b)&&this.state.showMessengerPivot)this.$28("pivot hidden"),this.setState({showMessengerPivot:!1});else if(a&&b){var c=!0;a=!1;b=this.state.currentMentionIds.length;for(var d=0;d<b;d++){var e=this.state.currentMentionIds[d];if(!this.state.mentionsData[e]){a=!0;break}else if(this.state.mentionsData[e]!=="user"){c=!1;break}}a||this.setState(function(a){if(c!==a.showMessengerPivot){this.$29();this.$28(a.showMessengerPivot?"pivot hidden":"pivot shown");return{showMessengerPivot:!a.showMessengerPivot}}return{}}.bind(this))}}};H.prototype.$31=function(a){__p&&__p();if(!this.$17||this.$17.length===a.length)return!1;var b,c;this.$17.length>a.length?(b=this.$17,c=a):(b=a,c=this.$17);a=null;var d=0;while(a===null&&d<c.length)c[d]!==b[d]&&(a=b[d]),d++;if(a===null)a=b[b.length-1];else{c=b[d];if(!/[a-zA-Z\-\']/.test(c))return!1}return!/[a-zA-Z\-\']/.test(a)};H.prototype.$24=function(a){__p&&__p();if(!this.$31(a)){this.$17=a;return}this.$17=a;var c=a.match(/[a-zA-z\-\']+/g);if(!c)return;var d=b("AccessibilityConfig").svTypicalDyslexiaMisspellings,e=!1;a=a.toUpperCase()===a;for(var c=c,f=Array.isArray(c),g=0,c=f?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=c.length)break;h=c[g++]}else{g=c.next();if(g.done)break;h=g.value}h=h;if(a||h.toUpperCase()!==h){h=h.toLowerCase();d.includes(h)&&(e=!0)}}if(this.state.hasPotentialSuggestions===e)return;this.setState({hasPotentialSuggestions:e});e&&new(b("WritingAssistanceTypedLogger"))().setAction("badge_shown").setValue("true").log()};H.prototype.$39=function(){this.$2||(this.$2=this.props.viewerActorID+"_"+Date.now(),new(b("WebFunnelLogger"))("GUFIComposerWebFunnelDefinition").setSessionKey(this.$2).setAction("focus").setFunnelTags(["depth_"+(this.$22()?"1":"0")]).markStart().log())};H.prototype.$40=function(){this.$2&&(new(b("WebFunnelLogger"))("GUFIComposerWebFunnelDefinition").setSessionKey(this.$2).setAction("commit").markEnd().log(),delete this.$2,this.$4=!1)};H.prototype.$29=function(){this.$3||(this.$3=""+Date.now(),new(b("WebFunnelLogger"))("UFIMessengerPivotsWebFunnelDefinition").setSessionKey(this.$3).setAction("Start").markStart().log())};H.prototype.$41=function(){this.$3&&(new(b("WebFunnelLogger"))("UFIMessengerPivotsWebFunnelDefinition").setSessionKey(this.$3).setAction("Commit").markEnd().log(),this.$3=null)};H.prototype.$28=function(a){this.$3&&new(b("WebFunnelLogger"))("UFIMessengerPivotsWebFunnelDefinition").setSessionKey(this.$3).setAction(a).log()};H.prototype.$45=function(a,c){__p&&__p();this.setState({showMessengerPivot:!1});this.$28("comment posted");this.$41();a.encodedValue=a.encodedValue?a.encodedValue.trim():"";this.state.commentMarkdownEnabled?(a.isMarkdown=!0,this.setState({commentMarkdownEnabled:!1,commentMarkdownPreviewContent:null})):this.props.allowCommentMarkdown&&!a.isMarkdown&&(a.isMarkdown=b("textProbablyWritingMarkdown")(a.encodedValue));this.state.commentPrivacy&&(a.privacy_value=this.state.commentPrivacy);this.state.selectedInsightPoint&&(a.selectedInsightPoint=this.state.selectedInsightPoint);this.state.hasAttachment?(a.attachedPhoto=this.state.attachedPhoto,a.attachedVideo=this.state.attachedVideo,a.attachedFile=this.state.attachedFile,a.attachedSticker=this.state.attachedSticker,a.attachedStars=this.state.attachedStars,this.state.attachedGIF&&(this.state.attachedGIF.source?a.attachedShareURL=this.state.attachedGIF.source.url:this.state.attachedGIF.originalImageUrl&&(a.attachedShareURL=this.state.attachedGIF.originalImageUrl)),this.setState({isLoadingPhoto:!1,isLoadingFile:!1,attachedPhoto:null,attachedVideo:null,attachedFile:null,attachedSticker:null,attachedGIF:null,attachedStars:null,hasAttachment:!1})):(a.attachedPhoto=null,a.attachedVideo=null,a.attachedFile=null,a.attachedSticker=null,a.attachedGIF=null,a.attachedShareURL=null,a.attachedStars=null);if(this.props.isEditing)this.context.dispatch(b("UFIAddCommentAction").submitEdit(this.props.contextArgs,this.props.editingComment,a,c.target));else if(this.state.attachedStars)this.$46(a);else{var d=b("UFICommonInteractionLogger").makeTrackingID();b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI_OPTIMISTIC_COMMENT,d+b("UFICommonInteractionEvents").UFI_OPTIMISTIC_COMMENT);b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI_PERSISTED_COMMENT,d+b("UFICommonInteractionEvents").UFI_PERSISTED_COMMENT);a.trackingID=d;this.context.dispatch(b("UFIAddCommentAction").submitNew(this.props.contextArgs,a,c.target,this.$22()))}this.$40();this.$47();return!0};H.prototype.$46=function(a){var c,d=(c=this.state.attachedStars)==null?void 0:c.userTippedQuantity,e=this.props.targetID,f=(c=this.state.attachedStars)==null?void 0:c.matchingQuantity,g=(c=this.state.attachedStars)==null?void 0:(c=c.promotionEvent)==null?void 0:c.id;d&&e&&b("Bootloader").loadModules(["VideoStarsSpendMutationWebGraphQLMutation","WebGraphQL","FunnelLogger"],function(c,h,i){b("promiseDone")(h.exec(new c({input:{actor_id:this.props.viewerActorID,client_mutation_id:b("uuid")(),comment:a.encodedValue,payee_id:e,platform:"FB",spending_units:d,matching_units:f,video_id:this.props.commentsTargetID,wallet_promotion_id:g,wallet_type:"FB_STARS"}})),null,function(a){this.setState({isSendingMessage:!1,showFailedMessageDialog:!0})}.bind(this)),i.appendActionWithTag("FLEXIBLE_STARS_WWW_FUNNEL","sent_stars",d),i.endFunnel("FLEXIBLE_STARS_WWW_FUNNEL")}.bind(this),"UFIAddComment.react")};H.prototype.$44=function(a){__p&&__p();this.$40();this.$28("begin message send");this.setState({isSendingMessage:!0});var c=b("Bootloader").loadModules(["FantaTabActions","MercurySourceType","XMessengerPivotsController","UFICommentPivotFailedDialog.react"],function(d,e,f,c){__p&&__p();e=f.getURIBuilder().setString("comment_body",a).setFBID("ft_ent_identifier",this.props.contextArgs.ftentidentifier).getURI();new(b("AsyncRequest"))(e).setHandler(function(c){var e=[{startIndex:0,changeCount:a.length,changeValue:""}];this.refs.mentionsinput.replaceText("",e);this.setState({showMessengerPivot:!1,isSendingMessage:!1});e=c.payload;e.id&&(e.isGroup?d.openTab(b("MercuryIDs").getThreadIDFromThreadFBID(e.id.toString())):d.openTab(b("MercuryIDs").getThreadIDFromUserID(e.id.toString())));this.$28("send succeeded");this.$41()}.bind(this)).setErrorHandler(function(a){this.setState({isSendingMessage:!1,showFailedMessageDialog:!0}),this.$28("send failed")}.bind(this)).send()}.bind(this),"UFIAddComment.react");this.$7.addSubscriptions(c);this.refs.mentionsinput.focus();return!1};H.prototype.$43=function(){return this.state.videoStatus===y.UPLOAD||this.state.videoStatus===y.ENCODE&&this.state.videoProgress!==100};H.prototype.$35=function(){this.$6&&this.$6.forEach(function(a){a.unsubscribe()})};H.prototype.UNSAFE_componentWillMount=function(){__p&&__p();this.$5=!1,this.$9=b("LitestandStoryInsertionStatus").registerBlocker(function(){return this.state.isCommenting}.bind(this)),this.$7&&this.$7.release(),this.$7=new(b("SubscriptionsHandler"))(),this.$7.addSubscriptions(b("UFICommercialBreakStore").addListener(function(){this.setState({inCommercialBreak:b("UFICommercialBreakStore").getValueFor(this.props.contextArgs.instanceid)})}.bind(this)),b("UFIPlayLiveVODHighlightsStore").addListener(function(){this.setState({isPlayingLiveVODHighlights:b("UFIPlayLiveVODHighlightsStore").getValueFor(this.props.contextArgs.instanceid)})}.bind(this)),b("ConstituentBadgeEventEmitter").addListener("ConstituentBadgeV2OptInModal",function(a){if(!a){this.setState({showConstituentBadgeV2OptIn:!1});return}this.setState({constituentBannerState:a.turn_off?null:this.props.constituentBanner,showConstituentBadgeV2OptIn:!1})}.bind(this))),this.props.allowLiveVideoCommentReplyMode&&(this.props.contextArgs.islivestreaming||this.props.contextArgs.isLiveVOD)&&this.$7.addSubscriptions(b("UFIThreadedFacecastCommentsStore").addListener(function(){var a=this.state.currentThreadedFacecastCommentID,c=b("UFIThreadedFacecastCommentsStore").getCommentID(this.props.contextArgs.instanceid);this.setState({currentThreadedFacecastCommentID:c});c!==a&&this.focus()}.bind(this))),this.$8=null,b("UFIConfig").canPublishLive&&this.$7.addSubscriptions(b("UFIComposerIsTypingStore").addListener(function(){var a=b("UFIComposerIsTypingStore").getValueFor(this.props.contextArgs.ftentidentifier);if(a===null)return;b("Bootloader").loadModules(["UFIAddCommentLiveTypingController"],function(b){this.$8||(this.$8=new b(this.props.contextArgs.ftentidentifier,this.$22(),this.props.viewerActorID)),a?this.$8.attemptPublishStartEvent():this.$8.attemptPublishStopEvent()}.bind(this),"UFIAddComment.react")}.bind(this))),this.props.allowTogglePrivateComments&&(b("PrivateCommentsConfig").composer_lock_enabled||b("PrivateCommentsConfig").composer_unlocked_lock_enabled)&&this.$7.addSubscriptions(b("UFIComposerIsTypingStore").addListener(function(){var a=this.props.contextArgs.ftentidentifier;b("UFIComposerIsTypingStore").getValueFor(a)&&n.logViewerInteracted(a)}.bind(this)))};H.prototype.$48=function(){this.$8&&this.$8.destroy(),this.$8=null};H.prototype.UNSAFE_componentWillReceiveProps=function(a){var b=this.props.contextArgs.ftentidentifier,c=a.contextArgs.ftentidentifier;(c!==b||this.props.replyCommentID!==a.replyCommentID||this.props.viewerActorID!==a.viewerActorID)&&this.$48()};H.prototype.componentWillUnmount=function(){b("Bootloader").loadModules(["TextDelightInComposerLogger"],function(a){a.endFunnel(this.$22()||this.props.contextArgs.ftentidentifier)}.bind(this),"UFIAddComment.react"),this.$1=!1,this.$35(),this.$11&&b("Arbiter").unsubscribe(this.$11),this.$10&&b("Arbiter").unsubscribe(this.$10),this.$12&&b("Arbiter").unsubscribe(this.$12),this.$13&&b("Arbiter").unsubscribe(this.$13),this.$14&&b("Arbiter").unsubscribe(this.$14),this.$15&&b("Arbiter").unsubscribe(this.$15),this.$9&&this.$9.unsubscribe(),this.$9=null,this.$7&&this.$7.release(),this.$48()};H.prototype.$50=function(){if(!this.state.customStickerNUXShown)this.props.allowCustomStickerAttachments&&(this.refs.groupedInputButton||this.refs.sticker_button)&&b("Bootloader").loadModules(["SimpleNUXMessage","SimpleNUXMessageTypes"],function(a,b){a.hasUserSeenMessage(b.GAMES_STREAM_CUSTOM_STICKER)||(this.setState({customStickerNUXShown:!0}),a.markMessageSeenByUser(b.GAMES_STREAM_CUSTOM_STICKER))}.bind(this),"UFIAddComment.react");else{var a=this.refs.sticker_button?this.refs.sticker_button:this.refs.groupedInputButton;return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return a},shown:this.state.customStickerNUXShown,position:"above",width:"auto",alignment:"right",onCloseButtonClick:this.$51},h._("New! Send a custom sticker"))}return null};H.prototype.$52=function(){return this.state.gifsInCommentsNUXVisible&&this.refs.gif_button?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return this.refs.gif_button}.bind(this),shown:this.state.gifsInCommentsNUXVisible,position:"above",width:"auto",alignment:"right"},h._("You can now add GIFs to comments")):null};H.prototype.$53=function(){return this.state.markdownNUXVisible?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return this.refs.markdownButton}.bind(this),shown:this.state.markdownNUXVisible,position:"above",width:"auto",alignment:"right",onCloseButtonClick:this.$54},h._("[FB-Only] Markdown in Comments! Click to enable.")):null};H.prototype.$55=function(){return this.state.groupedInputNUXShown?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return this.refs.groupedInputButton}.bind(this),shown:this.state.groupedInputNUXShown,position:"above",width:"auto",alignment:"right",onCloseButtonClick:this.$26},h._("Post stickers, emojis and GIFs")):null};H.prototype.$56=function(){return this.state.addCommentNUXShown?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FBAmbientPulseNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return this.refs.mentionsinput}.bind(this),dialogShown:!1,position:"left",shown:this.state.addCommentNUXShown}):null};H.prototype.$57=function(){return this.state.privateCommentNUXVisible?b("React").createElement(b("BootloadedComponent.react"),{alignment:"right",bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return this.refs.privacy_icon}.bind(this),onCloseButtonClick:this.$58,position:"above",shown:this.state.privateCommentNUXVisible,width:"auto"},b("React").createElement(b("XUIText.react"),{display:"block",weight:"bold"},h._("Comment privately")),b("React").createElement(b("XUIText.react"),{display:"block"},h._("Add a comment that only {user} will see",[h._param("user",this.props.privateCommentTarget)]))):null};H.prototype.render=function(){__p&&__p();var a=this.props.contextArgs.loggedOutLinkConfig,c=!0;a&&a.showAddComment&&(c=!1);a=(!this.props.contextArgs.collapseaddcomment||this.state.isCommenting)&&c&&!this.props.contextArgs.hideActorPhoto;var d=null;this.props.subtitle?d=b("React").createElement("span",{className:r},this.props.subtitle):!this.state.isFocused&&this.props.isEditing?d=b("React").createElement("span",{className:r},h._("{cancel}",[h._param("cancel",b("React").createElement(b("Link.react"),{onClick:function(){return this.context.dispatch(b("UFIAddCommentAction").cancel(this.props.contextArgs))}.bind(this)},h._("Cancel")))])):this.props.isEditing?d=b("React").createElement("span",{className:r},h._("Press Esc to {cancel}.",[h._param("cancel",b("React").createElement(b("Link.react"),{onMouseDown:function(){return this.context.dispatch(b("UFIAddCommentAction").cancel(this.props.contextArgs))}.bind(this)},h._("cancel")))])):this.props.peopleOutsideCommunityInCommentNotice&&this.state.isFocused?d=b("React").createElement("div",{className:"fcg fsm _2pid"},b("React").createElement(b("Badge.react"),{key:"noncoworker",type:"work_non_coworker"}),b("React").createElement("span",{className:"_2pir _4zk5"},b("React").createElement(b("TextWithEntities.react"),{ranges:this.props.peopleOutsideCommunityInCommentNotice.ranges,text:this.props.peopleOutsideCommunityInCommentNotice.text}))):this.props.showSendOnEnterTip&&!this.props.contextArgs.isTahoeUFI&&!this.props.contextArgs.isActiveLivingRoom&&(d=b("React").createElement("span",{className:r},h._("Press Enter to post.")));var f=null,g=null,i=null,j=null,l=null,m=this.state.attachedPhoto||this.state.attachedSticker||this.state.attachedVideo||this.state.attachedFile||this.state.attachedGIF||this.state.attachedStars,n=null,o=null,t=null,u=null,v=null,w=b("cr:682211")?b("React").createElement(b("cr:682211"),{ref:"groupedInputButton",allowCustomStickers:!!this.props.allowCustomStickerAttachments,allowGifAttachments:!!this.props.allowGifAttachments,allowStickerAttachments:!!this.props.allowStickerAttachments,customStickerOwnerID:this.props.targetID,flyoutShown:this.state.flyoutShown,onEmojiSelect:this.$60,onEmoticonSelect:this.$61,onGifSelect:this.$62,onLinkClick:this.$63,onStickerSelect:this.$64,toggleFlyout:this.$65}):null,x=b("cr:682211")?null:b("React").createElement(b("EmojiInputButton.react"),{buttonClassName:"_r1a UFICommentEmojiButton",iconActiveClassName:"UFICommentEmojiIconActive",iconClassName:"UFICommentEmojiIcon",onClick:function(){return this.markViewerHasInteracted()}.bind(this),onSelect:function(a){this.refs.mentionsinput.insertEmoji(a)}.bind(this)});this.props.allowCommentMarkdown&&(j=b("React").createElement(b("UFIMarkdownButton.react"),{active:this.state.commentMarkdownEnabled,ref:"markdownButton",onClick:function(){var a=!this.state.commentMarkdownEnabled;this.setState({commentMarkdownEnabled:a});this.refs.mentionsinput&&a&&this.$23(this.refs.mentionsinput.getText())}.bind(this)}));!b("cr:682211")&&this.props.allowStickerAttachments&&!m&&(g=b("React").createElement(b("UFIStickerButton.react"),{ref:"sticker_button",allowCustomStickers:this.props.allowCustomStickerAttachments,customStickerOwnerID:this.props.targetID,onStickerSelected:this.onStickerSelected,onEmoticonSelected:this.$66,onLinkClick:this.$67,onStickerFlyoutShow:function(){b("Arbiter").inform("comment_content_change",{addingAttachment:!0}),this.markViewerHasInteracted()}.bind(this)}));!b("cr:682211")&&this.props.allowGifAttachments&&!m&&(i=b("React").createElement(b("UFIGifButton.react"),{ref:"gif_button",onGifSelected:this.onGifSelected,onGifFlyoutShow:function(){return this.markViewerHasInteracted()}.bind(this),defaultGifSelection:this.props.contextArgs.defaultGifQuery}));this.props.showAddMentionButton&&(l=b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("span",null)},b("React").createElement(D,{ftentidentifier:this.props.contextArgs.ftentidentifier,onMentionClicked:function(a){return this.insertMention(a)}.bind(this),onMentionFlyoutShow:function(){return this.markViewerHasInteracted()}.bind(this)})));var z=this.props.viewerActorID!==b("CurrentUser").getAccountID();if(this.props.allowNativeTipJar&&this.props.tipJarModule&&!this.props.allowFlexibleTipping&&!z){var A=this.props.tipJarModule;t=b("React").createElement(A,{showNux:!this.state.customStickerNUXShown,targetID:this.props.targetID,targetName:this.props.targetName,videoID:this.props.commentsTargetID})}if(this.props.allowFlexibleTipping&&this.props.flexibleStarsModule&&(!m||this.state.attachedStars)&&!z){A=this.props.flexibleStarsModule;u=b("React").createElement(A,{canShowNux:!this.state.customStickerNUXShown,onStarsSelected:this.onStarsSelected,targetID:this.props.targetID,targetName:this.props.targetName,videoID:this.props.commentsTargetID})}this.props.allowCommentFixSuggestions&&(v=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIFixSuggestionsButton.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("span",null),active:this.state.commentSuggestionsShowing,badged:this.state.hasPotentialSuggestions,ref:"fixSuggestionsButton",onClick:function(){var a=!this.state.commentSuggestionsShowing;this.setState({commentSuggestionsShowing:a});a&&(this.$18=this.refs.mentionsinput.getText(),this.setState({hasPotentialSuggestions:!1,hasStaleSuggestions:!1,isInitialSuggestionCheck:!0}));new(b("WritingAssistanceTypedLogger"))().setAction("icon_clicked").setValue(a?"show":"hide").log()}.bind(this)}));(this.props.allowPhotoAttachments||this.props.allowVideoAttachments||this.props.allowFileAttachments)&&(n=this.$33,f=b("React").createElement(b("UFIAttachMediaSection.react"),{ref:"media_section",getPhotoUploadData:this.$34,getFileUploadData:this.$68,prepareForAttachedPhotoPreview:this.$36,prepareForAttachedVideoPreview:this.$69,prepareForAttachedFilePreview:this.$70,allowVideoAttachments:this.props.allowVideoAttachments,allowFileAttachments:this.props.allowFileAttachments,onPhotoUploadComplete:this.$38,onFileUploadComplete:this.$71,onVideoUploadComplete:this.$72,onVideoEncodeUpdate:this.$73,onVideoUploadUpdate:this.$74,setFileInput:this.$59,targetId:this.props.targetID,onClick:function(){b("Arbiter").inform("comment_content_change",{addingAttachment:!0}),this.markViewerHasInteracted()}.bind(this),attachment:m,viewerActorID:this.props.viewerActorID}));z=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.ADD_COMMENT_BOX);A="addComment_"+this.props.contextArgs.ftentidentifier;this.$22()?m=this.props.contextArgs.replyPlaceholderText||q:this.props.contextArgs.placeholderText?m=this.props.contextArgs.placeholderText:this.props.contextArgs.isActiveLivingRoom?m=s:m=p;var C=this.props.contextArgs.viewoptionstypeobjects,E=this.props.contextArgs.viewoptionstypeobjectsorder;this.props.attachedPhoto&&!this.props.subtitle&&(d=null);var F;(this.state.attachedPhoto||this.state.isLoadingPhoto||this.state.attachedVideo||this.state.videoStatus===y.UPLOAD||this.state.attachedFile||this.state.isLoadingFile||this.state.attachedSticker||this.state.attachedGIF||this.state.attachedStars)&&(F=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIAttachedMediaPreview.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("span",null),attachedPhoto:this.state.attachedPhoto,attachedVideo:this.state.attachedVideo,attachedFile:this.state.attachedFile,attachedSticker:this.state.attachedSticker,attachedGIF:this.state.attachedGIF,attachedStars:this.state.attachedStars,monitorHeight:this.props.contextArgs.monitorHeight,onRemoveAttachedMediaPreviewClicked:this.$37,onRemoveAttachedStarsPreview:this.$75,onRemoveAttachedStickerPreview:this.$76,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto,isLoadingFile:this.state.isLoadingFile,videoFileURL:this.state.videoFileURL,videoStatus:this.state.videoStatus,videoTrimParams:this.state.videoTrimParams,videoProgress:this.state.videoProgress,isVideoFileTranscodedGIF:this.state.isVideoFileTranscodedGIF}));var G=this.props.contextArgs.mentionsinput,H=null,I=null,J=null;G&&(H=G.inputComponent,I=G.viewComponent,J=G.viewProps);G=this.props.editingComment.body;G=G?b("MentionsInputUtils").generateDataFromTextWithEntities(G):null;var K=null;this.props.allowCommentMarkdown&&this.state.commentMarkdownEnabled&&(K=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFICommentMarkdownPreview.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("span",null),markup:this.state.commentMarkdownPreviewContent}));var L=null;this.props.allowCommentFixSuggestions&&this.state.commentSuggestionsShowing&&(L=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIFixSuggestionsDetails.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),null),hasStaleSuggestions:this.state.hasStaleSuggestions,isInitialCheck:this.state.isInitialSuggestionCheck,onAccept:function(a,c){if(a){var d=this.refs.mentionsinput;d.replaceText(a,c)}this.setState({commentSuggestionsShowing:!1});new(b("WritingAssistanceTypedLogger"))().setAction("action_clicked").setValue("accept").log()}.bind(this),onCancel:function(){this.setState({commentSuggestionsShowing:!1}),new(b("WritingAssistanceTypedLogger"))().setAction("action_clicked").setValue("ignore").log()}.bind(this),onRefresh:function(){this.$18=this.refs.mentionsinput.getText(),this.setState({hasPotentialSuggestions:!1,hasStaleSuggestions:!1,isInitialSuggestionCheck:!1}),new(b("WritingAssistanceTypedLogger"))().setAction("action_clicked").setValue("refresh").log()}.bind(this),userText:this.$18}));H=H?b("React").createElement(H,{disableInitTextarea:!c,replyCommentID:this.$22(),initialData:G,placeholder:m,datasource:this.props.mentionsDataSource,ref:"mentionsinput",viewComponent:I,viewProps:J,viewOptionsTypeObjects:C,viewOptionsTypeObjectsOrder:E,hashtags:this.props.contextArgs.sht,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this.$42,onDummyFocus:this.$49,onFocus:this.focus,onBlur:this.$32,onContentChange:this.$21,onPaste:n,ftEntIdentifier:this.props.contextArgs.ftentidentifier,instanceID:this.props.contextArgs.instanceid,isBroadcasterUFI:this.props.contextArgs.isBroadcasterUFI,isTahoeUFI:this.props.contextArgs.isTahoeUFI,isLivingRoom:this.props.contextArgs.isActiveLivingRoom,isStreamerHub:this.props.contextArgs.isStreamerHub,showMessengerPivot:this.state.showMessengerPivot&&!this.state.hasAttachment,updateMentionsData:this.$77}):null;c=this.state.showMessengerPivot&&!this.state.hasAttachment?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",{className:"_6fr-"})},b("React").createElement(B,{contextArgs:this.props.contextArgs,isActive:this.state.shouldSendAsMessage,isSending:this.state.isSendingMessage,onClick:this.handleMessengerPivotClick})):null;G=b("SutroStoryHeaderUFIGatingConfig").enabled_for_comment_composer_rounded_borders;m=b("SutroStoryHeaderUFIGatingConfig").enabled_for_comment_glyphs;I=k&&this.props.allowBotMentions&&this.props.groupID?b("React").createElement(k,{groupID:this.props.groupID,onSelect:function(a){return this.insertMention(a)}.bind(this)}):null;J=this.state.selectedInsightPoint&&b("React").createElement(b("UFIInsightsSharingCommentTag.react"),{showMiddot:!1,formattedValue:this.state.selectedInsightPoint.formattedValue});C=b("React").createElement("div",{className:"UFICommentContainer"},b("React").createElement("div",{className:"_fmi"+(G?" _613v":"")+" UFIInputContainer"+(b("PrivateCommentsConfig").dark_composer_theme_enabled&&this.state.commentPrivacy===b("CommentPrivacyValue").OWNER_OR_COMMENTER?" UFIPrivateCommentDarkTheme":"")},J,c,H,b("React").createElement("div",{className:"_fmk"+(this.state.showMessengerPivot&&!this.state.hasAttachment?" _6fry":"")+" UFICommentAttachmentButtons _5op2"+(m?" _15i7":"")+(m?" _2kwm":"")},m?this.$78():null,v,I,l,x,j,f,i,g,w,o,t,u)),K,L,F,d);var M={};if(a){var N=this.props.contextArgs.livingRoomID;this.props.contextArgs.isLivingRoom==!0&&N!=null&&b("Bootloader").loadModules(["LivingRoomActions","LivingRoomLoggerAction","LivingRoomStoreInitializer","LivingRoomTypedLogger","UFICentralUpdates"],function(a,c,d,e,f){f.subscribe("actor-changed",function(c,e){a.clearAddVideoDialogTab(N),a.updatePresentUsers(N,b("immutable").List(),0),a.close(N),d.initialize(null,N,e.actorID)}),M.onActorChange=function(a,b){new e().setLivingRoomID(N).setLivingRoomAction(c.VOICE_SELECTOR_ACTOR_CHANGE).updateExtraData({oldActorID:a,newActorID:b}).log()}},"UFIAddComment.react");C=b("React").createElement(b("UFIImageBlock.react"),{className:"UFIMentionsInputWrap"+(this.props.allowStickerAttachments?" UFIStickersEnabledInput":"")+(this.props.allowCommentMarkdown?" UFIMarkdownEnabledInput":"")+(this.props.allowGifAttachments?" UFIGifEnabledInput":"")+(this.props.allowNativeTipJar?" UFITipJarEnabledInput":"")+(this.props.allowFlexibleTipping?" UFIFlexibleStarsEnabledInput":"")},b("React").createElement("div",{className:"UFIReplyActorPhotoWrapper"+(this.state.showMessengerPivot&&!this.state.hasAttachment?" _6fr_":""),onClick:this.focus,role:"presentation"},b("React").createElement(b("UFIActorIconContainer.react"),babelHelpers["extends"]({},M,{actorID:this.props.viewerActorID,actorSelectorConfig:this.props.contextArgs.actorSelectorConfig,isLivingRoom:this.props.contextArgs.isLivingRoom,overlayActorSelectorOnUFIPhoto:this.props.contextArgs.overlayActorSelectorOnUFIPhoto}))),C)}E=b("React").createElement("div",{ref:function(a){return this.rootNode=a}.bind(this),id:A,className:b("joinClasses")("UFIRow _4oep UFIAddComment"+(this.props.allowPhotoAttachments?" UFIAddCommentWithPhotoAttacher":"")+(this.props.withoutSeparator?" UFIAddCommentWithoutSeparator":"")+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")+(this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights?" hidden_elem":""),this.props.className),onKeyDown:this.$19,"data-ft":z},this.$79(),this.$80(),this.$81(),C,this.$52(),this.$53(),this.$55(),this.$50(),this.$56(),this.$82());n=b("ifRequired")("LiveVideoQuickComments.react",function(a){return a});G=this.props.contextArgs.liveVideoQuickCommentsConfig!=null&&n!=null?b("React").createElement(n,{contextArgs:this.props.contextArgs,videoID:this.props.contextArgs.liveVideoQuickCommentsConfig.videoID,modes:this.props.contextArgs.liveVideoQuickCommentsConfig.modes}):null;return G?b("React").createElement("div",null,G,E):E};H.prototype.componentDidUpdate=function(a,b){if(!b.attachedPhoto&&this.state.attachedPhoto||!b.attachedSticker&&this.state.attachedSticker||!b.attachedVideo&&this.state.attachedVideo||!b.attachedFile&&this.state.attachedFile||!b.attachedGIF&&this.state.attachedGIF||!b.attachedStars&&this.state.attachedStars||!b.isCommenting&&this.state.isCommenting){b=this.state.attachedPhoto||this.state.attachedVideo||this.state.attachedFile||this.state.attachedSticker||this.state.attachedGIF||this.state.attachedStars;this.setState({hasAttachment:!!b});this.refs.mentionsinput.focus()}a.viewerActorID!==this.props.viewerActorID&&(this.state.fileInput&&this.state.fileInput.clear(),this.state.fileUploader&&this.state.fileUploader.setData(this.$34()),this.$37())};H.prototype.componentDidMount=function(){__p&&__p();this.$1=!0;if(this.props.contextArgs.source===b("FeedbackSourceType").NEWS_FEED){var a=this.props.replyCommentID!=null;a?b("UFIODSLogger").bump("composer.newsfeed.replies.componentDidMount",b("UFIVersion").LEGACY):b("UFIODSLogger").bump("composer.newsfeed.toplevel.componentDidMount",b("UFIVersion").LEGACY)}this.$23=b("throttle")(this.$23,w,this);this.$12=b("Arbiter").subscribe("UFIComment/insertComposerPayload/"+this.props.contextArgs.ftentidentifier,function(a,b){if(!b||b.instanceid!==void 0&&b.instanceid!==this.props.contextArgs.instanceid||!this.props.isTopLevelComposer)return;this.focus();b.mention!==void 0&&this.insertMention(b.mention);b.emojitext!==void 0&&this.insertEmojiText(b.emojitext);b.stickerid!==void 0&&this.$83(b.stickerid)}.bind(this));this.$13=b("Arbiter").subscribe("UFIComment/"+this.props.contextArgs.ftentidentifier+"/selectGif",function(a,b){if(!b||this.$22())return;this.focus();this.$84({attachedGIF:b.gif});this.preprocessGIF(b.gif)}.bind(this));this.$14=b("Arbiter").subscribe("InsightsComments/"+this.props.contextArgs.ftentidentifier+"/selectedInsightsPoint/",function(a,c){if(!c)return;this.setState({selectedInsightPoint:c.selectedInsightPoint});a=b("ReactDOM").findDOMNode(this.refs.mentionsinput);a!==null&&c.selectedInsightPoint&&a instanceof Element&&b("DOMScroll").ensureVisible(a,null,null,null,function(){window.setTimeout(function(){return this.refs.mentionsinput.focus()}.bind(this))}.bind(this))}.bind(this));if(!this.props.allowPhotoAttachments&&!this.props.allowVideoAttachments&&!this.props.allowFileAttachments)return;this.$15=b("Arbiter").subscribe("UFIComment/"+this.props.contextArgs.ftentidentifier+"/attachCreatedGif",function(a,b){if(!b||this.$22())return;this.focus();this.setState({videoProgress:100,attachedVideo:{fbid:b.videoID},videoStatus:y.ENCODE,videoTrimParams:b.trimParams})}.bind(this));this.$22()===null&&(this.$10=b("Arbiter").subscribe("focusCommentField"+this.props.contextArgs.ftentidentifier,function(a){this.refs.mentionsinput.focus()}.bind(this)),this.props.contextArgs.issnowlift&&(this.$11=b("Arbiter").subscribe("newRemixedImage"+this.props.contextArgs.ftentidentifier,function(a,b){a={clipboardData:{items:[b]}};this.$33(a)}.bind(this))))};H.prototype.$80=function(){return this.state.constituentBannerState&&!this.$22()?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFICommentingAsConstituentHeader.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),uri:this.props.constituentBanner}):null};H.prototype.$79=function(){var a=this.props,c=a.contextArgs;a=a.isTopLevelComposer;var d=c.conversationGuideParams;d=d?d.trackingID:null;return a&&b("cr:719006")?b("React").createElement(b("cr:719006"),{position:"above",trackingID:d,contextArgs:c,ufiContextDispatch:this.context.dispatch,isComposerFocused:this.state.isFocused}):null};H.prototype.$78=function(){var a=this.props.isEditing&&this.props.editingComment.privacy_value===b("CommentPrivacyValue").OWNER_OR_COMMENTER,c=this.$22()&&this.props.replyCommentPrivacy===b("CommentPrivacyValue").OWNER_OR_COMMENTER,d=!a&&!c&&this.props.allowTogglePrivateComments;if(!a&&!c&&!this.props.allowTogglePrivateComments||!(d?b("PrivateCommentsConfig").composer_lock_enabled||b("PrivateCommentsConfig").composer_unlocked_lock_enabled:b("PrivateCommentsConfig").reply_composer_lock_enabled))return null;d?(b("Bootloader").loadModules(["PrivateCommentsLogger"],function(a){return a.startFunnel(this.props.contextArgs.ftentidentifier)}.bind(this),"UFIAddComment.react"),a=h._("Toggle privacy")):c?a=h._("Only you and {user} will be able to see your reply",[h._param("user",this.props.privateCommentTarget)]):a=h._("Only you and {user} can see this",[h._param("user",this.props.privateCommentTarget)]);return b("React").createElement(b("Link.react"),{"aria-label":a,className:"_r1a UFICommentPrivacyButton","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":a,onClick:function(){this.markViewerHasInteracted(),d&&(n.logToggle(this.state.commentPrivacy===b("CommentPrivacyValue").DEFAULT_PRIVACY,this.props.contextArgs.ftentidentifier),this.setState(function(a){return{commentPrivacy:a.commentPrivacy===b("CommentPrivacyValue").OWNER_OR_COMMENTER?b("CommentPrivacyValue").DEFAULT_PRIVACY:b("CommentPrivacyValue").OWNER_OR_COMMENTER}}))}.bind(this),role:"button"},b("React").createElement("div",{ref:"privacy_icon",className:"UFICommentPrivacyIcon"+(b("PrivateCommentsConfig").composer_unlocked_lock_enabled?" UFICommentPrivacyIconVariant":"")+(!d||this.state.commentPrivacy===b("CommentPrivacyValue").OWNER_OR_COMMENTER?" UFICommentPrivacyIconActive":"")}),d?this.$57():null)};H.prototype.$81=function(){return this.props.isEditing||this.state.commentPrivacy!==b("CommentPrivacyValue").OWNER_OR_COMMENTER||!b("PrivateCommentsConfig").privacy_text_above_composer_enabled?null:this.$22()?b("React").createElement("div",{className:"_2tpi"},h._("Replying privately to {=[user]}",[h._param("=[user]",b("React").createElement("strong",null,h._("{user}",[h._param("user",this.props.privateCommentTarget)])))])):b("React").createElement("div",{className:"_2tpi"},h._("Only you and {=[user]} can see this",[h._param("=[user]",b("React").createElement("strong",null,h._("{user}",[h._param("user",this.props.privateCommentTarget)])))]))};H.prototype.$82=function(){return this.state.showFailedMessageDialog?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(C,{contextArgs:this.props.contextArgs,onHide:function(){this.setState({showFailedMessageDialog:!1}),this.refs.mentionsinput.focus()}.bind(this),showFailedDialog:this.state.showFailedMessageDialog})):null};H.prototype.insertMention=function(a){this.refs.mentionsinput&&this.refs.mentionsinput.insertMention&&(this.refs.mentionsinput.insertMention(a),window.setTimeout(function(){return this.refs.mentionsinput.focus()}.bind(this)))};H.prototype.insertEmojiText=function(a){this.refs.mentionsinput.getText().trim()===""?this.refs.mentionsinput.insertEmoticon(a.trim()+" "):this.refs.mentionsinput.insertEmoticon(a)};H.prototype.$85=function(a){return a==="finish"};H.prototype.$86=function(){this.state.fileInput&&this.state.fileInput.clear()};H.prototype.$84=function(a){if(!b("CurrentUser").isWorkUser())this.setState(a);else{var c={attachedPhoto:null,attachedVideo:null,attachedFile:null,attachedGIF:null,attachedSticker:null,attachedStars:null,videoStatus:null,videoFileURL:null,isLoadingPhoto:!1,videoProgress:0,isVideoFileTranscodedGIF:!1,hasAttachment:!1};this.setState(babelHelpers["extends"]({},c,a))}};H.prototype.$83=function(a){this.setState({attachedSticker:null,isLoadingPhoto:!0}),new(b("AsyncRequest"))(v).setData({sticker_id:a}).setErrorHandler(this.$76).setHandler(this.$87).send()};H.prototype.sendSticker=function(a,c){a={encodedValue:"",visibleValue:"",attachedPhoto:null,attachedSticker:{fbid:a},privacy_value:this.state.commentPrivacy};this.context.dispatch(b("UFIAddCommentAction").submitNew(this.props.contextArgs,a,c.target,this.$22()))};H.prototype.isPromotionMatchingEnabled=function(a){return a!=null&&a.isEnabled&&a.type==="SPEND_MATCH"};H.prototype.getMatchingStarTippedValue=function(a,b){return b!=null&&this.isPromotionMatchingEnabled(b)?Math.min(b.maxQuantity,a):0};H.prototype.$88=function(){this.setState({gifsInCommentsNUXVisible:!1})};H.prototype.$47=function(){this.setState({addCommentNUXShown:!1})};H.prototype.preprocessGIF=function(a){var c=b("XUFICommentGIFPreprocessController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setData({gif_url:a.source.url}).send()};H.prototype.sendGIF=function(a){a={encodedValue:"",visibleValue:"",attachedShareURL:a.source.url,privacy_value:this.state.commentPrivacy};this.rootNode&&this.context.dispatch(b("UFIAddCommentAction").submitNew(this.props.contextArgs,a,this.rootNode,this.$22()))};H.prototype.parseTextForMentions=function(a){var b=[],c;while(c=A.exec(a)){c={uid:c[1],text:c[2],offset:c.index,length:c[2].length,weakreference:!1,entity:{uid:c[1],weakreference:!1}};b.push(c);A.lastIndex=c.offset+c.length}return b};H.prototype.markViewerHasInteracted=function(){this.props.markViewerHasInteracted&&this.props.markViewerHasInteracted()};H.prototype.$22=function(){return this.props.replyCommentID||this.state.currentThreadedFacecastCommentID};H.contextTypes={dispatch:c.func};e.exports=H}),null);
__d("UFIAddCommentLink.react",["cx","fbt","React","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=b("joinClasses")("UFIRow UFIAddCommentLink"+(this.props.isFirstCommentComponent?" _48pi":"")+(this.props.isLastCommentComponent?" UFILastCommentComponent":"")+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")),c=h._("Write a comment...");return b("React").createElement("div",{className:a,"data-ft":this.props["data-ft"]},b("React").createElement("a",{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},c))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("FRXServerFbt.react",["cx","React","ServerHTML.react","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a=this.props,c=a.blob,d=a.className;a=babelHelpers.objectWithoutPropertiesLoose(a,["blob","className"]);return c==null?null:b("React").createElement(b("ServerHTML.react"),babelHelpers["extends"]({blob:c,className:b("joinClasses")("_6u30",d)},a))};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("IdentityBadgeType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FAN_FUNDING_SUPPORTER:"fan_funding_supporter",FREQUENT_WATCHER:"frequent_watcher",GROUPIE:"groupie",HOT_COMMENT:"hot_comment",SHARER:"sharer",TIPPER:"tipper",TOP_FAN:"top_fan",VALUED_COMMENTER:"valued_commenter",WOODHENGE:"woodhenge"})}),null);
__d("XIdentityBadgesInfomationDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/identity_badge/information_dialog/init/",{badges:{type:"String"},comment_id:{type:"FBID"}})}),null);
__d("IdentityBadges.react",["cx","AsyncRequest","IdentityBadgeType","Image.react","Link.react","React","XIdentityBadgesInfomationDialogController","qex"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=12;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$3=function(){var a=b("XIdentityBadgesInfomationDialogController").getURIBuilder().setString("badges",JSON.stringify(this.props.badges)).setFBID("comment_id",this.props.commentID).getURI();a=new(b("AsyncRequest"))().setURI(a).setMethod("POST").setReadOnly(!0);a.send()}.bind(this),c}a.prototype.render=function(){"use strict";var a=this.props.badges;if(!Array.isArray(a)||a.length===0)return null;var c=this.props.canShowMultipleBadges===!0&&!!b("qex")._("777322");a=a.length===1||!c?this.$1(c):this.$2();return b("React").createElement(b("Link.react"),{onClick:this.$3},b("React").createElement("div",{className:"_3x69"},a))};a.prototype.$1=function(a){"use strict";var c=this.props.badges,d=c[0];c=c.length===1?null:" +"+(c.length-1);return b("React").createElement(b("React").Fragment,null,b("React").createElement(b("Image.react"),{className:"_3-8_",height:i,src:a?d.multiple_badge_asset:d.badge_asset}),b("React").createElement("span",{className:"_3x6z"},d.text,c))};a.prototype.$2=function(){"use strict";return this.props.badges.map(function(a){return b("React").createElement(b("Image.react"),{className:"_3-8_",height:i,key:a.type,src:a.multiple_badge_asset})})};e.exports=a}),null);
__d("LiveVideoAnnouncementCTAType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NONE:"none",LIVE_SUBSCRIBE:"live_subscribe",FOLLOW:"follow",PAGE_LIKE:"page_like",INVITE_GUEST:"invite_guest",LINK:"link",INVITE_FRIEND:"invite_friend",FOLLOW_ARTIST:"follow_artist",SHARE:"share",SEE_FIRST:"see_first",PROMOTE_LIVE_VIDEO:"promote_live_video",LIKE_AND_REPLY_HINT:"like_and_reply_hint"})}),null);
__d("XVideoBroadcastClearPinCommentEventAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videos/pinnedcomments/clear/",{})}),null);
__d("XVideoBroadcastPinnedCommentsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videos/pinnedcomments/",{})}),null);
__d("LiveVideoPinnedCommentUtils",["fbt","AsyncRequest","BanzaiODS","Bootloader","UFILivePinnedCommentStore","UFISharedDispatcher","UFIStoryAction","UFIVideoPlayerRegistry","XVideoBroadcastClearPinCommentEventAsyncController","XVideoBroadcastPinnedCommentsController","ifRequired"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(){return b("ifRequired")("LiveVideoBroadcastBroadcastStore",function(a){return a.getCurrentBroadcastTime()})}a={toggleFeedbackCommentPin:function(a){var c=a.commentFBID,d=a.commentID,e=a.contextArgs;a=a.isPinned;var f=b("XVideoBroadcastPinnedCommentsController").getURIBuilder().getURI(),g=b("UFILivePinnedCommentStore").getPinnedCommentID(e.ftentidentifier);a?b("UFISharedDispatcher").dispatch(b("UFIStoryAction").unpinComment(e)):b("UFISharedDispatcher").dispatch(b("UFIStoryAction").pinComment(e,d));new(b("AsyncRequest"))().setURI(f).setData({feedback_id:e.feedbackID,comment_fbid:a?null:c}).setMethod("POST").setErrorHandler(function(a){g?b("UFISharedDispatcher").dispatch(b("UFIStoryAction").pinComment(e,g)):b("UFISharedDispatcher").dispatch(b("UFIStoryAction").unpinComment(e))}).send()},toggleCommentPin:function(a){__p&&__p();var c=a.commentFBID,d=a.commentID,e=a.contextArgs;a=a.isPinned;var f=b("UFILivePinnedCommentStore").getPinnedCommentID(e.ftentidentifier);a?b("UFISharedDispatcher").dispatch(b("UFIStoryAction").unpinComment(e)):b("UFISharedDispatcher").dispatch(b("UFIStoryAction").pinComment(e,d));d=e.isBroadcasterUFI?h():b("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTime(e.instanceid);if(d===null){b("BanzaiODS").bumpEntityKey("streaming_comments","pin_with_no_timestamp");return}var g=b("XVideoBroadcastPinnedCommentsController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(g).setData({video_id:e.fluentContentToken,video_time_offset:d,comment_fbid:a?null:c}).setMethod("POST").setErrorHandler(function(a){f?b("UFISharedDispatcher").dispatch(b("UFIStoryAction").pinComment(e,f)):b("UFISharedDispatcher").dispatch(b("UFIStoryAction").unpinComment(e))}).send()},unpinVODComment:function(a,c,d){return b("Bootloader").loadModules(["SimpleXUIDialog"],function(e){e.showConfirm(g._("If you unpin this comment, you won't be able to pin it again."),g._("Unpin comment"),function(e){if(!e)return;new(b("AsyncRequest"))().setURI(b("XVideoBroadcastClearPinCommentEventAsyncController").getURIBuilder().getURI()).setData({pin_event_id:c}).setMethod("POST").setHandler(function(c){a===b("UFILivePinnedCommentStore").getPinnedCommentID(d.ftentidentifier)&&b("UFISharedDispatcher").dispatch(b("UFIStoryAction").unpinComment(d))}).send()})},"LiveVideoPinnedCommentUtils")}};e.exports=a}),null);
__d("ShareNowConstants",["fbt"],(function(a,b,c,d,e,f,g){e.exports={error:g._("This post could not be shared at this time. Please try again later."),success:g._("Your share was posted.")}}),null);
__d("TextDelightNuxID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({POST_OPT_OUT_NUX:5477,COMMENT_OPT_OUT_NUX:5551})}),null);
__d("PublicConversationsUnicornTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PublicConversationsUnicornLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PublicConversationsUnicornLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PublicConversationsUnicornLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setCommentFbid=function(a){this.$1.comment_fbid=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={comment_fbid:!0,vc:!0};e.exports=a}),null);
__d("UFICommentLikeCount.react",["cx","fbt","ActorURI","NumberFormat","ProfileBrowserLink","ProfileBrowserTypes","React","URI"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=function(a,c,d){a=new(b("URI"))("/ajax/like/tooltip.php").setQueryData({comment_fbid:a.fbid,comment_from:a.author,comment_likecount:a.likecount||0,comment_id:a.id,cache_buster:a.likeconfirmhash||0});c&&a.addQueryData({viewas:c});return b("ActorURI").create(a,d)};i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){__p&&__p();var a=this.props.comment,c=a.likecount||0,d=b("NumberFormat").formatInteger(c);c=h._({"*":"{number} likes","_1":"1 Like"},[h._plural(c,"number")]);var e=b("ProfileBrowserTypes").LIKES;a={id:a.fbid};var f=j(this.props.comment,this.props.contextArgs.viewas,this.props.actorForPost),g=b("React").createElement("span",{className:"UFICommentReactionIconContainer"},b("React").createElement("i",{className:"_3j7l _2p78 _9--"}));d=b("React").createElement("span",null,d);var i="UFICommentLikeButton UFISutroLikeCount",k=b("ProfileBrowserLink").constructDialogURI(e,a).toString();e=b("ProfileBrowserLink").constructPageURI(e,a).toString();a="dialog";var l=this.props.contextArgs.loggedOutLinkConfig;l&&l.showLikeLink&&(k=l.likeAjaxifyURI,e="#");return b("React").createElement("a",{ajaxify:k,"aria-label":c,className:i,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-uri":f.toString(),href:e,rel:a,role:"button"},g,d)};function a(){i.apply(this,arguments)}a.propTypes={actorForPost:c.string,comment:c.object.isRequired,contextArgs:c.object.isRequired};e.exports=a}),null);
__d("ReactionNuxTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LIKE_CLICK:"like_click",LIKE_CLICK_RENUX:"like_click_renux",SPATIAL_REACTIONS_NUX:"spatial_reactions_nux"})}),null);
__d("UFIAddReactionButton.react",["ix","cx","Image.react","React","asset"],(function(a,b,c,d,e,f,g,h){"use strict";var i;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:"_6fy0"},b("React").createElement("span",{className:"_6fva"},"+"),b("React").createElement(b("Image.react"),{src:g("601195")}))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("UFILikeWebDriverIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LIKE_LINK:"fb-ufi-likelink",UNLIKE_LINK:"fb-ufi-unlikelink",LIKE_LINK_COMMENT:"ufi_comment_like_link",LIKE_LINK_REPLY:"ufi_reply_like_link"})}),null);
__d("UFIReactionsLinkImpl.react",["csx","cx","fbt","Promise","BanzaiLogger","BootloadedComponent.react","Bootloader","Event","FeedbackSourceType","JSResource","Parent","React","ReactDOM","Run","ShimButton.react","SubscriptionsHandler","SutroStoryHeaderUFIGatingConfig","UFIAddReactionButton.react","UFICommentAction","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIConfig","UFILikeWebDriverIDs","UFIReactionIconImpl.react","UFIReactionTypes","UFIStoryAction","promiseDone","addFocusEvents","shallowCompare","curry"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;c=b("React").Component;d=b("React").PropTypes;var k=b("UFIConfig").reactionsFunnelLogger,l=b("UFIConfig").reactionsHasCommentFunnelLogger,m=b("UFIConfig").reactionsHasFunnelLogger,n=!1,o=!1,p=!1,q=!1,r=null,s=null,t=b("React").createElement("div",null),u=150,v=b("UFIReactionTypes").reactions,w=Object.keys(v),x=20,y=525,z=750,A=700,B=850,C=500,D="ontouchstart"in window,E=i._("Show More Reactions"),F=[],G=function(a){if(!r){a=function(a){r=a,F&&(F.forEach(function(a){return a()}),F=null)};b("UFIConfig").reactionsHasAnimatedIcons?b("Bootloader").loadModules(["UFIReactionsMenuWithAnimatedIcons.react"],a,"UFIReactionsLinkImpl.react"):b("Bootloader").loadModules(["UFIReactionsMenuImpl.react"],a,"UFIReactionsLinkImpl.react")}};function H(){__p&&__p();if(b("UFIConfig").reactionsHasAnimatedLikeActionIcon&&!n){n=!0;var a=new(b("Promise"))(function(a,c){var d=new(b("SubscriptionsHandler"))();d.addSubscriptions(b("Run").onAfterLoad(function(){b("Bootloader").loadModules(["UFIReactionsAnimatedLikeActionIcon.react"],function(b){a(b),d.release()},"UFIReactionsLinkImpl.react")}),b("Run").onLeave(function(){d.release(),c()}))}),c=J().then(function(a){return a.loadLikeActionIcon()});b("promiseDone")(b("Promise").all([a,c]),function(a){var b=a[0];a[1];s=b})}}var I=null;function J(){__p&&__p();if(!I){var a=null;I=new(b("Promise"))(function(c){a=b("Run").onAfterLoad(function(){b("Bootloader").loadModules(["UFIReactionsAnimationPreloader"],function(a){return c(new a())},"UFIReactionsLinkImpl.react")})});b("promiseDone")(I,function(){a&&a.remove()});var c=b("Run").onLeave(function(){I=null,c&&c.remove()})}return I}var K=b("addFocusEvents")("a");f=babelHelpers.inherits(a,c);j=f&&f.prototype;function a(a,c){"use strict";__p&&__p();j.constructor.call(this,a,c);this.$2=function(){this.state.dialogShown&&this.forceUpdate()}.bind(this);this.hideDialog=function(){this.setState({dialogShown:!1,isScrubbing:!1})}.bind(this);this.showDialog=function(){this.dialogShownTime===0&&(this.dialogShownTime=Date.now()),this.state.dialogShown||this.state.logToFunnel&&k.menuShow(this.state.logAsComment),p=!0,this.setState({dialogShown:!0,NUXShown:!1})}.bind(this);this.onClick=function(a){__p&&__p();var c=b("UFICommonInteractionLogger").startInteraction(this.props.comment?b("UFICommonInteractionEvents").UFI_COMMENT_REACTION:b("UFICommonInteractionEvents").UFI_STORY_REACTION);a.preventDefault();var d=this.props,e=d.reaction;d=d.suggestedReaction;if(!e||e===b("UFIReactionTypes").LIKE||!v[e]){d=d&&this.hasSuggestedReaction?d:b("UFIReactionTypes").LIKE;e=e?b("UFIReactionTypes").NONE:d;d=b("curry")(this.onReactionChange,e);this.$3(e,!0);c&&(this.$1={trackingID:c,reaction:e});d(a)}else c&&(this.$1={trackingID:c,reaction:0}),this.onReactionChange(0,a);this.setState({dialogShown:!1,isScrubbing:!1})}.bind(this);this.onClickCapture=function(a){a.stopPropagation(),this.setState({isLongPressing:!1})}.bind(this);this.onContextMenu=function(a){this.state.isTouchDown&&a.preventDefault()}.bind(this);this.onMouseDown=function(a){clearTimeout(this.hoverTimeout)}.bind(this);this.onMouseEnter=function(a){clearTimeout(this.hoverTimeout);a=this.props.comment?A:y;this.state.dialogShown||(this.hoverTimeout=setTimeout(function(){this.showDialog()}.bind(this),a));G(this.props.supportedReactions);!this.state.dialogShown&&this.state.logToFunnel&&(this.logFunnelTimeout=setTimeout(function(){return k.likeButtonEnter(this.props.reaction,this.state.logAsComment)}.bind(this),u))}.bind(this);this.onMouseLeave=function(a){clearTimeout(this.hoverTimeout);clearTimeout(this.logFunnelTimeout);a=this.props.comment?B:z;this.state.dialogShown&&(this.hoverTimeout=setTimeout(this.hideDialog,a))}.bind(this);this.onReactionMenuMouseEnter=function(a){clearTimeout(this.hoverTimeout)}.bind(this);this.onTouchStart=function(a){this.state.dialogShown||(this.mouseDownTime=Date.now(),this.mouseUpTime=0,this.longPressTimeout=setTimeout(function(){this.dialogShownTime===0&&(this.dialogShownTime=Date.now()),this.setState({dialogShown:!0,NUXShown:!1,isLongPressing:!0})}.bind(this),C),G(this.props.supportedReactions)),this.setState({isTouchDown:!0,isLongPressing:!1})}.bind(this);this.onTouchEnd=function(a){this.state.isLongPressing&&(this.mouseUpTime=Date.now()),this.dragStartX=null,this.dragStartY=null,clearTimeout(this.longPressTimeout),this.setState({isTouchDown:!1})}.bind(this);this.onTouchMove=function(a){__p&&__p();if(this.state.isScrubbing)return;a=a.touches[0];var b=a.clientX;a=a.clientY;if(this.dragStartX===null&&this.dragStartY===null){this.dragStartX=b;this.dragStartY=a;return}typeof this.dragStartX==="number"&&typeof this.dragStartY==="number"&&(this.dragStartX>b+x||this.dragStartX<b-x||this.dragStartY>a+x||this.dragStartY<a-x)&&this.setState({isScrubbing:!0})}.bind(this);this.onReactionChange=function(a,c,d,e){__p&&__p();d===void 0&&(d=null);e===void 0&&(e=null);this.$3(a);var f=b("ReactDOM").findDOMNode(this.refs.trigger);this.state.logToFunnel&&(c.target===f?k.likeButtonClick(a,this.state.logAsComment):k.reactionSelection(a,this.state.logAsComment));this.props.comment?c=b("UFICommentAction").changeReaction(this.props.contextArgs,this.props.comment,a,f):c=b("UFIStoryAction").changeReaction(this.props.contextArgs,a,f,d,e);this.context.dispatch(c);a=function(){this.setState({dialogShown:!1,isScrubbing:!1})}.bind(this);a()}.bind(this);this.onReactionMouseEnter=function(a,b){this.reactionsHoverStartTimeMap[a]===0&&(this.reactionsHoverStartTimeMap[a]=Date.now())}.bind(this);this.onReactionMouseLeave=function(a,b){this.reactionsHoverStartTimeMap[a]&&(this.reactionsHoverTotalTimeMap[a]+=Date.now()-this.reactionsHoverStartTimeMap[a],this.reactionsHoverStartTimeMap[a]=0)}.bind(this);this.onKeyboardFocus=function(){this.allowKeyboardFocus=!0,this.showDialog()}.bind(this);this.onScreenReaderTrigger=function(){q=!0,this.allowKeyboardFocus=!0,this.showDialog()}.bind(this);this.dragStartX=null;this.dragStartY=null;this.hasSuggestedReaction=b("UFIConfig").reactionsHasSuggestedReaction;this.subscriptionsHandler=new(b("SubscriptionsHandler"))();F&&F.push(this.$2);c=!1;k&&(m&&this.props.comment===void 0||l&&this.props.comment!==void 0)&&(c=!0);this.state={dialogShown:!1,isLongPressing:!1,isScrubbing:!1,isTouchDown:!1,logToFunnel:c,logAsComment:!!a.comment&&l,NUXShown:!1,prevReaction:a.reaction,shouldBounce:!1,hasAllowedBounce:!1}}a.prototype.shouldComponentUpdate=function(a,c){"use strict";return b("shallowCompare")(this,a,c)};a.getDerivedStateFromProps=function(a,b){"use strict";var c=!!a.reaction&&a.reaction!==b.prevReaction;return{prevReaction:a.reaction,shouldBounce:c,hasAllowedBounce:b.hasAllowedBounce||c}};a.prototype.componentDidUpdate=function(a,c){"use strict";__p&&__p();this.$1&&this.$1.reaction===this.props.reaction&&(b("UFICommonInteractionLogger").endInteraction(this.$1.trackingID),this.$1=null);if(!c.dialogShown&&this.state.dialogShown){this.setCommentReactionsMenuShown(!0);if(D){var d;this.subscriptionsHandler.addSubscriptions(b("Event").listen(document.documentElement,"touchstart",function(a){d=a.touches[0]}),b("Event").listen(document.documentElement,"touchmove",function(a){d=a.touches[0]}),b("Event").listen(document.documentElement,"touchend",function(a){d&&!this.refs.root.contains(document.elementFromPoint(d.clientX,d.clientY))&&this.setState({dialogShown:!1,isScrubbing:!1})}.bind(this)))}}else c.dialogShown&&!this.state.dialogShown&&(this.setCommentReactionsMenuShown(!1),this.$3(a.reaction),this.subscriptionsHandler.release(),this.subscriptionsHandler=new(b("SubscriptionsHandler"))())};a.prototype.componentDidMount=function(){"use strict";this.$4();H();if(b("UFIConfig").reactionsHasAnimatedIcons&&!o){var a=b("Parent").bySelector(this.refs.root,"._zw3");if(a)var c=b("Event").listen(a,"mousemove",function(){this.$5(),c&&c.remove()}.bind(this))}};a.prototype.componentWillUnmount=function(){"use strict";this.subscriptionsHandler.release();if(F){var a=F.indexOf(this.$2);a!==-1&&F.splice(a,1)}clearTimeout(this.hoverTimeout);clearTimeout(this.longPressTimeout)};a.prototype.maybeShowNUX=function(){"use strict";this.props.nuxConfig&&this.props.nuxConfig.nuxType,p||(p=!0,this.setState({NUXShown:!0,dialogShown:!1}))};a.prototype.setCommentReactionsMenuShown=function(a){"use strict";this.props.showAlternateButtonForLiveStreamingRedesign&&this.context.dispatch(b("UFIStoryAction").setCommentReactionsMenuShown(this.props.contextArgs,a))};a.prototype.onDragStart=function(a){"use strict";a.preventDefault()};a.prototype.renderMenu=function(){"use strict";this.state.dialogShown&&G(this.props.supportedReactions);if(!r)return null;var a=this.allowKeyboardFocus;this.allowKeyboardFocus=!1;return b("React").createElement(r,{allowKeyboardFocus:a,initialReaction:this.props.reaction,isLongPressing:this.state.isLongPressing,isScreenReader:q,onMouseEnter:this.onReactionMenuMouseEnter,onMouseLeave:this.onMouseLeave,onReactionClick:this.onReactionChange,onBlur:this.hideDialog,onFocus:this.showDialog,onReactionMouseEnter:this.onReactionMouseEnter,onReactionMouseLeave:this.onReactionMouseLeave,shown:this.state.dialogShown,supportedReactions:this.props.supportedReactions})};a.prototype.renderTrigger=function(){"use strict";__p&&__p();var a=this.props.reaction,c=this.props,d=c.showAlternateButtonForLiveStreamingRedesign;c=c.suggestedReaction;a&&!v[a]&&(a=null);var e=a?b("UFILikeWebDriverIDs").UNLIKE_LINK:b("UFILikeWebDriverIDs").LIKE_LINK,f,g,h;if(this.props.comment){e=this.props.comment.parentcommentid?b("UFILikeWebDriverIDs").LIKE_LINK_REPLY:b("UFILikeWebDriverIDs").LIKE_LINK_COMMENT;var i=!1;!a?f=v[b("UFIReactionTypes").LIKE].display_name:(f=v[a].display_name,h=v[a].color,i=!0);i="UFILikeLink UFIReactionLink"+(i?" UFILinkBright":"")}else{!a?f=c&&this.hasSuggestedReaction?v[c].display_name:v[b("UFIReactionTypes").LIKE].display_name:f=v[a].display_name;(a&&a!=b("UFIReactionTypes").LIKE||!a&&c&&this.hasSuggestedReaction&&c!=b("UFIReactionTypes").LIKE)&&(g=b("React").createElement(b("UFIReactionIconImpl.react"),{className:"_1ktw _2hoq",grayscale:!a&&!!c,reaction:a||c,size:"18"}));c=this.props.contextArgs.source;c=!!(s&&b("UFIConfig").reactionsHasAnimatedLikeActionIcon&&!c===b("FeedbackSourceType").TAHOE&&!c===b("FeedbackSourceType").WATCH_AND_SCROLL&&this.state.hasAllowedBounce&&a===b("UFIReactionTypes").LIKE);c&&s!=null&&(g=b("React").createElement(s,{className:"_1ktw _2hoq _2odi"}));i="UFILikeLink _4x9- _4x9_"+(g?"":" _48-k")+(a?" UFILinkBright":"")+(!c&&this.state.shouldBounce?" _614v":"");h=a?v[a].color:null}return b("React").createElement(K,{"aria-pressed":!!a,className:i,"data-testid":e,href:"#",onClick:this.onClick,onClickCapture:this.state.isLongPressing?this.onClickCapture:null,onContextMenu:this.onContextMenu,onDragStart:this.onDragStart,onKeyboardFocus:r?null:this.onKeyboardFocus,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onTouchEnd:D?this.onTouchEnd:null,onTouchMove:D?this.onTouchMove:null,onTouchStart:D?this.onTouchStart:null,ref:"trigger",role:"button",style:{color:h},tabIndex:0},d?b("React").createElement(b("UFIAddReactionButton.react"),null):b("React").createElement(b("React").Fragment,null,g,f))};a.prototype.renderNUX=function(){"use strict";var a=this.refs.root,c=this.props.comment!==void 0,d=this.props.nuxConfig&&this.props.nuxConfig.titleOverride,e=this.props.nuxConfig&&this.props.nuxConfig.textOverride;return!this.state.NUXShown||!a?null:b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:t,bootloadLoader:b("JSResource")("UFIReactionsNUX.react").__setRef("UFIReactionsLinkImpl.react"),context:a,titleOverride:d,textOverride:e,isCommentReactionNux:c,nuxKey:this.props.nuxConfig&&this.props.nuxConfig.nuxKey})};a.prototype.renderScreenReaderTrigger=function(){"use strict";return r?null:b("React").createElement(b("ShimButton.react"),{className:"accessible_elem","data-accessibilityid":"virtual_cursor_trigger",inline:!0,tabIndex:-1,onClick:this.onScreenReaderTrigger},E)};a.prototype.render=function(){"use strict";var a=b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi;return b("React").createElement("div",{className:"_khz"+(a?" _4sz1":"")+" _4rw5"+(this.state.isScrubbing?" _4bdq":"")+" _3wv2",ref:"root"},this.renderTrigger(),this.renderScreenReaderTrigger(),this.renderMenu(),this.renderNUX())};a.prototype.$4=function(){"use strict";this.dialogShownTime=0,this.reactionsHoverStartTimeMap={},this.reactionsHoverTotalTimeMap={},w.forEach(function(a){this.reactionsHoverStartTimeMap[a]=0,this.reactionsHoverTotalTimeMap[a]=0}.bind(this))};a.prototype.$5=function(){"use strict";o||(b("promiseDone")(J(),function(a){a.load(this.props.supportedReactions)}.bind(this)),o=!0)};a.prototype.$3=function(a,c){"use strict";__p&&__p();if(this.dialogShownTime!==0){a={feedback_id:this.props.contextArgs.ftentidentifier,final_reaction:a,initial_reaction:this.props.reaction,"interface":"www",long_press_duration:this.mouseDownTime!==0&&this.mouseUpTime!==0?this.mouseUpTime-this.mouseDownTime:0,non_reaction_like:c,time_spent:Date.now()-this.dialogShownTime};for(var d in this.reactionsHoverTotalTimeMap){c="time_spent_"+v[d].name.toLowerCase();a[c]=this.reactionsHoverTotalTimeMap[d]}b("BanzaiLogger").log("UserReactionsLoggerConfig",a);this.$4()}};a.contextTypes={dispatch:d.func};e.exports=a}),null);
__d("UFICommentLikeLink.react",["cx","fbt","React","ReactionNuxTypeEnum","TrackingNodes","UFICommentAction","UFIConfig","UFIReactionsLinkImpl.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j="ufi_comment_like_link",k="ufi_reply_like_link";i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.getCanRender=function(a){return!!(a&&(a.canviewerreact||a.viewercanlike||a.hasviewerliked))};a.prototype.render=function(){var a=this.props.comment,c=this.props.feedback,d=this.props.contextArgs;if(!this.constructor.getCanRender(a))return null;if(a.canviewerreact)return b("React").createElement("span",{className:"_6a _3-me"},this.$1(a,c,d));else if(a.viewercanlike||a.hasviewerliked)return this.$2(a,c,d);return null};a.prototype.$1=function(a,c,d){var e=null;b("UFIConfig").reactionsHasCommentsNux&&(e={nuxKey:"reactions_comments",titleOverride:h._("New! React to a comment"),textOverride:h._("Hover over the Like link to see all reactions."),nuxType:b("ReactionNuxTypeEnum").LIKE_CLICK});return b("React").createElement(b("UFIReactionsLinkImpl.react"),{contextArgs:babelHelpers["extends"]({},d,{ftentidentifier:a.id}),comment:a,nuxConfig:e,reaction:a.viewerreaction,supportedReactions:c.supportedreactions,ftIdentifier:d.ftentidentifier})};a.prototype.$2=function(a,c,d){c=d.loggedOutLinkConfig;var e=b("TrackingNodes").getTrackingInfo(a.hasviewerliked?b("TrackingNodes").types.UNLIKE_LINK:b("TrackingNodes").types.LIKE_LINK),f=a.hasviewerliked?h._("Unlike this comment"):h._("Like this comment"),g=a.parentcommentid?k:j,i=!a.hasviewerliked||c?h._("Like"):h._("Unlike"),l=null,m=null;c&&c.showLikeLink&&(l="dialog",m=c.likeAjaxifyURI);return b("React").createElement("a",{className:"UFILikeLink","data-ft":e,"data-testid":g,href:"#",rel:l,ajaxify:m,onClick:function(c){return this.context.dispatch(b("UFICommentAction").toggleLike(d,a,c.target))}.bind(this),role:"button",title:f},i)};function a(){i.apply(this,arguments)}a.propTypes={comment:c.object.isRequired,contextArgs:c.object.isRequired,feedback:c.object.isRequired};a.contextTypes={dispatch:c.func};e.exports=a}),null);
__d("UFICommentMetadata.react",["ix","cx","fbt","BootloadedComponent.react","Image.react","JSResource","Middot.react","React","Timestamp.react","TrackingNodes","UFIConstants","URI","XUISpinner.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("UFIConstants").UFIStatus,l="ufi_comment_timestamp",m="UFIFailureMessageIcon",n="UFIFailureMessage",o="uiLinkSubtle",p=function(a){a=a.status;return a===k.FAILED_ADD||a===k.FAILED_EDIT};c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.editLinkRef=null,b}a.prototype.render=function(){__p&&__p();var a=this.props,c=a.comment,d=a.onRetrySubmit;a=a.isAuthorPinnedComment;var e,f,h=c.timestamp;if(p(c))e=[b("React").createElement("span",{key:"failure",className:n},b("React").createElement("i",{className:m}),i._("Unable to post comment.")),c.allowRetry&&d?[" ",b("React").createElement("a",{key:"rety-submit",onClick:d,href:"#",role:"button"},i._("Try again"))]:null];else if(a){d=b("React").createElement("span",null,b("React").createElement(b("Image.react"),{className:"UFIAuthorPinnedCommentIcon",src:g("606470")}),i._("Pinned"));f=d;this.props.showPermalink&&(f=this.$1(d))}else if(h){a=b("React").createElement(b("Timestamp.react"),{className:"UFISutroCommentTimestamp",minimize:!0,shorten:this.props.shortenTimestamp,time:h.time,text:h.text,useLargerTimeUnits:!0,verbose:h.verbose});f=a;this.props.showPermalink&&(f=this.$1(a))}d=null;if(c.originalTimestamp){h=new(b("URI"))("/ajax/edits/browser/comment").addQueryData({comment_token:c.id}).toString();d=[!this.props.displayVerticalCommentVote&&b("React").createElement(b("Middot.react"),{key:"middot-editNote"}),b("React").createElement("a",{ajaxify:h,className:"uiLinkSubtle"+(this.props.displayVerticalCommentVote?" _6hmt":""),"data-hover":"tooltip","data-tooltip-content":i._("Show edit history"),href:"#",key:"edit-link",ref:function(a){return this.editLinkRef=a}.bind(this),rel:"dialog",role:"button",title:i._("Show edit history")},i._("Edited"))]}a=null;c.attachment_status&&!p(c)&&(a=b("React").createElement("span",null,b("React").createElement(b("Middot.react"),{key:"middot-creator"}),b("React").createElement("span",{className:"UFISutroCommentTimestamp"},c.attachment_status)));h=null;var j=c.creator_data;j&&(h=[b("React").createElement(b("BootloadedComponent.react"),{key:"creator",bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),{size:"small"}),bootloadLoader:b("JSResource")("UFICreatorInfo.react").__setRef("UFICommentMetadata.react"),creatorID:j.creatorID,creatorType:j.creatorType,creatorName:j.creatorName,labelType:j.labelType,pageID:j.pageID,profileURI:j.profileURI}),b("React").createElement(b("Middot.react"),{key:"middot-creator"})]);j=null;c.body&&c.body.markdown_enabled&&c.body.markup&&(j=[b("React").createElement(b("Middot.react"),{key:"middot-markdownNote"}),b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("a",{className:"uiLinkSubtle"},i._("Formatted")),bootloadLoader:b("JSResource")("UFICommentMarkdownFormattedLink.react").__setRef("UFICommentMetadata.react"),comment:c,key:"markdown-link"})]);c=null;this.props.showEditNux&&(c=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIEditCommentNux.react").__setRef("UFICommentMetadata.react"),bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),{size:"small"}),context:this.editLinkRef,helpUri:this.props.helpUri,onCloseButtonClick:this.props.onEditNuxCloseClick,shown:this.props.showEditNux}));return b("React").createElement("span",null,h,f,e,d,j,c,a)};a.prototype.$1=function(a){var c=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.SOURCE);return b("React").createElement("a",{key:"timestamp-message",className:o,href:this.props.permalink,"data-ft":c,"data-testid":l,target:this.props.permalinkTarget},a)};e.exports=a}),null);
__d("UFICommentReactionCount.react",["cx","ActorURI","ClientIDs","React","UFIReactionsBlingTokens.react","UFIReactionsProfileBrowserUtils","XUFIReactionsSocialSentenceTooltipController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props.comment,c={entidentifier:a.id,reactioncount:a.reactioncount,reactioncountmap:a.reactioncountmap,actorforpost:this.props.actorForPost,supportedreactions:this.props.supportedReactions},d="UFICommentLikeButton"+(this.props.showLiveStreamingRedesign&&a.hasviewerliked?" UFILiveCommentRedesignLikedButton":"")+" UFISutroLikeCount",e="UFICommentReactionsBling _4ar- _ipn",f=b("ActorURI").create(b("XUFIReactionsSocialSentenceTooltipController").getURIBuilder().setString("ft_ent_identifier",a.id).setString("client_id",b("ClientIDs").getNewClientID()).setInt("user_count",a.reactioncount).getURI(),this.props.actorForPost),g=b("UFIReactionsProfileBrowserUtils").getDialogURI({actorID:this.props.actorForPost,feedbackTargetID:a.id}),h=b("UFIReactionsProfileBrowserUtils").getPageURI({actorID:this.props.actorForPost,feedbackTargetID:a.id}),i=this.props.contextArgs.loggedOutLinkConfig;i&&i.showLikeLink&&(g=i.likeAjaxifyURI,h="#");return b("React").createElement("a",{ajaxify:g,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-uri":f,"data-tooltip-offsety":"-3",href:h,rel:"dialog",role:"button"},b("React").createElement(b("UFIReactionsBlingTokens.react"),{className:e,feedback:c,contextArgs:this.props.contextArgs,max:3,noLinks:!0,size:"16"},b("React").createElement("span",{className:d},a.reactioncountreduced)))};function a(){h.apply(this,arguments)}a.propTypes={actorForPost:c.string,comment:c.object.isRequired,contextArgs:c.object.isRequired,supportedReactions:c.array,showLiveStreamingRedesign:c.bool};e.exports=a}),null);
__d("XUFISubscribeCommentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/subscribe/",{})}),null);
__d("UFICommentSubscribeLink.react",["fbt","AsyncRequest","React","XUFISubscribeCommentController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a,b){h.constructor.call(this,a,b);b=a.comment.issubscribed;this.state={isSubscribed:b?b:!1}}a.prototype.render=function(){var a=g._("Subscribe to this comment"),c=g._("Subscribe"),d=g._("Unsubscribe to this comment"),e=g._("Unsubscribe");return b("React").createElement("a",{href:"#",role:"button",title:this.state.isSubscribed?d:a,onClick:function(){return this.onLinkClick()}.bind(this)},this.state.isSubscribed?e:c)};a.prototype.onLinkClick=function(){var a=this.props.comment,c=b("XUFISubscribeCommentController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({comment_id:a.fbid,ft_ent_identifier:a.ftentidentifier,is_subscribe:!this.state.isSubscribed}).setMethod("POST").setHandler(function(a){this.setState({isSubscribed:!this.state.isSubscribed})}.bind(this)).setErrorHandler(function(a){}).send()};e.exports=a}),null);
__d("UFIFeedbackPinnedCommentLink.react",["cx","fbt","LiveVideoPinnedCommentUtils","React"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){var c=h._("Unpin Comment"),d=h._("Pin Comment"),e=function(){a.contextArgs.isActiveLivingRoom==!0?b("LiveVideoPinnedCommentUtils").toggleFeedbackCommentPin(a):b("LiveVideoPinnedCommentUtils").toggleCommentPin(a)};return b("React").createElement("a",{className:"uiLink",href:"#",onClick:e},a.isPinned?c:d)};e.exports=a}),null);
__d("UFILiveVODUnpinCommentLink.react",["cx","fbt","LiveVideoPinnedCommentUtils","React","SubscriptionsHandler"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$2=function(){this.$1.addSubscriptions(b("LiveVideoPinnedCommentUtils").unpinVODComment(this.props.commentID,this.props.pinEventID,this.props.contextArgs))}.bind(this),c}a.prototype.componentDidMount=function(){this.$1=new(b("SubscriptionsHandler"))()};a.prototype.componentWillUnmount=function(){this.$1.release()};a.prototype.render=function(){return b("React").createElement("a",{className:"uiLink",href:"#",onClick:this.$2},h._("Unpin comment"))};e.exports=a}),null);
__d("UFIPrivateReplyIndicator.react",["fbt","PagesPrivateReplyConstants","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("PagesPrivateReplyConstants").Status;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.willRender=function(a){return a===i.ALREADY_REPLIED};a.prototype.render=function(){return this.props.replyStatus===i.ALREADY_REPLIED?b("React").createElement("span",null,g._("Page responded privately")):null};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("UFIPrivateReplyLink.react",["cx","fbt","ActorURI","BootloadedComponent.react","JSResource","Link.react","MessengerDiscoveryEntryPoint","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PagesPrivateReplyConstants","React","XPagesMessagingPrivateReplyDialogController","keyMirror"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("PagesPrivateReplyConstants").Status,k=b("PagesPrivateReplyConstants").Type,l=b("keyMirror")(k),m=!1,n=new Set(),o=new Set();c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$5=function(){b("PagesLogger").log(this.props.context.pageID,b("PagesLoggerEventEnum").CLICK,b("PagesLoggerEventTargetEnum").COMMENT_MESSAGE_BUTTON,null,["business_messaging_growth"],{comment_id:this.props.activityID,messenger_entry_point:b("MessengerDiscoveryEntryPoint").PRIVATE_REPLY,activity_type:this.$6()})}.bind(this),c}a.willRender=function(a,b){if(!a)return!1;return a.hasReplyPermission&&b===a.pageID?!0:!1};a.prototype.render=function(){var a=this.props.context;if(a.hasReplyPermission&&this.props.actorID===a.pageID){if(a.status===j.REPLYABLE)return this.$2();else if(a.status===j.ALREADY_REPLIED)return this.$3();return this.$4()}return null};a.prototype.$7=function(){if(!this.props.shouldShowNuxToPage||m)return null;if(n.has(this.props.activityID)){m=!0;return b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",{className:"hidden_elem"}),bootloadLoader:b("JSResource")("UFICommentPrivateReplyNux.react").__setRef("UFIPrivateReplyLink.react"),nuxContext:function(){return this.$1}.bind(this),activityType:this.props.context.activityType,nuxKey:"pages_comment_pr_nux",shouldShowGeneralNuxContent:this.props.shouldShowGeneralNuxContent})}else n.add(this.props.activityID);return null};a.prototype.$2=function(){var a=b("ActorURI").create(b("XPagesMessagingPrivateReplyDialogController").getURIBuilder().setString("activity_id",this.props.activityID).getURI(),this.props.context.pageID);o.has(this.props.activityID)||(b("PagesLogger").log(this.props.context.pageID,b("PagesLoggerEventEnum").IMPRESSION,b("PagesLoggerEventTargetEnum").COMMENT_MESSAGE_BUTTON,null,["business_messaging_growth"],{comment_id:this.props.activityID,messenger_entry_point:b("MessengerDiscoveryEntryPoint").PRIVATE_REPLY,activity_type:this.$6()}),o.add(this.props.activityID));return b("React").createElement(b("Link.react"),{className:"_50u0 _60p- _14hj",onClick:this.$5,href:a,ref:function(a){this.$1=a}.bind(this),rel:"dialog"},this.$8(),this.$7())};a.prototype.$4=function(){var a;switch(this.props.context.status){case j.EXPIRED:a=h._({"comments":"You can't send a message response to comments that are more than 6 months old.","reviews":"You can't send a message response to reviews that are more than 6 months old.","posts":"You can't send a message response to posts that are more than 6 months old."},[h._enum(this.$9(),{comments:"comments",reviews:"reviews",posts:"posts"})]);break;case j.NOT_USER_CREATED:a=h._("Pages can't send private messages to other Pages.");break;case j.CANNOT_MESSAGE:a=h._("This person can't receive a message reply from your Page.");break}return b("React").createElement("span",{className:"_50u0 _50u4 _60p-","data-hover":a?"tooltip":null,"data-tooltip-content":a},this.$8())};a.prototype.$3=function(){return b("React").createElement(b("Link.react"),{className:"_50u0 _14hk _60p-",href:this.props.context.permalink||"#"},this.props.seeResponseLabel?h._("See response"):this.$8())};a.prototype.$8=function(){return h._("Message")};a.prototype.$9=function(){switch(this.props.context.activityType){case k.COMMENT_PAGE_POST:case k.COMMENT_WALL_POST:case k.COMMENT_CUSTOMER_GROUP_USER_POST:case k.COMMENT_REVIEW:return"comments";case k.REVIEW:return"reviews";default:return"posts"}};a.prototype.$6=function(){switch(this.props.context.activityType){case k.COMMENT_PAGE_POST:return l.COMMENT_PAGE_POST;case k.COMMENT_WALL_POST:return l.COMMENT_WALL_POST;case k.COMMENT_CUSTOMER_GROUP_USER_POST:return l.COMMENT_CUSTOMER_GROUP_USER_POST;case k.COMMENT_REVIEW:return l.COMMENT_REVIEW;case k.REVIEW:return l.REVIEW;default:return"UNKOWN"}};e.exports=a}),null);
__d("UFIThreadedFacecastCommentsUtils",["Bootloader","FeedbackSourceType","UFISharedDispatcher","UFIStoryAction","UFIVideoPlayerControllerStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={isEnabled:function(a){a=a.liveVideoThreadedCommentsConfig;return!!(a&&a.enable_replies)},onReplyClickCallback:function(a,c,d){__p&&__p();var e=c.source;if(e===b("FeedbackSourceType").TAHOE||e===b("FeedbackSourceType").LIVE_VIDEO_STORIES||e===b("FeedbackSourceType").LIVE_WWW_BROADCASTING)return function(){(d.isthreaded&&a.cancomment||!!a.parentcommentid)&&b("UFISharedDispatcher").dispatch(b("UFIStoryAction").showFacecastReplies(c,a.parentcommentid||a.id))};else{var f=b("UFIVideoPlayerControllerStore").getVideoPlayerController(c.instanceid);if(!f)return null;var g=f.getVideoURL();return g==null?null:function(){b("Bootloader").loadModules(["TahoeController","URI"],function(b,c){c=new c(g).setQueryData({comment_id:a.fbid,ref:"tahoe"});b.openFromVideoPlayer(f,c,null,null,"live_video_reply_click",f.getPlayerOrigin(),f.getPlayerSuborigin())},"UFIThreadedFacecastCommentsUtils")}}}};e.exports=a}),null);
__d("UFICommentActions.react",["ix","cx","fbt","BootloadedComponent.react","CommentApprovalsResponsibleUserAction","FluxContainer","JSResource","Middot.react","PublicConversationsUnicornTypedLogger","React","ReactFragment","UFIAddCommentAction","UFICentralUpdates","UFICommentAction","UFICommentLikeCount.react","UFICommentLikeLink.react","UFICommentMetadata.react","UFICommentReactionCount.react","UFICommentSubscribeLink.react","UFIConfig","UFIConstants","UFIFeedbackPinnedCommentLink.react","UFILivePinnedCommentStore","UFILiveVODUnpinCommentLink.react","UFIPrivateReplyIndicator.react","UFIPrivateReplyLink.react","UFISharedDispatcher","UFIStoryAction","UFIThreadedFacecastCommentsUtils","WebCommentViewOption","emptyFunction","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;a=b("React").PropTypes;var k=b("UFIConstants").UFIStatus,l="fsm fwn fcg UFICommentActions",m="UFIDeletedMessageIcon",n="UFIDeletedMessage";c=babelHelpers.inherits(o,b("React").Component);j=c&&c.prototype;o.getStores=function(){return[b("UFILivePinnedCommentStore")]};o.calculateState=function(a,c){a=c.comment;c=b("UFILivePinnedCommentStore").getPinnedCommentID(a.ftentidentifier);a=this.calculatePinActionLinkState(a,c);return{pinActionLinkState:a}};o.calculatePinActionLinkState=function(a,b){if(a.__typename==="local")return"None";return b===a.id?"MayUnpin":"MayPin"};function o(a){j.constructor.call(this,a),this.state=o.calculateState(null,a)}o.prototype.render=function(){__p&&__p();var a=this.props,c=a.comment,d=a.permalink,e=a.feedback,f=a.parentCanComment,h=a.markedAsSpamHere,j=a.showReplyLink,o=a.hideAsSpamForPageAdmin,p=a.translateLink,q=a.isAuthorPinnedComment,r=c.status===k.SPAM_DISPLAY,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=c.__typename!=="local"&&c.status!==k.LIVE_DELETED&&!c.tipOptionIndex;if(G){(c.needsApproval||c.canAppeal||c.canSecure||c.appealStatus!==null)&&(B=b("React").createElement("a",{onClick:function(c){return this.context.dispatch(b("UFICommentAction").remove(a.contextArgs,a.comment,c.target,b("emptyFunction")))}.bind(this),href:"#",role:"button"},i._("Delete")));c.canAppeal&&c.appealStatus!==b("CommentApprovalsResponsibleUserAction").APPEALED&&(C=b("React").createElement("a",{onClick:function(d){return this.context.dispatch(b("UFICommentAction").appealSpam(a.contextArgs,c,d.target,a.feedback))}.bind(this),href:"#",role:"button"},i._("Not Spam")));c.canSecure&&c.appealStatus!==b("CommentApprovalsResponsibleUserAction").SECURED_ACCOUNT&&(D=b("React").createElement("a",{onClick:function(d){return this.context.dispatch(b("UFICommentAction").secureAccount(a.contextArgs,c,d.target,a.feedback))}.bind(this),href:"#",role:"button"},i._("I didn't post this")));c.needsApproval&&(A=b("React").createElement("a",{onClick:function(d){return this.context.dispatch(b("UFICommentAction").keepSpam(a.contextArgs,c,d))}.bind(this),href:"#",role:"button"},i._("Keep comment")));r&&!h?(a.viewerCanMarkNotSpam&&(s=b("React").createElement("a",{onClick:function(d){return this.context.dispatch(b("UFICommentAction").markAsNotSpam(a.contextArgs,c,d))}.bind(this),className:"UFICommentNotSpamLink",href:"#",role:"button"},i._("Unhide"))),o&&e.isthreaded&&c.cancomment&&j&&(w=this.renderCommentReply(c))):(t=b("UFICommentLikeLink.react").getCanRender(c)?b("React").createElement(b("UFICommentLikeLink.react"),{comment:c,contextArgs:a.contextArgs,feedback:e}):null,(e.isthreaded&&c.cancomment&&j||!!c.parentcommentid&&e.cancomment&&f&&!a.isInLiveVideoReplyMode)&&(w=this.renderCommentReply(c)),c.canviewerreact?u=!this.props.hideReactionCount&&c.reactioncount>0?b("React").createElement(b("UFICommentReactionCount.react"),{comment:c,actorForPost:e.actorforpost,supportedReactions:e.supportedreactions,contextArgs:a.contextArgs}):null:u=!this.props.hideReactionCount&&c.likecount>0?b("React").createElement(b("UFICommentLikeCount.react"),{comment:c,actorForPost:e.actorforpost,contextArgs:a.contextArgs}):null,x=this.renderMessageReply(c,e));if(c.attachment&&c.attachment.type==="share"&&!c.attachment.disableRemove&&c.canremove){G="_460h";y=b("React").createElement("a",{className:G,href:"#",onClick:function(d){return this.context.dispatch(b("UFICommentAction").removePreview(a.contextArgs,c,d.target))}.bind(this),role:"button"},i._("Remove Preview"))}c.cansubscribe&&(E=b("React").createElement(b("UFICommentSubscribeLink.react"),{contextArgs:a.contextArgs,comment:c}))}b("UFIConfig").publicConversationsUnicornWhitelist&&(z=b("React").createElement("a",{className:"share_action_link",href:"#",role:"button",title:"[FB Only] Mark this comment as a great comment for futher review.",onClick:function(a){return new(b("PublicConversationsUnicornTypedLogger"))().setCommentFbid(c.fbid).log()}},"Unicorn"));r=a.contextArgs.islivestreaming||a.contextArgs.isActiveLivingRoom;h=r?null:b("React").createElement(b("UFICommentMetadata.react"),{comment:c,onRetrySubmit:function(){return this.context.dispatch(b("UFIAddCommentAction").retrySubmit(a.contextArgs,c))}.bind(this),permalink:d,shortenTimestamp:a.contextArgs.shortenTimestamp,showPermalink:a.showPermalink,contextArgs:a.contextArgs,helpUri:this.props.editNuxHelpUri,showEditNux:!this.props.hasSeenEditNux,onEditNuxCloseClick:this.props.onEditNuxCloseClick,isAuthorPinnedComment:q,displayVerticalCommentVote:this.props.displayVerticalCommentVote});o=null;if(a.contextArgs.enablePinLiveComments&&!c.tipOptionIndex)if((a.contextArgs.islivestreaming||a.contextArgs.isActiveLivingRoom)&&this.state.pinActionLinkState!=="None")o=b("React").createElement(b("UFIFeedbackPinnedCommentLink.react"),{commentID:c.id,commentFBID:c.fbid,contextArgs:a.contextArgs,isPinned:this.state.pinActionLinkState==="MayUnpin"});else if(a.contextArgs.isLiveVOD&&this.state.pinActionLinkState==="MayUnpin"){j=b("UFILivePinnedCommentStore").getPinEventID(a.contextArgs.ftentidentifier);j!=null&&(o=b("React").createElement(b("UFILiveVODUnpinCommentLink.react"),{commentID:c.id,contextArgs:a.contextArgs,pinEventID:j}))}var H={};if(e.customcommentactionlinks){f=function(a){var d=e.customcommentactionlinks[a];if(d.showInMenu)return"continue";a=function(a){return b("UFICentralUpdates").inform(d.type,{comment:c,feedback:e})};H[d.type]=b("React").createElement("a",{href:"#",onClick:a,role:"button"},d.title)};for(var I in e.customcommentactionlinks){G=f(I);if(G==="continue")continue}}c.needsApproval?r=babelHelpers["extends"]({keepToggle:A,deleteToggle:B,metadata:h},H):c.canAppeal||c.canSecure||(c.appealStatus===b("CommentApprovalsResponsibleUserAction").APPEALED||c.appealStatus===b("CommentApprovalsResponsibleUserAction").SECURED_ACCOUNT)&&!c.isApproved?r=babelHelpers["extends"]({appealToggle:C,secureToggle:D,deleteToggle:B,metadata:h},H):a.orderingMode===b("WebCommentViewOption").LIVE_STREAMING&&(a.contextArgs.islivestreaming||a.contextArgs.isLiveVOD)&&b("UFIThreadedFacecastCommentsUtils").isEnabled(a.contextArgs)?r=babelHelpers["extends"]({likeToggle:t,unicornButton:z,commentReply:w,spamToggle:s,likeCount:u,spamCount:v,livePinCommentLink:o,metadata:h},H,{removePreview:y}):a.orderingMode===b("WebCommentViewOption").LIVE_STREAMING?r=babelHelpers["extends"]({likeToggle:t,unicornButton:z,spamToggle:s,likeCount:u,spamCount:v,livePinCommentLink:o,metadata:h},H,{removePreview:y}):a.contextArgs.entstream?r=babelHelpers["extends"]({livePinCommentLink:o,metadata:h,likeToggle:t,unicornButton:z,likeCount:u,commentReply:w,translateLink:p,messageReply:x,subscribeComment:E,spamCount:v,spamToggle:s,removePreview:y},H):e.isthreaded?(this.props.displayVerticalCommentVote&&(F=a.renderCommentCloseButton()),r=babelHelpers["extends"]({likeToggle:t,unicornButton:z,commentReply:w,translateLink:p,messageReply:x,spamToggle:s,removePreview:y,subscribeComment:E,likeCount:u,spamCount:v},H,{livePinCommentLink:o,metadata:h,commentCloseButton:F})):r=babelHelpers["extends"]({livePinCommentLink:o,metadata:h,likeToggle:t,unicornButton:z,subscribeComment:E,likeCount:u,spamCount:v,commentReply:w,translateLink:p,messageReply:x,spamToggle:s,removePreview:y},H);if(c.status===k.LIVE_DELETED){d=i._("Comment deleted");q=b("React").createElement("span",{className:n},b("React").createElement("i",{"aria-label":d,className:m,"data-hover":"tooltip","data-tooltip-content":d,role:"img"}));r.deletionWarning=q}if(c.isApproved){j=i._("This comment was originally marked as spam");r.isApproved=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("Image.react").__setRef("UFICommentActions.react"),bootloadPlaceholder:b("React").createElement("span",null),"data-hover":"tooltip","data-tooltip-content":j,"aria-label":j,src:g("119369"),"data-tooltip-alignh":"left"})}G=!0;f={};for(var J in r){o=r[J];o&&(G?f[J]=o:this.props.displayVerticalCommentVote?f[J]=b("React").createElement("span",{className:"_6hmt"},o):f[J]=b("ReactFragment").create({middot:b("React").createElement(b("Middot.react"),{key:"middot-"+J}),action:o}),G=!1)}return b("React").createElement("div",{className:l},b("ReactFragment").create(f))};o.prototype.renderCommentReply=function(a){var c=!this.props.contextArgs.isScheduledLive&&(this.props.contextArgs.islivestreaming||this.props.orderingMode===b("WebCommentViewOption").LIVE_STREAMING&&this.props.contextArgs.isLiveVOD),d;c?d=b("UFIThreadedFacecastCommentsUtils").onReplyClickCallback(a,this.props.contextArgs,this.props.feedback):d=function(){var c=this.props,d=c.contextArgs;c=c.feedback;c.isthreaded&&a.cancomment?this.context.dispatch(b("UFIStoryAction").showReplies(d,a.id,a)):a.parentcommentid&&this.context.dispatch(b("UFIStoryAction").showReplies(d,a.parentcommentid,a));c.targetiscomment&&b("UFISharedDispatcher").dispatch(b("UFIStoryAction").showComments(d))}.bind(this);return b("React").createElement("a",{className:"UFIReplyLink _460i","data-testid":"ufi_reply_link",href:"#",onClick:d,role:"button"},c&&a.parentcommentid&&!this.props.isInLiveVideoReplyMode?i._("See thread"):i._("Reply"))};o.prototype.renderMessageReply=function(a,c){__p&&__p();if(a.messagereply){if(b("UFIPrivateReplyLink.react").willRender(a.messagereply,c.actorforpost))return b("React").createElement(b("UFIPrivateReplyLink.react"),{actorID:c.actorforpost,activityID:a.id,context:a.messagereply,seeResponseLabel:!0,shouldShowNuxToPage:this.props.contextArgs.shouldShowPrivateReplyNuxToPage,shouldShowGeneralNuxContent:this.props.contextArgs.shouldShowGeneralPrivateReplyNuxContent});else if(b("UFIPrivateReplyIndicator.react").willRender(a.messagereply.status))return b("React").createElement(b("UFIPrivateReplyIndicator.react"),{replyStatus:a.messagereply.status})}else if(a.chattobuy){c="_460j";return b("React").createElement("a",{className:c,href:a.chattobuy,role:"button",rel:"async-dialog"},i._("Message"))}return null};o.contextTypes={dispatch:a.func};e.exports=b("FluxContainer").create(o,{withProps:!0})}),null);
__d("GamesVideoFanSupportAttachmentHandler",["cx","ifRequired"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="tip_attachment_support_link";a={_registeredLinks:new Set(),registerFanSupportAttachment:function(a){if(!a)return;a=a.querySelector('[name="'+h+'"]');a&&!this._registeredLinks.has(a)&&(a.addEventListener("mouseover",this._onLinkMouseover.bind(this,a)),a.addEventListener("click",this._onLinkClick.bind(this,a)),this._registeredLinks.add(a))},_onLinkMouseover:function(a){var b="_1k48";this._isSupportOverlayRegistered()?a.classList.remove(b):a.classList.add(b)},_onLinkClick:function(a,b){if(this._isSupportOverlayRegistered()){a=this._getTahoeView();a&&a.toggleSupportOverlay();b.stopPropagation()}},_isSupportOverlayRegistered:function(){var a=this._getTahoeView();return a&&a.isSupportOverlayRegistered()},_getTahoeView:function(){var a=void 0;b("ifRequired")("Tahoe",function(c){b("ifRequired")("TahoeVideoView",function(b){var d=c.get();if(d){d=d.getView();d instanceof b&&(a=d)}})});return a}};e.exports=a}),null);
__d("XAnimatedImageInLiveCommentPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/gifs/in_live_comment/",{})}),null);
__d("XChatCommandResultCommentPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat_command_result/live_comment_attachment/",{})}),null);
__d("XDonationCommentPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/fundraiser_for_story/live_comment_attachment/",{})}),null);
__d("XFileCommentPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/files_in_comments/live_comment_attachment/",{})}),null);
__d("XTipJarCommentPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/tip_jar/live_comment_attachment/",{})}),null);
__d("XVideoInLiveCommentPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/in_live_comment/",{})}),null);
__d("UFICommentAttachment.react",["cx","AsyncRequest","BootloadedComponent.react","CSS","DOM","DOMQuery","GamesVideoFanSupportAttachmentHandler","HTML","Image.react","JSResource","lazyLoadComponent","Link.react","LitestandShareAttachment","Random","React","ReactDOM","SubscriptionsHandler","UFILocallyComposedCommentStore","XAnimatedImageInLiveCommentPreviewController","XChatCommandResultCommentPreviewController","XDonationCommentPreviewController","XFileCommentPreviewController","XTipJarCommentPreviewController","XUISpinner.react","XVideoInLiveCommentPreviewController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("lazyLoadComponent")(b("JSResource")("PageCommentQuestionMessageCard.react").__setRef("UFICommentAttachment.react")),j=b("lazyLoadComponent")(b("JSResource")("PagePrivateReplyMessageCard.react").__setRef("UFICommentAttachment.react")),k=55,l="ufi_comment_photo",m=80,n="ufi_comment_sticker";c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.state={localCommentIDs:b("UFILocallyComposedCommentStore").getStateForInstance(this.props.comment.ufiinstanceid),randomInstanceID:Math.floor(b("Random").random()*1e4)}}a.prototype.$2=function(a){return a.photo_comment||a.video_comment||a.file_comment||a.attachment};a.prototype.$3=function(a,b){var c=this.props.allowCustomStickers?k:m,d,e,f;b>a?(f=c/b,d=a*f,e=b*f):(f=c/a,d=a*f,e=b*f);return{height:Math.round(d),width:Math.round(e)}};a.prototype.componentDidMount=function(){var a=this.$2(this.props.comment);a&&this.renderAttachment(a);this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("UFILocallyComposedCommentStore").addListener(function(){this.setState({localCommentIDs:b("UFILocallyComposedCommentStore").getStateForInstance(this.props.comment.ufiinstanceid)})}.bind(this)))};a.prototype.shouldComponentUpdate=function(a,b){b=this.$2(this.props.comment);a=this.$2(a.comment);if(!b&&!a)return!1;if(!b||!a||b.markup!=a.markup)return!0;else return!1};a.prototype.componentDidUpdate=function(a){a=this.$2(this.props.comment);if(!a)return;a.type!=="sticker"&&a.type!=="photo"&&this.renderAttachment(a)};a.prototype.componentWillUnmount=function(){if(this.refs&&this.refs.contents){var a=b("ReactDOM").findDOMNode(this.refs.contents);b("DOM").empty(a)}this.$1&&this.$1.release()};a.prototype.renderAttachment=function(a){__p&&__p();if(this.props.isPinnedLivingRoomPhotoComment)return;if(a&&this.refs&&this.refs.contents&&a.markup){var c=a.markup;b("HTML").isHTML(c.markup)&&(c=b("HTML").replaceJSONWrapper(c.markup).getRootNode());var d=c.parentNode,e=b("ReactDOM").findDOMNode(this.refs.contents);d&&d!==e&&(c=c.cloneNode(!0));if(this.props.disableTheater){d=c.querySelector('a[rel="theater"]');d&&b("DOM").setAttributes(d,{target:"_blank",rel:""})}b("DOM").setContent(e,c);if(a.type=="share"){d="_6m2";d=e&&b("CSS").hasClass(e,d)?e:b("DOMQuery").scry(e,"."+d)[0];d=d?d:e;d instanceof HTMLElement&&b("LitestandShareAttachment").init(d)}else a.type==="TIP_JAR_PAYMENT"&&b("GamesVideoFanSupportAttachmentHandler").registerFanSupportAttachment(c)}else if(a&&a.type=="video"&&!a.markup){e=b("XVideoInLiveCommentPreviewController").getURIBuilder();new(b("AsyncRequest"))(e.getURI()).setMethod("POST").setData({video_id:a.target.id}).setHandler(function(a){this.renderAttachment(a.payload.video_preview.video_comment)}.bind(this)).send()}else a&&a.type=="gif"&&!a.markup?new(b("AsyncRequest"))(b("XAnimatedImageInLiveCommentPreviewController").getURIBuilder().getURI()).setMethod("POST").setData({comment_id:this.props.comment.id,dom_selector:"div#"+this.$4(a.type)}).send():a&&a.type=="file"&&!a.markup?new(b("AsyncRequest"))(b("XFileCommentPreviewController").getURIBuilder().getURI()).setMethod("POST").setData({comment_id:this.props.comment.id,dom_selector:"div#"+this.$4(a.type)}).send():a&&a.type=="donation"&&!a.markup?new(b("AsyncRequest"))(b("XDonationCommentPreviewController").getURIBuilder().getURI()).setMethod("POST").setData({comment_id:this.props.comment.id,dom_selector:"div#"+this.$4(a.type)}).send():a&&a.type=="TIP_JAR_PAYMENT"&&!a.markup?new(b("AsyncRequest"))(b("XTipJarCommentPreviewController").getURIBuilder().getURI()).setMethod("POST").setData({comment_id:this.props.comment.id,dom_selector:"div#"+this.$4(a.type)}).send():a&&a.type=="chat_command_result"&&!a.markup&&new(b("AsyncRequest"))(b("XChatCommandResultCommentPreviewController").getURIBuilder().getURI()).setMethod("POST").setData({comment_id:this.props.comment.id,dom_selector:"div#"+this.$4(a.type)}).send()};a.prototype.renderSticker=function(a){var c=this.$3(Number(a.metadata.height),Number(a.metadata.width)),d=null,e=null;window.devicePixelRatio&&window.devicePixelRatio>1?(d=a.metadata.sprite_uri_2x,e=a.metadata.source_uri_2x):(d=a.metadata.sprite_uri,e=a.metadata.source_uri);return b("React").createElement(b("BootloadedComponent.react"),{accessibilityLabel:a.metadata.accessibilityLabel,bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),null),bootloadLoader:b("JSResource")("Sticker.react").__setRef("UFICommentAttachment.react"),className:"UFICommentStickerAttachment",animationTrigger:"load_and_hover",frameCount:a.metadata.frameCount,frameRate:a.metadata.frameRate,framesPerCol:a.metadata.framesPerCol,framesPerRow:a.metadata.framesPerRow,spriteURI:d,sourceHeight:c.height,sourceURI:e,sourceWidth:c.width,testID:n})};a.prototype.renderPhoto=function(a){var c="_2rn3 _4-eo";return b("React").createElement("div",{className:"_4iv9"},b("React").createElement(b("Link.react"),{className:c,"data-testid":l,rel:"theater",href:a.metadata.url},b("React").createElement("div",{style:{height:a.metadata.height}},b("React").createElement(b("Image.react"),{src:a.metadata.preview_uri}))))};a.prototype.renderShare=function(a){return b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("UFILiveCommentLinkPreview.react").__setRef("UFICommentAttachment.react"),attachment:a})};a.prototype.renderLivePlaceInfo=function(a){return b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("span",null),bootloadLoader:b("JSResource")("PlaceListLiveCommentAttachment.react").__setRef("UFICommentAttachment.react"),commentID:this.props.comment.fbid,data:a,postID:this.props.comment.ftentidentifier})};a.prototype.renderPlaceInfo=function(a){var c=this.props.comment.__typename==="local"||this.state.localCommentIDs[this.props.comment.id];return b("React").createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),null),bootloadLoader:b("JSResource")("MultiPlacePageInfoCard.react").__setRef("UFICommentAttachment.react"),isLocallyComposed:c,postID:this.props.comment.ftentidentifier,actorID:this.props.comment.author},a.props))};a.prototype.renderProductInfo=function(a){return a.props.category==="Books"?b("React").createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),null),bootloadLoader:b("JSResource")("ProductBookRecommendationCard.react").__setRef("UFICommentAttachment.react")},a.props)):b("React").createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:b("React").createElement(b("XUISpinner.react"),null),bootloadLoader:b("JSResource")("ProductRecommendationCard.react").__setRef("UFICommentAttachment.react")},a.props))};a.prototype.renderUpsellInfo=function(a){if(a.subtype){if(a.subtype=="question_triggered_page_msg")return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement(b("XUISpinner.react"),null)},b("React").createElement(i,a));if(a.subtype=="private_reply_user_msg")return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement(b("XUISpinner.react"),null)},b("React").createElement(j,a))}return b("React").createElement("span",null)};a.prototype.$4=function(a){return a+"_comment_attachment_"+this.props.comment.id+this.state.randomInstanceID};a.prototype.render=function(){__p&&__p();var a=this.$2(this.props.comment);if(a)if(a.type==="sticker")return this.renderSticker(a);else if(a.type==="gif"||a.type==="donation"||a.type==="TIP_JAR_PAYMENT"||a.type==="chat_command_result")return b("React").createElement("div",{ref:"contents",id:this.$4(a.type)},b("React").createElement(b("XUISpinner.react"),null));else if(a.type==="photo")return this.renderPhoto(a);else if(a.type==="live_share")return this.renderShare(a);else if(a.type=="comment_place_info")return this.renderPlaceInfo(a);else if(a.type=="live_comment_place_info")return this.renderLivePlaceInfo(a);else if(a.type=="comment_product_info")return this.renderProductInfo(a);else if(a.type=="upsell_info")return this.renderUpsellInfo(a);else return b("React").createElement("div",{ref:"contents"});return b("React").createElement("span",null)};e.exports=a}),null);
__d("HovercardLinkInterpolator",["cx","fbt","Badge.react","CommentMentionsGatingConfig","HovercardLink","Link.react","React","UFIActorIconContainer.react","URI","isFacebookURI","isRTL"],(function(a,b,c,d,e,f,g,h){__p&&__p();function a(a,c,d,e,f,g){__p&&__p();g===void 0&&(g=null);c=c.entity;d=d||(c.external?"_blank":null);var i=(c.external?"":"profileLink")+(c.weakreference?" weakReference":""),j=c.hashtag?a.substring(1):a;j=b("isRTL")(j)?"rtl":"ltr";var k=new(b("URI"))(c.url);b("isFacebookURI")(k)&&k.addQueryData({hc_location:f});var l=c.shimhash?c.shimhash:null,m=!c.external&&!c.hashtag&&!c.photo&&!c.note&&!c.statusupdate&&!c.video;m=m?{"data-hovercard":b("HovercardLink").constructEndpointWithGroupLocationAndExtraParams(c,e,c.hovercardlocation?c.hovercardlocation:f,null,g).toString()}:{};if(c.hashtag)e=b("React").createElement("a",babelHelpers["extends"]({},m,{className:"_58cn",dir:j,href:k.toString(),target:d}),b("React").createElement("span",{"aria-label":h._("hashtag"),className:"_58cl"},a.substring(0,1)),b("React").createElement("span",{className:"_58cm"},a.substring(1)));else if(c.type==="user"&&b("CommentMentionsGatingConfig").enabled_rich_comment_mentions)e=b("React").createElement("div",{className:"_35mm"},b("React").createElement(b("Link.react"),babelHelpers["extends"]({},m,{className:i,dir:j,href:{url:k.toString(),shimhash:l},target:d}),b("React").createElement("span",{className:"_35mo"},b("React").createElement("span",{className:"_35mp"},b("React").createElement(b("UFIActorIconContainer.react"),{actorID:c.id.toString(),tinyIcon:!0})),b("React").createElement("span",{className:"_35mq"},a))));else{f=[];c.weakreference&&f.push(b("React").createElement("i",{key:"weakreference",className:"UFIWeakReferenceIcon"}));f.push(a);c.workForeignEntity&&f.push(b("React").createElement(b("Badge.react"),{key:"noncoworker",type:"work_non_coworker"}));c.dialogurl?e=b("React").createElement(b("Link.react"),babelHelpers["extends"]({},m,{className:i,dir:j,ajaxify:c.dialogurl,rel:"dialog",href:{url:k.toString(),shimhash:l},target:d}),f):e=b("React").createElement(b("Link.react"),babelHelpers["extends"]({},m,{className:i,dir:j,href:{url:k.toString(),shimhash:l},target:d}),f)}return e}e.exports=a}),null);
__d("VideoTimestampsClicksWWWTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:VideoTimestampsClicksWWWLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:VideoTimestampsClicksWWWLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:VideoTimestampsClicksWWWLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setCommentID=function(a){this.$1.comment_id=a;return this};a.prototype.setIsContentTimestamp=function(a){this.$1.is_content_timestamp=a;return this};a.prototype.setLocalCommentFeedbackID=function(a){this.$1.local_comment_feedback_id=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setVideoTimestamp=function(a){this.$1.video_timestamp=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};c={comment_id:!0,is_content_timestamp:!0,local_comment_feedback_id:!0,time:!0,vc:!0,video_timestamp:!0,weight:!0};e.exports=a}),null);
__d("transformTextRanges",["UnicodeUtils"],(function(a,b,c,d,e,f){__p&&__p();a=function(a,c,d){__p&&__p();if(!a||!c||!d)return a;c.sort(function(a,b){return a.offset-b.offset});var e=0;for(var f=0;f<c.length;f++){c[f].offset+=e;var g=b("UnicodeUtils").substr(a,c[f].offset,c[f].length),h=b("UnicodeUtils").strlen(g),i=d(g,c[f]),j=b("UnicodeUtils").strlen(i);g!==i&&(a=b("UnicodeUtils").substr(a,0,c[f].offset)+i+b("UnicodeUtils").substr(a,c[f].offset+c[f].length),c[f].length=j,e+=j-h)}return a};e.exports=a}),null);
__d("UFICommentUtils",["HovercardLinkInterpolator","React","TextDelightRange.react","TextDelightSurface","UFIConstants","UFIVideoPlayerRegistry","URI","URITruncator","VideoTimestampsClicksWWWTypedLogger","transformTextRanges"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getCommentTextWithTruncatedURIs:function(a,c){b("UFIConstants").commentURLTruncationLength&&(a&&a.length>0&&(c=b("transformTextRanges")(c,a,function(a,c){c=c.entity&&(c.entity.external||c.entity.__typename==="ExternalUrl");return c?b("URITruncator")(a,b("UFIConstants").commentURLTruncationLength):a})));return c},getCommentBodyInterpolator:function(a,c,d,e,f){__p&&__p();return function(g,h){__p&&__p();if(h.videoTimestamp){if(e)return b("React").createElement("span",null,h.entity);var i=function(a){a.preventDefault();new(b("VideoTimestampsClicksWWWTypedLogger"))().setVideoTimestamp(h.integerTimestamp).setCommentID(d).setIsContentTimestamp(!1).log();c&&(b("UFIVideoPlayerRegistry").seekAvailableVideoPlayerController(c,h.integerTimestamp),b("UFIVideoPlayerRegistry").scrollToAvailableVideo(c));return!1};return b("React").createElement("a",{className:"TimestampLink",onClick:i,href:"#"},h.entity)}else if(h.sphericalViewport){i=function(a){a.preventDefault();c&&b("UFIVideoPlayerRegistry").setAvailableVideoPlayerControllerSphericalViewport(c,{yaw:h.yaw,pitch:h.pitch});return!1};return b("React").createElement("a",{onClick:i,href:"#"},h.entity)}else if(h.sphericalViewportAndTimestamp){i=function(a){a.preventDefault();c&&(b("UFIVideoPlayerRegistry").setAvailableVideoPlayerControllerSphericalViewport(c,{yaw:h.yaw,pitch:h.pitch}),b("UFIVideoPlayerRegistry").seekAvailableVideoPlayerController(c,h.integerTimestamp));return!1};return b("React").createElement("a",{onClick:i,href:"#"},h.entity)}else if(h.campaign)return b("React").createElement(b("TextDelightRange.react"),{campaignID:h.campaign.id,commentPrivacy:f||void 0,delightStyles:h.campaign.delight_styles,surface:b("TextDelightSurface").COMMENT},g);else return b("HovercardLinkInterpolator")(g,h,"_blank",a,"ufi")}},shallowCopyRanges:function(a){if(!a)return a;var b=[];a.forEach(function(a){b.push(babelHelpers["extends"]({},a))});return b},annotateProfileURIIfPublic:function(a,c){return!a?c:new(b("URI"))(c).addQueryData("rc","p").toString()},shouldShowTranslateAll:function(a,b,c,d){__p&&__p();if(!a)return!1;var e=0,f,g;for(var h=0;h<a.length;h++){f=a[h];f.istranslatable&&!f.translationdata&&!d[f.id]&&e++;if(e>1)return!0;if(c[f.id]){g=b?b[f.id]:[];for(var i=0;i<g.length;i++){f=g[i];f.istranslatable&&!f.translationdata&&!d[f.id]&&e++;if(e>1)return!0}}}return!1}};e.exports=a}),null);
__d("UFIActor.react",["cx","fbt","Badge.react","Focus","HovercardLink","Locale","React","ReactDOM","UFICommentUtils","UserHovercardLocation"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.componentDidMount=function(){this.props.focusOnMount&&b("Focus").setWithoutOutline(b("ReactDOM").findDOMNode(this.refs.authorName))};a.prototype.render=function(){__p&&__p();var a=this.props.author,c=b("Locale").isRTL()?"rtl":"ltr",d=(this.props.isAuthorWeakReference?"weakReference":"")+" UFICommentActorName",e=[];this.props.isAuthorWeakReference&&e.push(b("React").createElement("i",{className:"UFIWeakReferenceIcon",key:"icon"}));this.props.author.badgeSrc&&this.props.author.badgeSrc.length>0&&e.push(b("React").createElement("span",null,b("React").createElement(b("Badge.react"),{type:"subscription",size:"medium",key:"badge"})," "));a.persona?e.push(h._("{author} ({persona})",[h._param("author",a.firstName),h._param("persona",a.persona)])):this.props.useFirstName?e.push(a.firstName):this.props.author.isBusinessPersona&&this.props.author.assetRole?e.push(a.name+" "+h._("(")+this.props.author.assetRole+h._(")")):e.push(a.name);this.props.isAuthorNonCoworker?e.push(b("React").createElement(b("Badge.react"),{key:"noncoworker",type:"work_non_coworker"})):this.props.isAuthorBot&&e.push(b("React").createElement(b("Badge.react"),{key:"bot",type:"bot"}));var f=this.props.isAdminViewer?b("UserHovercardLocation").UFI_ADMIN:b("UserHovercardLocation").UFI,g=Object.assign({},this.props);delete g.author;delete g.delimiter;delete g.dialogUrl;delete g.disableAuthorLink;delete g.focusOnMount;delete g.groupOrEventID;delete g.hovercardLocation;delete g.isAdminViewer;delete g.isAuthorBot;delete g.isAuthorNonCoworker;delete g.isAuthorWeakReference;delete g.isPublic;delete g.showHovercard;delete g.useFirstName;f=this.props.showHovercard?b("HovercardLink").constructEndpointWithGroupLocationAndExtraParams(a,this.props.groupOrEventID,this.props.hovercardLocation?this.props.hovercardLocation:f,this.props.isAuthorWeakReference,{is_public:this.props.isPublic}).toString():null;var i=a.uri&&!this.props.disableAuthorLink;a=i?b("UFICommentUtils").annotateProfileURIIfPublic(!!this.props.isPublic,a.uri):null;i=i?b("React").createElement("a",babelHelpers["extends"]({},g,{className:d,"data-hovercard":f,"data-ft":this.props["data-ft"],dir:c,href:a,ref:"authorName"}),e):b("React").createElement("span",{className:d,dir:c,ref:"authorName"},e);this.props.dialogUrl&&(i=b("React").createElement("a",babelHelpers["extends"]({},g,{className:d,"data-hovercard":f,"data-ft":this.props["data-ft"],dir:c,ajaxify:this.props.dialogUrl,rel:"dialog",href:a,ref:"authorName"}),e));return b("React").createElement("span",null,i,b("React").Children.map(this.props.children,function(a){return a?[a.key==="badge"||a.key==="constituentTitle"||a.key==="moderatorBadge"||a.key==="friendsOnlyBadge"||a.key==="groupMemberBadge"?"":this.props.delimiter,a]:null}.bind(this)))};function a(){i.apply(this,arguments)}a.defaultProps={delimiter:" \xb7 ",isAdminViewer:!1,isPublic:!1};e.exports=a}),null);
__d("UFISocialContext.react",["fbt","HovercardLink","ProfileBrowserLink","ProfileBrowserTypes","React","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=27;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){__p&&__p();var a=this.props.topMutualFriend,c=this.props.otherMutualCount,d=this.props.commentAuthor,e=b("HovercardLink").constructEndpoint(a).toString();e=b("React").createElement("a",{href:a.uri,"data-hovercard":e,key:"top"},a.name);var f=d.name.length+a.name.length,h;if(c===0)h=g._("Friends with {name}",[g._param("name",e)]);else if(f<i){c==1?f=g._("1 other"):f=g._({"*":"{count} others"},[g._param("count",c,[0])]);h=g._("Friends with {name} and {others}",[g._param("name",e),g._param("others",this.getOthersLink(f,d,a))])}else{e=g._({"*":"{count} mutual friends"},[g._param("count",c+1,[0])]);h=this.getOthersLink(e,d)}return b("React").createElement("span",{className:"UFICommentSocialContext"},h)};a.prototype.getOthersLink=function(a,c,d){var e=b("ProfileBrowserTypes").MUTUAL_FRIENDS,f={uid:c.id};c=new(b("URI"))("/ajax/mutual_friends/tooltip.php").setQueryData({friend_id:c.id});d&&c.addQueryData({exclude_id:d.id});d=b("ProfileBrowserLink").constructDialogURI(e,f).toString();return b("React").createElement("a",{ajaxify:d,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-uri":c.toString(),href:b("ProfileBrowserLink").constructPageURI(e,f).toString(),key:"others",rel:"dialog"},a)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("UFICommentAuthorName.react",["ix","cx","Badge.react","BootloadedComponent.react","Image.react","JSResource","React","TrackingNodes","UFIActor.react","UFISocialContext.react","asset","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("lazyLoadComponent")(b("JSResource")("GroupMemberBadgeWithTooltip.react").__setRef("UFICommentAuthorName.react"));c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){var a=this.props,c=a.author,d=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.USER_NAME),e=null,f=a.isAuthorOriginalPoster&&!a.isFeatured;f&&(e=b("React").createElement("div",{className:"UFIOPIconContainer","data-tooltip-alignh":"center","data-hover":"tooltip","data-tooltip-content":"Original poster",key:"badge"},b("React").createElement("i",{className:"UFIOriginalPosterIcon"})));return b("React").createElement(b("UFIActor.react"),{author:c,"data-ft":d,disableAuthorLink:a.disableAuthorLink,focusOnMount:a.focusOnMount,groupOrEventID:a.groupOrEventID,hovercardLocation:a.hovercardLocation,isAdminViewer:a.isAdminViewer,isAuthorBot:a.isAuthorBot,isAuthorNonCoworker:a.isAuthorNonCoworker,isAuthorWeakReference:a.isAuthorWeakReference,isPublic:this.props.isPublic,key:"author",dialogUrl:a.dialogUrl,target:this.props.openLinkInNewTab?"_blank":"_self",onClick:this.props.onLinkClickCallback,showHovercard:a.showHovercard,useFirstName:a.useFirstName},e,a.isFeatured?b("React").createElement(b("Badge.react"),{key:"badge",size:"xsmall",type:"verified"}):null,this.$1(c),this.$2(c),this.$3(),this.$4(),a.socialContext?b("React").createElement(b("UFISocialContext.react"),{topMutualFriend:a.authorProfiles[a.socialContext.topmutualid],otherMutualCount:a.socialContext.othermutualcount,commentAuthor:c}):null)};a.prototype.$2=function(a){var c=this.props.constituentBadge;if(c&&c.officeTitle&&c.representativeName&&c.commentId)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ConstituentBadge.react").__setRef("UFICommentAuthorName.react"),bootloadPlaceholder:b("React").createElement("div",null),authorFirstName:a.firstName,authorId:a.id,commentId:c.commentId,ftId:c.ftId,isOwner:c.isOwner,key:"constituentTitle",officeTitle:c.officeTitle,representativeName:c.representativeName,representativeId:c.representativeId,upsellEnabled:c.upsellEnabled});return this.props.hasConstituentBadge?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ConstituentBadge.react").__setRef("UFICommentAuthorName.react"),bootloadPlaceholder:b("React").createElement("div",null),authorFirstName:a.firstName,authorId:a.id,commentId:this.props.commentID,key:"constituentTitle"}):null};a.prototype.$1=function(a){return this.props.hasFriendsOnlyBadge?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FriendsOnlyBadge.react").__setRef("UFICommentAuthorName.react"),bootloadPlaceholder:b("React").createElement(b("Image.react"),{key:"friendsOnlyBadge",src:g("480274"),style:{marginLeft:"3px",verticalAlign:"-1px"}}),key:"friendsOnlyBadge",viewerIsAuthor:!!this.props.viewerIsAuthor,authorFirstName:a.firstName,commentPrivacyValue:this.props.commentPrivacyValue}):null};a.prototype.$3=function(){return!this.props.moderatorBadgeText?null:b("React").createElement(b("Image.react"),{className:"_4tvr",key:"moderatorBadge",src:g("365780"),"data-hover":"tooltip","data-tooltip-content":this.props.moderatorBadgeText})};a.prototype.$4=function(){var a=this.props.groupMemberBadge;return!a?null:b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null),key:"groupMemberBadge"},b("React").createElement(j,babelHelpers["extends"]({className:"_2ltv",badgeText:"",renderAsPill:!1,showText:!1},a)))};function a(){i.apply(this,arguments)}a.propTypes={author:c.object.isRequired,authorProfiles:c.object.isRequired,commentID:c.string,commentPrivacyValue:c.number,constituentBadge:c.object,groupMemberBadge:c.object,dialogUrl:c.string,disableAuthorLink:c.bool,focusOnMount:c.bool,groupOrEventID:c.string,hasConstituentBadge:c.bool,hasFriendsOnlyBadge:c.bool,hovercardLocation:c.string,isAdminViewer:c.bool,isAuthorBot:c.bool,isAuthorNonCoworker:c.bool,isAuthorWeakReference:c.bool,isAuthorOriginalPoster:c.bool,isFeatured:c.bool,isPublic:c.bool,moderatorBadgeText:c.string,showHovercard:c.bool,socialContext:c.object,useFirstName:c.bool,viewerIsAuthor:c.bool,openLinkInNewTab:c.bool,onLinkClickCallback:c.func};e.exports=a}),null);
__d("IntlLang",["UnicodeBidi"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c={HE:"\u0590\u05be\u05c0\u05c3\u05c6\u05c8-\u05cf\u05d0-\u05ea\u05eb-\u05ef\u05f0-\u05f2\u05f3-\u05f4\u05f5-\u05ff\u07c0-\u07c9\u07ca-\u07ea\u07f4-\u07f5\u07fa\u07fb-\u07ff\u0800-\u0815\u081a\u0824\u0828\u082e-\u082f\u0830-\u083e\u083f\u0840-\u0858\u085c-\u085d\u085e\u085f-\u089f\u200f\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb37\ufb38-\ufb3c\ufb3d\ufb3e\ufb3f\ufb40-\ufb41\ufb42\ufb43-\ufb44\ufb45\ufb46-\ufb4f"};var g=new RegExp("["+c.HE+"]");function a(a){a=b("UnicodeBidi").firstStrongChar(a);if(a===null)return null;return g.exec(a)?"he":null}d={getLang:a};e.exports=d}),null);
__d("UFICommentBody.react",["cx","CommentPrivacyValue","IntlLang","Locale","React","TrackingNodes","TruncatedTextWithEntities.react","UFICommentUtils","UFIConfig","UFIConstants","UnicodeBidi"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props,c=a.commentText,d=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.USER_MESSAGE),e=b("UnicodeBidi").isDirectionLTR(c),f=!e,g=e&&b("Locale").isRTL()?"ltr":f&&!b("Locale").isRTL()?"rtl":null,h=b("IntlLang").getLang(c),i=b("UFICommentUtils").getCommentBodyInterpolator(a.groupOrEventID,a.ufiInstanceID,a.commentFBID,!!a.isLiveStreaming,a.commentPrivacy);i=b("React").createElement(b("TruncatedTextWithEntities.react"),{key:"comment-body",className:"UFICommentBody"+(a.showEmojisStandalone?" _iqk":""),interpolator:i,ranges:a.commentRanges,textDelightRanges:a.textDelightRanges,text:c,truncationPercent:b("UFIConstants").commentTruncationPercent,maxLength:a.maxLength,maxLines:a.maxLines,renderEmoticons:b("UFIConfig").renderEmoticons,renderEmoji:b("UFIConfig").renderEmoji,showEmojisStandalone:a.showEmojisStandalone,"data-ft":d,dir:g,lang:h,markViewerHasInteracted:this.props.markViewerHasInteracted,allowSeeMoreLinebreakOnLongWords:!0,shouldExpand:this.props.shouldExpand});if(a.socialContext)i=b("React").createElement("div",{key:"body"},i);else{c=(e&&b("Locale").isRTL()?"_5wjy":"")+(e&&b("Locale").isRTL()?" _5wjz":"")+(f&&!b("Locale").isRTL()?" _5wj-":"")+(f&&!b("Locale").isRTL()?" _5wj_":"");i=c?b("React").createElement("div",{key:"body",className:c},i):[" ",i]}return b("React").createElement("span",null,i)};function a(){h.apply(this,arguments)}a.propTypes={commentText:c.string.isRequired,commentRanges:c.array,commentPrivacy:c.oneOf(Object.values(b("CommentPrivacyValue"))),textDelightRanges:c.array,showEmojisStandalone:c.bool,groupOrEventID:c.string,maxLength:c.number,maxLines:c.number,socialContext:c.object,markViewerHasInteracted:c.func,ufiInstanceID:c.string,commentFBID:c.oneOfType([c.string,c.number]),isLiveStreaming:c.bool,shouldExpand:c.bool};e.exports=a}),null);
__d("LiveVideoAnnouncementGlyph",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BULB:"bulb",COMMENT:"comment",EYE:"eye",INVITE:"invite",LIKE:"like",LIVE_VIDEO:"live-video",FOLLOW:"follow",FOLLOWING:"following",SHARE:"share",SEE_FIRST:"see_first",CHECKMARK:"checkmark",AVATAR:"avatar",PLAY:"play"})}),null);
__d("UFICommentLiveVideoAnnouncementImage.react",["ix","cx","CurrentUser","Image.react","LiveVideoAnnouncementGlyph","React","fbglyph"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.render=function(){var a=this.$1();if(!a)return b("React").createElement("span",null);var c=b("CurrentUser").isWorkUser();return this.props.isJoinEvent?b("React").createElement("div",{className:"_15lj"},b("React").createElement(b("Image.react"),{className:"_24l1",src:a})):b("React").createElement("div",{className:"_15lj"+(c?"":" _z79")+(c?" _66n8":"")},b("React").createElement(b("Image.react"),{className:"_15lk",height:20,src:a,width:20}))};a.prototype.$1=function(){__p&&__p();if(!this.props.isJoinEvent)if(b("CurrentUser").isWorkUser())return g("127093");else return g("114228");if(this.props.image)return this.props.image;switch(this.props.glyphName){case b("LiveVideoAnnouncementGlyph").COMMENT:return g("114673");case b("LiveVideoAnnouncementGlyph").EYE:return g("114860");case b("LiveVideoAnnouncementGlyph").BULB:return g("114492");case b("LiveVideoAnnouncementGlyph").LIKE:return g("115160");default:return null}};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("XUICircleDotsButton.react",["cx","fbt","React","XUIAbstractGlyphButton.react","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){"use strict";var a=this.props,c=a.className,d=a.label;a=a.tooltip;var e=this.props.title;!this.props.title&&!a&&(e=d);return b("React").createElement(b("XUIAbstractGlyphButton.react"),babelHelpers["extends"]({},this.props,{label:d,title:e,"data-hover":a&&"tooltip","data-tooltip-alignh":a&&"center","data-tooltip-content":a,className:b("joinClasses")(c,"_6eib")}))};function a(){"use strict";i.apply(this,arguments)}a.defaultProps={label:h._("Manage")};e.exports=a}),null);
__d("UFICommentMenu.react",["ix","cx","AuthorPinnedCommentLogger","Bootloader","Image.react","React","XUICircleDotsButton.react","XUICloseButton.react","XUIDotsButton.react","XUIEditButton.react","fbglyph","joinClasses","keyMirror"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k;c=b("React").PropTypes;var l,m,n,o,p,q=b("keyMirror")({EDIT:!0,CLOSE:!0,CHEVRON:!0,DOTS:!0,TOOLTIP:!0});d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={bootloading:!1,bootloaded:!1,needsExpand:!1},this.onClickGuard=function(a){if(this.state.bootloading)return;else!this.state.bootloaded&&this.props.menuData&&(this.setState({bootloading:!0}),b("Bootloader").loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu","XUIMenuSeparator.react"],function(a,b,c,d){l=a,m=b,n=c,o=c.Item,p=d,this.setState({bootloading:!1,bootloaded:!0,needsExpand:!0})}.bind(this),"UFICommentMenu.react"));this.props.onClick&&this.props.onClick(a)}.bind(this),c}a.prototype.shouldComponentUpdate=function(a,b){return this.state.needsExpand&&!b.needsExpand?!1:!0};a.prototype.componentDidUpdate=function(){this.state.needsExpand&&(this.refs.menu.showPopover(),this.props.onMenuShown&&this.props.onMenuShown(),this.setState({needsExpand:!1}))};a.prototype.$1=function(){switch(this.props.menuType){case q.EDIT:return b("XUIEditButton.react");case q.CLOSE:return b("XUICloseButton.react");case q.DOTS:return this.props.showRedesign?b("XUICircleDotsButton.react"):b("XUIDotsButton.react");case q.TOOLTIP:return r;case q.CHEVRON:default:return s}};a.prototype.$2=function(a){return a.map(function(a){var c=this.$3(a.value),d=this.props.commentID||"";a.testid==="ufi_comment_menu_pin_by_author"?b("AuthorPinnedCommentLogger").logPinButtonShown(d.toString()):a.testid==="ufi_comment_menu_unpin_by_author"&&b("AuthorPinnedCommentLogger").logUnpinButtonShown(d.toString());return b("React").createElement(o,{className:"_6mdw","data-testid":a.testid,key:a.value,value:a.value},c,a.label)}.bind(this))};a.prototype.$3=function(a){__p&&__p();switch(a){case"edit":return b("React").createElement("div",{className:"_6mdx _6mdy"});case"hide":return b("React").createElement("div",{className:"_6mdx _6mdz"});case"remove":return b("React").createElement("div",{className:"_6mdx _6md_"});case"delete_and_block":return b("React").createElement("div",{className:"_6mdx _6me0"});case"delete_comment_with_feedback":return b("React").createElement("div",{className:"_6mdx _7dg3"});case"delete_comment_and_remove_commenter":return b("React").createElement("div",{className:"_6mdx _6me1"});case"mute_member":return b("React").createElement("div",{className:"_6mdx _6me2"});case"hide_text_delights":return b("React").createElement("div",{className:"_6mdx _6me3"});case"pin_by_author":return b("React").createElement("div",{className:"_6mdx _6me4"});case"unpin_by_author":return b("React").createElement("div",{className:"_6mdx _6mea"});case"live_video_pin":return b("React").createElement("div",{className:"_6mdx _6meb"});case"live_video_unpin":return b("React").createElement("div",{className:"_6mdx _6mec"});case"view_edit_history":return b("React").createElement("div",{className:"_6mdx _6med"});default:return null}};a.prototype.render=function(){var a=this.$1();if(this.state.bootloaded){var c=[];this.props.menuData&&c.push.apply(c,this.$2(this.props.menuData));this.props.menuUserSection&&(c&&c.push(b("React").createElement(p,{key:"xui_separator"})),c.push.apply(c,this.$2(this.props.menuUserSection)));c=b("React").createElement(n,{onItemClick:this.props.onAction},c);return b("React").createElement(m,babelHelpers["extends"]({},this.props,{alignh:"right",position:this.props.showRedesign?"above":null,layerBehaviors:[l],menu:c,ref:"menu",onShow:this.props.onPopoverMenuShow,onHide:this.props.onPopoverMenuHide}),b("React").createElement(a,babelHelpers["extends"]({},this.props,{href:"#",onClick:this.onClickGuard})))}else return b("React").createElement(a,babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"_1-be"+(this.props.showPinnedCommentNux?" UFICommentCloseButtonNux":"")),href:"#",onClick:this.onClickGuard}))};a.MenuType=q;a.propTypes={menuData:c.array,menuUserSection:c.array,menuType:c.oneOf(Object.keys(q)).isRequired,onAction:c.func,onClick:c.func,onMenuShown:c.func,commentID:c.string};j=babelHelpers.inherits(r,b("React").Component);j&&j.prototype;r.prototype.render=function(){return b("React").createElement("a",this.props,b("React").createElement(b("Image.react"),{"data-hover":"tooltip","data-tooltip-content":this.props.tooltip,"aria-label":this.props.tooltip,src:g("126426"),"data-tooltip-alignh":"center"}))};function r(){j.apply(this,arguments)}k=babelHelpers.inherits(s,b("React").Component);k&&k.prototype;s.prototype.render=function(){return b("React").createElement("a",this.props,b("React").createElement(b("Image.react"),{"data-hover":"tooltip","data-tooltip-content":this.props.tooltip,"aria-label":this.props.tooltip,src:g("125792")}))};function s(){k.apply(this,arguments)}e.exports=a}),null);
__d("UFICommentPlayerStatsCard.react",["cx","fbt","Image.react","Link.react","React","XUIText.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j="\xb7";i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.shouldComponentUpdate=function(){return!1};a.prototype.$1=function(){return b("React").createElement(b("Link.react"),{href:"#"},b("React").createElement(b("Image.react"),{className:"_3yk8"}))};a.prototype.$2=function(){return b("React").createElement(b("Link.react"),{href:"#"},b("React").createElement(b("XUIText.react"),{weight:"bold"},"Linkable"))};a.prototype.$3=function(a){return b("React").createElement("span",null,h._("{Stat Label}: {Stat Value}",[h._param("Stat Label",a.label),h._param("Stat Value",a.value)]))};a.prototype.$4=function(a){var c=a.stats.map(this.$3,this),d=[];for(var e=0;e<c.length;e+=2){var f=[];f.push(b("React").createElement("span",{key:"first_stat"},c[e]));e+1<c.length&&(f.push(b("React").createElement("span",{key:"separator"},b("React").createElement(b("XUIText.react"),{size:"header3"}," ",j," "))),f.push(b("React").createElement("span",{key:"second_stat"},c[e+1])));d.push(b("React").createElement("div",{key:"stat_row_"+e},f))}return b("React").createElement("div",{className:"_3yk9"},b("React").createElement("div",null,b("React").createElement(b("XUIText.react"),{size:"header4",weight:"bold"},a.persona)),d)};a.prototype.render=function(){var a=this.props.comment.playerStatsCardData;return!a?b("React").createElement("div",null):b("React").createElement("div",{className:"_3yk7"},this.$4(a))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("UFICommentTranslationLink.react",["cx","ContentTranslationStrings","Link.react","React","TranslationTrigger","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){__p&&__p();if(!this.props.showTranslation)return b("React").createElement(b("Link.react"),{className:"UFITranslateLink",onClick:function(){return this.$1()}.bind(this)},b("ContentTranslationStrings").SEE_TRANSLATION);var a=this.props.translationData;if(!a)return b("React").createElement("div",{className:"UFITranslateLink"},b("React").createElement(b("XUISpinner.react"),{background:"light",size:"small"}));var c=a.translatedText;if(!c||!c.text)return b("React").createElement("div",{className:"UFITranslationErrorText"},b("ContentTranslationStrings").NO_TRANSLATION_AVAILABLE);c=this.props.isShowingOriginal||a.trigger===b("TranslationTrigger").LOGGED_OUT_AUTO_TRANSLATION;c=c?b("React").createElement("div",{className:"UFITranslateAttribution"},b("ContentTranslationStrings").AUTOMATICALLY_TRANSLATED):b("React").createElement(b("Link.react"),{className:"UFITranslateLink",onClick:function(){return this.$2()}.bind(this)},this.props.shownInCommentActions?b("React").createElement("div",null,b("React").createElement("span",null,b("ContentTranslationStrings").SEE_ORIGINAL_LINK),b("React").createElement("span",null," ("+a.sourceDialectName+")")):b("ContentTranslationStrings").SEE_ORIGINAL_LINK);return c};a.prototype.$1=function(){this.props.onSeeTranslation&&this.props.onSeeTranslation()};a.prototype.$2=function(){this.props.onSeeOriginal&&this.props.onSeeOriginal()};function a(){h.apply(this,arguments)}a.defaultProps={shownInCommentActions:!1};e.exports=a}),null);
__d("UFICommentTranslationText.react",["cx","React","TranslationTrigger","TruncatedTextWithEntities.react","UFIConfig","UFIConstants"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){h.constructor.call(this,a);a=this.props.translationData;this.state={shouldExpand:this.props.shouldExpand||!!a&&a.trigger===b("TranslationTrigger").SEE_TRANSLATION}}a.prototype.render=function(){var a=this.props.translationData;if(!a||!this.props.showTranslation)return null;a=a.translatedText;return b("React").createElement(b("TruncatedTextWithEntities.react"),{className:"UFICommentBody",ranges:a.ranges,text:a.text,truncationPercent:b("UFIConstants").commentTruncationPercent,maxLength:b("UFIConstants").commentTruncationLength,maxLines:b("UFIConstants").commentTruncationMaxLines,renderEmoticons:b("UFIConfig").renderEmoticons,renderEmoji:b("UFIConfig").renderEmoji,dir:a.dir,shouldExpand:this.state.shouldExpand,markViewerHasInteracted:function(){return this.setState({shouldExpand:!this.state.shouldExpand})}.bind(this)})};a.defaultProps={shouldExpand:!1};e.exports=a}),null);
__d("UFILiveStreamingViewerLoggerCommentLocation",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTIVE_MAIN_THREAD:"active_main_thread",ACTIVE_REPLY_THREAD:"active_reply_thread",BACKGROUND_MAIN_THREAD:"background_main_thread"})}),null);
__d("UFIStreamingCommentsMode",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NONE:0,LIVE:1,ON_DEMAND:2,LIVE_LIVING_ROOM:3})}),null);
__d("UFICommentVPVDLogging",["csx","Banzai","Parent","UFICommentVPVDLoggingConfig","UFILiveStreamingViewerLoggerCommentLocation","UFIOrderingModeStore","UFIStopWatch","UFIStreamingCommentsMode","WebCommentViewOption"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.renderedComment,d=c.comment,e=c.isLivePinnedComment;c=c.isInLiveVideoReplyMode;var f=a.contextArgs,g=a.node;a=a.stopWatch;if(a.state()===b("UFIStopWatch").COUNTING)return{state:"still visible - not logged",instanceid:f.instanceid,fbid:d.fbid,duration_ms:a.milliseconds()};var h=a.milliseconds();if(h>=0&&h<b("UFICommentVPVDLoggingConfig").minDurationToLog)return{state:"small duration - not logged",instanceid:f.instanceid,fbid:d.fbid,duration_ms:h};var i=null,j=null;if(g){g=b("Parent").byClass(g,"public/feedobject/root");if(g){var k=g.getAttribute("data-ft");k&&(i=JSON.parse(k));j=g.getAttribute("data-referrer")}}k=b("UFIOrderingModeStore").getState().get(f.instanceid);g=b("UFIStreamingCommentsMode").NONE;k===b("WebCommentViewOption").LIVE_STREAMING&&(f.islivestreaming?g=b("UFIStreamingCommentsMode").LIVE:f.isLiveVOD&&(g=b("UFIStreamingCommentsMode").ON_DEMAND));e={comment_fbid:d.fbid,comment_id:d.id,container_module:f.location,duration_ms:h,is_live_pinned_comment:e,is_on_sponsored_story:!!f.isSponsored,is_page_comment:!!f.isPage,is_reply:!!d.parentcommentid,mf_story_key:i?i.mf_story_key:null,order_mode:k,qid:i?i.qid:null,referrer_source:j,streaming_comments_mode:g,streaming_comment_location:c?b("UFILiveStreamingViewerLoggerCommentLocation").ACTIVE_REPLY_THREAD:b("UFILiveStreamingViewerLoggerCommentLocation").ACTIVE_MAIN_THREAD};a.reset();b("Banzai").post("comment_vpvd",e);return babelHelpers["extends"]({state:"logged",instanceid:f.instanceid,fbid:d.fbid,duration_ms:h},e)}e.exports={log:a}}),null);
__d("UFICommentVPVDState",["invariant","Arbiter","Parent","UFICommentVisibilityStore","UFICommentVPVDLogging","UFICommentVPVDLoggingConfig","UFIRootRegistry","UFIStopWatch","UFIVisibility","UserActivity","ViewportTrackingHelper","getActiveElement","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=Object.freeze({INFOCUS:"INFOCUS",BLURRED_NEW:"BLURRED_NEW",BLURRED_INACTIVE:"BLURRED_INACTIVE",BLURRED_SNOWLIFT_OTHER:"BLURRED_SNOWLIFT_OTHER",BLURRED_UNDER_LAYER:"BLURRED_UNDER_LAYER",BLURRED_NO_NODE:"BLURRED_NO_NODE"}),i="changed",j=new(b("Arbiter"))(),k=null,l=!1,m=!1,n={};function o(a){if(!b("gkx")("676811"))return;console.table&&console.table([{isFocusInLayer:l,isSnowliftOpen:m,userIsActive:b("UserActivity").isActive(b("UFICommentVPVDLoggingConfig").idleTimeout)}]);console.table&&console.table(Object.keys(n).map(function(a){a=n[a];return{instanceID:a.contextArgs.instanceid,fbid:a.renderedComment.comment.fbid,state:a.state,visibility:a.visibility,counting:a.stopWatch.state()}}))}function p(a){var b=Object.keys(a);if(!b.length)return;b.forEach(function(b){return r(a[b])});n=babelHelpers["extends"]({},n,a);j.inform(i)}function q(a,b){var c;p((c={},c[a]=b,c))}function r(a){a.visibility==b("UFIVisibility").VISIBLE&&a.state==h.INFOCUS?a.stopWatch.start():a.stopWatch.pause()}function s(a){__p&&__p();if(!b("UserActivity").isActive(b("UFICommentVPVDLoggingConfig").idleTimeout))return h.BLURRED_INACTIVE;if(l&&!m){if(!a.node)return h.BLURRED_NO_NODE;if(!k)return h.BLURRED_UNDER_LAYER;a.node||g(0,1811);k||g(0,1811);var c=b("ViewportTrackingHelper").isDescendantOf(a.node,k);return c?h.INFOCUS:h.BLURRED_UNDER_LAYER}if(m)if(b("UFIRootRegistry").isSnowliftNode(a.contextArgs.rootid))return h.INFOCUS;else return h.BLURRED_SNOWLIFT_OTHER;return h.INFOCUS}var t={subscribe:function(a){return j.subscribe(i,a)},unsubscribe:function(a){j.unsubscribe(a)},getState:function(){return n},getKey:function(a,b){return b.instanceid+"/"+a.comment.fbid+(a.isLivePinnedComment?"/P":"")+(a.isInLiveVideoReplyMode?"/R":"")},initComment:function(a,c,d){var e=t.getKey(a,c),f=n[e];if(!f&&!d)return;else if(!f){c={renderedComment:a,contextArgs:c,node:d,state:h.BLURRED_NEW,stopWatch:new(b("UFIStopWatch"))(),visibility:b("UFICommentVisibilityStore").getVisibility(b("UFICommentVisibilityStore").getState(),c,a)};c.state=s(c);q(e,c)}else!d?(f.stopWatch.pause(),q(e,babelHelpers["extends"]({},f,{state:h.BLURRED_NO_NODE}))):q(e,babelHelpers["extends"]({},f,{node:d,state:s(f)}))},updateAllStates:function(a){p(Object.keys(n).reduce(function(a,b){a[b]=babelHelpers["extends"]({},n[b],{state:s(n[b])});return a},{})),o(a)},cleanupUFIInstance:function(a){var c=[],d=b("gkx")("676811");Object.keys(n).filter(function(b){return n[b].contextArgs.instanceid==a}).forEach(function(a){n[a].stopWatch.pause();var e=b("UFICommentVPVDLogging").log(n[a]);d&&c.push(e);delete n[a]});d&&(console.table&&console.table(c))},onCommentVisibilityChanged:function(){__p&&__p();var a=b("UFICommentVisibilityStore").getState();p(Object.keys(n).reduce(function(c,d){var e=n[d],f=e.renderedComment,g=e.contextArgs;e=e.visibility;g=b("UFICommentVisibilityStore").getVisibility(a,g,f);f=e!=g;if(!f)return c;c[d]=babelHelpers["extends"]({},n[d],{visibility:g});return c},{}));o("UFICommentVisibilityStore.changed")},onClickDocument:function(){var a=b("getActiveElement")();!a?(k=null,l=!1):(k=b("Parent").byClass(a,"uiContextualLayerParent"),l=!!k)},onSnowliftOpen:function(){m=!0},onSnowliftClose:function(){m=!1},debug:function(){o("debug")}};e.exports=t}),null);
__d("UserActivityEmitter",["invariant","EventEmitter","TimeSlice","UserActivity","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="change",i={};j.factory=function(a){i[a]||(i[a]=new j(a));return i[a]};function j(a){this.$5=250,this.$6=function(){this.$4=="INACTIVE"&&(this.$4="ACTIVE",this.$2.emit(h,"ACTIVE")),this.$3&&b("clearTimeout")(this.$3),this.$3=b("setTimeoutAcrossTransitions")(b("TimeSlice").guard(this.$7,"UserActivityEmitter idleTimeout",{propagationType:b("TimeSlice").PropagationType.EXECUTION}),this.$5)}.bind(this),this.$7=function(){this.$4="INACTIVE",this.$2.emit(h,"INACTIVE"),b("clearTimeout")(this.$3),this.$3=null}.bind(this),a>b("UserActivity").EVENT_INTERVAL_MS||g(0,3503,b("UserActivity").EVENT_INTERVAL_MS),this.$5=a,this.$2=new(b("EventEmitter"))(),this.$4=b("UserActivity").isActive(a)?"ACTIVE":"INACTIVE",this.$1=b("UserActivity").subscribe(this.$6),this.$4=="ACTIVE"&&this.$6()}j.prototype.subscribe=function(a){return this.$2.addListener(h,a)};j.prototype.getState=function(){return this.$4};e.exports=j}),null);
__d("UFICommentVPVD",["Arbiter","Banzai","Event","UFICommentAction","UFICommentVisibilityStore","UFICommentVPVDLogging","UFICommentVPVDLoggingConfig","UFICommentVPVDState","UFIInstanceActionType","UFISharedDispatcher","UFIVisibility","UserActivityEmitter","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h=null,i="CommentVPVD: Logging subsystem shutting down - sending data to server",j="CommentVPVD: Visibility changed - sending data to server";function k(a){a===void 0&&(a=j);var c=b("UFICommentVPVDState").getState(),d=[],e=b("gkx")("676811");Object.keys(c).forEach(function(a){a=b("UFICommentVPVDLogging").log(c[a]);e&&d.push(a)});e&&(console.table&&console.table(d))}function l(){if(h!==null)return;h=b("setTimeoutAcrossTransitions")(function(){h=null,k()},10)}a={init:function(){__p&&__p();if(g||!b("UFICommentVPVDState"))return;g=!0;b("Banzai").subscribe(b("Banzai").SHUTDOWN,function(){clearTimeout(h);h=null;var a=b("UFICommentVPVDState").getState();Object.keys(a).forEach(function(c){c=a[c];var d=c.contextArgs;c=c.renderedComment;b("UFISharedDispatcher").dispatch(b("UFICommentAction").changeVisibility(d,c,b("UFIVisibility").HIDDEN))});k(i)});b("UFISharedDispatcher").register(function(a){a.type==b("UFIInstanceActionType").REMOVE&&b("UFICommentVPVDState").cleanupUFIInstance(a.instanceID)});var a=b("UserActivityEmitter").factory(b("UFICommentVPVDLoggingConfig").idleTimeout);b("UFICommentVisibilityStore").addListener(function(){var a=b("UFICommentVPVDState").getState();b("UFICommentVPVDState").onCommentVisibilityChanged();a!==b("UFICommentVPVDState").getState()&&l()});b("Event").listen(document.documentElement,"click",function(){b("UFICommentVPVDState").onClickDocument(),b("UFICommentVPVDState").updateAllStates("document onClick"),l()});a.subscribe(function(a){b("UFICommentVPVDState").updateAllStates("user-active = "+a),a!="ACTIVE"&&l()});b("Arbiter").subscribe("reflow",function(){b("UFICommentVPVDState").updateAllStates("reflow"),l()});b("Arbiter").subscribe("PhotoSnowlift.OPEN",function(){b("UFICommentVPVDState").onSnowliftOpen(),b("UFICommentVPVDState").updateAllStates("PhotoSnowlift.OPEN"),l()});b("Arbiter").subscribe("PhotoSnowlift.CLOSE",function(){b("UFICommentVPVDState").onSnowliftClose(),b("UFICommentVPVDState").updateAllStates("PhotoSnowlift.CLOSE"),l()})}};e.exports=a}),null);
__d("UFICommentVPVDTracker.react",["cx","FBLogger","React","ReactDOM","SubscriptionsHandler","UFICommentAction","UFICommentVisibilityStore","UFICommentVPVD","UFICommentVPVDLoggingConfig","UFICommentVPVDState","UFISharedDispatcher","UFIVisibility","ViewportTrackingHelper","gkx","onCommentIsVisible"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("React").Children;c=b("React").PropTypes;function j(a){return b("UFICommentVisibilityStore").getVisibility(b("UFICommentVisibilityStore").getState(),a.contextArgs)===b("UFIVisibility").VISIBLE}d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(a){h.constructor.call(this,a),this.$1=null,this.state={isVisible:!1,beforeFirstViewportChange:!0},this.$4=function(a){this.$1=a,b("UFICommentVPVDState").initComment(this.props.renderedComment,this.props.contextArgs,a)}.bind(this),this.isCommentVisible=function(a){if(!j(this.props)&&!this.state.beforeFirstViewportChange)return!1;a={height:a.bottom-a.top,width:0};return b("ViewportTrackingHelper").isVisibleInDimension(a,b("ReactDOM").findDOMNode(this),b("UFICommentVPVDLoggingConfig").minVisibleSize)}.bind(this),this.onCommentVisibilityChanged=function(a){this.setState({isVisible:a,beforeFirstViewportChange:!1}),this.$3(a)}.bind(this),b("UFICommentVPVD").init(),this.$2=new(b("SubscriptionsHandler"))()}a.prototype.componentDidMount=function(){if(this.$1==null){b("FBLogger")("ufi").mustfix("When intializing VPVd tracking for a comment, could not obtain a reference to the HTML element representing the comment.");return}this.$2.addSubscriptions(b("onCommentIsVisible")(this.$1,this.isCommentVisible,this.onCommentVisibilityChanged))};a.prototype.componentWillUnmount=function(){this.$3(!1),this.$2.release()};a.prototype.render=function(){var a=this.props,c=this.state;a=i.only(a.children);var d=b("gkx")("678285");return b("React").createElement("div",{"data-debugstate":d?c.isVisible?"fully visible":"not fully visible":null,className:"_3b-9"+(d?" _3b-a":"")+(d&&c.isVisible?" _3b-b":"")+(d&&!c.isVisible?" _3b-c":""),ref:this.$4},a)};a.prototype.$3=function(a){setTimeout(function(){return b("UFISharedDispatcher").dispatch(b("UFICommentAction").changeVisibility(this.props.contextArgs,this.props.renderedComment,a?b("UFIVisibility").VISIBLE:b("UFIVisibility").HIDDEN))}.bind(this),0)};a.propTypes={renderedComment:c.object.isRequired,contextArgs:c.object.isRequired};e.exports=a}),null);
__d("UFICommentVPVTracker.react",["OnVisible.react","React","UFICommentVPVs","UFIConfig","clearTimeout","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={timer:null},this.maybeScheduleVPVLogging=function(){if(this.state.timer!==null)return;var a=this.props.comment.id,c=this.props.contextArgs.instanceid;if(b("UFICommentVPVs").hasLoggedVPV(c,a))return;this.setState({timer:b("setTimeout")(function(){b("UFICommentVPVs").logVPV(c,a),this.setState({timer:null})}.bind(this),b("UFIConfig").vpvLoggingTimeout)})}.bind(this),this.cancelScheduledVPVLogging=function(){if(this.state.timer===null)return;b("clearTimeout")(this.state.timer);this.setState({timer:null})}.bind(this),c}a.prototype.render=function(){var a=this.props.comment.id,c=this.props.contextArgs.instanceid,d=this.props.children;c=b("UFICommentVPVs").hasLoggedVPV(c,a);return b("React").createElement(b("OnVisible.react"),{onVisible:c?null:this.maybeScheduleVPVLogging,onHidden:c?null:this.cancelScheduledVPVLogging},d)};a.prototype.shouldComponentUpdate=function(a,b){return b.timer===this.state.timer};a.prototype.UNSAFE_componentWillReceiveProps=function(){this.cancelScheduledVPVLogging()};a.prototype.componentWillUnmount=function(){this.cancelScheduledVPVLogging()};a.propTypes={comment:c.object.isRequired,contextArgs:c.object.isRequired};e.exports=a}),null);
__d("UFICommentVoteArrow.react",["cx","Arbiter","FBFeedLocations","JSResource","React","UFIConstants","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("lazyLoadComponent")(b("JSResource")("UFICommentVoteFirstArrowNUX.react").__setRef("UFICommentVoteArrow.react")),j=b("lazyLoadComponent")(b("JSResource")("UFICommentVoteNUX.react").__setRef("UFICommentVoteArrow.react")),k="TahoeView/selectCommentTab";c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.state={enableFirstArrowNux:!0},this.arrowRef=null,this.setArrowRef=function(a){this.arrowRef=a,this.$1()&&this.forceUpdate()}.bind(this)}a.prototype.componentDidMount=function(){this.props.isFirstComment&&this.props.contextArgs.feedLocationType===b("FBFeedLocations").TAHOE&&(this.setState({enableFirstArrowNux:!1}),b("Arbiter").subscribe(k,function(){return this.setState({enableFirstArrowNux:!0})}.bind(this)))};a.prototype.render=function(){var a=this.props,c=a.arrowType,d=a.hasViewerVoted,e=a.onArrowClick;a=a.UIVersion;var f=c===b("UFIConstants").UFICommentVoteType.UPVOTE,g=f&&d;f=f&&!d;c=c===b("UFIConstants").UFICommentVoteType.DOWNVOTE;var h=c&&d;c=c&&!d;return b("React").createElement("a",{className:(a===b("UFIConstants").UFICommentVoteUIVersion.VERTICAL_ON_THE_SIDE?"_4-4u":"")+(g?" _2wdx":"")+(f?" _2wdy":"")+(h?" _2wdz":"")+(c?" _2wd-":""),href:"#",onClick:function(){e(),this.shouldRenderArrowNUX=!0}.bind(this),ref:this.setArrowRef,role:"button"},this.$2(),this.$3())};a.prototype.$2=function(){if(!this.shouldRenderArrowNUX)return null;var a=null;this.props.UIVersion===b("UFIConstants").UFICommentVoteUIVersion.VERTICAL_ON_THE_SIDE&&(a=this.props.nuxConfigs.voteArrowNUXV2);return!a||!this.arrowRef?null:b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(j,{context:this.arrowRef,nuxConfig:a,UIVersion:this.props.UIVersion,arrowNUXTextV2:this.props.arrowNUXTextV2}))};a.prototype.$1=function(){return Boolean(this.props.isFirstComment&&this.props.nuxConfigs.voteFirstArrowNUXV2&&this.props.UIVersion===b("UFIConstants").UFICommentVoteUIVersion.VERTICAL_ON_THE_SIDE&&this.arrowRef&&this.state.enableFirstArrowNux)};a.prototype.$3=function(){return!this.$1()?null:b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(i,{context:this.arrowRef,firstArrowNUXTitleV2:this.props.firstArrowNUXTitleV2,firstArrowNUXBodyV2:this.props.firstArrowNUXBodyV2,nuxConfig:this.props.nuxConfigs.voteFirstArrowNUXV2}))};e.exports=a}),null);
__d("UFICommentVoteArrowTooltip.react",["cx","BootloadedComponent.react","JSResource","React","UFIConstants"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=300;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("ReactCSSTransitionGroup").__setRef("UFICommentVoteArrowTooltip.react"),context:this.refs.root,transitionEnter:!0,transitionEnterTimeout:2*i,transitionLeave:!0,transitionLeaveTimeout:2*i,transitionName:{enter:"_6dvp",enterActive:"_6duw",leave:"_6dux",leaveActive:"_6duy"}},this.$1())};a.prototype.$1=function(){if(this.props.UIVersion!==b("UFIConstants").UFICommentVoteUIVersion.VERTICAL_ON_THE_SIDE||this.props.displayedArrowTooltipType===b("UFIConstants").UFICommentVoteType.NONE)return null;var a=null;switch(this.props.displayedArrowTooltipType){case b("UFIConstants").UFICommentVoteType.UPVOTE:a=this.props.promoteText;break;case b("UFIConstants").UFICommentVoteType.DOWNVOTE:a=this.props.demoteText;break}return a===null?null:b("React").createElement("div",{className:"_6cw5"},a)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("UFICommentVoteCount.react",["cx","React","UFIConstants"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props,c=a.voteCount,d=a.voteState,e=a.UIVersion;a=a.voteCountFormatter;var f=d===b("UFIConstants").UFICommentVoteType.UPVOTE,g=d===b("UFIConstants").UFICommentVoteType.DOWNVOTE;d=d===b("UFIConstants").UFICommentVoteType.NONE;e=e===b("UFIConstants").UFICommentVoteUIVersion.VERTICAL_ON_THE_SIDE;var h=null;e&&(c<0?g?h=a(-1):h=a(0):h=a(c));return h===null?null:b("React").createElement("a",{className:(e?"_4-4u":"")+" _14d0"+(f?" _12a5":"")+(g?" _12a6":"")+(d?" _12a7":""),href:"#"},h)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("UFICommentVote.react",["cx","React","UFICommentVoteArrow.react","UFICommentVoteArrowTooltip.react","UFICommentVoteCount.react","UFIConstants","debounce"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;a=babelHelpers.inherits(i,b("React").Component);h=a&&a.prototype;function i(a){h.constructor.call(this,a),this.state={displayedArrowTooltipType:b("UFIConstants").UFICommentVoteType.NONE},this.$2=function(){this.setState({displayedArrowTooltipType:b("UFIConstants").UFICommentVoteType.NONE})}.bind(this),i.disableFirstArrowTooltipDisplay=this.props.nuxConfigs.voteArrowNUXV2!==null,this.$1=b("debounce")(this.$2,this.props.arrowTooltipDisplayTimeMS)}i.prototype.render=function(){var a=this.props,c=a.contextArgs,d=a.feedback,e=a.UIVersion,f=a.voteCount,g=a.voteState,h=a.onUpArrowClick,i=a.onDownArrowClick,j=a.arrowNUXTextV2,k=a.firstArrowNUXTitleV2;a=a.firstArrowNUXBodyV2;var l=this.props.voteCountFormatter(f).length<4;return b("React").createElement("div",{className:(e===b("UFIConstants").UFICommentVoteUIVersion.VERTICAL_ON_THE_SIDE?"_2tm9":"")+(l?" _6jru":"")+(l?"":" _6jrv")},b("React").createElement(b("UFICommentVoteArrow.react"),{arrowType:b("UFIConstants").UFICommentVoteType.UPVOTE,contextArgs:c,feedback:d,hasViewerVoted:g===b("UFIConstants").UFICommentVoteType.UPVOTE,UIVersion:e,onArrowClick:function(){h(),this.$3(b("UFIConstants").UFICommentVoteType.UPVOTE)}.bind(this),isFirstComment:this.props.isFirstComment,arrowNUXTextV2:j,firstArrowNUXTitleV2:k,firstArrowNUXBodyV2:a,nuxConfigs:this.props.nuxConfigs}),b("React").createElement(b("UFICommentVoteCount.react"),{voteCount:f,voteCountFormatter:this.props.voteCountFormatter,voteState:g,UIVersion:e}),b("React").createElement(b("UFICommentVoteArrow.react"),{arrowType:b("UFIConstants").UFICommentVoteType.DOWNVOTE,contextArgs:c,feedback:d,hasViewerVoted:g===b("UFIConstants").UFICommentVoteType.DOWNVOTE,UIVersion:e,onArrowClick:function(){i(),this.$3(b("UFIConstants").UFICommentVoteType.DOWNVOTE)}.bind(this),arrowNUXTextV2:j,firstArrowNUXTitleV2:k,firstArrowNUXBodyV2:a,nuxConfigs:this.props.nuxConfigs}),this.props.promoteText&&this.props.demoteText&&b("React").createElement(b("UFICommentVoteArrowTooltip.react"),{displayedArrowTooltipType:this.state.displayedArrowTooltipType,UIVersion:e,promoteText:this.props.promoteText,demoteText:this.props.demoteText}))};i.prototype.$3=function(a){if(i.disableFirstArrowTooltipDisplay){i.disableFirstArrowTooltipDisplay=!1;return}var c=this.state.displayedArrowTooltipType;c===b("UFIConstants").UFICommentVoteType.NONE?this.props.voteState===a?this.$2():this.$4(a):c===a?this.$2():this.$4(a)};i.prototype.$4=function(a){this.setState({displayedArrowTooltipType:a}),this.$1()};i.disableFirstArrowTooltipDisplay=!1;i.defaultProps={arrowTooltipDisplayTimeMS:0,arrowNUXTextV2:"",firstArrowNUXTitleV2:"",firstArrowNUXBodyV2:"",nuxConfigs:{voteArrowNUXV2:null,voteFirstArrowNUXV2:null},voteCountFormatter:function(a){return a.toString()}};e.exports=i}),null);
__d("UFICommentVoteContainer.react",["FluxContainer","React","ReactDOM","UFICommentAction","UFICommentVote.react","UFICommentVoteSyncStore","UFIConstants","intlSummarizeNumber"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=function(a){return b("intlSummarizeNumber")(a)};c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.getStores=function(){return[b("UFICommentVoteSyncStore")]};a.calculateState=function(a,c){return{voteCount:b("UFICommentVoteSyncStore").getVoteCount(c.comment.fbid),voteState:b("UFICommentVoteSyncStore").getVoteState(c.comment.fbid)}};a.prototype.render=function(){var a=this.props,c=a.comment,d=a.contextArgs,e=a.feedback;a=a.UIVersion;var f=this.state,g=f.voteCount,i=f.voteState,j=b("ReactDOM").findDOMNode(this.refs.trigger);return b("React").createElement(b("UFICommentVote.react"),{contextArgs:d,feedback:e,UIVersion:a,voteCount:g,voteState:i,onUpArrowClick:function(){return this.$1(d,c,j,i)}.bind(this),onDownArrowClick:function(){return this.$2(d,c,j,i)}.bind(this),isFirstComment:this.props.isFirstComment,promoteText:c.upvoteLabel,demoteText:c.downvoteLabel,arrowTooltipDisplayTimeMS:parseInt(c.voteLabelVisibleDuration*1e3,10),arrowNUXTextV2:c.arrowNUXTextV2,firstArrowNUXTitleV2:c.firstArrowNUXTitleV2,firstArrowNUXBodyV2:c.firstArrowNUXBodyV2,nuxConfigs:c.voteNuxConfigs,voteCountFormatter:h})};a.prototype.$1=function(a,c,d,e){this.$3(a,c,d,e,b("UFIConstants").UFICommentVoteType.UPVOTE)};a.prototype.$2=function(a,c,d,e){this.$3(a,c,d,e,b("UFIConstants").UFICommentVoteType.DOWNVOTE)};a.prototype.$3=function(a,c,d,e,f){this.context.dispatch(b("UFICommentAction").changeVote(a,c,d,e,f))};function a(){g.apply(this,arguments)}a.contextTypes={dispatch:c.func};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("UFILiveCommentRedesignActions.react",["ix","cx","fbt","AbstractButton.react","Image.react","React","UFIReactionsLinkImpl.react","UFIThreadedFacecastCommentsUtils","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";a=function(a){var c=a.comment,d=a.commentMenu,e=a.contextArgs,f=a.feedback;if(c.__typename==="local")return null;var h=b("UFIThreadedFacecastCommentsUtils").onReplyClickCallback(c,e,f);return b("React").createElement("div",{className:"_6hz3"},b("React").createElement(b("UFIReactionsLinkImpl.react"),{contextArgs:babelHelpers["extends"]({},e,{ftentidentifier:c.id}),comment:c,reaction:c.viewerreaction,supportedReactions:f.supportedreactions,ftIdentifier:e.ftentidentifier,showAlternateButtonForLiveStreamingRedesign:!0}),a.isInLiveVideoReplyMode||!b("UFIThreadedFacecastCommentsUtils").isEnabled(e)?null:b("React").createElement(b("AbstractButton.react"),{className:"_6hyz",label:i._("Reply"),labelIsHidden:!0,onClick:function(a){a.preventDefault(),h&&h()},role:"button",image:b("React").createElement(b("Image.react"),{src:g("608136")})}),d)};e.exports=a}),null);
__d("TimeOffset",["DateConsts"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={timeToTimestamp:function(a){if(a<=0)return"0:00";var b=Math.floor(a/3600),c=b?b+":":"";c+=((b?"0":"")+Math.floor(a%3600/60)).slice(-2)+":";return c+("0"+a%60).slice(-2)},timestampToTime:function(a){a=a.match(/(?:(\d{1,2}):)?(?:(\d{1,2}):)?(\d{1,2})/);if(!a)return-1;var c=parseInt(a[3],10);a[1]&&!a[2]?c+=parseInt(a[1],10)*b("DateConsts").SEC_PER_MIN:a[1]&&a[2]&&(c+=parseInt(a[1],10)*b("DateConsts").SEC_PER_HOUR+parseInt(a[2],10)*b("DateConsts").SEC_PER_MIN);return c}};e.exports=a}),null);
__d("UFILiveCommentTimestamp.react",["cx","fbt","CommentPostedLiveState","Middot.react","React","ShimButton.react","TimeOffset","Tooltip.react","UFIVideoPlayerRegistry","VideoTimestampsClicksWWWTypedLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){__p&&__p();var a=this.props,c=a.comment,d=a.contextArgs;a=a.isInLiveVideoReplyMode;a=c.parentcommentid&&a;var e=null;if(!a){var f=typeof c.videoTimeOffset==="number"?c.videoTimeOffset:0;e=b("React").createElement(b("ShimButton.react"),{className:"_39g5",form:"link",onClick:function(a){a.preventDefault();a=new(b("VideoTimestampsClicksWWWTypedLogger"))().setVideoTimestamp(f).setIsContentTimestamp(!0);c.__typename==="local"?a.setLocalCommentFeedbackID(c.ftentidentifier):a.setCommentID(c.fbid);a.log();b("UFIVideoPlayerRegistry").seekAvailableVideoPlayerController(d.instanceid,f)}},b("TimeOffset").timeToTimestamp(f))}a=null;c.postedLiveState===b("CommentPostedLiveState").LIVE?a=b("React").createElement(b("Tooltip.react"),{tooltip:h._("Comment posted while the video was live")},b("React").createElement(b("Middot.react"),{className:"_5rr7"})):c.postedLiveState===b("CommentPostedLiveState").ON_DEMAND?a=b("React").createElement(b("Tooltip.react"),{tooltip:h._("Comment posted after the live video ended")},b("React").createElement(b("Middot.react"),{className:"_5rra"})):a=b("React").createElement(b("Middot.react"),{className:"_5rra"});return b("React").createElement("span",null,a,e)};function a(){i.apply(this,arguments)}a.propTypes={comment:c.shape({fbid:c.string,__typename:c.string,postedLiveState:c.oneOf([b("CommentPostedLiveState").LIVE,b("CommentPostedLiveState").ON_DEMAND]),videoTimeOffset:c.number,parentcommentid:c.string}).isRequired,contextArgs:c.shape({instanceid:c.string.isRequired}).isRequired,isInLiveVideoReplyMode:c.bool.isRequired};e.exports=a}),null);
__d("UFIReactionBadgeDecorator.react",["cx","FBFeedLocations","FeedbackSourceType","React","UFICommentReactionCount.react","queryThenMutateDOM"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=300,j=180,k=200;c=babelHelpers.inherits(a,b("React").PureComponent);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.rootElement=null,this.renderAtBottomCanceller=null,this.state={renderAtBottom:!0},b}a.prototype.componentDidMount=function(){this.props.onRenderAtBottomChange&&this.props.onRenderAtBottomChange(this.state.renderAtBottom);var a=i;this.props.contextArgs.source===b("FeedbackSourceType").PHOTOS_SNOWLIFT?a=j:this.props.contextArgs.source===b("FeedbackSourceType").TAHOE&&(a=k);var c=!0;this.renderAtBottomCanceller=b("queryThenMutateDOM")(function(){c=this.rootElement!==void 0&&this.rootElement!==null&&this.rootElement.offsetWidth>=a||this.props.isFullWidthAttachment===!0}.bind(this),function(){this.renderAtBottomCanceller=null,c||(this.setState({renderAtBottom:!1}),this.props.onRenderAtBottomChange&&this.props.onRenderAtBottomChange(!1))}.bind(this))};a.prototype.componentWillUnmount=function(){this.renderAtBottomCanceller&&this.renderAtBottomCanceller.cancel()};a.prototype.render=function(){var a,c=this.props.comment.reactioncount>0&&this.props.contextArgs.feedLocationType!=b("FBFeedLocations").CE_PII_AND_ATTACHMENTS_STRIPPED_FEED&&this.props.contextArgs.feedLocationType!=b("FBFeedLocations").CE_PII_STRIPPED_FEED?b("React").createElement(b("UFICommentReactionCount.react"),{comment:this.props.comment,actorForPost:this.props.feedback.actorforpost,supportedReactions:this.props.feedback.supportedreactions,contextArgs:this.props.contextArgs,showLiveStreamingRedesign:this.props.showLiveStreamingRedesign}):null;return b("React").createElement("div",{className:"_10la"+(this.state.renderAtBottom?" _10lg":"")+(this.props.isFlexibleWidthAttachment?" _t-l":"")+(this.props.isFullWidthAttachment?" _3qr8":"")+("comment_place_info"===((a=this.props.comment)!=null?(a=a.attachment)!=null?a.type:a:a)?" _m_9":""),ref:function(a){this.rootElement=a}.bind(this)},this.props.children,b("React").createElement("div",{className:"_10lo"+(this.props.comment.reactioncount?" _10lp":"")},c))};e.exports=a}),null);
__d("VideoTipJarCommentBackground.react",["ix","Image.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=[g("99652"),g("99653"),g("99654")];h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=i[parseInt(this.props.tipOptionIndex,10)];return a?b("React").createElement(b("Image.react"),{src:a}):null};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("XSRXActionDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/srx/action_dialog/",{context:{type:"String",required:!0},__asyncDialog:{type:"Int"}})}),null);
__d("XUFIEditCommentNuxController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/edit/nux/",{})}),null);
__d("UFIComment.react",["ix","csx","cx","fbt","requireDeferred","Arbiter","AsyncRequest","AvailableListState","BootloadedComponent.react","Bootloader","CommentApprovalsResponsibleUserAction","CommentPrivacyValue","Dialog","DOM","EmojiRenderer","FBFeedLocations","FeedbackActionType","FeedbackSourceType","FluxContainer","FRXDiglossiaQE","FRXEntryPoint","FRXServerFbt.react","HovercardLink","HTML","IdentityBadges.react","Image.react","InlineBlock.react","JSResource","LiveVideoAnnouncementCTAType","LiveVideoPinnedCommentUtils","LiveWWWFeedbackTypedLogger","LivingRoomPresenceBadge","LivingRoomProfileTileBadge.react","LoadingDialog.react","NFXContextFactory","NFXStoryLocation","NFXURI","PrivateCommentsConfig","QE2Logger","React","ReactDOM","SelfCommentsGatingConfig","ShareNowConstants","ShimButton.react","SubscriptionsHandler","SutroBlingBarGatingConfig","SutroPhase2GatingConfig","Text.react","TextDelightNuxID","TrackingNodes","TranslationTrigger","UFIActorIconContainer.react","UFICentralUpdates","UFICommentAction","UFICommentActions.react","UFICommentAttachment.react","UFICommentAuthorName.react","UFICommentBody.react","UFICommentLiveVideoAnnouncementImage.react","UFICommentMenu.react","UFICommentPlayerStatsCard.react","UFIComments","UFICommentTranslationLink.react","UFICommentTranslationText.react","UFICommentUtils","UFICommentVoteContainer.react","UFICommentVPVDTracker.react","UFICommentVPVTracker.react","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIConfig","UFIConstants","UFIImageBlock.react","UFIInsightsSharingCommentTag.react","UFILiveCommentRedesignActions.react","UFILiveCommentTimestamp.react","UFILivePinnedCommentStore","UFIODSLogger","UFIReactionBadgeDecorator.react","UFIRootRegistry","UFISharedDispatcher","UFIThreadedFacecastCommentsUtils","UFIUIEvents","UFIVersion","UserHovercardLocation","VideoTipJarCommentBackground.react","WebCommentViewOption","WorkModeConfig","XRapidReportingDialogController","XSRXActionDialogController","XUFIEditCommentNuxController","XUIButton.react","XUIText.react","asset","emptyFunction","fbglyph","gkx","joinClasses","keyMirror","lazyLoadComponent","uniqueID"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("lazyLoadComponent")(b("JSResource")("UFICommonalityBanner.react").__setRef("UFIComment.react")),m=b("requireDeferred")("PresenceStatus");c=b("React").PropTypes;var n=b("UFIConstants").UFIStatus,o="share_on_comment_v1",p=Object.freeze({NEWSSTAND:"newsstand"}),q=b("keyMirror")({edit:!0,hide:!0,remove:!0,embed:!0,manageConstituentBadge:!0,delete_and_block:!0,delete_comment_with_feedback:!0,delete_comment_and_remove_commenter:!0,mute_member:!0,hide_text_delights:!0,bulk_review:!0,pin_by_author:!0,live_video_pin:!0,live_video_unpin:!0,report:!0,more:!0}),r="ufi_comment_close_button",s="ufi_highlighted_comment";d="ufi_comment_menu_delete";f="ufi_comment_menu_edit";h="ufi_comment_menu_hide";var t="ufi_comment_menu_report";i="ufi_comment_menu_embed";var u="ufi_comment_menu_manage_constituent_badge",v="ufi_comment_menu_delete_and_block",w="ufi_comment_menu_delete_comment_and_remove_commenter",x="ufi_comment_menu_delete_comment_with_feedback",y="ufi_comment_menu_mute_member",z="ufi_comment_hide_text_delights",A="ufi_comment_menu_pin_by_author",B="ufi_comment_menu_unpin_by_author",C="ufi_comment_menu_live_video_pin",D="ufi_comment_menu_live_video_unpin",E={testid:d,value:q.remove,label:j._("Delete Comment...")},F={testid:f,value:q.edit,label:j._("Edit...")},G={testid:h,value:q.hide,label:j._("Hide Comment")},H={testid:i,value:q.embed,label:j._("Embed")},I={testid:v,value:q.delete_and_block,label:j._("Delete Comment and Block User")},J={testid:x,value:q.delete_comment_with_feedback,label:j._("Remove comment")},K={testid:w,value:q.delete_comment_and_remove_commenter,label:j._("Delete Comment and Remove Member")},L={testid:d,value:q.remove,label:j._("Delete...")},M={testid:u,value:q.manageConstituentBadge,label:j._("Manage Constituent Badge")},N={testid:y,value:q.mute_member,label:j._("Mute member")},O={testid:y,value:q.mute_member,label:j._("Unmute Member")},P={testid:z,value:q.hide_text_delights,label:j._("Remove text effects")},Q={testid:z,value:q.hide_text_delights,label:j._("Add text effects")},R={testid:A,value:q.pin_by_author,label:j._("Pin comment")},S={testid:B,value:q.pin_by_author,label:j._("Unpin comment")},T={testid:C,value:q.live_video_pin,label:j._("Pin Comment")},U={testid:D,value:q.live_video_unpin,label:j._("Unpin comment")},V=14,W=3,X=null,Y=function(a){a=a.status;return a===n.FAILED_ADD||a===n.FAILED_EDIT},Z=function(a,b){return!!a.tipOptionIndex&&b===p.NEWSSTAND};function $(a){return a.commenterIsFOF!==void 0&&a.userIsMinor!==void 0&&a.reportLink!==void 0&&a.isBroadcast!==void 0&&a.showStreamBanControls!==void 0}f=babelHelpers.inherits(a,b("React").Component);k=f&&f.prototype;a.prototype.getReportActionMenuData=function(){var a=this.props.contextArgs.frxActionTitle;return{testid:t,value:q.report,label:a?b("React").createElement(b("FRXServerFbt.react"),{blob:a}):null}};function a(a){__p&&__p();k.constructor.call(this,a);this.$1=null;this.$4=function(a){this.context.dispatch(b("UFICommentAction").markAsSpam(this.props.contextArgs,this.props.comment,a.target)),this.setState({markedAsSpamHere:!0})}.bind(this);this.$10=function(a){this.context.dispatch(b("UFICommentAction").markAsNotSpam(this.props.contextArgs,this.props.comment,a)),this.setState({markedAsSpamHere:!1})}.bind(this);this.$11=function(a){this.context.dispatch(b("UFICommentAction").remove(this.props.contextArgs,this.props.comment,a.target,function(){return this.setState({isInlinePageDeleted:!0})}.bind(this)))}.bind(this);this.$12=function(a){this.context.dispatch(b("UFICommentAction").remove(this.props.contextArgs,this.props.comment,a.target,b("emptyFunction")))}.bind(this);this.$18=function(a){this.context.dispatch(b("UFICommentAction").inlineBan(this.props.contextArgs,this.props.comment,a,this.props.feedback.ownerid)),this.setState({isInlineBanned:!0})}.bind(this);this.$19=function(a){this.context.dispatch(b("UFICommentAction").undoInlineBan(this.props.contextArgs,this.props.comment,a,this.props.feedback.ownerid)),this.setState({isInlineBanned:!1})}.bind(this);this.$20=function(a){this.context.dispatch(b("UFICommentAction").inlineStreamBan(this.props.contextArgs,this.props.comment,a,this.props.feedback.ownerid)),this.setState({isInlineStreamBanned:!0})}.bind(this);this.$21=function(a){this.context.dispatch(b("UFICommentAction").undoInlineStreamBan(this.props.contextArgs,this.props.comment,a,this.props.feedback.ownerid)),this.setState({isInlineStreamBanned:!1})}.bind(this);this.$24=function(a,c){__p&&__p();var d=c.item,e=d.getValue();window.setTimeout(function(){__p&&__p();var c=this.props,f=c.comment,g=c.contextArgs;c=c.feedback;if(e===q.remove)this.$12(a);else if(e===q.delete_and_block)this.$13(d);else if(e===q.delete_comment_with_feedback)this.$14(a);else if(e===q.delete_comment_and_remove_commenter)this.$15(a);else if(e===q.edit)this.context.dispatch(b("UFICommentAction").edit(g,f));else if(e===q.hide)this.$4(a);else if(e===q.report)this.$5(a);else if(e===q.more)this.$9(a);else if(e===q.mute_member)this.$16(a);else if(e===q.bulk_review)this.context.dispatch(b("UFICommentAction").bulkReview(g,f));else if(e===q.hide_text_delights)this.$17(a);else if(e===q.embed)this.context.dispatch(b("UFICommentAction").embed(g,f));else if(e===q.manageConstituentBadge)this.context.dispatch(b("UFICommentAction").manageConstituentBadge(g,f));else if(e===q.pin_by_author)this.context.dispatch(b("UFICommentAction").pinByAuthor(g,f,!f.ispinnedbyauthor));else if(e===q.live_video_pin||e===q.live_video_unpin){var h=e===q.live_video_unpin;if(h&&g.isLiveVOD){var i=b("UFILivePinnedCommentStore").getPinEventID(g.ftentidentifier);i!=null&&this.$2.addSubscriptions(b("LiveVideoPinnedCommentUtils").unpinVODComment(f.id,i,g))}else b("LiveVideoPinnedCommentUtils").toggleCommentPin({commentFBID:f.fbid,commentID:f.id,contextArgs:g,isPinned:h})}else b("UFICentralUpdates").inform(e,{comment:f,feedback:c})}.bind(this),0)}.bind(this);this.$25=function(){this.setState({showPinnedCommentNux:!1})}.bind(this);this.$28=function(a){this.setState({renderReactionBadgeAtBottom:a})}.bind(this);var c=a.comment;a=a.contextArgs;this.state={isHighlighting:c.highlightcomment,wasHighlighted:c.highlightcomment,markedAsSpamHere:!1,isInlinePageDeleted:!1,isInlineBanned:!1,isInlineStreamBanned:!1,loggedLiveUpdate:!1,showBody:!1,hideSpamComment:this.$3(),loadingDialogWhenSharing:!1,isHiddenInStreamingBecauseParentIsHidden:!1,hasSeenEditNux:!0,editNuxHelpUri:"",liveStreamingRedesignPopoverMenuShown:!1,renderReactionBadgeAtBottom:!0,showPinnedCommentNux:!!a.shouldShowPinnedCommentNux,authorPresenceStatus:b("AvailableListState").OFFLINE}}a.getStores=function(){return[b("UFILivePinnedCommentStore")]};a.calculateState=function(a,c){c=b("UFILivePinnedCommentStore").getPinnedCommentID(c.contextArgs.ftentidentifier);return babelHelpers["extends"]({},a,{currentPinnedCommentID:c})};a.prototype.$5=function(a){b("WorkModeConfig").is_work_user?this.$6(a):this.$7(a)};a.prototype.$7=function(a){a=b("XRapidReportingDialogController").getURIBuilder().setString("context",this.$8()).getURI();new(b("AsyncRequest"))(a).send()};a.prototype.$6=function(a){new(b("AsyncRequest"))().setURI(b("NFXURI").withContextString(this.$8())).send()};a.prototype.$9=function(a){a=b("XSRXActionDialogController").getURIBuilder().setString("context",this.$8()).getURI();new(b("AsyncRequest"))(a).send()};a.prototype.$8=function(){var a=b("NFXStoryLocation").FEED;this.props.contextArgs.location==="event"?a=b("NFXStoryLocation").EVENT:this.props.feedback.isownerpage?a=b("NFXStoryLocation").PAGE:this.props.feedback.grouporeventid&&this.props.feedback.grouporeventid.length>0&&(a=b("NFXStoryLocation").GROUP);return b("NFXContextFactory").withEntReportable({reportable_ent_token:this.props.comment.fbid,story_location:a,entry_point:b("FRXEntryPoint").COMMENT})};a.prototype.$13=function(a){this.context.dispatch(b("UFICommentAction").removeAndBlock(this.props.contextArgs,this.props.comment,a,b("emptyFunction")))};a.prototype.$14=function(a){this.context.dispatch(b("UFICommentAction").deleteCommentWithFeedback(this.props.contextArgs,this.props.comment,a.target))};a.prototype.$15=function(a){this.context.dispatch(b("UFICommentAction").delete_comment_and_remove_commenter(this.props.contextArgs,this.props.comment,a.target,b("emptyFunction")))};a.prototype.$16=function(a){this.context.dispatch(b("UFICommentAction").mute_member(this.props.contextArgs,this.props.comment,a.target,b("emptyFunction")))};a.prototype.$17=function(a){this.context.dispatch(b("UFICommentAction").toggle_text_delights(this.props.contextArgs,this.props.comment,a.target)),b("Bootloader").loadModules(["TextDelightNUXLogger"],function(a){a.menuItemClick(this.props.comment.fbid)}.bind(this),"UFIComment.react")};a.prototype.$22=function(a){this.$23()&&this.setState({liveStreamingRedesignPopoverMenuShown:a})};a.prototype.$26=function(){return[F,L]};a.prototype.$27=function(){this.setState({showBody:!b("UFIConfig").shouldTranslationsReplaceContent}),this.props.comment.translationdata||this.context.dispatch(b("UFICommentAction").translate(this.props.contextArgs,this.props.comment,b("TranslationTrigger").SEE_TRANSLATION))};a.prototype.$29=function(){__p&&__p();var a=null,c=null,d=null,e=null,f=b("UFICommentMenu.react").MenuType.CLOSE,g=this.props,h=g.comment;g=g.contextArgs;var i=h.canEditConstituentTitle,k=h.canembed&&b("UFIConfig").showCommentEmbedOption,l=h.canremove&&h.candeleteandblockcommenter,m=!1,n=!1,o=!1;if(this.$23()&&g.enablePinLiveComments&&!h.tipOptionIndex&&h.__typename!=="local"){var p=h.id===this.state.currentPinnedCommentID;if(g.islivestreaming)m=!p,n=p;else if(g.isLiveVOD&&p){p=b("UFILivePinnedCommentStore").getPinEventID(g.ftentidentifier);n=p!=null}}if(this.$3()){h.needsApproval?g=this.props.authorProfiles[h.author].name:g=this.props.feedback.actorname;return{closeTooltip:j._("Only you and {author_name} can see this comment",[j._param("author_name",g)]),menuType:b("UFICommentMenu.react").MenuType.TOOLTIP,onClick:a,menuData:c,menuUserSection:d,reportActionPossible:o}}p=this.props.contextArgs.feedLocationType===b("FBFeedLocations").FUNDRAISER_PAGE?!1:this.props.hideAsSpamForPageAdmin;g=this.props.contextArgs.feedLocationType===b("FBFeedLocations").PAGE_TIMELINE&&this.props.feedback.isownerpage&&b("gkx")("819513");var q=this.props.comment.candeletecommentwithfeedback;q=q?J:E;var r=!this.props.viewerIsAuthor&&(!h.canremove||g);h.canremove&&!p?this.props.viewerIsAuthor&&h.canedit?(e=k?j._("Edit, delete or embed this"):j._("Edit or delete this"),f=b("UFICommentMenu.react").MenuType.EDIT,i?(c=[M],c=c.concat(this.$26())):c=this.$26()):this.props.showRemoveReportMenu?(k?e=r?j._("Remove, hide, report or embed this"):j._("Remove, hide or embed this"):e=r?j._("Remove, hide or report this"):j._("Remove or hide this"),c=[q,G],r&&(c.push(this.getReportActionMenuData()),o=!0)):this.props.feedback.customcommentactionlinks?(e=k?j._("Remove this"):j._("Remove or embed this"),c=[q],f=b("UFICommentMenu.react").MenuType.EDIT):(e=k?j._("Remove or embed this"):j._("Remove this"),!k&&!l&&!m&&!n?a=this.$12:c=[L]):this.props.feedback.customcommentactionlinks&&!g?(e=k?j._("Hide or embed this"):j._("Hide This"),c=[G],f=b("UFICommentMenu.react").MenuType.EDIT):h.canreport&&(k?e=r?j._("Hide, report or embed this"):j._("Hide or embed this"):e=r?j._("Hide or report this"):j._("Hide This"),c=[G],r&&(c.push(this.getReportActionMenuData()),o=!0));k&&(c||(c=[]),c.push(H),f=b("UFICommentMenu.react").MenuType.CHEVRON);h.canremove&&h.canviewerremovecommenter&&(d||(d=[]),d.push(K));l&&(c||(c=[]),c.push(I));typeof h.ispinnedbyauthor==="boolean"&&(h.canviewerpin&&!h.ispinnedbyauthor&&(c||(c=[]),c.push(R)),h.canviewerunpin&&h.ispinnedbyauthor&&(c||(c=[]),c.push(S)));if(m||n){c||(c=[]);p=m?T:U;c.length>0&&c[0]===F?c.splice(1,0,p):c.unshift(p);e=j._("Moderate comment")}h.canmutemembers&&!this.props.viewerIsAuthor&&(d||(d=[]),h.ismuted?d.push(O):d.push(N));h.canedit&&this.props.viewerIsAuthor&&this.$30(h)&&(c||(c=[]),h.text_delights_are_hidden?c.push(Q):c.push(P));if(this.props.feedback.customcommentactionlinks)for(var s in this.props.feedback.customcommentactionlinks){i=this.props.feedback.customcommentactionlinks[s];if(!i.showInMenu)continue;c||(c=[]);c.push({testid:i.type,value:i.type,label:i.title})}q=c?c.length:0;g=d?d.length:0;(q+g>1||f===b("UFICommentMenu.react").MenuType.CLOSE)&&(f=b("UFICommentMenu.react").MenuType.DOTS);return{closeTooltip:e,menuType:f,onClick:a,menuData:c,menuUserSection:d,reportActionPossible:o}};a.prototype.$31=function(){var a=b("XUFIEditCommentNuxController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(function(a){this.setState({hasSeenEditNux:!!a.payload.seen_nux,editNuxHelpUri:a.payload.help_uri})}.bind(this)).send()};a.prototype.$30=function(a){if(a.body&&a.body.ranges&&a.canhidetextdelights){for(var b=0;b<a.body.ranges.length;b++)if(a.body.ranges[b].campaign)return!0;return a.text_delights_are_hidden}return!1};a.prototype.$32=function(){__p&&__p();if(this.props.contextArgs.feedLocationType===b("FBFeedLocations").CE_PII_STRIPPED_FEED||this.props.contextArgs.feedLocationType===b("FBFeedLocations").CE_PII_AND_ATTACHMENTS_STRIPPED_FEED||this.props.inReviewView)return b("React").createElement("div",null);var a=this.$29(),c=a.onClick,d=a.menuData,e=a.menuUserSection,f=a.closeTooltip,g=a.menuType,h=null;this.props.comment.canedit&&this.props.viewerIsAuthor&&this.$30(this.props.comment)&&(h=b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("TextDelightNUX.react").__setRef("UFIComment.react"),container:this,contextRef:function(){return this.refs.comment_menu}.bind(this),nuxId:b("TextDelightNuxID").COMMENT_OPT_OUT_NUX,instance:this.props.comment.fbid},j._("You can control whether you and your friends see text colour and animation on this comment.")),c===null&&(c=function(a){b("Bootloader").loadModules(["TextDelightNUXLogger"],function(a){a.menuClick(this.props.comment.fbid)}.bind(this),"UFIComment.react")}.bind(this)));var i=(this.$3()?"":"UFICommentCloseButton")+(c===null&&d===null&&!this.$3()?" hdn":"")+(h!==null?" UFICommentCloseButtonNux":"")+(this.$3()?" UFICommentSpamTooltip":""),k=null,l=null;this.props.contextArgs.viewas&&(k="/ajax/profile/link_disabled_in_viewas.php",l="dialog",c=null);var m=this.$33(),n=this.$23(),o=function(d){a.reportActionPossible&&b("FRXDiglossiaQE").maybeExpose(),c!=null&&c(d)};k=b("React").createElement(b("UFICommentMenu.react"),{ajaxify:k,"aria-label":f,className:i,"data-testid":r,onClick:o,rel:l,tooltip:f,menuUserSection:e,menuData:d,menuType:g,onMenuShown:this.$25,onAction:this.$24,ref:"comment_menu",showRedesign:n,showPinnedCommentNux:this.state.showPinnedCommentNux,onPopoverMenuShow:function(){return this.$22(!0)}.bind(this),onPopoverMenuHide:function(){return this.$22(!1)}.bind(this),commentID:this.props.comment.fbid});return b("React").createElement("span",{className:(m?"":"_36rj")+(m?" _2tm9":"")+(m?" _4-4u":"")+(m?" _6cdx":"")+(this.state.liveStreamingRedesignPopoverMenuShown||((i=this.props.contextArgs.liveVideoCommentRedesignConfig)==null?void 0:i.alwaysShowButtons)?" _6jcy":"")},n?b("React").createElement(b("UFILiveCommentRedesignActions.react"),{contextArgs:this.props.contextArgs,comment:this.props.comment,commentMenu:k,feedback:this.props.feedback,isInLiveVideoReplyMode:!!this.props.isInLiveVideoReplyMode}):k,h,this.$34())};a.prototype.$34=function(){var a=this.state.showPinnedCommentNux;return a?b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("UFIGroupsPinnedCommentsNux.react").__setRef("UFIComment.react"),contextRef:function(){return this.refs.comment_menu}.bind(this),commentID:this.props.comment.fbid}):null};a.prototype.componentDidMount=function(){__p&&__p();var a=this.props,c=a.comment,d=a.contextArgs;a=a.orderingMode;this.$2=new(b("SubscriptionsHandler"))();if(d.source===b("FeedbackSourceType").NEWS_FEED){var e=!!c.parentcommentid;e?b("UFIODSLogger").bump("comment.newsfeed.replies.componentDidMount",b("UFIVersion").LEGACY):b("UFIODSLogger").bump("comment.newsfeed.toplevel.componentDidMount",b("UFIVersion").LEGACY)}c.trackingID&&this.props.isOptimisticallyRendered&&b("UFICommonInteractionLogger").endInteraction(c.trackingID+b("UFICommonInteractionEvents").UFI_OPTIMISTIC_COMMENT);if(this.state.isHighlighting){var f=d.feedLocationType===b("FBFeedLocations").WORKPLACE_HUB_PREVIEW,g=b("ReactDOM").findDOMNode(this),h=c.body&&c.body.text;h&&(g=this.$1);var i=parseInt(c.scrolltopoffset||0,10);this.$2.addSubscriptions(b("Bootloader").loadModules(["UFIScrollHighlight"],function(a){__p&&__p();window.setTimeout(function(){if(b("UFIRootRegistry").isSnowliftNode(d.rootid)||f)f?a.actOnWorkplaceHubSnowliftElem(g,i):a.actOnSnowliftElem(g,i);else if(c.privacy_value===b("CommentPrivacyValue").OWNER_OR_COMMENTER&&b("PrivateCommentsConfig").dark_comment_theme_enabled)a.actOnPrivateComment(g,i);else if(b("SelfCommentsGatingConfig").blue_self_comments_enabled&&this.props.viewerIsAuthor){var e=b("DOM").scry(g,"^._6q1a");a.actOnSelfComment(g,i,e.length>0)}else a.actOn(g,i,h)}.bind(this),0)}.bind(this),"UFIComment.react"));this.setState({isHighlighting:!1})}c.fbid&&window.setTimeout(function(){return b("UFISharedDispatcher").dispatch(b("UFICommentAction").mounted(d,{comment:c,isLivePinnedComment:Boolean(this.props.isLivePinnedComment),isInLiveVideoReplyMode:Boolean(this.props.isInLiveVideoReplyMode)}))}.bind(this),0);e=function(a,b){return this.setState({markedAsSpamHere:!0})}.bind(this);b("Arbiter").subscribe("bulk_actions_hidden",e);var j=c.parentcommentid;if(a===b("WebCommentViewOption").LIVE_STREAMING&&!!j){this.$2.addSubscriptions(b("UFICentralUpdates").subscribe("update-actions",function(a,c){__p&&__p();if(!c.actions)return;c.actions.forEach(function(a){switch(a.actiontype){case b("FeedbackActionType").CONFIRM_COMMENT_REMOVAL:if(a.commentid===j){a=b("UFIComments").getComment(j);this.setState({isHiddenInStreamingBecauseParentIsHidden:a?a.status===b("UFIConstants").UFIStatus.SPAM_DISPLAY:!1})}break;default:return}}.bind(this))}.bind(this)));e=b("UFIComments").getComment(j);this.setState({isHiddenInStreamingBecauseParentIsHidden:e?e.status===b("UFIConstants").UFIStatus.SPAM_DISPLAY:!1})}d.enableCommentPresence&&!this.props.viewerIsAuthor&&this.$2.addSubscriptions(m.onReady(function(a){var b=function(){this.setState({authorPresenceStatus:a.get(c.author)})}.bind(this);this.$2.addSubscriptions(a.subscribe("change",b));b()}.bind(this)))};a.prototype.componentDidUpdate=function(a){this.props.comment.trackingID&&a.isOptimisticallyRendered&&!this.props.isOptimisticallyRendered&&b("UFICommonInteractionLogger").endInteraction(this.props.comment.trackingID+b("UFICommonInteractionEvents").UFI_PERSISTED_COMMENT),this.props.comment.originalTimestamp&&this.props.comment.canedit&&this.state.editNuxHelpUri===""&&this.$31(),a.comment.attachment==null&&this.props.comment.attachment!=null&&b("Arbiter").inform(b("UFIUIEvents").CommentChanged,{ftentidentifier:this.props.contextArgs.ftentidentifier})};a.prototype.componentWillUnmount=function(){this.props.comment.fbid&&window.setTimeout(function(){return b("UFISharedDispatcher").dispatch(b("UFICommentAction").unmounted(this.props.contextArgs,{comment:this.props.comment,isLivePinnedComment:Boolean(this.props.isLivePinnedComment),isInLiveVideoReplyMode:Boolean(this.props.isInLiveVideoReplyMode)}))}.bind(this),0),this.$2.release()};a.prototype.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return a.comment!==c.comment||a.showReplyLink!==c.showReplyLink||a.isFirst!==c.isFirst||a.isLast!==c.isLast||a.isFirstCommentComponent!==c.isFirstCommentComponent||a.isLastCommentComponent!==c.isLastCommentComponent||a.isFirstComponent!==c.isFirstComponent||a.isLastComponent!==c.isLastComponent||a.isFeatured!==c.isFeatured||a.hasPartialBorder!==c.hasPartialBorder||a.showTranslation!==c.showTranslation||b.wasHighlighted!==d.wasHighlighted||b.isHighlighting!==d.isHighlighting||b.markedAsSpamHere!==d.markedAsSpamHere||b.isInlinePageDeleted!==d.isInlinePageDeleted||b.isInlineBanned!==d.isInlineBanned||b.isInlineStreamBanned!==d.isInlineStreamBanned||b.showBody!==d.showBody||b.hideSpamComment!==d.hideSpamComment||b.loadingDialogWhenSharing!==d.loadingDialogWhenSharing||b.isHiddenInStreamingBecauseParentIsHidden!==d.isHiddenInStreamingBecauseParentIsHidden||b.hasSeenEditNux!==d.hasSeenEditNux||b.currentPinnedCommentID!==d.currentPinnedCommentID||b.showPinnedCommentNux!==d.showPinnedCommentNux};a.prototype.$23=function(){var a=this.props.contextArgs.liveVideoCommentRedesignConfig;return!!a&&a.showRedesign&&this.props.orderingMode===b("WebCommentViewOption").LIVE_STREAMING};a.prototype.$3=function(){var a=this.props.comment,c=a.needsApproval,d=a.canAppeal,e=a.canSecure,f=a.appealStatus;a=a.isApproved;return c||d||e||(f===b("CommentApprovalsResponsibleUserAction").APPEALED||f===b("CommentApprovalsResponsibleUserAction").SECURED_ACCOUNT)&&!a};a.prototype.render=function(){__p&&__p();if(this.state.isHiddenInStreamingBecauseParentIsHidden)return null;var a=this.props,c=a.contextArgs,d=a.comment;a=a.feedback;var e=d.status===n.DELETED,f=d.status===n.LIVE_DELETED,g=d.status===n.SPAM_DISPLAY,h=this.state.hideSpamComment;if(e)return null;e=this.state.markedAsSpamHere;var i=this.state.isInlinePageDeleted,k=this.props.hideAsSpamForPageAdmin,l=this.state.isInlineBanned,m=this.state.isInlineStreamBanned;d.islive&&!this.state.loggedLiveUpdate&&(new(b("LiveWWWFeedbackTypedLogger"))().setEvent("update_view").setUpdateType("comment").setCommentID(d.id).log(),this.setState({loggedLiveUpdate:!0}));var o=$(d),p=!d.status&&(d.isunseen||d.__typename==="local");if(!d.status&&a.lastseentime){var q=d.originalTimestamp||(d.timestamp||{}).time||0;p=p||q>a.lastseentime}q=c.markedcomments;q&&q[d.legacyid]&&(p=!0);(this.props.orderingMode===b("WebCommentViewOption").LIVE_STREAMING||this.props.isLivePinnedComment)&&(p=!1);a="UFIRow"+(this.props.inReviewView?" UFICommentInReview":"")+(this.props.isFirst?" _48ph":"")+(this.props.isLast?" UFILastComment":"")+(this.props.isFirstCommentComponent?" _48pi":"")+(this.props.isLastCommentComponent?" UFILastCommentComponent":"")+(!this.$33()&&(this.props.isFirstComponent||b("SutroBlingBarGatingConfig").enabled&&this.props.isFirstCommentComponent)?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")+(this.props.isLivePinnedComment?" UFILivePinnedComment":"");q=j._("Comment");var r=j._("Comment reply");r=d.parentcommentid?r:q;if(o)if(X){q=null;o=null;var t=null,u=null,v=null;k?(t=l?this.$19:this.$18,u=m?this.$21:this.$20,i?q=j._("You've deleted this comment so no one can see it."):e&&(q=j._("Now this is only visible to the person who wrote it and their friends."),v=this.$11,o=this.$10)):e&&(q=j._("This comment has been hidden."),v=this.$11,o=this.$10);if(q)return b("React").createElement("div",{className:a,role:"article","aria-label":r},b("React").createElement(X,{notice:q,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:o,onBanAction:t,onStreamBanAction:u,onDeleteAction:v,isInlineBanned:l,isInlinePageDeleted:i,isInlineStreamBanned:m,hideAsSpamForPageAdmin:k,pageID:this.props.feedback.ownerid}))}else b("Bootloader").loadModules(["UFICommentRemovalControls.react"],function(a){X=a,window.setTimeout(function(){this.forceUpdate()}.bind(this))}.bind(this),"UFIComment.react");e="comment_"+b("uniqueID")();q=b("joinClasses")(a,"UFIComment"+(Y(d)?" UFICommentFailed":"")+(b("PrivateCommentsConfig").dark_comment_theme_enabled&&d.privacy_value===b("CommentPrivacyValue").OWNER_OR_COMMENTER?" UFIPrivateCommentDarkTheme":"")+(Z(d,c.location)?" UFITipJarComment":"")+(f||g||this.props.isTranslucent||this.$3()&&!h||d.parentNeedsApproval?" UFITranslucentComment":"")+(this.state.isHighlighting?" highlightComment":"")+" _4oep"+(this.props.hasPartialBorder?" UFIPartialBorder":"")+(p?" UFIUnseenItem":"")+(d.isAnnouncement?" UFICommentLiveVideoAnnouncement":"")+(d.isLivingRoomAnnouncement?" UFICommentLivingRoomAnnouncement":""));o=this.renderComment();t=c.mayLogVPVs&&this.props.orderingMode===b("WebCommentViewOption").RANKED_THREADED;d.__typename!=="local"&&!d.isAnnouncement&&(t&&(o=b("React").createElement(b("UFICommentVPVTracker.react"),{comment:d,contextArgs:c},o)),o=b("React").createElement(b("UFICommentVPVDTracker.react"),{renderedComment:{comment:d,isLivePinnedComment:Boolean(this.props.isLivePinnedComment),isInLiveVideoReplyMode:Boolean(this.props.isInLiveVideoReplyMode)},contextArgs:this.props.contextArgs},o));return b("React").createElement("div",{id:e,className:q,role:"article","aria-label":r,"data-testid":this.state.wasHighlighted?s:null,"data-ft":this.props["data-ft"]},o)};a.prototype.$35=function(a,c){__p&&__p();var d=this.props,e=d.comment,f=d.feedback,g=this.state.hideSpamComment,h=e.appealStatus,i=e.body?e.body.text:"",k=b("UFICommentUtils").shallowCopyRanges(e.body&&e.body.ranges),l=b("UFICommentUtils").shallowCopyRanges(e.body&&e.body.delight_ranges),m=b("React").createElement(b("ShimButton.react"),{className:"UFICommentShowComment",form:"link",onClick:function(){return this.setState({hideSpamComment:!1})}.bind(this)},j._("Show Comment"));if(g&&this.$3()){if(h===b("CommentApprovalsResponsibleUserAction").SECURED_ACCOUNT&&e.needsApproval===!1){g=b("React").createElement(b("Text.react"),null,j._({"*":"Thanks for securing your account. We recommend deleting this comment now. If you don't, it will be automatically deleted in {number} days.","_1":"Thanks for securing your account. We recommend deleting this comment now. If you don't, it will be automatically deleted in 1 day."},[j._plural(e.daysToExpire,"number")]));h=b("React").createElement(b("ShimButton.react"),{className:"UFICommentShowComment",form:"link",onClick:function(a){return this.$12(a)}.bind(this)},j._("Delete"));return b("React").createElement("span",null,g,m,j._("or"),h)}g=e.needsApproval?b("React").createElement(b("Text.react"),null,j._("{name}'s comment was marked as spam.",[j._param("name",c)])):b("React").createElement(b("Text.react"),null,j._("Your comment was marked as spam."));return b("React").createElement("span",null,g,m)}i=b("UFICommentUtils").getCommentTextWithTruncatedURIs(k,i);h=null;c=null;!d.isLocallyComposed&&!this.state.wasHighlighted&&(c=b("UFIConstants").commentTruncationLength,h=b("UFIConstants").commentTruncationMaxLines);if(e.body&&e.body.markdown_enabled&&e.body.markup&&b("HTML").isHTML(e.body.markup))return b("React").createElement("span",{dangerouslySetInnerHTML:e.body.markup});if(e.isJoinEvent)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIJoinEvent.react").__setRef("UFIComment.react"),bootloadPlaceholder:b("React").createElement("span",null),comment:e});g=this.$36(i);return b("React").createElement(b("UFICommentBody.react"),{socialContext:e.socialcontext,commentText:i,commentRanges:k,commentPrivacy:e.privacy_value,textDelightRanges:l,showEmojisStandalone:g,groupOrEventID:f.grouporeventid,maxLength:c,maxLines:h,markViewerHasInteracted:this.props.markViewerHasInteracted,shouldExpand:a,ufiInstanceID:this.props.contextArgs.instanceid,commentFBID:e.fbid,isLiveStreaming:d.contextArgs.islivestreaming})};a.prototype.$36=function(a){if(!a||a.length>V*W)return!1;var c=b("EmojiRenderer").parse(a);if(!c)return!1;var d=0;c.forEach(function(a){d+=a.length});return a.length==d&&c.length<=W};a.prototype.$37=function(a){this.setState({loadingDialogWhenSharing:!0});a=a&&a.shareOptions&&a.shareOptions.shareNowURI?a.shareOptions.shareNowURI:null;a&&new(b("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(function(a){this.setState({loadingDialogWhenSharing:!1}),this.$38(a.payload.message||b("ShareNowConstants").success)}.bind(this)).setErrorHandler(function(a){this.setState({loadingDialogWhenSharing:!1}),this.$38(a.payload.message||b("ShareNowConstants").error)}.bind(this)).send()};a.prototype.$38=function(a){return new(b("Dialog"))().setBody(a).setAutohide(2500).setModal(!0).show()};a.prototype.$39=function(a){return this.$40(a)?b("React").createElement("span",{className:"UFICommentShareOptionsItem"},b("React").createElement(b("XUIButton.react"),{image:b("React").createElement(b("Image.react"),{src:g("363444")}),label:j._("Send a Message"),href:"#",ajaxify:a&&a.shareOptions&&a.shareOptions.shareMessageURI?a.shareOptions.shareMessageURI:null,rel:"dialog",use:"default"})):null};a.prototype.$41=function(a){return this.$42(a)?b("React").createElement("span",{className:"UFICommentShareOptionsItem"},b("React").createElement(b("XUIButton.react"),{image:b("React").createElement(b("Image.react"),{src:g("363577")}),label:j._("Share..."),href:"#",ajaxify:a&&a.shareOptions&&a.shareOptions.sharePostURI?a.shareOptions.sharePostURI:null,rel:"dialog",use:"default"})):null};a.prototype.$43=function(a){var c=a&&a.shareOptions&&a.shareOptions.privacyText?j._("Share Now ({privacyText})",[j._param("privacyText",a.shareOptions.privacyText)]):"";return this.$44(a)?b("React").createElement("span",{className:"UFICommentShareOptionsItem"},b("React").createElement(b("XUIButton.react"),{image:b("React").createElement(b("Image.react"),{src:g("113894")}),label:c,href:"#",onClick:function(){return this.$37(a)}.bind(this),use:"default"})):null};a.prototype.$44=function(a){return a!=null&&a.shareOptions!=null&&a.shareOptions.shareNowURI!=null};a.prototype.$40=function(a){return a!=null&&a.shareOptions!=null&&a.shareOptions.shareMessageURI!=null};a.prototype.$42=function(a){return a!=null&&a.shareOptions!=null&&a.shareOptions.sharePostURI!=null};a.prototype.$45=function(){return b("React").createElement("div",null,j._("Share post:"))};a.prototype.$46=function(a){a=a.contextArgs.shareLinkConfig;var c=this.$43(a),d=this.$41(a);a=this.$39(a);var e=this.$45(),f=this.$47(),g=c||d||a;b("QE2Logger").logExposureForUser(o);return g?b("React").createElement("span",{className:"UFICommentShareOptionsContainer"},b("React").createElement("span",{className:"UFICommentShareOptionsDescription"},e),b("React").createElement("span",{className:"UFICommentShareOptions"},c,d,a,f)):null};a.prototype.$47=function(){return b("React").createElement(b("LoadingDialog.react"),{shown:this.state.loadingDialogWhenSharing})};a.prototype.$48=function(a,c,d){return c.isLivingRoomAnnouncement?b("React").createElement("div",null,b("React").createElement(b("InlineBlock.react"),{alignv:"middle",height:0},d),b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFILivingRoomAnnouncementCTA.react").__setRef("UFIComment.react"),bootloadPlaceholder:b("React").createElement("span",null),comment:c})):b("React").createElement("div",{className:"UFICommentLiveVideoAnnouncementBody _4qkn"},b("React").createElement(b("InlineBlock.react"),{alignv:"middle",className:"UFICommentLiveVideoAnnouncementMessage",height:0},d),b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFILiveVideoAnnouncementCTAContainer.react").__setRef("UFIComment.react"),bootloadPlaceholder:b("React").createElement("span",null),comment:c,contextArgs:a}))};a.prototype.renderComment=function(){__p&&__p();var a=this.props,c=a.comment,d=a.permalink,e=a.feedback,f=this.state.authorPresenceStatus,h=a.authorProfiles[c.author],i=c.status===n.SPAM_DISPLAY,k=c.status===n.LIVE_DELETED,m=this.$33();i=!(i||k||c.isAnnouncement||m);k=!1;this.props.featuredCommentIDs&&this.props.featuredCommentIDs.indexOf(this.props.comment.fbid)>-1&&(k=!0);var o=e.canremoveall||c.hiddenbyviewer,p=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.SMALL_ACTOR_PHOTO),q;if(!a.contextArgs.viewas&&!c.isAnnouncement){if(!h)throw new Error("Got unexpected null author on comment "+JSON.stringify(c)+" with profiles "+JSON.stringify(a.authorProfiles));q=b("HovercardLink").constructEndpointWithGroupLocationAndExtraParams(h,e.grouporeventid,c.hovercardlocation?c.hovercardlocation:b("UserHovercardLocation").UFI,c.isauthorweakreference,{on_public_ufi:e.ispublic}).toString()}var r=c.isAnnouncement?null:b("React").createElement(b("UFICommentAuthorName.react"),{author:h,authorProfiles:a.authorProfiles,commentID:c.id?c.id.toString():null,commentPrivacyValue:c.privacy_value,constituentBadge:c.constituentTitle,disableAuthorLink:a.contextArgs.disableCommentAuthorLink,focusOnMount:a.focusOnMount,groupMemberBadge:c.groupmemberbadge,groupOrEventID:e.grouporeventid,isAdminViewer:a.feedback.isadminviewer,isAuthorBot:c.isauthorbot,isAuthorNonCoworker:c.isauthornoncoworker,isAuthorWeakReference:c.isauthorweakreference,isAuthorOriginalPoster:c.isauthororiginalposter,isFeatured:a.isFeatured,isPublic:e.ispublic,dialogUrl:c.dialogurl,hasConstituentBadge:c.hasConstituentBadge,hasFriendsOnlyBadge:c.hasFriendsOnlyBadge,hovercardLocation:c.hovercardlocation,moderatorBadgeText:c.moderator_badge_text,showHovercard:!!q,socialContext:c.socialcontext,openLinkInNewTab:a.contextArgs.islivestreaming||a.contextArgs.isLiveVOD||a.contextArgs.isActiveLivingRoom,viewerIsAuthor:!!a.viewerIsAuthor}),s=c.identityBadges&&c.identityBadges.length>0?b("React").createElement(b("IdentityBadges.react"),{badges:c.identityBadges,canShowMultipleBadges:a.contextArgs.canShowMultipleBadges,commentID:c.fbid}):null,t=this.$35(k,r),u=c.translationdata,v=u&&u.translatedText&&u.translatedText.text,w=!v||this.state.showBody||u.trigger===b("TranslationTrigger").LOGGED_OUT_AUTO_TRANSLATION;v=this.props.showTranslation&&!u||!!u&&(!b("UFIConfig").shouldTranslationsReplaceContent||!w||!v||u.trigger===b("TranslationTrigger").LOGGED_OUT_AUTO_TRANSLATION);var x;if(c.isAnnouncement)x=this.$48(a.contextArgs,c,t);else{var y;(c.istranslatable||!!u)&&(y=b("React").createElement("div",null,b("React").createElement(b("UFICommentTranslationText.react"),{shouldExpand:k,showTranslation:v,translationData:u})));x=b("React").createElement("span",null,w?t:null,y)}k=null;a.comment.insightsComment&&(k=b("React").createElement(b("UFIInsightsSharingCommentTag.react"),{showMiddot:!0,feedbackTargetID:a.contextArgs.ftentidentifier,commentId:a.comment.insightsComment.ufiCommentId,formattedValue:a.comment.insightsComment.insightsComment.formattedValue}));t=null;(a.contextArgs.isLiveVOD||!a.contextArgs.islivestreaming&&a.contextArgs.showVODCommentTimestamps&&a.comment.videoTimeOffset)&&(t=b("React").createElement(b("UFILiveCommentTimestamp.react"),{comment:c,contextArgs:a.contextArgs,isInLiveVideoReplyMode:!!a.isInLiveVideoReplyMode}));var z=b("React").createElement(b("UFICommentAttachment.react"),{allowCustomStickers:e.allowgaminglivestreamcustomstickers,comment:a.comment,isPinnedLivingRoomPhotoComment:this.props.isLivePinnedComment&&a.contextArgs.isActiveLivingRoom&&c.photo_comment&&!this.props.isStaticUFILoading}),A=b("React").createElement(b("UFICommentPlayerStatsCard.react"),{comment:a.comment}),B=h&&h.living_room_presence_badge===b("LivingRoomPresenceBadge").HOST?b("React").createElement(b("LivingRoomProfileTileBadge.react"),{asset:null,isCommentating:!1,isSpeaking:!1,size:"regular",useBackgroundColor:!1}):null,C;if(this.state.hideSpamComment)C=b("React").createElement("div",null);else if(c.isAnnouncement)C=b("React").createElement(b("UFICommentLiveVideoAnnouncementImage.react"),{accentColor:c.accentColor,contextArgs:a.contextArgs,glyphName:c.glyphName,image:c.image,isJoinEvent:c.isJoinEvent});else{var D=h.uri||h.isBusinessPersona,E=D?b("UFICommentUtils").annotateProfileURIIfPublic(e.ispublic,h.uri):null;C=b("React").createElement(b("UFIActorIconContainer.react"),{actorID:c.author});var F=a.contextArgs.islivestreaming||a.contextArgs.isLiveVOD?"_blank":"_self";c.dialogurl?C=b("React").createElement("a",{className:"UFICommentAuthorWithPresence","data-ft":p,"data-hovercard":q,ajaxify:c.dialogurl,rel:"dialog",target:F,href:E},C,B,b("React").createElement("div",{className:"UFICommentAuthorPresence"+(f===b("AvailableListState").ACTIVE?" UFICommentAuthorActive":"")+(B!==null?" UFICommentAuthorLivingRoomHost":"")})):D&&(C=b("React").createElement("a",{className:"UFICommentAuthorWithPresence","data-ft":p,"data-hovercard":q,target:F,href:E},C,B,b("React").createElement("div",{className:"UFICommentAuthorPresence"+(f===b("AvailableListState").ACTIVE?" UFICommentAuthorActive":"")+(B!==null?" UFICommentAuthorLivingRoomHost":"")})))}D=null;if(this.props.isLivePinnedComment){p=j._("Pinned comment");D=b("React").createElement("span",{className:"UFILivePinnedCommentLabel"},b("React").createElement(b("Image.react"),{className:"UFILivePinnedCommentGlyph",src:g("139486")}),p)}F=c.tipOptionIndex?b("React").createElement(b("VideoTipJarCommentBackground.react"),{tipOptionIndex:c.tipOptionIndex}):null;E=c.body&&c.body.text;f=!1;B=!1;E&&(B=this.$36(c.body.text));p=null;c.commonalities&&E&&(p=b("React").createElement(b("React").Suspense,{fallback:b("React").createElement(b("React").Fragment,null)},b("React").createElement(l,{commonalities:c.commonalities})));var G=!this.state.hideSpamComment&&(c.photo_comment||c.video_comment||c.attachment||c.file_comment);G&&B&&(x=b("React").createElement("div",{className:"_26f8"},x,i?this.$32():null));var H=null;if(!this.state.hideSpamComment&&c.privacy_value===b("CommentPrivacyValue").OWNER_OR_COMMENTER&&(b("PrivateCommentsConfig").privacy_text_above_comment_enabled||b("PrivateCommentsConfig").privacy_text_inside_comment_enabled)){h=a.viewerIsAuthor?e.actorshortname||e.actorname:h.firstName||h.name;H=b("React").createElement("div",{className:"UFIPrivateCommentLabel"+(c.parentcommentid?" UFIPrivateCommentReplyLabel":"")+(!E&&!c.isAnnouncement||B?" UFIPrivateCommentActorOnly":"")},b("React").createElement("div",{className:"UFIPrivateCommentLabelIcon"}),c.parentcommentid?null:b("React").createElement("div",{className:"UFIPrivateCommentLabelText"},j._("Only you and {user} can see this",[j._param("user",h)])))}h=c.parentcommentauthorid;var I=null;if(h!=null){h=a.authorProfiles[h];if(h&&!a.isInLiveVideoReplyMode&&a.orderingMode===b("WebCommentViewOption").LIVE_STREAMING){h=j._("Replying to {name}",[j._param("name",h.firstName)]);I=b("React").createElement("div",{className:"_27di"},this.$23()?b("React").createElement("a",{className:"_2iep _2iex",href:"#",onClick:b("UFIThreadedFacecastCommentsUtils").onReplyClickCallback(c,a.contextArgs,e)},h):b("React").createElement(b("XUIText.react"),{size:"body3",color:"secondary"},h))}}h=b("React").createElement("span",{className:(!E&&!c.isAnnouncement?"UFICommentActorOnly":"")+(E||c.isAnnouncement?" UFICommentActorAndBody":"")+(c.isJoinEvent?" _4ql9":"")+(c.isAnnouncement&&c.ctaAction!==b("LiveVideoAnnouncementCTAType").NONE?" _4qla":"")+(B?" _3re2":""),ref:function(a){this.$1=a}.bind(this)},p,b("React").createElement("div",{className:"UFICommentActorAndBodySpacing"+(p?" _6ooo":"")},I,s,this.state.hideSpamComment?null:r,k,t,r||t?" ":null,b("PrivateCommentsConfig").privacy_text_inside_comment_enabled?H:null,x));p=b("SutroPhase2GatingConfig").enabled_narrow_bubble_attachments?c.attachment&&(c.attachment.type==="comment_place_info"||c.attachment.type==="comment_product_info"||c.attachment.type==="gif")&&!c.photo_comment&&!c.video_comment:c.attachment&&(c.attachment.type==="share"||c.attachment.type==="comment_place_info"||c.attachment.type==="comment_product_info"||c.attachment.type==="gif")&&!c.photo_comment&&!c.video_comment;I=b("SutroPhase2GatingConfig").enabled_narrow_bubble_attachments&&c.attachment&&c.attachment.type==="share";G?z=b("React").createElement(b("UFIReactionBadgeDecorator.react"),{comment:c,feedback:e,contextArgs:a.contextArgs,isFlexibleWidthAttachment:I,isFullWidthAttachment:p,showLiveStreamingRedesign:this.$23(),onRenderAtBottomChange:this.$28},z):B?h=b("React").createElement("span",{className:(!E&&!c.isAnnouncement?"UFICommentActorOnly":"")+(E||c.isAnnouncement?" UFICommentActorAndBody":"")+(c.isJoinEvent?" _4ql9":"")+(B?" _3re2":""),ref:function(a){this.$1=a}.bind(this)},s,this.state.hideSpamComment?null:r,t,r||t?" ":null,b("PrivateCommentsConfig").privacy_text_inside_comment_enabled?H:null,b("React").createElement("div",{className:"_26f8"},b("React").createElement(b("UFIReactionBadgeDecorator.react"),{comment:c,feedback:e,contextArgs:a.contextArgs,showLiveStreamingRedesign:this.$23(),onRenderAtBottomChange:this.$28},x),i?this.$32():null)):h=b("React").createElement(b("UFIReactionBadgeDecorator.react"),{comment:c,feedback:e,contextArgs:a.contextArgs,showLiveStreamingRedesign:this.$23(),onRenderAtBottomChange:this.$28},h);f=!0;!E&&z?z=b("React").createElement("div",{className:"_26f8"},z,i?this.$32():null):!B&&(E&&!z||E&&z)&&(h=b("React").createElement("div",{className:"_26f8"},h,i?this.$32():null));var J;(c.istranslatable||!!u)&&(J=b("React").createElement(b("UFICommentTranslationLink.react"),{translationData:u,showTranslation:v,isShowingOriginal:w,onSeeTranslation:function(){return this.$27()}.bind(this),onSeeOriginal:function(){return this.setState({showBody:!0})}.bind(this),shownInCommentActions:!0}));k=c.isAnnouncement||this.state.hideSpamComment||this.props.inReviewView||this.props.contextArgs.feedLocationType===b("FBFeedLocations").CE_PII_STRIPPED_FEED||this.props.contextArgs.feedLocationType===b("FBFeedLocations").CE_PII_AND_ATTACHMENTS_STRIPPED_FEED||this.$23()?null:b("React").createElement(b("UFICommentActions.react"),{comment:c,feedback:e,hideReactionCount:f,parentCanComment:a.parentCanComment,permalink:d,viewerCanMarkNotSpam:Boolean(o),showPermalink:a.showPermalink,showReplyLink:a.showReplyLink,translateLink:J,contextArgs:a.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:a.hideAsSpamForPageAdmin||this.state.hideSpamComment,hideSpamComment:this.state.hideSpamComment,orderingMode:a.orderingMode,isInLiveVideoReplyMode:a.isInLiveVideoReplyMode,isAuthorPinnedComment:a.isAuthorPinnedComment,renderCommentCloseButton:function(){return this.$32()}.bind(this),displayVerticalCommentVote:m,hasSeenEditNux:this.state.hasSeenEditNux,editNuxHelpUri:this.state.editNuxHelpUri,onEditNuxCloseClick:function(){this.setState({hasSeenEditNux:!0})}.bind(this)});G=b("UFIComments").getCacheVariable("shareOnComment");I=this.props.contextArgs.feedLocationType===b("FBFeedLocations").TAHOE&&this.props.isLocallyComposed&&G&&G[c.ftentidentifier]===c.id&&!c.parentcommentid?this.$46(a):null;p=this.props.viewerIsAuthor&&b("SelfCommentsGatingConfig").blue_self_comments_enabled;s=m?b("React").createElement(b("UFICommentVoteContainer.react"),{comment:c,contextArgs:a.contextArgs,feedback:e,UIVersion:c.commentVoteUIVersion,isFirstComment:this.props.isFirstCommentComponent}):null;r=this.$23()&&c.reactioncount>0;t=b("React").createElement("div",null,D,b("PrivateCommentsConfig").privacy_text_above_comment_enabled&&!c.parentcommentid?H:null,b("React").createElement(b("UFIImageBlock.react"),{spacing:"medium"},C,b("React").createElement("div",{className:m?"UFICommentContentBlockWithVote":""},b("React").createElement("div",{className:"UFICommentContentBlock"},b("React").createElement("div",{className:"UFICommentContent"+(p?" _67sh":"")+(p?" _2bsy":"")+(c.surveyGalleryHighlight?" _42wr":"")+(m?" UFICommentVerticalVoteFlexGrow":"")+(r?" UFICommentLiveRedesignBadgedContent":"")+(r&&this.state.renderReactionBadgeAtBottom?" UFICommentLiveRedesignPaddedBadgedContent":"")},h,this.state.hideSpamComment?null:z,this.state.hideSpamComment?null:A),k,I),s),F));if(this.props.contextArgs.feedLocationType===b("FBFeedLocations").SURVEY_GALLERY)return b("React").createElement("div",{className:"_-ae"},b("React").createElement("div",{className:"_-ac"}),t);else return t};a.prototype.$33=function(){return!this.props.inReviewView&&!this.props.contextArgs.islivestreaming&&this.props.orderingMode!==b("WebCommentViewOption").LIVE_STREAMING&&b("gkx")("678267")&&b("gkx")("678268")&&!!this.props.comment.voteEnabled&&this.props.comment.commentVoteUIVersion===b("UFIConstants").UFICommentVoteUIVersion.VERTICAL_ON_THE_SIDE};a.propTypes={authorProfiles:c.object.isRequired,comment:c.object.isRequired,contextArgs:c.object.isRequired,feedback:c.object.isRequired,"data-ft":c.string,featuredCommentIDs:c.array,focusOnMount:c.bool,hasPartialBorder:c.bool,hideAsSpamForPageAdmin:c.bool,isFeatured:c.bool,isFirst:c.bool,isFirstCommentComponent:c.bool,isFirstComponent:c.bool,isLast:c.bool,isLastCommentComponent:c.bool,isLastComponent:c.bool,isLivePinnedComment:c.bool,isLocallyComposed:c.bool,isStaticUFILoading:c.bool,parentCanComment:c.bool,permalink:c.string,showPermalink:c.bool,showRemoveReportMenu:c.bool,showReplyLink:c.bool,viewerIsAuthor:c.bool,orderingMode:c.string,markViewerHasInteracted:c.func,showTranslation:c.bool};a.contextTypes={dispatch:c.func};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("UFICommentDisabledNotice.react",["cx","React","TextWithEntities.react","linkifyEntityRange"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props.feedback,c=a.commentdisablednotice;a.isviewermuted&&(c=a.mutednotice);a.arecommentsdisabled&&(c=a.commentdisablednotice);a=b("React").createElement("div",{className:"UFINotice"},b("React").createElement(b("TextWithEntities.react"),{interpolator:b("linkifyEntityRange"),ranges:c.ranges,aggregatedranges:c.aggregated_ranges,text:c.text}));return b("React").createElement("div",{className:"UFIRow _4204 _2o9m _4oep"},a)};function a(){h.apply(this,arguments)}a.propTypes={feedback:c.object.isRequired};e.exports=a}),null);
__d("UFICommentFilters",["UFIConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getAuthors:function(a){return a.reduce(function(a,b){b.author&&(a=a.concat(b.author));b.socialcontext&&(a=a.concat(b.socialcontext.topmutualid));b.replyauthors&&b.replyauthors.length&&(a=a.concat(b.replyauthors));b.parentcommentauthorid&&(a=a.concat(b.parentcommentauthorid));return a},[])},isDeleted:function(a){return a.status===b("UFIConstants").UFIStatus.DELETED},isSpam:function(a){return a.status===b("UFIConstants").UFIStatus.SPAM},collectSpamBuckets:function(a,c){a=a.reduce(function(a,d){g.isSpam(d)?a.spamBucket?(a.spamBucket.spamCommentIDs.push(d.id),a.collected.push(null)):(a.spamBucket={status:b("UFIConstants").UFIStatus.SPAM,id:d.id,spamCommentIDs:[d.id]},a.collected.push(a.spamBucket)):(d.isAnnouncement||c[d.author])&&(a.spamBucket=null,a.collected.push(d));return a},{spamBucket:null,collected:[]});return a.collected}};e.exports=g}),null);
__d("UFICommentHeader.react",["cx","fbt","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){return b("React").createElement("h6",babelHelpers["extends"]({},this.props,{className:"accessible_elem"}),h._("Comments"))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("UFICommentListVisibilityTracker.react",["cx","OnVisible.react","React","SubscriptionsHandler","UFIInstanceAction","UFISharedDispatcher","UFIVisibility","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("React").Children;c=b("React").Component;d=b("React").PropTypes;f=babelHelpers.inherits(a,c);h=f&&f.prototype;function a(a){h.constructor.call(this,a),this.state={isVisible:!1},this.onVisible=function(){this.setState({isVisible:!0}),b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").changeCommentListVisibility(this.props.contextArgs,b("UFIVisibility").VISIBLE))}.bind(this),this.onHidden=function(){this.setState({isVisible:!1}),b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").changeCommentListVisibility(this.props.contextArgs,b("UFIVisibility").HIDDEN))}.bind(this),this.$1=new(b("SubscriptionsHandler"))()}a.prototype.shouldComponentUpdate=function(a,c){return!b("gkx")("678285")&&this.state.isVisible!==c.isVisible?!1:!0};a.prototype.render=function(){var a=i.only(this.props.children),c=b("gkx")("678285");return b("React").createElement("div",{"data-debugstate":c?this.state.isVisible?"partially visible":"hidden":null,className:"_3b-9"+(c?" _3b-a":"")+(c&&this.state.isVisible?" _3b-b":"")+(c&&!this.state.isVisible?" _3b-c":"")+" _j6a",onScroll:this.props.onScroll,ref:this.props.inputRef},b("React").createElement(b("OnVisible.react"),{onVisible:this.onVisible,onHidden:this.onHidden},a))};a.propTypes={contextArgs:d.shape({instanceid:d.string.isRequired,location:d.string}).isRequired};e.exports=a}),null);
__d("UFICommentScrollableArea.react",["React","ScrollableArea.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").Children;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=this.props,c=a.children,d=a.scrollcomments;a=a.scrollwidth;return d&&a?b("React").createElement(b("ScrollableArea.react"),{width:a},h.only(c)):h.only(c)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("CommentsTimeSpentTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:CommentsTimeSpentLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:CommentsTimeSpentLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:CommentsTimeSpentLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEndTime=function(a){this.$1.end_time=a;return this};a.prototype.setOrderingMode=function(a){this.$1.ordering_mode=a;return this};a.prototype.setPostFbid=function(a){this.$1.post_fbid=a;return this};a.prototype.setStartTime=function(a){this.$1.start_time=a;return this};a.prototype.setTimeSpentID=function(a){this.$1.time_spent_id=a;return this};a.prototype.setViewerHasInteracted=function(a){this.$1.viewer_has_interacted=a;return this};c={end_time:!0,ordering_mode:!0,post_fbid:!0,start_time:!0,time_spent_id:!0,viewer_has_interacted:!0};e.exports=a}),null);
__d("CommentsTimeSpentTracker.react",["Banzai","CommentsTimeSpentTypedLogger","Event","OnVisible.react","React","SubscriptionsHandler","TimeSlice","UFIOrderingModeStore","UserActivity","pageID","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"CommentsTimeSpentTracker",firstVisibleTime:0,listeners:new(b("SubscriptionsHandler"))(),propTypes:{contextArgs:a.object.isRequired,targetFBID:a.string.isRequired,viewerHasInteracted:a.bool.isRequired,timeToConsiderViewerInactiveMillis:a.number,pollViewerActivityIntervalMillis:a.number},getDefaultProps:function(){return{timeToConsiderViewerInactiveMillis:3e4,pollViewerActivityIntervalMillis:1e3}},render:function(){return b("React").createElement(b("OnVisible.react"),{onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children)},startInterval:function(){this.firstVisibleTime===0&&(this.firstVisibleTime=this._getTimeInSeconds(),this._checkForIdleViewer())},finishInterval:function(){var a=b("UFIOrderingModeStore").getState().get(this.props.contextArgs.instanceid);if(this.firstVisibleTime&&this.isMounted()){var c=this._getTimeInSeconds();c>this.firstVisibleTime&&new(b("CommentsTimeSpentTypedLogger"))().setViewerHasInteracted(this.props.viewerHasInteracted).setOrderingMode(a).setPostFbid(this.props.targetFBID).setStartTime(this.firstVisibleTime).setEndTime(c).setTimeSpentID(b("pageID")).log();this.firstVisibleTime=0}},componentDidMount:function(){this.listeners.addSubscriptions(b("Banzai").subscribe(b("Banzai").SHUTDOWN,this.finishInterval),b("Event").listen(window,"blur",this.finishInterval))},componentWillUnmount:function(){this.finishInterval(),this.listeners.release()},componentDidUpdate:function(){this.finishInterval()},_getTimeInSeconds:function(){return Math.floor(Date.now()/1e3)},_checkForIdleViewer:function(){if(this.firstVisibleTime===0)return;b("UserActivity").isActive(this.props.timeToConsiderViewerInactiveMillis)?b("setTimeout")(b("TimeSlice").guard(function(){this._checkForIdleViewer()}.bind(this),"CommentsTimeSpentTracker checkForIdleViewer",{propagationType:b("TimeSlice").PropagationType.EXECUTION}),this.props.pollViewerActivityIntervalMillis):this.finishInterval()}});e.exports=c}),null);
__d("UFISeenTracker.react",["BanzaiODS","OnVisible.react","React","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function h(a){var b=!1;return function(){b||(a(),b=!0)}}c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.state={seen:!1},this.$1=h(this.logSeen.bind(this))}a.prototype.render=function(){return this.state.seen?this.props.children:b("React").createElement(b("OnVisible.react"),{onVisible:this.$1},this.props.children)};a.prototype.logSeen=function(){b("setTimeout")(function(){return this.setState({seen:!0})}.bind(this),100),b("BanzaiODS").bumpEntityKey("unsampled_feedback","rendered_ufi_client")};a.defaultProps={children:null};e.exports=a}),null);
__d("UFIComponentLogger.react",["CommentsTimeSpentTracker.react","React","UFIConfig","UFISeenTracker.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){__p&&__p();var a=this.props,c=a.children,d=a.contextArgs,e=a.feedback,f=a.hasComments,g=a.isPermalink;a=a.viewerHasInteractedWithComments;if(!c)return null;c=b("React").createElement("div",null,c);if(f&&b("UFIConfig").logCommentsTimespent){f=a||g;c=b("React").createElement(b("CommentsTimeSpentTracker.react"),{contextArgs:d,viewerHasInteracted:f,targetFBID:e.commentstargetfbid},c)}b("UFIConfig").logWhetherUFISeen&&(c=b("React").createElement(b("UFISeenTracker.react"),null,c));return c};function a(){g.apply(this,arguments)}a.propTypes={contextArgs:c.object.isRequired,feedback:c.object.isRequired,hasComments:c.bool.isRequired,isPermalink:c.bool.isRequired,viewerHasInteractedWithComments:c.bool.isRequired};a.defaultProps={children:null};e.exports=a}),null);
__d("UFIComponents",["React","UFICommentFilters"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a){if(!a)return!1;return a.props.comment&&b("UFICommentFilters").isDeleted(a.props.comment)?!1:!0},h=function(a,b,c){var d=c?a.length-1:0,e=c?-1:a.length;c=c?-1:1;for(d=d;d!=e;d+=c)if(g(a[d])){b(a,d);return a}return a};a={applyToUFIComponents:function(a,c,d){a=h(a,function(a,d){a[d]&&(a[d]=b("React").cloneElement(a[d],c))},!1);a=h(a,function(a,c){a[c]&&(a[c]=b("React").cloneElement(a[c],d))},!0);return a}};e.exports=a}),null);
__d("UFILikeSentenceText.react",["cx","ActorURI","HovercardLinkInterpolator","ProfileBrowserLink","ProfileBrowserTypes","React","TextWithEntities.react","URI","XUFIReactionProfileBrowserController","XUFIReactionProfileDialogController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;function i(a,c,d,e){__p&&__p();if(e.count!=null){var f=b("ProfileBrowserTypes").LIKES,g={id:a.targetfbid,actorid:a.actorid},h=[],i;for(var j=0;j<c.length;j++)if(!c[j].count){i=c[j];i=i.entity;h.push(i.id)}i=new(b("URI"))("/ajax/like/tooltip.php").setQueryData({comment_fbid:a.targetfbid,comment_from:a.actorforpost,seen_user_fbids:h.length?h:!0});i=b("ActorURI").create(i,a.actorforpost);a.displayreactions?(c=b("XUFIReactionProfileDialogController").getURIBuilder().setString("ft_ent_identifier",a.entidentifier).getURI(),c=b("ActorURI").create(c,a.actorforpost),j=b("XUFIReactionProfileBrowserController").getURIBuilder().setString("ft_ent_identifier",a.entidentifier).getURI(),j=b("ActorURI").create(j,a.actorforpost)):(c=b("ProfileBrowserLink").constructDialogURI(f,g).toString(),j=b("ProfileBrowserLink").constructPageURI(f,g).toString());return b("React").createElement("a",{"data-testid":"n_other_people_link",className:"_375l",rel:"dialog",ajaxify:c,href:j,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-uri":i.toString(),role:"button"},d)}else{h={source_feedback_owner_id:a.ownerid,source_feedback_identifier:a.entidentifier};return b("HovercardLinkInterpolator")(d,e,null,null,"ufi",h)}}h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=this.props.feedback,c=this.props.likeSentenceData,d,e=c.aggregatedranges||c.aggregated_ranges;d=i;d=d.bind(null,a,c.ranges);return b("React").createElement(b("TextWithEntities.react"),{interpolator:d,ranges:Object.values(c.ranges),aggregatedRanges:e,text:c.text})};function a(){h.apply(this,arguments)}a.propTypes={contextArgs:c.object.isRequired,feedback:c.object.isRequired,likeSentenceData:c.object.isRequired};e.exports=a}),null);
__d("UFIReactionsSocialSentence.react",["cx","ActorURI","BanzaiLogger","Bootloader","FeedbackSourceType","React","UFIReactionsBlingTokens.react","UFIReactionsProfileBrowserUtils","XUFIReactionTooltipController"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.onSentenceClick=function(a){if(this.props.reactionsLink)return;var c=this.props.feedback,d=b("UFIReactionsProfileBrowserUtils").getDialogURI({actorID:c.actorforpost,feedbackTargetID:c.entidentifier}).toString();b("BanzaiLogger").log("WebReactionsBlingLoggerConfig",{feedback_id:c.entidentifier,"interface":"www",action:"click",target_type:"social_sentence"});var e=a.currentTarget;b("Bootloader").loadModules(["AsyncDialog"],function(a){a.bootstrap(d,e,"dialog")},"UFIReactionsSocialSentence.react");a.preventDefault()}.bind(this),c}a.prototype.$1=function(a){"use strict";var c=a.actorforpost;a=a.entidentifier;return{"data-hover":"tooltip","data-tooltip-uri":b("ActorURI").create(b("XUFIReactionTooltipController").getURIBuilder().setString("ft_ent_identifier",a).getURI(),c)}};a.prototype.render=function(){"use strict";__p&&__p();var a=this.props.feedback,c=this.props.contextArgs,d=a.likesentences,e=a.reactioncountreduced,f=a.reactionsentences,g=a.viewerreaction,h=a.reactioncount||0;g=g?h>3:h>2;var i=null;g&&(i=this.$1(a));g=null;f&&f.current?g=f.current.text:d&&d.current?g=d.current.text:e!=="0"&&(g=e);f=null;g&&(f=b("React").createElement("span",{className:"_4arz"},b("React").createElement("span",i,g)));d=null;h&&(d=b("React").createElement("span",{"aria-hidden":!!f,className:"_1g5v"},b("React").createElement("span",i,e)));g=b("UFIReactionsProfileBrowserUtils").getPageURI({actorID:a.actorforpost,feedbackTargetID:a.entidentifier});this.props.reactionsLink&&(g=this.props.reactionsLink);h=c&&c.source===b("FeedbackSourceType").TAHOE;return b("React").createElement("div",{className:"_1vaq"},b("React").createElement("div",{className:"_ipp"},b("React").createElement(b("UFIReactionsBlingTokens.react"),{className:"_4ar- _ipn",contextArgs:c,feedback:a,max:3},b("React").createElement("a",{className:"_2x4v",href:g,onClick:this.onSentenceClick,rel:"ignore",role:"button"},d,h?null:f))))};e.exports=a}),null);
__d("UFILikeSentence.react",["cx","fbt","invariant","ActorURI","Bootloader","LeftRight.react","React","SutroBlingBarGatingConfig","UFILikeSentenceText.react","UFIReactionsSocialSentence.react","URI","XUFIGroupSeenByProfileBrowserController","XUFIGroupSeenByProfileDialogController","intlSummarizeNumber","isEmpty","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("React").PropTypes;var k=null;d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.state={bootloadedSelectorModule:!1,hasSelectorModule:!!k},b}a.rendersSocialSentence=function(a){var c=a.feedback;a=a.contextArgs;var d=c.likesentences;c=c.reactionsentences;return a.hideSocialSentence?!1:d&&!b("isEmpty")(d.current)||c&&c.current&&c.current.text};a.prototype.componentDidMount=function(){this.$1(this.props)};a.prototype.componentDidUpdate=function(){this.$1(this.props)};a.prototype.$1=function(a){a.showOrderingModeSelector&&!this.state.bootloadedSelectorModule&&(a.contextArgs.entstream&&i(0,2394),b("Bootloader").loadModules(["UFIOrderingModeSelectorContainer.react"],function(a){k=a,this.setState({hasSelectorModule:!0})}.bind(this),"UFILikeSentence.react"),this.setState({bootloadedSelectorModule:!0}))};a.prototype.$2=function(){var a=this.props.feedback;a=a.likesentences;a=a||{};a=a.current;return a||{}};a.prototype.$3=function(){var a=this.props,c=a.feedback,d=a.contextArgs;if(!this.constructor.rendersSocialSentence(a))return null;if(d.hasReactions&&c.displayreactions)return b("React").createElement(b("UFIReactionsSocialSentence.react"),{feedback:c,contextArgs:d});a=this.$2();return a&&a.text?b("React").createElement("div",{className:"UFILikeSentenceText"},b("React").createElement(b("UFILikeSentenceText.react"),{contextArgs:d,feedback:c,likeSentenceData:a})):null};a.prototype.$4=function(){var a=this.props,c=a.contextArgs;a=a.commentCounts;if(!c.showCommentHeader)return null;a=a[c.ftentidentifier];a?(a=b("intlSummarizeNumber")(a),c=h._("Comments ({commentCount})",[h._param("commentCount",a)])):c=h._("Comments");return b("React").createElement("div",{className:"_4bsb"},c)};a.prototype.renderOrderingModeSelector=function(){return!this.props.showOrderingModeSelector||!this.state.hasSelectorModule||!k?null:b("React").createElement(k,{key:"orderingmodeselector",contextArgs:this.props.contextArgs,feedback:this.props.feedback})};a.prototype.renderSeenState=function(){var a=this.props.feedback;if(!a.seencount||a.seencount===0||this.props.contextArgs.entstream)return null;var c=null;a.seenbyall?a.seencount==1||a.seencount==2&&a.disable_seen_by_everyone?c=h._("Seen by both of you"):c=h._("Seen by everyone"):c=a.seencount==1?h._("Seen by 1"):h._("Seen by {count}",[h._param("count",a.seencount)]);var d=new(b("URI"))("/ajax/ufi/seen_list_hovercard.php").setQueryData({id:a.entidentifier}),e=b("ActorURI").create(b("XUFIGroupSeenByProfileDialogController").getURIBuilder().setInt("id",a.entidentifier).getURI(),a.actorforpost);a=b("ActorURI").create(b("XUFIGroupSeenByProfileBrowserController").getURIBuilder().setInt("id",a.entidentifier).getURI(),a.actorforpost);return b("React").createElement("a",{key:"seenstate",rel:"dialog",ajaxify:e,href:a,"data-hovercard":d.toString(),className:"UFISeenCount UFISeenCountRight"},b("React").createElement("span",{className:"UFISeenCountIcon"}),c)};a.prototype.render=function(){__p&&__p();var a=b("SutroBlingBarGatingConfig").enabled,c=this.$3(),d=this.renderOrderingModeSelector(),e=this.renderSeenState();e=[e,d].filter(function(a){return a!==null});var f=null;e.length===1?f=e[0]:e.length>1&&(f=b("React").createElement("div",{className:"_oql"},e));e=null;var g=null;a?e=d:(e=c,g=f);if(!e&&!g)return null;else e||(e=this.$4(),!e&&g&&(e=b("React").createElement("div",null)));d=null;e?d=b("React").createElement(b("LeftRight.react"),{direction:b("LeftRight.react").DIRECTION.right},e,g):d=g;return b("React").createElement("div",{className:b("joinClasses")("UFIRow"+(this.props.feedback.likesentences.isunseen?" UFIUnseenItem":"")+" UFILikeSentence"+(!a&&this.props.isFirstComponent||a&&this.props.isFirstComponent&&f!==null?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")+(this.props.contextArgs.hasReactions?" _4_dr":"")+(a?" _y2x":""))},d)};a.propTypes={contextArgs:c.object.isRequired,feedback:c.object.isRequired,commentCounts:c.object,isFirstComponent:c.bool,isLastComponent:c.bool,onOrderingModeChange:c.func,hasCommentOrderInverted:c.bool,showOrderingModeSelector:c.bool};a.contextTypes={dispatch:c.func};e.exports=a}),null);
__d("UFILiveTypingIndicator",["CurrentUser"],(function(a,b,c,d,e,f){"use strict";e.exports={isEnabled:function(){return b("CurrentUser").isLoggedIn()}}}),null);
__d("UFILiveTypingIndicatorContainer.react",["BootloadOnRender.react","FluxContainer","JSResource","LazyComponent.react","React","UFILiveTypingIndicator","UFILiveTypingStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").Component;d=babelHelpers.inherits(a,c);g=d&&d.prototype;function a(a){g.constructor.call(this,a),this.state={everHadTyping:!1,hasTyping:!1,friendTyping:!1}}a.getStores=function(){return[b("UFILiveTypingStore")]};a.calculateState=function(a,c){if(!b("UFILiveTypingIndicator").isEnabled())return{everHadTyping:!1,hasTyping:!1,friendTyping:!1};var d=!!b("UFILiveTypingStore").getState()[c.feedbackTargetID];return{everHadTyping:(a||{}).everHadTyping||d,hasTyping:d,friendTyping:b("UFILiveTypingStore").isFriendTyping(c.feedbackTargetID)}};a.prototype.shouldComponentUpdate=function(a,b){return a.feedbackTargetID!=this.props.feedbackTargetID||b.everHadTyping!=this.state.everHadTyping||b.hasTyping!=this.state.hasTyping};a.prototype.render=function(){return this.state.everHadTyping?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("UFILiveTypingIndicator.react").__setRef("UFILiveTypingIndicatorContainer.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),babelHelpers["extends"]({},this.props,this.state))}):null};e.exports=b("FluxContainer").create(a,{pure:!1,withProps:!0})}),null);
__d("UFIReplySocialSentence.react",["cx","fbt","Badge.react","Image.react","LiveTimer","Middot.react","NumberFormat","React","Timestamp.react","UFIImageBlock.react","WebCommentViewOption","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=43200;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){__p&&__p();var a=this.props.isLoading?"UFIReplySocialSentenceLoading":"",c=b("joinClasses")("UFIRow UFIReplySocialSentenceRow"+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")),d,e,f=b("NumberFormat").formatInteger(this.props.replies);if(this.props.isExpanded)d=this.props.replies>1?h._({"*":"Hide {count} Replies"},[h._param("count",f,[0,this.props.replies])]):h._("Hide 1 Reply");else{d=this.props.replies>1?h._({"*":"{count} Replies"},[h._param("count",f,[0,this.props.replies])]):h._("1 Reply");f=this.props.timestamp;if(f){var g=b("LiveTimer").getApproximateServerTime()/1e3-f.time;(g<j||this.props.orderingMode==b("WebCommentViewOption").RECENT_ACTIVITY)&&(e=b("React").createElement("span",{className:"fcg"},b("React").createElement(b("Middot.react"),{key:"middot-timestamp"}),b("React").createElement(b("Timestamp.react"),{shorten:this.props.contextArgs.shortenTimestamp,time:f.time,text:f.text,verbose:f.verbose})))}}g=this.props.author;f=null;var i;if(g&&!this.props.isExpanded){f=b("React").createElement(b("Image.react"),{alt:"",src:g.thumbSrc,className:"img UFIActorImage _54ru"});var k=null;this.props.showVerified&&(k=b("React").createElement(b("Badge.react"),{size:"xsmall",type:"verified"}));var l=g.persona&&g.firstName?h._("{author} ({persona})",[h._param("author",g.firstName),h._param("persona",g.persona)]):g.name;g.i18nGender?i=[h._({"*":"{author}{verified_badge} replied"},[h._param("author",l,[1,g.i18nGender]),h._param("verified_badge",k)])]:i=[h._("{author}{verified_badge} replied",[h._param("author",l),h._param("verified_badge",k)])];i.push(b("React").createElement(b("Middot.react"),{key:"middot-author"}),d)}else i=d;l=g&&!this.props.isExpanded;return b("React").createElement("div",{className:c,"data-ft":this.props["data-ft"]},b("React").createElement("a",{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},b("React").createElement(b("UFIImageBlock.react"),null,b("React").createElement("div",{className:(l?"UFIReplyActorPhotoWrapper":"")+(l?" UFIReplyActor":"")},b("React").createElement("i",{className:(this.props.isExpanded?"":"UFIPagerIcon")+(this.props.isExpanded?" UFICollapseIcon":"")+(l?" UFIIconWithActor":"")}),f),b("React").createElement("span",{className:a},b("React").createElement("span",{className:"UFIReplySocialSentenceLinkText"+(this.props.showVerified?" UFIReplySocialSentenceVerified":"")},i),e))))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("XUFICommentTooltipController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/tooltip/",{ft_ent_identifier:{type:"String",required:!0},seen_user_fbids:{type:"IntVector",defaultValue:[]}})}),null);
__d("UFICommentCount.react",["cx","fbt","ActorURI","NumberFormat","React","XUFICommentTooltipController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.$1=function(){var a=this.props.commentCount,c=a==1;typeof a==="number"&&(a=b("NumberFormat").formatInteger(a));return h._({"Comment":"{count} comment","Comments":"{count} comments"},[h._param("count",a),h._enum(c?"Comment":"Comments",{Comment:"Comment",Comments:"Comments"})])};a.prototype.render=function(){var a=this.props.feedback,c=a.entidentifier;a=a.actorforpost;var d=this.$1(),e="fcg",f=null;c&&a&&(f=b("ActorURI").create(b("XUFICommentTooltipController").getURIBuilder().setString("ft_ent_identifier",c).getURI(),a));if(f)return b("React").createElement("span",{className:e,"data-hover":"tooltip","data-tooltip-uri":f},d);else return b("React").createElement("span",{className:e},d)};function a(){i.apply(this,arguments)}a.propTypes={commentCount:c.oneOfType([c.number,c.string]).isRequired,feedback:c.object.isRequired};e.exports=a}),null);
__d("XUFIShareTooltipController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/share/tooltip/",{ft_ent_identifier:{type:"String",required:!0},seen_user_fbids:{type:"IntVector",defaultValue:[]}})}),null);
__d("XUFIShareTooltipController.flow",["XUFIShareTooltipController"],(function(a,b,c,d,e,f){e.exports=b("XUFIShareTooltipController")}),null);
__d("UFIShareRow.react",["cx","fbt","invariant","ActorURI","CurrentUser","Layout.react","NumberFormat","React","UFICommentCount.react","URI","XUFIShareTooltipController.flow","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("Layout.react").Column,l=b("Layout.react").FillColumn;j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.$1=function(){var a=this.props,c=a.feedback;a=a.shownCommentCount;return a&&Number(a)!==0?b("React").createElement(b("UFICommentCount.react"),{feedback:c,commentCount:a}):null};a.prototype.render=function(){__p&&__p();var a=this.props.feedback.sharefbid||this.props.feedback.targetfbid,c=new(b("URI"))("/ajax/shares/view").setQueryData({target_fbid:a});a=new(b("URI"))("/shares/view").setQueryData({id:a});b("CurrentUser").isWorkUser()||(a=a.setSubdomain("www"));var d=this.props.contextArgs.loggedOutLinkConfig;d&&d.showShareLink&&(c=d.shareAjaxifyURI,c||i(0,5668));if(this.props.feedback.sharecount>1){d=this.props.useReducedShareCount?b("intlSummarizeNumber")(this.props.feedback.sharecount):b("NumberFormat").formatInteger(this.props.feedback.sharecount);d=h._("{count} shares",[h._param("count",d)])}else d=h._("1 share");var e="UFIRow UFIShareRow"+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":""),f=b("ActorURI").create(b("XUFIShareTooltipController.flow").getURIBuilder().setString("ft_ent_identifier",this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);f=b("React").createElement("a",{className:"UFIShareLink",rel:"dialog","data-hover":"tooltip","data-tooltip-uri":f,ajaxify:c.toString(),href:a.toString()},d);c=this.$1();c&&(f=b("React").createElement(b("Layout.react"),null,b("React").createElement(l,null,f),b("React").createElement(k,null,c)));return b("React").createElement("div",{className:e},f)};function a(){j.apply(this,arguments)}e.exports=a}),null);
__d("UFISpamPlaceholder.react",["fbt","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return this.props.isLoading?b("React").createElement("div",{className:"UFIRow"},b("React").createElement("span",{className:"UFISpamCommentWrapper"},b("React").createElement(b("XUISpinner.react"),{className:"mls",background:"light",size:"small"}))):b("React").createElement("div",{className:"UFIRow"},b("React").createElement("a",{href:"#",role:"button",className:"UFISpamCommentLink",onClick:this.props.onClick,"aria-label":g._("Show comments marked as spam")},b("React").createElement("span",{"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":g._("{count} hidden",[g._param("count",this.props.numHidden)]),className:"UFISpamCommentWrapper"},b("React").createElement("i",{className:"placeholderIcon"}))))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("UFISpamPlaceholderContainer.react",["FluxContainer","React","UFISharedDispatcher","UFISpamPlaceholder.react","UFISpamStore","UFIStoryAction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.state={isLoading:!0,numHidden:0,onClick:function(){}},b}a.getStores=function(){return[b("UFISpamStore")]};a.calculateState=function(a,c){var d=c.contextArgs,e=c.viewas,f=c.comment,g=c.parentCommentID;return{isLoading:!!b("UFISpamStore").getState()[f.id],numHidden:f.spamCommentIDs.length,onClick:function(){return b("UFISharedDispatcher").dispatch(b("UFIStoryAction").spamFetched(d,e,f.spamCommentIDs,g))}}};a.prototype.shouldComponentUpdate=function(a,b){return a.contextArgs!=this.props.contextArgs||a.viewas!=this.props.viewas||a.parentCommentID!=this.props.parentCommentID||b.isLoading!=this.state.isLoading||b.numHidden!=this.state.numHidden};a.prototype.render=function(){return b("React").createElement(b("UFISpamPlaceholder.react"),this.state)};e.exports=b("FluxContainer").create(a,{pure:!1,withProps:!0})}),null);
__d("UFITTLEndLoggerUtil",["Bootloader","gkx","performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return!a?0:Object.values(a).reduce(function(a,b){b=b;b=b;return a+b.length},0)}a={endCommentTTLMarker:function(a,c){var d=b("performanceNow")();if(!b("gkx")("678283"))return;b("Bootloader").loadModules(["CommentTTLEndLogger"],function(a){a.log({numComments:g(c),timestamp:d})},"UFITTLEndLoggerUtil")}};e.exports=a}),null);
__d("UFITranslateAllRow.react",["cx","ContentTranslationStrings","Link.react","React","UFIInstanceAction","UFISharedDispatcher"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").translateAll(this.props.contextArgs))}.bind(this),c}a.prototype.render=function(){return b("React").createElement("div",{className:"UFIRow"},b("React").createElement("div",{className:"_4upo"},b("React").createElement(b("Link.react"),{onClick:this.$1},b("ContentTranslationStrings").TRANSLATE_ALL_TEXT)))};e.exports=a}),null);
__d("StaticUFI.react",["csx","cx","invariant","Arbiter","BanzaiODS","BlueBar","BootloadedComponent.react","BootloadOnRender.react","CommentPrivacyValue","DOM","FbFeedCommentUFIScroller","FBFeedLocations","FluxContainer","JSLogger","JSResource","LazyComponent.react","LogHistory","Parent","PrivateCommentsConfig","React","ReactDOM","SearchableEntry","SubscriptionsHandler","SutroBlingBarGatingConfig","TrackingNodes","UFIAddComment.react","UFIAddCommentLink.react","UFIComment.react","UFICommentDisabledNotice.react","UFICommentEditIDStore","UFICommentFilters","UFICommentHeader.react","UFICommentListVisibilityTracker.react","UFIComments","UFICommentScrollableArea.react","UFICommercialBreakStore","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIComponentLogger.react","UFIComponents","UFIConfig","UFIConstants","UFIContainer.react","UFIInteractionStore","UFILikeSentence.react","UFILivePinnedCommentStore","UFILiveTypingIndicatorContainer.react","UFILocallyComposedCommentStore","UFINewCommentsPillUtils","UFIODSLogger","UFIOrderingModeStore","UFIPagerGenerator","UFIPaging","UFIPlayLiveVODHighlightsStore","UFIReplySocialSentence.react","UFIShareRow.react","UFISpamPlaceholderContainer.react","UFIStoryAction","UFIThreadedFacecastCommentsStore","UFIThreadedFacecastCommentsUtils","UFITranslateAllRow.react","UFITTLEndLoggerUtil","UFIUIEvents","UFIVersion","URI","XUISpinner.react","distinctArrayBy","emptyFunction","getElementPosition","getElementRect","getUnboundedScrollPosition","gkx","ifRequired","qex","shallowEqual"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("UFIConfig").UFICommentFilterFallbackWarning||null,l=b("UFIConstants").UFIFeedbackSourceType,m=b("UFIConstants").UFIPayloadSourceType,n=b("UFIConstants").UFIStatus;c=b("React").PropTypes;var o=b("JSLogger").create("StaticUFI"),p=b("React").createElement("div",{className:"UFICommentsLoadingSpinnerContainer _48pi UFIRow"},b("React").createElement(b("XUISpinner.react"),{size:"large"})),q=b("React").createElement("div",{className:"_xtv _32k4"},b("React").createElement("i",null));d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(a){__p&&__p();j.constructor.call(this,a);this.$5=b("React").createRef();this.$42=function(a){b("UFINewCommentsPillUtils").handleScroll(this.props.contextArgs,a)}.bind(this);this.$38=function(a){a.preventDefault(),b("UFINewCommentsPillUtils").scrollToBottom(this.$5.current,this.props.contextArgs.liveVideoNewCommentsPillConfig)}.bind(this);this.loadMoreComments=function(){if(this.$1&&this.refs.topLevelBottomPager&&!(this.props.contextArgs.ftentidentifier in this.props.isActiveLoading)){var a=b("ReactDOM").findDOMNode(this.refs.topLevelBottomPager),c=b("getUnboundedScrollPosition")(window).y;c=c+(document.documentElement?document.documentElement.clientHeight:0)+b("UFIConstants").infiniteScrollRangeForQANDAPermalinks;a instanceof HTMLElement&&a.offsetHeight&&a.offsetTop<c&&this.refs.topLevelBottomPager.props.onPagerClick()}}.bind(this);this.onComment=function(){__p&&__p();var a=b("ReactDOM").findDOMNode(this),c=null,d=null,e=null;a instanceof Node&&(c=b("Parent").byTag(a,"form"),d=b("Parent").bySelector(a,"#fbPhotoSnowliftDetails"),e=b("Parent").bySelector(a,"._3g6d"));a=[function(){return this.refs.toplevelcomposer}.bind(this),function(){return this.$46(c)}.bind(this),function(){return this.$46(d)}.bind(this),function(){return this.$46(e)}.bind(this)];a=a.reduce(function(a,b){return a||b()},null);a&&(a.focus(),b("FbFeedCommentUFIScroller").reveal(b("ReactDOM").findDOMNode(a)))}.bind(this);a=this.props.focusReply;this.state={focusReply:a,viewerHasClickedCommentComposer:!1,viewerHasClickedSeeMore:!1,editcommentid:b("UFICommentEditIDStore").getForInstance(this.props.contextArgs.instanceid),localCommentIDs:b("UFILocallyComposedCommentStore").getStateForInstance(this.props.contextArgs.instanceid),inCommercialBreak:b("UFICommercialBreakStore").getValueFor(this.props.contextArgs.instanceid),isPlayingLiveVODHighlights:b("UFIPlayLiveVODHighlightsStore").getValueFor(this.props.contextArgs.instanceid),currentThreadedFacecastCommentID:null,hasNotMounted:!0}}a.getStores=function(){return[b("UFIThreadedFacecastCommentsStore")]};a.calculateState=function(a,c){c=c.contextArgs;c=b("UFIThreadedFacecastCommentsStore").getCommentID(c.instanceid);return babelHelpers["extends"]({},a,{currentThreadedFacecastCommentID:c})};a.prototype.componentDidMount=function(){this.setState({hasNotMounted:!1}),b("UFIODSLogger").bump("componentDidMount",b("UFIVersion").LEGACY),b("UFITTLEndLoggerUtil").endCommentTTLMarker(this.props.feedback,this.props.ranges),this.$1=!0,b("Arbiter").inform("UFI/displayDone-"+this.props.contextArgs.instanceid),this.$2=new(b("SubscriptionsHandler"))(),this.$6(),this.$2.addSubscriptions(b("UFICommentEditIDStore").addListener(function(){this.setState({editcommentid:b("UFICommentEditIDStore").getForInstance(this.props.contextArgs.instanceid)})}.bind(this)),b("UFILocallyComposedCommentStore").addListener(function(){this.setState({localCommentIDs:b("UFILocallyComposedCommentStore").getStateForInstance(this.props.contextArgs.instanceid)})}.bind(this)),b("UFICommercialBreakStore").addListener(function(){this.setState({inCommercialBreak:b("UFICommercialBreakStore").getValueFor(this.props.contextArgs.instanceid)})}.bind(this)),b("UFIPlayLiveVODHighlightsStore").addListener(function(){this.setState({isPlayingLiveVODHighlights:b("UFIPlayLiveVODHighlightsStore").getValueFor(this.props.contextArgs.instanceid)})}.bind(this)))};a.prototype.UNSAFE_componentWillReceiveProps=function(a){this.props.focusReply!==a.focusReply&&this.setState({focusReply:a.focusReply})};a.prototype.componentWillUnmount=function(){this.$1=!1,this.$2&&this.$2.release()};a.prototype.shouldComponentUpdate=function(a,c){var d=this.props,e=this.state;return!b("shallowEqual")(e,c)||!b("shallowEqual")(e.loadingSpamIDs,c.loadingSpamIDs)||!b("shallowEqual")(e.localCommentIDs,c.localCommentIDs)||!b("shallowEqual")(e.inCommercialBreak,c.inCommercialBreak)||!b("shallowEqual")(d,a)||!b("shallowEqual")(d.feedback,a.feedback)||!b("shallowEqual")(d.repliesMap,a.repliesMap)||!b("shallowEqual")(d.commentCounts,a.commentCounts)||!b("shallowEqual")(d.deletedCounts,a.deletedCounts)||!b("shallowEqual")(d.privateDeletedCounts,a.privateDeletedCounts)||!b("shallowEqual")(d.availableComments,a.availableComments)||!b("shallowEqual")(d.availablePrivateComments,a.availablePrivateComments)||!b("shallowEqual")(d.ranges,a.ranges)||!b("shallowEqual")(d.authorProfiles,a.authorProfiles)||!b("shallowEqual")(d.commentPermalinks,a.commentPermalinks)||!b("shallowEqual")(d.canAddCommentMap,a.canAddCommentMap)||!b("shallowEqual")(d.canReplyMap,a.canReplyMap)||!b("shallowEqual")(d.isActiveLoading,a.isActiveLoading)||!b("shallowEqual")(d.allSeenActiveLoadDirectionData,a.allSeenActiveLoadDirectionData)||!b("shallowEqual")(d.repliesExpandedMap,a.repliesExpandedMap)||!b("shallowEqual")(d.loadingTranslationsMap,a.loadingTranslationsMap)||!b("shallowEqual")(e.isPlayingLiveVODHighlights,c.isPlayingLiveVODHighlights)||!b("shallowEqual")(d.privateCommentsRange,a.privateCommentsRange)||d.privateCommentsCount!==a.privateCommentsCount||!b("shallowEqual")(d.loadingCommentsForSection,a.loadingCommentsForSection)};a.prototype.UNSAFE_componentWillUpdate=function(a,c){this.$3=this.$3||!this.$7(this.props.payloadSource)&&this.props.source===l.NEWS_FEED&&b("BlueBar").hasFixedBlueBar();if(this.$3&&!this.$4){a=b("ReactDOM").findDOMNode(this);a instanceof Element&&(this.$4=b("getElementRect")(a))}};a.prototype.componentDidUpdate=function(a,c){this.$6(a);if(this.$3&&this.$4){c=this.$8(this.$4);c!==null&&b("Arbiter").inform("ufi/didUpdate",{offsetY:c});this.$3=!1;this.$4=null}b("shallowEqual")(a.availableComments,this.props.availableComments)||this.$9(a.availableComments,this.props.availableComments)};a.prototype.$9=function(a,c){a=b("UFINewCommentsPillUtils").findNumNewComments(a,c);if(a>0){c=this.props.contextArgs;b("Arbiter").inform(b("UFIUIEvents").CommentChanged,{ftentidentifier:c.ftentidentifier});b("UFINewCommentsPillUtils").dispatchNewCommentAction(b("UFIStoryAction").handleNewComments(c,a),c)}};a.prototype.$7=function(a){return a===m.UNKNOWN||a===m.INITIAL_SERVER||a===m.USER_ACTION||a===m.COLLAPSE_ACTION};a.prototype.$8=function(a){var c=b("getElementPosition")(b("BlueBar").getMaybeFixedRoot());if(a.bottom<c.height){c=a.bottom-a.top;a=b("ReactDOM").findDOMNode(this);if(a instanceof HTMLElement)return a.offsetHeight-c}return null};a.prototype.$10=function(){var a=this.props,b=a.contextArgs,c=a.commentCounts,d=a.deletedCounts;a=a.feedback;a=a.commentcountreduced;b=b.ftentidentifier;var e=null;this.$11()&&(a&&isNaN(a)?e=a:e=c[b]-d[b]);return e};a.prototype.$6=function(a){__p&&__p();if(this.props.loadingComments)return;this.props.focusTopLevelComposer&&this.onComment();if(this.state.focusReply){a=this.state.focusReply;var c=a.replyID;a=a.initiatorComment;if(!(c in this.refs))return;c=this.refs[c]&&this.refs[c].refs&&this.refs[c].refs.mentionsinput;if(!c)return;c.focus();b("FbFeedCommentUFIScroller").reveal(b("ReactDOM").findDOMNode(c));this.setState({focusReply:null});if(!a)return;var d=c.hasEnteredText(),e=a.author===this.props.feedback.actorforpost,f=!!a.parentcommentid;!d&&!e&&f&&c.insertMention(this.$12(a.author))}};a.prototype.$12=function(a){a=this.props.authorProfiles[a];var c=a.type;return new(b("SearchableEntry"))({uniqueID:a.id,title:a.name,type:c==="friend"?"user":c})};a.prototype.$13=function(){return this.props.source===l.ADS};a.prototype.$14=function(){return this.props.source===l.LIVE_VIDEO};a.prototype.$15=function(){return this.props.source===l.GAMESHOW_DASH};a.prototype.$16=function(){var a=this.props.contextArgs;a=a.feedcontext&&JSON.parse(a.feedcontext);return!!(a&&a.is_narrow)};a.prototype.$17=function(){return this.props.source===l.COMPACT_SEARCH};a.prototype.$18=function(){var a=this.props,c=a.hideOrderingModeSelector,d=a.feedback,e=a.commentCounts;a=a.contextArgs;return!c&&d.orderingmodes&&!this.$15()&&!this.$17()&&e[a.ftentidentifier]>=b("UFIConstants").minCommentsForOrderingModeSelector};a.prototype.$19=function(){return!!this.props.contextArgs.hasReactions&&(this.props.contextArgs.feedbackMode==="none"||this.props.contextArgs.feedbackMode==="toggle")&&this.props.feedback.displayreactions&&!this.$20()&&this.props.feedback.orderingmodes&&!this.props.hideOrderingModeSelector};a.prototype.$21=function(){var a=this.props,b=a.contextArgs;a=a.ranges;b=b.ftentidentifier;a=a[b].getLength();return this.$22(b,a)};a.prototype.$22=function(a,b){var c=this.props.commentCounts;return c[a]==b};a.prototype.$23=function(){var a=this.props,b=a.contextArgs;a=a.feedback;return a.seencount>0&&!b.entstream};a.prototype.$24=function(){return b("UFILikeSentence.react").rendersSocialSentence(this.props)};a.prototype.$25=function(){var a=this.props;return Boolean(a.contextArgs.showCommentHeader)};a.prototype.$26=function(){var a=this.props,b=a.contextArgs;a=a.feedback;return this.$13()||this.$14()||b.search||this.hasReactions(a,b)};a.prototype.$20=function(){return this.$26()?!1:this.$24()||this.$23()||this.$18()||this.$25()};a.prototype.$27=function(){var a=this.props,b=a.contextArgs;a=a.feedback;return this.$13()?!1:Boolean(b.showshares&&a.sharecount&&!this.hasReactions(a,b))};a.prototype.$28=function(){var a=b("SutroBlingBarGatingConfig").enabled;return this.$27()&&!this.props.contextArgs.entstream&&!a};a.prototype.$11=function(){if(this.$13()||this.$17())return!1;if(this.props.contextArgs.shouldHideCommentsWhenCannotReply&&(this.props.feedback.arecommentsdisabled||!this.$29()||!this.props.feedback.cancomment))return!1;var a=this.props,b=a.availableComments;a=a.availablePrivateComments;return!!(b&&b.length||a&&a.length)};a.prototype.$29=function(){var a=this.props,c=a.canAddCommentMap,d=a.contextArgs;a=a.feedback;return this.props.contextArgs.feedLocationType!==b("FBFeedLocations").SURVEY_GALLERY&&a.cancomment&&Boolean(d.showaddcomment)&&Boolean(d.showInlineComposer)&&Boolean(a.actorforpost)&&c[d.ftentidentifier]};a.prototype.$30=function(){return this.$29()&&this.$31()&&this.props.hasPagedToplevel};a.prototype.$32=function(){var a=this.props.feedback;return a.arecommentsdisabled===!0&&a.cancomment===!1};a.prototype.$33=function(){var a=this.props.feedback;return a.isviewermuted===!0&&a.cancomment===!1};a.prototype.$34=function(){if(!this.$28())return!1;var a=this.props.contextArgs.isPermalink;a=a?this.$10():null;return Boolean(a)&&Number(a)!==0};a.prototype.$35=function(){if(!this.$28())return null;var a=this.props,c=a.contextArgs;a=a.feedback;var d=this.$34()?this.$10():null;return b("React").createElement(b("UFIShareRow.react"),{contextArgs:c,feedback:a,shownCommentCount:d})};a.prototype.$36=function(){var a=this.props,c=a.feedback,d=a.contextArgs;a=a.commentCounts;return this.$20()?b("React").createElement(b("UFILikeSentence.react"),{contextArgs:d,feedback:c,commentCounts:a,showOrderingModeSelector:this.$18(),hasCommentOrderInverted:this.$31(),key:"ufi_like_sentence"}):null};a.prototype.$37=function(){var a=this.props.authorPinnedComment;if(a&&a.status!==b("UFIConstants").UFIStatus.DELETED){var c=a.id===this.state.editcommentid?b("UFIAddComment.react").renderEditCommentBox(this.props.contextArgs,a,this.props.feedback):this.renderComment(a,0,!0,!1,!0,!1,!1,!!this.props.loadingTranslationsMap[a.id],!0);a=this.renderReplyContainer(a);return b("React").createElement(b("React").Fragment,null,c,a)}return null};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.feedback,d=a.contextArgs,e=a.source;if(d.hideComments)return null;var f=this.$32(),g=this.$33(),h=this.$27(),i=this.$36(),j=!!i,k=this.$37();f=f||g?b("React").createElement(b("UFICommentDisabledNotice.react"),{feedback:a.feedback}):null;g=d.liveVideoNewCommentsPillConfig;var m=null;if(!d.isBroadcasterUFI&&g){var n=g.UFINewCommentsPill;m=b("React").createElement(n,{instanceID:d.instanceid,isLiveVideo:!0,onClick:this.$38})}n=this.$35();if(a.loadingComments)return b("React").createElement(b("UFIContainer.react"),{shouldHide:this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights},i,n,p);var o=this.$11(),r=a.ranges[d.ftentidentifier];r=Number(a.loggingOffset)-r.getOffset();var s=c.targetiscomment,t=null;o&&(t=this.renderCommentArray(a.availableComments,r,s,null));r=null;s=null;var u=c.cancomment;j=j||h||o||u;h=j?b("React").createElement(b("UFICommentHeader.react"),null):null;if(this.$29()||d.loggedOutLinkConfig&&d.loggedOutLinkConfig.showAddComment){u=this.$39();if(u){u=b("UFIOrderingModeStore").isLiveStreaming(d.instanceid);(!d.islivestreaming||!u)&&(r=b("React").createElement(b("UFILiveTypingIndicatorContainer.react"),{contextArgs:d,feedbackTargetID:c.targetfbid}));s=b("React").createElement(b("UFIAddComment.react"),{viewerActorID:c.actorforpost,targetID:c.ownerid,targetName:c.actorname,initialData:null,ref:"toplevelcomposer",isTopLevelComposer:!0,withoutSeparator:!1,editingComment:{},isEditing:!1,mentionsDataSource:c.mentionsdatasource,showSendOnEnterTip:c.showsendonentertip,peopleOutsideCommunityInCommentNotice:c.peopleoutsidecommunityincommentnotice,allowVideoAttachments:c.allowvideoattachments&&!u,allowPhotoAttachments:c.allowphotoattachments&&!u,allowFileAttachments:c.allowfileattachments&&!u,allowStickerAttachments:c.allowstickerattachments&&!u,allowGifAttachments:c.allowgifattachments&&!u,allowBotMentions:c.allowbotmentions&&!u,allowNativeTipJar:c.isnativetipjarenabled,allowFlexibleTipping:c.isflexibletippingenabled,allowTogglePrivateComments:(b("PrivateCommentsConfig").composer_lock_enabled||b("PrivateCommentsConfig").composer_unlocked_lock_enabled)&&c.canviewercommentinprivate,privateCommentTarget:c.actorname,contextArgs:d,subtitle:c.subtitle,markViewerHasInteracted:this.state.viewerHasClickedCommentComposer?b("emptyFunction"):function(){return this.setState({viewerHasClickedCommentComposer:!0})}.bind(this),groupID:c.grouporeventid,allowCommentMarkdown:c.iscommentmarkdowneligible,allowCommentFixSuggestions:(b("gkx")("678286")||b("qex")._("724607"))&&b("UFIConfig").shouldShowWritingHelp,showConstituentBadgeV2OptIn:c.showconstituentbadgev2optin,constituentBanner:c.constituentbanneruri,isFirstComponent:!o||b("SutroBlingBarGatingConfig").enabled&&!this.$20()&&this.$31(),commentsTargetID:c.commentstargetfbid,showAddMentionButton:b("gkx")("678287")&&!u})}}u=d.ftentidentifier;var v=this.renderPagers(u,!1,a.ranges[u].getOffset(),a.ranges[u].getLength()),w=v.topPager;v=v.bottomPager;var x=this.$31()?r:null;r=this.$31()?null:r;u=this.$40(u,w,v);var y=u.topFilterWarning;u=u.bottomFilterWarning;var z=this.$19()?b("React").createElement("div",{className:"_11c1"+(this.$31()?"":" _4204")+(b("SutroBlingBarGatingConfig").enabled?" _4mtp":"")},b("React").createElement(b("BootloadedComponent.react"),{alignh:"left",bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("UFIOrderingModeSelectorContainer.react").__setRef("StaticUFI.react"),contextArgs:d,feedback:c})):null,A=b("UFIComponents").applyToUFIComponents([k,z,x,w,y].concat(t,[u,v,r]),{isFirstCommentComponent:!0},{isLastCommentComponent:!0}),B=A.slice(0,5);k=B[0];z=B[1];x=B[2];w=B[3];y=B[4];B=A.slice(-3);u=B[0];v=B[1];r=B[2];t=A.slice(5,-3);B=this.$31()?s:null;var C=this.$31()?null:s;k&&(B=null,C=s);s=this.$30()?b("React").createElement(b("UFIAddCommentLink.react"),{onClick:this.onComment}):null;var D=!0,E=null;d.showCommentNuxForGroupMallAds&&(E=b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("UFICommentNuxForGroupMallAds.react").__setRef("StaticUFI.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{commentNuxContent:d.groupMallAdsCommentNuxContent})}));A=b("UFIComponents").applyToUFIComponents([i,n,B,z,w,y].concat(t,[u,v,C,s]),{isFirstComponent:D},{isLastComponent:!0});D=A.slice(0,6);i=D[0];n=D[1];B=D[2];z=D[3];w=D[4];y=D[5];D=A.slice(-4);u=D[0];v=D[1];C=D[2];s=D[3];t=A.slice(6,-4);D=!!b("UFIInteractionStore").getValueFor(d.instanceid);A=b("ifRequired")("UFIThreadedFacecastCommentsContainer.react",function(a){return a});a=A!=null&&(a.contextArgs.islivestreaming||a.contextArgs.isLiveVOD)&&this.state.currentThreadedFacecastCommentID!=null&&b("UFIThreadedFacecastCommentsUtils").isEnabled(d);var F=this.$41();e=d.isBroadcasterUFI||e===l.LIVE_VIDEO_STORIES||d.isBottomUpCommentStreamingEnabled||d.isLivingRoom;return a&&A!=null?b("React").createElement(b("UFIContainer.react"),{shouldHide:this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights},b("React").createElement(A,{contextArgs:d})):b("React").createElement(b("UFIContainer.react"),{shouldHide:this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights},d.shownub&&j?q:null,i,n,k,h,E,B,b("React").createElement(b("UFICommentListVisibilityTracker.react"),{contextArgs:d,inputRef:this.$5,onScroll:g?this.$42:null},b("React").createElement(b("UFICommentScrollableArea.react"),{scrollcomments:!!d.scrollcomments,scrollwidth:d.scrollwidth||0},b("React").createElement(b("UFIComponentLogger.react"),{contextArgs:d,feedback:c,hasComments:o,isPermalink:d.isPermalink,viewerHasInteractedWithComments:D||this.state.viewerHasClickedCommentComposer||this.state.viewerHasClickedSeeMore},z,x,w,y,e?null:F,t,e?F:null,u,v,r))),C,s,f,m)};a.prototype.$41=function(){__p&&__p();var a=b("UFILivePinnedCommentStore").getPinnedCommentID(this.props.contextArgs.ftentidentifier);if(a==null)return null;a=b("UFIComments").getComment(a);if(a==null)return null;var c=a.parentcommentid;if(c!=null){c=b("UFIComments").getComment(c);if(c&&c.status===b("UFIConstants").UFIStatus.DELETED)return null}if(a&&!this.props.authorProfiles[a.author]){b("BanzaiODS").bumpEntityKey("unsampled_feedback","missing_pinned_comment_author");return null}return this.renderComment(a,0,!1,!1,!0,!1,!0,!!this.props.loadingTranslationsMap[a.id])};a.prototype.$39=function(){return this.state.editcommentid===null};a.prototype.renderCommentArray=function(a,c,d,e){__p&&__p();var f=this.props,g=f.contextArgs,h=f.feedback,i=f.authorProfiles;f=f.authorPinnedComment;var j=f?!0:!1;if(!a||!a.length)return[];a=b("distinctArrayBy")(a,function(a){return a.id});var k=b("UFICommentFilters").collectSpamBuckets(a,i);return k.reduce(function(a,f,i){__p&&__p();if(!f)return a;if(b("UFICommentFilters").isSpam(f))a.push(b("React").createElement(b("UFISpamPlaceholderContainer.react"),{key:"spam"+f.id,contextArgs:g,viewas:g.viewas,comment:f,parentCommentID:e}));else{if(f.id==this.state.editcommentid)a.push(b("UFIAddComment.react").renderEditCommentBox(g,f,h));else{var l=Math.max(c-i,0),m=i===0&&!j;i=i===k.length-1;var n=!d&&!h.arecommentsdisabled,o=d&&!m;a.push(this.renderComment(f,l,m,i,n,o,!1,!!this.props.loadingTranslationsMap[f.id]));f.id==this.props.translateAllCommentID&&!b("UFIOrderingModeStore").isLiveStreaming(g.instanceid)&&a.push(b("React").createElement(b("UFITranslateAllRow.react"),{key:"translateAll"+f.id,contextArgs:g}))}if(!d&&!b("UFICommentFilters").isDeleted(f)&&!b("UFIOrderingModeStore").isLiveStreaming(g.instanceid)){l=this.renderReplyContainer(f);l&&a.push(l)}}return a}.bind(this),[])};a.prototype.renderReplyContainer=function(a){__p&&__p();var c=this.props,d=c.commentCounts[a.id],e=c.repliesExpandedMap[a.id],f=!e&&a.interestingReplyId,g=c.ranges[a.id];g||o.error("renderReplyContainer range is undefined");var h,i;if(g&&(e||a.interestingReplyId)){h=c.repliesMap[a.id];i=g.getOffset();if(f){var j=h.filter(function(b){return b.id===a.interestingReplyId});j.length!==1?(b("LogHistory").getInstance("ufi").error("comment "+a.id+" claims to have an interesting reply, but there is not exactly 1 comment with that id in the reply list."),h=null):(h=j,i=a.interestingReplyOffset)}}var k;j=null;var l=null,m=null,p=null;if(g&&h){var q=g.getOffset(),r=g.getLength();f&&(q=i,r=1);f=this.renderPagers(a.id,!0,Number(q),r);j=f.topPager;l=f.bottomPager;q=Number(c.loggingOffset)-Number(i);k=this.renderCommentArray(h,q,!0,a.id);r=this.$43(a.id,j,l);m=r.topFilterWarning;p=r.bottomFilterWarning}f=Math.max(d-Number(a.spamreplycount),0);var s;if(g&&!b("UFIOrderingModeStore").isLiveStreaming(this.props.contextArgs.instanceid)&&f&&(e&&h&&h.length>c.replySocialSentenceMaxReplies||!e&&!h)){q=g.isLoadingPrev()||g.isLoadingNext();r=e&&!j&&q;d=null;a.replyauthors&&a.replyauthors.length&&(d=c.authorProfiles[a.replyauthors[0]]);g=h?h.length:0;s=b("React").createElement(b("UFIReplySocialSentence.react"),{contextArgs:c.contextArgs,author:d,replies:e?g:f,timestamp:a.recentreplytimestamp,onClick:function(){return this.context.dispatch(b("UFIStoryAction").toggleReplies(c.contextArgs,a.id))}.bind(this),isLoading:r,isExpanded:e,showVerified:c.feedback.showfeaturedreplies,orderingMode:c.orderingMode})}var t;if(e&&(a.cancomment&&c.canAddCommentMap[a.id]&&!(a.needsApproval||a.canAppeal||a.canSecure))){q=!1;if(k)for(var d=k.length-1;d>=0;d--)if(k[d]){q=k[d].props.isAuthorReply;break}t=this.renderReplyComposer(a,!q)}var u;if(s||j||m||k||p||l||t){g=b("UFIComponents").applyToUFIComponents([s,j,m].concat(k,[p,l,t]),{isFirstComponent:!0},{isLastComponent:!0});f=g.slice(0,3);s=f[0];j=f[1];m=f[2];r=g.slice(-3);p=r[0];l=r[1];t=r[2];k=g.slice(3,-3);e=a.status===n.LIVE_DELETED;u=b("React").createElement(b("UFIContainer.react"),{key:"replies"+a.id,isParentLiveDeleted:e,isPrivateComment:a.privacy_value===b("CommentPrivacyValue").OWNER_OR_COMMENTER,isReplyList:!0},s,j,m,k,p,l,t)}return u};a.prototype.renderReplyComposer=function(a,c){var d=this.props,e=d.contextArgs,f=d.feedback,g=this.state.editcommentid!==null;g=g&&!a.id;if(g)return null;g=b("UFIOrderingModeStore").isLiveStreaming(e.instanceid);var h=f.actorforpost===a.author;d=d.authorProfiles[a.author];h=a.privacy_value===b("CommentPrivacyValue").OWNER_OR_COMMENTER?h?f.actorname:d.name:null;return b("React").createElement(b("UFIAddComment.react"),{viewerActorID:f.actorforpost,replyCommentID:a.id,replyCommentPrivacy:a.privacy_value,groupID:f.grouporeventid,targetID:f.ownerid,initialData:null,ref:"replycomposer-"+a.id,withoutSeparator:c,editingComment:{},isEditing:!1,mentionsDataSource:f.mentionsdatasource,showSendOnEnterTip:!1,peopleOutsideCommunityInCommentNotice:f.peopleoutsidecommunityincommentnotice,allowVideoAttachments:f.allowvideoattachments&&!g,allowPhotoAttachments:f.allowphotoattachments&&!g,allowFileAttachments:f.allowfileattachments&&!g,allowStickerAttachments:f.allowstickerattachments&&!g,allowGifAttachments:f.allowgifattachments&&!g,allowBotMentions:f.allowbotmentions&&!g,allowCommentMarkdown:f.iscommentmarkdowneligible,allowTogglePrivateComments:!1,privateCommentTarget:h,contextArgs:e,subtitle:f.subtitle,showconstituentbadgev2optin:f.showconstituentbadgev2optin,constituentBanner:f.constituentbanneruri,showAddMentionButton:!1})};a.prototype.renderComment=function(a,c,d,e,f,g,h,i,j){j===void 0&&(j=!1);var k=this.props,m=k.feedback,n=m.actorforpost===a.author,o=a.__typename==="local",p=o||this.state.localCommentIDs[a.id],q=m.showremovemenu||m.viewerid===a.author,r=m.canremoveall&&m.isownerpage&&!n&&!m.grouporeventid,s=k.source!=l.INTERN,t=!!a.parentcommentid,u=a.parentcommentid,v=!0;t&&u&&u in this.props.canReplyMap&&this.props.canReplyMap[u]!==null&&(v=this.props.canReplyMap[u]);t=!!a.isfeatured;u=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.COMMENT,c);c=new(b("URI"))(k.commentPermalinks[a.id]).addQueryData({comment_tracking:u}).toString();return b("React").createElement(b("UFIComment.react"),{key:b("UFIComments").getRenderKey(a.id),isFirst:d,isFirstCommentComponent:d,isLast:e,isStaticUFILoading:this.state.hasNotMounted,showReplyLink:f,hasPartialBorder:g,comment:a,authorProfiles:k.authorProfiles,viewerIsAuthor:n,feedback:m,"data-ft":u,contextArgs:k.contextArgs,hideAsSpamForPageAdmin:r,isLocallyComposed:p,isOptimisticallyRendered:o,isFeatured:t,parentCanComment:v,permalink:c,showPermalink:s,showRemoveReportMenu:q,focusOnMount:a.id===k.commentIDToFocusOnMount,orderingMode:k.orderingMode,featuredCommentIDs:k.featuredCommentIDs,markViewerHasInteracted:this.state.viewerHasClickedSeeMore?b("emptyFunction"):function(){return this.setState({viewerHasClickedSeeMore:!0})}.bind(this),isLivePinnedComment:h,isAuthorPinnedComment:j,showTranslation:i||!!a.translationdata})};a.prototype.$40=function(a,b,c){return this.$44(a,b,c,!1)};a.prototype.$43=function(a,b,c){return this.$44(a,b,c,!0)};a.prototype.$44=function(a,c,d,e){var f=null,g=null;c||(f=this.$45(a,b("UFIPaging").TOP,e));d||(g=this.$45(a,b("UFIPaging").BOTTOM,e));return{topFilterWarning:f,bottomFilterWarning:g}};a.prototype.$45=function(a,c,d){var e=this.props.allSeenActiveLoadDirectionData;if(!e)return null;e=e[a];if(!e||!(c in e))return null;e=this.props;return!k||!k.shouldRender(e,a,c,d)?null:b("React").createElement(k,{asReplyWarning:d,targetID:a,pagingDirection:c,ufiProps:e})};a.prototype.renderPagers=function(a,c,d,e){__p&&__p();var f=this.props;if(this.$22(a,e)||this.$13()||this.$17()||!c&&f.hideToplevelPager)return{topPager:null,bottomPager:null};c=f.commentCounts[a];var g=f.deletedCounts[a];Number.isInteger(c)||i(0,255,a);Number.isInteger(g)||i(0,256,a);Number.isInteger(e)||i(0,257);return b("UFIPagerGenerator").renderPagers({commentCount:c,contextArgs:f.contextArgs,currentLength:e,currentOffset:d,deletedCount:g,feedback:f.feedback,onPageCallback:function(c,d){var e=babelHelpers["extends"]({},f.contextArgs,{interactionRequestCorrelationID:b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI_TOP_LEVEL_COMMENTS_PAGINATION)});this.context.dispatch(b("UFIStoryAction").pageInComments(e,a,c,d))}.bind(this),orderingMode:f.orderingMode,range:f.ranges[a],targetID:a})};a.prototype.$46=function(a){return!a?null:b("DOM").scry(a,'[name="add_comment_text_text"]').concat(b("DOM").scry(a,'[name="add_comment_text"]')).find(function(a){return!b("Parent").byClass(a,"UFIReplyList")})};a.prototype.$31=function(){return Boolean(b("UFIOrderingModeStore").isInverted(this.props.orderingMode,this.props.contextArgs.ftentidentifier))};a.prototype.hasReactions=function(a,b){return Boolean(a.displayreactions&&b.hasReactions&&(b.feedbackMode==="none"||b.feedbackMode==="toggle"))};a.contextTypes={dispatch:c.func};a.defaultProps={commentIDToFocusOnMount:null,focusReply:null,canReplyMap:{},isActiveLoading:{},repliesExpandedMap:{},hasPagedToplevel:!1,loadingSpamIDs:{},loadingTranslationsMap:{}};e.exports=b("FluxContainer").create(a,{pure:!1,withProps:!0})}),null);
__d("UFIBlingItem.react",["cx","fbt","NumberFormat","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){__p&&__p();var a=b("NumberFormat").formatInteger(this.props.count);a=a;switch(this.props.itemKey){case"like":a=h._({"Like":"{count} Like","Likes":"{count} Likes"},[h._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:a),h._enum(this.props.count===1?"Like":"Likes",{Like:"Like",Likes:"Likes"})]);break;case"comment":a=h._({"Comment":"{count} Comment","Comments":"{count} Comments"},[h._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:a),h._enum(this.props.count===1?"Comment":"Comments",{Comment:"Comment",Comments:"Comments"})]);break;case"reaction":a=h._({"Reaction":"{count} reaction","Reactions":"{count} reactions"},[h._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:a),h._enum(this.props.count===1?"Reaction":"Reactions",{Reaction:"Reaction",Reactions:"Reactions"})]);break;case"reshare":a=h._({"Share":"{count} Share","Shares":"{count} Shares"},[h._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:a),h._enum(this.props.count===1?"Share":"Shares",{Share:"Share",Shares:"Shares"})]);break}return b("React").createElement("span",{className:"_2u_j"},a)};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("UFIBlingBox.react",["cx","fbt","NumberFormat","React","UFIBlingItem.react","UFIReactionTypes"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){__p&&__p();var a=[],c="",d=this.props,e=d.likes,f=d.likesreduced,g=d.reactionCount,i=d.reactionCountMap;d=d.reactionCountReduced;if(e||g){i=i&&i[b("UFIReactionTypes").LIKE]["default"]!==g;a.push(b("React").createElement(b("UFIBlingItem.react"),{className:a.length>0?"mls":"",count:i?g||0:e,countreduced:i?d||"":f,itemKey:i?"reaction":"like",key:"like"}));c+=this.props.likes==1?h._("1 like"):h._({"*":"{count} likes"},[h._param("count",this.props.likes,[0])]);c+=" "}if(this.props.comments){g=this.props.commentsreduced;this.props.contextArgs.islivestreaming&&(g=b("NumberFormat").formatInteger(this.props.comments));a.push(b("React").createElement(b("UFIBlingItem.react"),{className:a.length>0?"mls":"",contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:g,itemKey:"comment",key:"comment"}));c+=this.props.comments==1?h._("1 comment"):h._({"*":"{count} comments"},[h._param("count",this.props.comments,[0])]);c+=" "}this.props.reshares&&(a.push(b("React").createElement(b("UFIBlingItem.react"),{className:a.length>0?"mls":"",count:this.props.reshares,countreduced:this.props.resharesreduced,itemKey:"reshare",key:"reshare"})),c+=this.props.reshares==1?h._("1 share"):h._({"*":"{count} shares"},[h._param("count",this.props.reshares,[0])]));if(this.props.readOnly)return b("React").createElement("span",{"aria-label":c},a);else{e=this.props.contextArgs.commentajaxify;return b("React").createElement("a",{ajaxify:e,href:this.props.permalink,"data-ft":this.props["data-ft"],"data-comment-prelude-ref":this.props["data-comment-prelude-ref"],"aria-label":c,onClick:this.props.onClick,rel:e?"dialog":"ignore"},a)}};function a(){i.apply(this,arguments)}a.propTypes={contextArgs:c.object.isRequired,"data-ft":c.string,"data-comment-prelude-ref":c.string,comments:c.number,commentsreduced:c.string,likes:c.number,likesreduced:c.string,nfb:c.number,onClick:c.func,permalink:c.string,reactionCount:c.number,reactionCountMap:c.object,reactionCountReduced:c.string,reshares:c.number,resharesreduced:c.string,readOnly:c.bool};e.exports=a}),null);
__d("UFIReactionsBlingSocialSentence.react",["csx","cx","fbt","ActorURI","BanzaiLogger","Bootloader","BootloadOnRender.react","DOMQuery","FeedbackSourceType","JSResource","LazyComponent.react","NumberFormat","PagesPrivateReplyConstants","React","SutroPhase2GatingConfig","Tooltip.react","UFIPrivateReplyIndicator.react","UFIReactionsSocialSentence.react","URI","XUFICommentTooltipController","XUFIGroupSeenByProfileBrowserController","XUFIGroupSeenByProfileDialogController","XUFIShareTooltipController","renderCrosspostedTooltipText"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.onCommentsClick=function(a){this.props.onCommentClick&&(this.props.onCommentClick(a),a.preventDefault()),this.logCountAction("comments","click")}.bind(this),this.onSeensClick=function(a){var c=this.props.feedback,d=b("XUFIGroupSeenByProfileDialogController").getURIBuilder().setInt("id",c.entidentifier).getURI();d=b("ActorURI").create(d,c.actorforpost);this.launchDialog(d.toString(),a.currentTarget);this.logCountAction("seens","click");a.preventDefault()}.bind(this),this.onSharesClick=function(a){if(this.isCompactSearch())return;var c=this.props.feedback,d=c.sharefbid||c.targetfbid;d=b("ActorURI").create(new(b("URI"))("/ajax/shares/view").setQueryData({target_fbid:d}),c.actorforpost);this.launchDialog(d.toString(),a.currentTarget);this.logCountAction("shares","click");a.preventDefault()}.bind(this),this.onViewsClick=function(a){this.logCountAction("views","click")}.bind(this),this.onViewsHover=function(a){this.canSeeConsolidatedTooltip()&&this.logCountAction("views","hover")}.bind(this),c}a.prototype.launchSnowlift=function(a,c){"use strict";b("Bootloader").loadModules(["PhotoSnowlift"],function(b){b.bootstrap(a,c)},"UFIReactionsBlingSocialSentence.react")};a.prototype.launchDialog=function(a,c){"use strict";b("Bootloader").loadModules(["AsyncDialog"],function(b){b.bootstrap(a,c,"dialog")},"UFIReactionsBlingSocialSentence.react")};a.prototype.logCountAction=function(a,c){"use strict";b("BanzaiLogger").log("WebReactionsBlingLoggerConfig",{feedback_id:this.props.feedback.entidentifier,"interface":"www",action:c,target_type:"count",target_subtype:a})};a.prototype.renderComments=function(){"use strict";var a=this.props.contextArgs.islivestreaming;if(!this.props.commentCount||!this.props.aboveUFI&&this.props.contextArgs.feedbackMode==="expanded"&&!a||this.props.contextArgs.disableCommentAndLikeForGroupAds||this.props.aboveUFI&&!this.props.commentCount)return null;a=isNaN(this.props.feedback.commentcountreduced)&&!a?this.props.feedback.commentcountreduced:b("NumberFormat").formatInteger(this.props.commentCount);var c=b("ActorURI").create(b("XUFICommentTooltipController").getURIBuilder().setString("ft_ent_identifier",this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return b("React").createElement("div",{className:"_36_q"},b("React").createElement("a",{className:"_ipm _-56","data-comment-prelude-ref":this.props["data-comment-prelude-ref"],"data-ft":this.props["data-ft"],"data-hover":"tooltip","data-tooltip-uri":c,href:this.props.href,onClick:this.onCommentsClick,role:"button"},this.props.children,i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i._param("count",a),i._enum(this.props.commentCount===1?"Comment":"Comments",{Comment:"Comment",Comments:"Comments"})])))};a.prototype.renderSeens=function(){"use strict";if(this.props.contextArgs.entstream||!this.props.feedback.seencount)return null;var a=this.props.feedback,c=a.seencount,d;a.seenbyall&&!a.disable_seen_by_everyone?d=i._("Seen by everyone"):c===1?d=i._("Seen by 1"):d=i._("Seen by {count}",[i._param("count",c)]);c=new(b("URI"))("/ajax/ufi/seen_list_hovercard.php").setQueryData({id:a.entidentifier});var e=b("XUFIGroupSeenByProfileBrowserController").getURIBuilder().setInt("id",a.entidentifier).getURI();e=b("ActorURI").create(e,a.actorforpost);return b("React").createElement("div",{className:"_36_q"},b("React").createElement("span",{ref:"seen_by_text"},b("React").createElement("a",{href:e,"data-hovercard":c.toString(),className:"_ipm _2x0l",onClick:this.onSeensClick},d)))};a.prototype.renderShares=function(){"use strict";if(!this.props.feedback.sharecountreduced)return null;var a=this.props.feedback.sharefbid||this.props.feedback.targetfbid,c;this.isCompactSearch()&&this.props.href!=null?c=this.props.href:c=b("ActorURI").create(new(b("URI"))("/shares/view").setQueryData({id:a}),this.props.feedback.actorforpost);a=b("ActorURI").create(b("XUFIShareTooltipController").getURIBuilder().setString("ft_ent_identifier",this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return b("React").createElement("div",{className:"_36_q"},b("React").createElement("a",{className:"_ipm _2x0m","data-hover":"tooltip","data-tooltip-uri":a,href:c,onClick:this.onSharesClick,role:"button"},i._({"*":"{number} shares","_1":"1 share"},[i._plural(this.props.feedback.sharecount,"number")])))};a.prototype.renderSaves=function(){"use strict";return!this.props.contextArgs.saveCount||!this.props.contextArgs.saveCollectionId?null:b("React").createElement("div",{className:"_36_q"},b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("UFIReactionsSaveDialog.react").__setRef("UFIReactionsBlingSocialSentence.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{saveCount:this.props.contextArgs.saveCountReduced,collectionId:this.props.contextArgs.saveCollectionId,buttonText:this.props.contextArgs.saveButtonTitle,storyId:this.props.contextArgs.saveStoryID,isSaveCountLink:this.props.contextArgs.isSaveCountLink})}))};a.prototype.renderViews=function(){"use strict";__p&&__p();var a=null;if(!this.props.contextArgs.viewCount&&this.props.contextArgs.source===b("FeedbackSourceType").TAHOE){var c=document.getElementById(this.props.contextArgs.rootid);if(c){c=b("DOMQuery").scry(c,"^._1rh0 ._yjk")[0];a=c?c.getAttribute("data-view-count"):null}}c=this.props.contextArgs.viewCount||a;var d=null;this.canSeeConsolidatedTooltip()&&(d=this.renderViewsTooltip());if(!c)return null;a=this.props.contextArgs.viewCount?this.props.contextArgs.viewCountReduced:a;return b("React").createElement("div",{className:"_36_q"},b("React").createElement(b("Tooltip.react"),{tooltip:d,"data-hover":"tooltip","data-tooltip-alignh":"left","data-tooltip-position":"above",className:"_ipm _2x0m",onClick:this.onViewsClick,onMouseOver:this.onViewsHover},i._({"View":"{count} view","Views":"{count} views"},[i._param("count",a),i._enum(c==="1"?"View":"Views",{View:"View",Views:"Views"})])))};a.prototype.canSeeConsolidatedTooltip=function(){"use strict";var a=this.props.contextArgs.postViewCount,b=this.props.contextArgs.totalPosts,c=this.props.contextArgs.otherPostsViewCount;return!!b&&b>1&&!!a&&!!c};a.prototype.isCompactSearch=function(){"use strict";return this.props.contextArgs.source===b("FeedbackSourceType").COMPACT_SEARCH};a.prototype.renderViewsTooltip=function(){"use strict";var a=+this.props.contextArgs.totalPosts||0,c=+this.props.contextArgs.postViewCount||0,d=+this.props.contextArgs.otherPostsViewCount||0;return b("renderCrosspostedTooltipText")({posts:a,postViews:c,otherPostsViews:d})};a.prototype.renderPrivateReply=function(){"use strict";var a=this.props.feedback.messagereplycontext;return!a||a.status!==b("PagesPrivateReplyConstants").Status.ALREADY_REPLIED?null:b("React").createElement("div",{className:"_36_q"},b("React").createElement("span",{className:"_ipm"},b("React").createElement(b("UFIPrivateReplyIndicator.react"),{replyStatus:a.status})))};a.prototype.render=function(){"use strict";var a={feedback:this.props.feedback,contextArgs:this.props.contextArgs,reactionsLink:null};this.props.overrideReactionsLink&&(a.reactionsLink=this.props.href);var c=this.renderComments(),d=this.renderShares(),e=this.renderSaves(),f=this.renderSeens(),g=this.renderViews(),h=this.renderPrivateReply(),i=this.props.feedback.reactioncount,j=b("SutroPhase2GatingConfig").enabled_counts_on_left;if(this.props.contextArgs.viewCount!=null&&(this.props.contextArgs.saveCount!=null||this.props.contextArgs.seenCount!=null))return b("React").createElement("div",{className:"_ipn clearfix _-5d"+(j&&i==0?" _lca":"")},b("React").createElement("div",{className:"_ipo"},c,d,b("React").createElement("div",{className:"_34i1 _36_q"},e,f,g,h)),b("React").createElement(b("UFIReactionsSocialSentence.react"),a));else return b("React").createElement("div",{className:"_ipn clearfix _-5d"+(j&&i==0?" _lca":"")},b("React").createElement("div",{className:"_ipo"},c,d,e,f,g,h),b("React").createElement(b("UFIReactionsSocialSentence.react"),a))};e.exports=a}),null);
__d("UFIBling.react",["CommentPrelude","CommentSection","FeedbackSourceType","React","SutroBlingBarGatingConfig","TrackingNodes","UFIBlingBox.react","UFIReactionsBlingSocialSentence.react","UFISharedDispatcher","UFIStoryAction","UFIToplevelPagedCommentList","UFIToplevelStreamedCommentList","URI","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){__p&&__p();var a=this.props.contextArgs,c=this.props.feedbackTarget,d=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.BLINGBOX),e=c.permalink,f=new(b("URI"))(e).addQueryData({comment_tracking:d}).toString();a.islivestreaming?e=b("UFIToplevelStreamedCommentList").getCommentList(a.ftentidentifier).getDisplayedCommentCount():a.isActiveLivingRoom?e=b("UFIToplevelStreamedCommentList").getCommentList(a.ftentidentifier,a.instanceid).getDisplayedCommentCount():e=b("UFIToplevelPagedCommentList").getCommentList(a.ftentidentifier,c.defaultcommentorderingmode,b("CommentSection").DEFAULT).getDisplayedCommentCount();var g=b("SutroBlingBarGatingConfig").enabled,h=(a.feedbackMode==="none"||a.feedbackMode==="toggle")&&a.hasReactions&&c.displayreactions,i=function(c){c.preventDefault();if(h&&a.feedbackMode==="expanded")this.$1();else if(a.source===b("FeedbackSourceType").COMPACT_SEARCH){var d=a.commentredirecturi!=null?new(b("URI"))(a.commentredirecturi):new(b("URI"))(f);d!=null&&d.go()}else b("CommentPrelude").onBlingboxClick(c.currentTarget),a.disableinlinetoggle||this.props.onCommentVisibilityChanged&&this.props.onCommentVisibilityChanged()}.bind(this);if(h||g||this.props.contextArgs.source===b("FeedbackSourceType").TAHOE){this.props.contextArgs.source===b("FeedbackSourceType").TAHOE&&(e=0);return b("React").createElement(b("UFIReactionsBlingSocialSentence.react"),{aboveUFI:g,commentCount:e,contextArgs:a,"data-comment-prelude-ref":"action_link_bling","data-ft":d,feedback:c,href:f,onCommentClick:i})}else{var j,k,l;a.hasReactions&&(j=c.reactioncount,k=c.reactioncountmap,l=c.reactioncountreduced);return b("React").createElement(b("UFIBlingBox.react"),{comments:e,commentsreduced:c.commentcountreduced,contextArgs:a,"data-comment-prelude-ref":"action_link_bling","data-ft":d,likes:c.likecount,likesreduced:c.likecountreduced,nfb:c.nfbcount,onClick:i,permalink:f,reactionCount:j,reactionCountMap:k,reactionCountReduced:l,reshares:c.sharecount,resharesreduced:c.sharecountreduced,readOnly:a.readonly})}};a.prototype.$1=function(){b("UFISharedDispatcher").dispatch(b("UFIStoryAction").showComments(this.props.contextArgs))};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("UFICommentActionLink.react",["cx","fbt","Arbiter","React","UFICommentLink.react","UFISharedDispatcher","UFIStoryAction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.componentDidMount=function(){this.$1=b("Arbiter").subscribe("UFIAction/"+this.props.contextArgs.ftentidentifier+"/showComments",function(a,c){if(!c)return;b("UFISharedDispatcher").dispatch(b("UFIStoryAction").showComments(this.props.contextArgs))}.bind(this))};a.prototype.componentWillUnmount=function(){this.$1&&b("Arbiter").unsubscribe(this.$1)};a.prototype.render=function(){__p&&__p();var a=this.props.contextArgs,c=a.commentredirecturi;a=a.loggedOutLinkConfig;var d=h._("Comment"),e;a&&a.showCommentLink&&(e=a.commentAjaxifyURI);if(e)return b("React").createElement("span",{className:"_6a _15-3 _3h-u _4k43"},b("React").createElement(b("UFICommentLink.react"),{ajaxify:e,rel:"dialog"},d));else if(c)return b("React").createElement("span",{className:"_6a _15-6 _3h-u _4k43"},b("React").createElement(b("UFICommentLink.react"),{href:c},d));return b("React").createElement("span",{className:"_6a _15-7 _3h-u _4k43"},b("React").createElement(b("UFICommentLink.react"),{onClick:function(a){a.preventDefault(),b("UFISharedDispatcher").dispatch(b("UFIStoryAction").showComments(this.props.contextArgs))}.bind(this)},d))};function a(){i.apply(this,arguments)}a.propTypes={contextArgs:c.object.isRequired};e.exports=a}),null);
__d("UFILikeLink.react",["cx","fbt","Bootloader","React","ReactDOM","TrackingNodes","UFILikeWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=null;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=null,this.state={nuxShown:!1},this.onClick=function(a){if(this.props.href)return;a.preventDefault();this.props.onClick&&this.props.onClick(a);if(this.props.showLikeNuxForGroupMallAds){a=!this.props.likeAction;!a?(b("ReactDOM").findDOMNode(this.$1).focus(),this.setState({nuxShown:!0}),b("Bootloader").loadModules(["UFIGroupMallAdsLikeNux.react"],function(a){j=a},"UFILikeLink.react")):this.setState({nuxShown:!1})}}.bind(this),c}a.prototype.renderLayers=function(){return!this.state.nuxShown||!j?null:b("React").createElement(j,{nuxShown:this.state.nuxShown,nuxContent:this.props.likeNuxContent,contextRef:this.$1})};a.prototype.render=function(){var a=!this.props.likeAction,c=a?b("UFILikeWebDriverIDs").UNLIKE_LINK:b("UFILikeWebDriverIDs").LIKE_LINK,d=!a||!this.props.forcelegacyrendering?h._("Like"):h._("Unlike"),e=b("TrackingNodes").getTrackingInfo(a?b("TrackingNodes").types.UNLIKE_LINK:b("TrackingNodes").types.LIKE_LINK),f=a?h._("Unlike this"):h._("Like this");return b("React").createElement("span",{className:"_3wv2"},b("React").createElement("a",{className:"_48-k UFILikeLink"+(a?" UFILinkBright":""),ref:function(a){return this.$1=a}.bind(this),"data-testid":c,href:this.props.href||"#",role:"button","aria-label":f,"aria-pressed":a,rel:this.props.rel,ajaxify:this.props.ajaxify,onBlur:this.props.onBlur,onClick:this.onClick,onClickCapture:this.props.onClickCapture,onDragStart:this.props.onDragStart,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,onKeyDown:function(a,b){this.props.onKeyDown&&this.props.onKeyDown(a,b)}.bind(this),"data-ft":e},d),this.renderLayers())};a.propTypes={ajaxify:c.string,forcelegacyrendering:c.bool,href:c.string,likeAction:c.bool,likeNuxContent:c.string,rel:c.string,showLikeNuxForGroupMallAds:c.bool};a.defaultProps={forcelegacyrendering:!1,showLikeNuxForGroupMallAds:!1};e.exports=a}),null);
__d("UFILikeActionLink.react",["React","UFILikeLink.react","UFIReactionsLinkImpl.react","UFIReactionTypes","UFIStoryAction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.onClick=function(a){a.preventDefault();var c=this.props.contextArgs.loggedOutLinkConfig;if(c)return;c=this.props.feedback.hasviewerliked;this.context.dispatch(b("UFIStoryAction").changeReaction(this.props.contextArgs,c?b("UFIReactionTypes").NONE:b("UFIReactionTypes").LIKE,a.target))}.bind(this),c}a.prototype.render=function(){var a=this.props,c=a.contextArgs;a=a.feedback;if(!c.showLikeNuxForGroupMallAds&&c.hasReactions&&a.canviewerreact&&b("UFIReactionsLinkImpl.react"))return b("React").createElement(b("UFIReactionsLinkImpl.react"),{contextArgs:c,nuxConfig:c.reactionsNuxConfig,reaction:a.viewerreaction,suggestedReaction:a.suggestedreaction,supportedReactions:a.supportedreactions});else{var d=c.loggedOutLinkConfig,e=null;d&&d.showLikeLink&&(e=d.likeAjaxifyURI);return b("React").createElement(b("UFILikeLink.react"),{ajaxify:e,likeAction:!a.hasviewerliked,onClick:this.onClick,rel:e?"dialog":null,forcelegacyrendering:c.forcelegacyrendering,showLikeNuxForGroupMallAds:c.showLikeNuxForGroupMallAds,likeNuxContent:c.groupMallAdsCommentNuxContent})}};a.contextTypes={dispatch:c.func};a.propTypes={feedback:c.object.isRequired,contextArgs:c.object.isRequired};e.exports=a}),null);
__d("UFISaveActionLink.react",["ix","cx","fbt","Bootloader","Image.react","React","SutroStoryHeaderUFIGatingConfig","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){j.constructor.call(this,a),this.$1=function(){var a=this.state.showSave;b("Bootloader").loadModules(["AsyncRequest","CollectionCurationMechanisms","CollectionsDisplaySurface","SavedStateActions","XSaveController"],function(b,c,d,e,f){new b().setData({action:a?e.SAVE:e.UNSAVE,mechanism:c.SAVED_UFI,story_id:this.props.storyID,surface:d.CAMPFIRE_NOTE}).setHandler(function(b){b.error===0&&this.setState({showSave:!a})}.bind(this)).setURI(f.getURIBuilder().getURI()).send()}.bind(this),"UFISaveActionLink.react")}.bind(this),this.state={showSave:!a.isSaved}}a.prototype.render=function(){var a=this.state.showSave?i._("Save"):i._("Unsave"),c=null;if(!b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi){var d=this.state.showSave?g("122454"):g("138474");c=b("React").createElement(b("Image.react"),{src:d})}return b("React").createElement("span",{className:"_6a _38qe"+(b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi?" _38qf":"")},b("React").createElement("a",{className:(this.state.showSave?"":"_38qg")+(b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi?" _38qh":""),href:"#",onClick:this.$1},c,a))};e.exports=a}),null);
__d("UFIShareActionLink.react",["Promise","ActorURI","Arbiter","Bootloader","React","ReactShareButtonGatedModule","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIShareLink.react","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("ReactShareButtonGatedModule").module,i=b("ReactShareButtonGatedModule").should_use_groups_dialog,j=b("ReactShareButtonGatedModule").store;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);g=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$2=!1,this.state={confirmed:!1,openOnInitOverride:!1,interceptedAndWantedToShareAnyways:!1},this.$3=function(){!this.$1&&!this.$2&&(this.$1=b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI_SHARE_DIALOG_OPENS))}.bind(this),this.$4=function(){this.$2=!1}.bind(this),this.$5=function(){this.$1&&(b("UFICommonInteractionLogger").endInteraction(this.$1),this.$1=null),this.$2=!0,this.$6()}.bind(this),c}a.prototype.render=function(){__p&&__p();var a=this.state,c=a.confirmed;a=a.openOnInitOverride;var d=this.props,e=d.shareURI,f=d.shareRel,g=d.shareNowMenuURI,k=d.feedbackReferrer,l=d.feedbackSource,m=d.feedbackTarget,n=d.misinformationConfirmDialogURI;d=d.interceptForPagePost;if(n&&!c)return b("React").createElement(b("UFIShareLink.react"),{href:"#",onClick:function(){this.$7(n),this.$6()}.bind(this)});if(d&&m&&m.ownerid&&!this.state.interceptedAndWantedToShareAnyways)return b("React").createElement(b("UFIShareLink.react"),{href:"#",onClick:function(){return this.$8(m.ownerid)}.bind(this)});c={feedback_referrer:k,feedback_source:l};d=m&&m.actorforpost;d&&(e=e&&b("ActorURI").create(e,d),g=g&&new(b("URI"))(g).addQueryData("actor_id",d).toString());if(i){d={default_audience:"silent_disco",feedback_referrer:k,feedback_source:l};j&&j.setShareNowURI(this.props.feedbackTarget?this.props.feedbackTarget.sharefbid:null,g);return b("React").createElement(b("UFIShareLink.react"),{href:new(b("URI"))(e).addQueryData(d),rel:f,openOnInit:a,onClick:function(){return this.$6()}.bind(this)})}return g?b("React").createElement(h,{endpoint:g,endpointData:c,openOnInitOverride:a||this.state.interceptedAndWantedToShareAnyways,onMouseUp:this.$3,onShow:this.$5,onHide:this.$4}):b("React").createElement(b("UFIShareLink.react"),{href:new(b("URI"))(e).addQueryData(c),rel:f,openOnInit:a,onClick:function(){this.$6()}.bind(this)})};a.prototype.$6=function(){this.props.feedbackTarget&&b("Arbiter").inform("share_initiated",{entidentifier:this.props.feedbackTarget.entidentifier})};a.prototype.$8=function(a){b("Bootloader").loadModules(["PagePostEngagementFrictionActions","promiseDone"],function(c,d){var e=new(b("Promise"))(function(b,d){c.showReshareEngagementFrictionDialog(a,function(){return b(!0)},function(){return b(!1)},function(){b(!1),c.goToPage(a)})}).then(function(a){a&&(this.setState({interceptedAndWantedToShareAnyways:!0}),this.$6())}.bind(this),function(a){throw a});d(e)}.bind(this),"UFIShareActionLink.react")};a.prototype.$7=function(a){var c="MISINFORMATION_RESHARE_ALERT_FUNNEL";b("Bootloader").loadModules(["AsyncDialog","AsyncRequest","FunnelLogger"],function(b,d,e){e.startFunnel(c),b.send(new d(a),function(a){a.subscribe("confirm",function(){this.setState({confirmed:!0,openOnInitOverride:!0}),e.appendAction(c,"continue"),e.endFunnel(c),a.hide()}.bind(this)),a.subscribe("cancel",function(){e.appendAction(c,"cancel"),e.endFunnel(c),a.hide()})}.bind(this))}.bind(this),"UFIShareActionLink.react")};a.propTypes={feedbackTarget:c.object,shareURI:c.string,shareRel:c.string,shareNowMenuURI:c.string,shareLinkHref:c.string,feedbackReferrer:c.string,feedbackSource:c.number,misinformationConfirmDialogURI:c.string,interceptForPagePost:c.bool};e.exports=a}),null);
__d("UFIActionLinks.react",["cx","fbt","BanzaiODS","BootloadedComponent.react","FBFeedLocations","FeedbackSourceType","JSResource","React","SutroBlingBarGatingConfig","SutroStoryHeaderUFIGatingConfig","UFIBling.react","UFICommentActionLink.react","UFIConfig","UFIInstanceAction","UFILikeActionLink.react","UFIPrivateReplyLink.react","UFISaveActionLink.react","UFIShareActionLink.react","UFISharedDispatcher","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.componentDidMount=function(){var a=this.$1();b("BanzaiODS").bumpEntityKey("feedback",a)};a.prototype.renderActorSelector=function(){if(this.props.hideActorSelector||this.props.contextArgs.disableCommentAndLikeForGroupAds)return null;var a=this.props.contextArgs,c=a.actorSelectorConfig;a=a.hasReactions;if(!c)return null;var d=b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi,e=c.module;return b("React").createElement("div",{className:"_40yk"+(d?" _610g":"")+(d?" _610h":"")+(a?" _pbn":"")},b("React").createElement(e,c.props))};a.prototype.renderActionList=function(){var a=[this.renderLikeLink(),this.renderCommentLink(),this.renderShareLink(),this.renderPrivateReplyLink(),this.renderEmbedLink(),this.renderSaveLink(),this.renderPostNowLink(),this.renderEditPostLink()];a=a.filter(function(a){return a}).map(function(a,c){return b("React").createElement("span",{className:"_1mto",key:c},a)});if(a.length)return b("React").createElement("div",{className:"_42nr _1mtp"},a);else return null};a.prototype.renderBling=function(){var a=this.shouldRenderBling();return!a?null:b("React").createElement(b("UFIBling.react"),{contextArgs:this.props.contextArgs,feedbackTarget:this.props.feedbacktarget,onCommentVisibilityChanged:function(){return b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").toggleComments(this.props.contextArgs))}.bind(this)})};a.prototype.renderLikeLink=function(){var a=this.props,c=a.contextArgs;a=a.feedbacktarget;var d=c.loggedOutLinkConfig,e=c.disableCommentAndLikeForGroupAds;if(e)return null;return!a.hasviewerliked&&!a.viewercanlike&&!(d&&d.showLikeLink)?null:b("React").createElement(b("UFILikeActionLink.react"),{feedback:a,contextArgs:c})};a.prototype.renderCommentLink=function(){__p&&__p();var a=this.props.contextArgs.disableCommentAndLikeForGroupAds;if(a||this.props.contextArgs.hideComments)return null;a=this.props.contextArgs.loggedOutLinkConfig;if(!this.props.feedbacktarget.cancomment&&!(a&&a.showCommentLink)){a=this.props.contextArgs.disabledCommentTooltip;if(a){var c=h._("Comment");return b("React").createElement("span",null,b("React").createElement("span",{className:"_1ysv","data-hover":"tooltip","data-tooltip-content":a},c))}return null}return b("React").createElement(b("UFICommentActionLink.react"),{contextArgs:this.props.contextArgs})};a.prototype.$1=function(){var a=this.props.contextArgs.shareLinkConfig;if(!a)return"ufi-share-link.unavailable";a=this.props.contextArgs.loggedOutLinkConfig;return a&&a.showShareLink?"ufi-share-link.loggedout":"ufi-share-link.render"};a.prototype.renderShareLink=function(){var a=this.props.contextArgs.shareLinkConfig;if(!a)return null;var c=this.props.contextArgs.loggedOutLinkConfig;c&&c.showShareLink&&(a.shareURI=c.shareAjaxifyURI);return b("React").createElement(b("UFIShareActionLink.react"),babelHelpers["extends"]({feedbackTarget:this.props.feedbacktarget,feedbackReferrer:this.props.contextArgs.feedbackReferrer,feedbackSource:this.props.contextArgs.source},a))};a.prototype.renderPrivateReplyLink=function(){var a=this.props,c=a.contextArgs;a=a.feedbacktarget;var d=a.actorforpost;a=a.messagereplycontext;if(!b("UFIPrivateReplyLink.react").willRender(a,d))return null;return!a?null:b("React").createElement(b("UFIPrivateReplyLink.react"),{actorID:d,activityID:c.ftentidentifier,context:a,seeResponseLabel:!1,shouldShowNuxToPage:c.shouldShowPrivateReplyNuxToPage,shouldShowGeneralNuxContent:c.shouldShowGeneralPrivateReplyNuxContent})};a.prototype.renderEmbedLink=function(){var a=this.props.contextArgs.shareLinkConfig;if(!a||!a.embedURI)return null;var c=h._("Embed");return b("React").createElement("span",{className:"_4q8d _1mtq"},b("React").createElement("a",{href:a.embedURI,rel:"dialog",className:"_2g1w"},c))};a.prototype.renderSaveLink=function(){__p&&__p();var a=null;try{a=JSON.parse(this.props.contextArgs.feedcontext).location_type}catch(a){}if((a===b("FBFeedLocations").CAMPFIRE_NOTE||a===b("FBFeedLocations").WORKPLACE_HUB_PREVIEW)&&this.props.contextArgs.showsavelink){a=this.props.contextArgs;var c=a.isSaved;a=a.saveStoryID;return b("React").createElement(b("UFISaveActionLink.react"),{isSaved:c,storyID:a})}return null};a.prototype.renderPostNowLink=function(){try{var a=this.props.contextArgs,c=a.feedcontext;a=a.ftentidentifier;c=JSON.parse(c).location_type;return c===b("FBFeedLocations").GROUP_DRAFT_POSTS?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIPostNowActionLink.react").__setRef("UFIActionLinks.react"),bootloadPlaceholder:b("React").createElement("div",null),postID:a}):null}catch(a){return null}};a.prototype.renderEditPostLink=function(){try{var a=this.props.contextArgs,c=a.feedcontext;a=a.ftentidentifier;var d=JSON.parse(c).location_type;return d===b("FBFeedLocations").GROUP_DRAFT_POSTS?b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIEditPostActionLink.react").__setRef("UFIActionLinks.react"),bootloadPlaceholder:b("React").createElement("div",null),feedContext:c,postID:a}):null}catch(a){return null}};a.prototype.renderSearchFeedback=function(){var a=this.props.contextArgs.inlineSearchFeedbackConfig;return!a?null:b("React").createElement(b("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("InlineFeedback.react").__setRef("UFIActionLinks.react")},a))};a.prototype.renderCrowdsourceLabelingContainer=function(){return!b("UFIConfig").showUFICrowdsource?null:b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("UFICrowdsourceLabelingContainer.react").__setRef("UFIActionLinks.react"),feedback:this.props.feedbacktarget,contextArgs:this.props.contextArgs})};a.prototype.renderLayout=function(a,c,d){c=c.map(function(a,c){return a&&b("React").createElement("div",{className:"_3m9g",key:c},a)}).filter(function(a){return a});return!a&&c.length===0?null:b("React").createElement("div",{className:b("joinClasses")("_3399",d)},c,b("React").createElement("div",{className:"_524d"},a))};a.prototype.shouldRenderBling=function(){__p&&__p();var a=this.props.contextArgs,c=a.feedcontext,d=a.source;a=a.showBling;var e=null;if(c)try{e=JSON.parse(c).location_type}catch(a){}if(e===b("FBFeedLocations").GOODWILL_THROWBACK_PROMOTION||e===b("FBFeedLocations").GOODWILL_THROWBACK_SHARE)return!1;if(d===b("FeedbackSourceType").TAHOE)return!this.props.hideBling;c=b("SutroBlingBarGatingConfig").enabled;return a||c&&!this.props.hideBling};a.prototype.shouldRenderActionButtons=function(){var a=null,c=this.props.contextArgs.source;if(this.props.contextArgs.feedcontext)try{a=JSON.parse(this.props.contextArgs.feedcontext).location_type}catch(a){}return a===b("FBFeedLocations").GOODWILL_THROWBACK_PERMALINK||a===b("FBFeedLocations").GOODWILL_THROWBACK_PROMOTION||a===b("FBFeedLocations").GOODWILL_THROWBACK_SHARE||a===b("FBFeedLocations").GROUP_SUGGESTIONS_WITH_STORY||c===b("FeedbackSourceType").LIVE_WWW_BROADCASTING||c===b("FeedbackSourceType").COMPACT_SEARCH||c===b("FeedbackSourceType").LIVE_VIDEO_STORIES?!1:!0};a.prototype.hasCounts=function(){return!!(this.props.feedbacktarget.commentcountreduced||this.props.feedbacktarget.sharecountreduced||this.props.feedbacktarget.seencount||this.props.contextArgs.viewCount)||this.props.feedbacktarget.reactioncount>0&&(b("SutroBlingBarGatingConfig").enabled||this.props.contextArgs.showBling||this.props.contextArgs.source===b("FeedbackSourceType").TAHOE)};a.prototype.render=function(){__p&&__p();var a=this.renderActorSelector(),c=this.renderSearchFeedback(),d=[],e=[],f=this.props.contextArgs.disableCommentAndLikeForGroupAds,g=null,h=b("SutroBlingBarGatingConfig").enabled,i=this.renderBling();this.props.contextArgs.showBling&&!h?(d.push(a),this.hasCounts()?g=this.renderLayout(null,[c],"_1f6t"):e.push(c)):(d.push(a),d.push(c));h=this.props.contextArgs.source===b("FeedbackSourceType").COMPACT_SEARCH;a=this.shouldRenderActionButtons();c=b("SutroStoryHeaderUFIGatingConfig").enabled_hide_ufi_border&&a;h="_1f6t"+(h?" _24vt":"")+(this.props.contextArgs.hasReactions?" _4_dr":"")+(c&&this.props.contextArgs.source!==b("FeedbackSourceType").PHOTOS_SNOWLIFT&&this.props.contextArgs.source!==b("FeedbackSourceType").WORKPLACE_DISCOVERY_FEED?" _20h5":"");var j=b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi,k=b("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi_animation,l=b("SutroBlingBarGatingConfig").enabled;a=a?this.renderLayout(this.renderActionList(),d,"_a7s"+(c?" _20h6":"")+(j?" _610i":"")+(j?" _610j":"")+(j&&k?" _125r":"")+(l?" _2h27":"")+" clearfix _zw3"+(f?" _r9u":"")):null;d=this.renderCrowdsourceLabelingContainer();return b("React").createElement("div",{ref:"root",className:"_57w"},g,this.hasCounts()?this.renderLayout(i,e,h):null,a,d)};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("UFIActionHeader.react",["cx","FeedbackSourceType","FluxContainer","React","UFIActionLinks.react","UFICommercialBreakStore","UFIDispatcherContext.react","UFIPlayLiveVODHighlightsStore","ifRequired"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={inCommercialBreak:!1,isPlayingLiveVODHighlights:!1},b}a.getStores=function(){return[b("UFICommercialBreakStore"),b("UFIPlayLiveVODHighlightsStore")]};a.calculateState=function(a,c){a=c.contextArgs.instanceid;return{inCommercialBreak:b("UFICommercialBreakStore").getValueFor(a),isPlayingLiveVODHighlights:b("UFIPlayLiveVODHighlightsStore").getValueFor(a)}};a.prototype.$1=function(){var a=b("ifRequired")("UFIVideoPlayerRegistry",function(a){return a.getAvailableVideoPlayerController(this.props.contextArgs.instanceid)}.bind(this));a=a&&a.getOption("VideoWithInstreamVideo","controller");a=a&&a.getConfig();return a};a.prototype.$2=function(){__p&&__p();var a=this.props.contextArgs.source;a=a===b("FeedbackSourceType").COMPACT_SEARCH;a=b("React").createElement(b("UFIDispatcherContext.react"),{dispatcher:this.props.dispatcher,stores:this.props.stores},b("React").createElement(b("UFIActionLinks.react"),{contextArgs:this.props.contextArgs,feedbacktarget:this.props.feedbacktarget,hideActorSelector:a}));if(this.state.isPlayingLiveVODHighlights)return b("React").createElement("div",{className:"_f_s"},a);if(!this.state.inCommercialBreak)return a;var c=this.$1();c=c&&c.vodTransitionVersion!==0;return!c?null:b("React").createElement("div",{className:"_4hqd"},a)};a.prototype.render=function(){return b("React").createElement("div",null,this.$2())};e.exports=b("FluxContainer").create(a,{withProps:!0,pure:!1})}),null);
__d("CommentLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"1435334373168219",queryID:"1723155404680538"})}),null);
__d("UFICommentLikeSubscription",["BaseGraphQLSubscription","CommentLikeWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("BaseGraphQLSubscription"));g&&g.prototype;a.prototype.getTopic=function(a){"use strict";return"gqls/"+this.getSubscriptionCallName()+"/top_level_feedback_id_"+a};a.prototype.getQueryID=function(){"use strict";return b("CommentLikeWebGraphQLSubscription").getDocID()};a.prototype.getQueryParameters=function(a){"use strict";return{input:JSON.stringify({client_subscription_id:b("uuid")(),top_level_feedback_id:a})}};a.prototype.getSubscriptionCallName=function(){"use strict";return"comment_like_subscribe"};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("CommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"1840357882741892",queryID:"410384789785558"})}),null);
__d("UFICommentSubscription",["BaseGraphQLSubscription","CommentCreateWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("BaseGraphQLSubscription"));g&&g.prototype;a.prototype.getTopic=function(a){"use strict";return"gqls/"+this.getSubscriptionCallName()+"/top_level_feedback_id_"+a};a.prototype.getQueryID=function(){"use strict";return b("CommentCreateWebGraphQLSubscription").getDocID()};a.prototype.getQueryParameters=function(a){"use strict";return{input:JSON.stringify({client_subscription_id:b("uuid")(),top_level_feedback_id:a})}};a.prototype.getSubscriptionCallName=function(){"use strict";return"comment_create_subscribe"};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("UFIFeaturedReplyCommentListImpl",["UFIReplyCommentListImpl","WebCommentViewOption"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("UFIReplyCommentListImpl"));g=c&&c.prototype;function a(a,c,d,e){__p&&__p();g.constructor.call(this,a,c,b("WebCommentViewOption").FEATURED);a=0;c=d.length;this.updateCommentCount(c);this.addCommentIDs(a,c,d);var f={};e.forEach(function(a){a.id&&(f[a.id]=a)});d.forEach(function(a){this.addOrUpdateComment(f[a])}.bind(this))}a.prototype.fetchComments=function(a,b,c){};e.exports=a}),null);
__d("UFIFeaturedToplevelCommentListImpl",["UFIToplevelPagedCommentListImpl","WebCommentViewOption"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("UFIToplevelPagedCommentListImpl"));g=c&&c.prototype;function a(a,c,d){__p&&__p();g.constructor.call(this,a,b("WebCommentViewOption").FEATURED);a=0;var e=c.length;this.updateCommentCount(e);this.addCommentIDs(a,e,c);var f={};d.forEach(function(a){a.id&&(f[a.id]=a)});c.forEach(function(a){this.addOrUpdateComment(f[a])}.bind(this))}a.prototype.fetchComments=function(a,b,c){};e.exports=a}),null);
__d("UFIFeedbackFilters",[],(function(a,b,c,d,e,f){"use strict";a={getRequestedIDs:function(a){var b=[];a.reactorids&&(b=b.concat(a.reactorids));a.actorforpost&&(b=b.concat(a.actorforpost));return b}};e.exports=a}),null);
__d("UFIFetcher",["Promise","ShortProfiles"],(function(a,b,c,d,e,f){"use strict";a={fetchShortProfiles:function(a){return new(b("Promise"))(function(c,d){return b("ShortProfiles").getMulti(a,c)})},fetchComments:function(a,c,d){return new(b("Promise"))(function(b,e){return a.getComments(c.getOffset(),c.getLength(),d,b)}).then(function(a){return Object.values(a)})},fetchCommentsOrThrow:function(a,b,c){return Object.values(a.getCommentsOrThrow(b,c))}};e.exports=a}),null);
__d("FeedbackLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"1304193676334207",queryID:"264366153976871"})}),null);
__d("UFILikeSubscription",["BaseGraphQLSubscription","FeedbackLikeWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("BaseGraphQLSubscription"));g&&g.prototype;a.prototype.getTopic=function(a){"use strict";return"gqls/"+this.getSubscriptionCallName()+"/feedback_id_"+a};a.prototype.getQueryID=function(){"use strict";return b("FeedbackLikeWebGraphQLSubscription").getDocID()};a.prototype.getQueryParameters=function(a){"use strict";return{input:JSON.stringify({client_subscription_id:b("uuid")(),feedback_id:a})}};a.prototype.getSubscriptionCallName=function(){"use strict";return"feedback_like_subscribe"};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("PageCommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"2475953642429043",queryID:"335464200513908"})}),null);
__d("UFIPageCommentSubscription",["BaseGraphQLSubscription","PageCommentCreateWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("BaseGraphQLSubscription"));g&&g.prototype;a.prototype.getTopic=function(a){"use strict";return"gqls/"+this.getSubscriptionCallName()+"/top_level_feedback_id_"+a};a.prototype.getQueryID=function(){"use strict";return b("PageCommentCreateWebGraphQLSubscription").getDocID()};a.prototype.getQueryParameters=function(a){"use strict";return{input:JSON.stringify({client_subscription_id:b("uuid")(),top_level_feedback_id:a})}};a.prototype.getSubscriptionCallName=function(){"use strict";return"page_comment_create_subscribe"};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("UFIReactionStore",["Arbiter","FluxStore","UFIReactionTypes","UFIStoryActionType","UFIUIEvents","UFIUserActions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("FluxStore"));g&&g.prototype;a.prototype.__onDispatch=function(a){switch(a.type){case b("UFIStoryActionType").CHANGE_REACTION:b("UFIUserActions").changeReaction(a.contextArgs.ftentidentifier,a.reactionType,{rootid:a.contextArgs.rootid,source:a.contextArgs.source,feedbackReferrer:a.contextArgs.feedbackReferrer,fluentContentToken:a.contextArgs.fluentContentToken,isLiveVOD:a.contextArgs.isLiveVOD,islivestreaming:a.contextArgs.islivestreaming,instanceid:a.contextArgs.instanceid},a.target,a.sphericalYaw,a.sphericalPitch);b("Arbiter").inform(b("UFIUIEvents").ReactionButtonClicked,{ft_id:a.contextArgs.ftentidentifier,like_action:a.reactionType===b("UFIReactionTypes").LIKE,reaction_type:a.reactionType,target:a.target});break}};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=a}),null);
__d("LiveVideoShareCountUpdateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"1844588075618356",queryID:"911885508997273"})}),null);
__d("UFIShareCountUpdateSubscription",["BaseGraphQLSubscription","LiveVideoShareCountUpdateWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("BaseGraphQLSubscription"));g&&g.prototype;a.prototype.getTopic=function(a){"use strict";return"gqls/live_video_share_count_update_subscribe/feedback_id_"+a};a.prototype.getQueryID=function(){"use strict";return b("LiveVideoShareCountUpdateWebGraphQLSubscription").getDocID()};a.prototype.getQueryParameters=function(a){"use strict";return{input:JSON.stringify({client_subscription_id:b("uuid")(),feedback_id:a})}};a.prototype.getSubscriptionCallName=function(){"use strict";return"live_video_share_count_update_subscribe"};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("FeedbackTypingWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function(a,b,c,d,e,f){"use strict";e.exports=b("WebGraphQLSubscriptionHelper").getExports({docID:"1237650813017179",queryID:"1235619139887368"})}),null);
__d("UFITypingSubscription",["BaseGraphQLSubscription","FeedbackTypingWebGraphQLSubscription","uuid"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("BaseGraphQLSubscription"));g&&g.prototype;a.prototype.getTopic=function(a){"use strict";return"gqls/"+this.getSubscriptionCallName()+"/feedback_id_"+a};a.prototype.getQueryID=function(){"use strict";return b("FeedbackTypingWebGraphQLSubscription").getDocID()};a.prototype.getQueryParameters=function(a){"use strict";return{input:JSON.stringify({client_subscription_id:b("uuid")(),feedback_id:a})}};a.prototype.getSubscriptionCallName=function(){"use strict";return"feedback_typing_subscribe"};function a(){"use strict";g.apply(this,arguments)}e.exports=a}),null);
__d("UFITypingSubscriptionController",["TimeSlice","UFITypingSubscription","clearTimeout","getByPath","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=15*1e3;function h(a){var c=b("getByPath")(a,["feedback_typing_subscribe","feedback","feedback_typers","friend_count"]);a=b("getByPath")(a,["feedback_typing_subscribe","feedback","feedback_typers","other_count"]);return{friendCount:parseInt(c,10)||0,otherCount:parseInt(a,10)||0}}function i(a){return a.friendCount===0&&a.otherCount===0}function a(a,c){this.$1=null,this.$2=c,this.$3=b("UFITypingSubscription").subscribe(a,this.$4.bind(this))}a.prototype.unsubscribe=function(){this.$5(),this.$3&&this.$3.unsubscribe()};a.prototype.$4=function(a){this.$5();a=h(a);this.$2(a);i(a)||(this.$1=b("setTimeout")(b("TimeSlice").guard(function(){this.$5(),this.$2({friendCount:0,otherCount:0})}.bind(this),"UFITypingSubscriptionController freshnessTimer",{propagationType:b("TimeSlice").PropagationType.EXECUTION}),g))};a.prototype.$5=function(){this.$1&&(b("clearTimeout")(this.$1),this.$1=null)};e.exports=a}),null);
__d("UFITypingSubscriptionControllerFactory",["UFILiveTypingIndicator","UFISharedDispatcher","UFIStoryAction","UFITypingSubscriptionController","debounce"],(function(a,b,c,d,e,f){"use strict";var g=500;a={forUFIController:function(a,c){var d=b("debounce")(function(a){var d;a.friendCount?d=b("UFIStoryAction").friendTyping(c):a.otherCount&&b("UFILiveTypingIndicator").isEnabled()?d=b("UFIStoryAction").someoneTyping(c):d=b("UFIStoryAction").typingStopped(c);b("UFISharedDispatcher").dispatch(d)},g);return new(b("UFITypingSubscriptionController"))(a.targetfbid,d)}};e.exports=a}),null);
__d("XVODStreamingCommentsAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videos/vodcomments/",{eft_id:{type:"String",required:!0},target_ufi_instance_id:{type:"String",required:!0},start_time:{type:"Float",required:!0},end_time:{type:"Float",required:!0},should_backfill:{type:"Bool",defaultValue:!1}})}),null);
__d("UFIVODStreamingComments",["AsyncRequest","BanzaiODS","CommentSection","SubscriptionsHandler","UFICentralUpdates","UFIConstants","UFIInstanceAction","UFILivePinnedCommentStore","UFISharedDispatcher","UFIStoryAction","UFIToplevelPagedCommentList","UFIToplevelStreamedCommentList","WebCommentViewOption","XVODStreamingCommentsAsyncController","setInterval"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("BanzaiODS").setEntitySample("feedback",1e-4);function g(a,c){__p&&__p();this.ufiController=a;this.videoPlayerController=c;this.queue=[];this.queueEndTime=0;this.currentRequest=null;this.subscriptions=new(b("SubscriptionsHandler"))();this.commentsAutoplayState=this.ufiController.shouldAutoplayLiveVODComments()?"MayPlay":"MayNotPlay";this.pinQueue=[];this.resetToTime(c.getCurrentTimePosition());a=this.ufiController.getFtEntIdentifier();var d=this.ufiController.getInstanceID(),e=b("UFIToplevelPagedCommentList").getPagedCommentCountForFeedbackTargetID(a,b("CommentSection").DEFAULT);typeof e==="number"&&b("UFIToplevelStreamedCommentList").getCommentList(a,d).updateCommentCount(e);this.subscriptions.addSubscriptions(c.addListener("seekEnd",function(a){this.commentsAutoplayState==="MayNotPlay"&&(this.commentsAutoplayState="MayPlay"),this.resetToTime(a.position)}.bind(this)),c.addListener("unmute",function(a){this.commentsAutoplayState==="MayNotPlay"&&(this.commentsAutoplayState="MayPlay"),this.$1()}.bind(this)),c.addListener("updateStatus",function(a,b){b=null;while(this.pinQueue.length){if(this.pinQueue[0].timeoffset>a.position)break;b=this.pinQueue.shift()}b&&this.$2(b)}.bind(this)));b("setInterval")(this.renderNextComment.bind(this),2e3);b("BanzaiODS").bumpEntityKey("vod_comments","www_load")}g.prototype.renderNextComment=function(){__p&&__p();if(!this.videoPlayerController.isState("playing"))return;var a=this.videoPlayerController.getCurrentTimePosition();this.onTimeUpdated(a);while(this.queue.length&&this.queue[0].timeoffset<a){var c=this.queue.shift();if(c.timeoffset<a-5)continue;b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.STREAMING,c.ufipayload);b("BanzaiODS").bumpEntityKey("feedback","facecast_vod_comment_rendered");break}this.$1()};g.prototype.fetchNewCommments=function(a,c,d,e){__p&&__p();var f=a+60;a=b("XVODStreamingCommentsAsyncController").getURIBuilder().setString("eft_id",this.ufiController.getFtEntIdentifier()).setString("target_ufi_instance_id",this.ufiController.getInstanceID()).setFloat("start_time",a).setFloat("end_time",f).setBool("should_backfill",c).getURI();this.currentRequest&&this.currentRequest.abandon();this.currentRequest=new(b("AsyncRequest"))().setURI(a).setHandler(function(a){a=a.getPayload();if(a.status==="error")return;a.backfillpayload&&b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.STREAMING,a.backfillpayload);d(a.ufipayloads);e(a.pinnedcommentpayloads,a.backfillpinnedcommentpayload);this.queueEndTime=f}.bind(this)).setFinallyHandler(function(){c&&b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").didReceiveVODComments(this.ufiController.getContextArgs())),this.currentRequest=null}.bind(this));this.currentRequest.send();c&&b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").didRequestVODComments(this.ufiController.getContextArgs()))};g.prototype.onTimeUpdated=function(a){if(a<this.queueEndTime-15||this.currentRequest!==null)return;this.fetchNewCommments(this.queueEndTime,!1,function(a){this.queue=this.queue.concat(a)}.bind(this),function(a,b){this.pinQueue=this.pinQueue.concat(a)}.bind(this))};g.prototype.resetToTime=function(a){var c=this.ufiController.getFtEntIdentifier();b("UFIToplevelStreamedCommentList").resetCommentList(c,this.ufiController.getInstanceID());b("UFICentralUpdates").didUpdateFeedback(c);this.fetchNewCommments(a,!0,function(a){this.queue=a}.bind(this),function(a,b){this.pinQueue=a,this.$2(b)}.bind(this))};g.prototype.stop=function(){this.subscriptions.release()};g.prototype.$1=function(){var a=b("UFIToplevelStreamedCommentList").getExistingCommentList(this.ufiController.getFtEntIdentifier(),this.ufiController.getInstanceID());if(!a||a.getActualCommentCount()<5||this.commentsAutoplayState!=="MayPlay"||!this.videoPlayerController.isState("playing"))return;b("BanzaiODS").bumpEntityKey("vod_comments","www_autoplay");this.commentsAutoplayState="Played";b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").changeOrderingMode(this.ufiController.getContextArgs(),b("WebCommentViewOption").LIVE_STREAMING))};g.prototype.$2=function(a){__p&&__p();var c,d=this.ufiController.getContextArgs(),e=b("UFILivePinnedCommentStore").getPinnedCommentID(d.ftentidentifier),f=a.ufipayload;c=(c=f)!=null?(c=c.pinnedcomments)!=null?c.length:c:c;if(!c){e!==null&&b("UFISharedDispatcher").dispatch(b("UFIStoryAction").unpinComment(d,a.pineventid));return}c=f.pinnedcomments[0].id;if(c===e)return;b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.STREAMING,f);b("UFISharedDispatcher").dispatch(b("UFIStoryAction").pinComment(d,c,a.pineventid))};var h=new Map();e.exports={start:function(a,b){var c=a.getInstanceID();if(h.get(c))return;h.set(c,new g(a,b))},stop:function(a,b){a=h.get(b);if(!a)return;a.stop();h["delete"](b)}}}),null);
__d("XCommentEmbedPluginEmbedAsyncDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugins/comment-embed/async/embed/dialog/",{comment_id:{type:"String",required:!0},width:{type:"Int"},__asyncDialog:{type:"Int"}})}),null);
__d("XGroupsContentRemoveDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/content/remove/dialog/",{group_id:{type:"FBID"},content_id:{type:"FBID"},story_dom_id:{type:"String"},source:{type:"Enum",required:!0,enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("UFIController",["csx","invariant","Promise","Arbiter","AsyncRequest","AuthorPinnedCommentLogger","BigPipe","BootloadedComponent.react","Bootloader","ClientIDs","CommentPrelude","CommentSection","DOM","DOMContainer.react","DOMQuery","FBFeedLocations","FBLogger","FeedbackPayloadSourceType","FeedbackSourceType","ImmutableObject","IntersectionObserver","JSResource","LiveTimer","PinnedCommentEventCreateSubscription","React","ReactDOM","Run","ShortProfiles","StaticUFI.react","SubscriptionsHandler","TranslationTrigger","UFIActionHeader.react","UFIActionLinks.react","UFIAddCommentActionType","UFIAsyncWrapper","UFICallbackStore","UFICentralUpdates","UFICommentAction","UFICommentActionType","UFICommentFilters","UFICommentLikeSubscription","UFICommentLogger","UFIComments","UFICommentSubscription","UFICommentUtils","UFICommentVisibilityStore","UFICommercialBreakAdapter","UFICommonInteractionLogger","UFIConfig","UFIConstants","UFIDispatcher","UFIDispatcherContext.react","UFIDomRootAdapter","UFIFeaturedReplyCommentListImpl","UFIFeaturedToplevelCommentListImpl","UFIFeedbackFilters","UFIFeedbackMode","UFIFeedbackStore","UFIFeedbackTargets","UFIFetcher","UFIInstanceAction","UFIInstanceActionType","UFILikeSubscription","UFILivePinnedCommentStore","UFILiveTypingIndicator","UFINewCommentNotifier","UFIOrderingModeStore","UFIPageCommentSubscription","UFIPaging","UFIPlayLiveVODHighlightsAdapter","UFIRange","UFIReactionStore","UFIReplyCommentList","UFIRootRegistry","UFIShareCountUpdateSubscription","UFISharedDispatcher","UFIStoryAction","UFIStoryActionType","UFIThreadedFacecastCommentsStore","UFIToplevelPagedCommentList","UFIToplevelStreamedCommentList","UFITypingSubscriptionControllerFactory","UFIUIEvents","UFIVideoPlayerRegistry","UFIVisibility","UFIVODStreamingComments","URI","WebCommentViewOption","XCommentEmbedPluginEmbedAsyncDialogController","XGroupsContentRemoveDialogController","createArrayFromMixed","flattenArray","forEachObject","gkx","intersectionObserverEntryIsIntersecting","isEmpty","onEnclosingPageletDestroy","promiseDone","requireWeak"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=Object.freeze({NEWSSTAND:"newsstand"}),j=function(a,c,d,e){var f=a.getRequestedOffset();a=a.getRequestedLength();c=f+a===c;c=c&&k(e)?d-f:a;return new(b("UFIRange"))(f,c)},k=function(a){return a==b("FeedbackPayloadSourceType").USER_ACTION||a==b("FeedbackPayloadSourceType").LIVE_SEND||a==b("FeedbackPayloadSourceType").STREAMING},l,m=!1;n.factory=function(a,c,d){__p&&__p();if(!l||c.feedLocationType!==b("FBFeedLocations").NEWSFEED||m||c.substream_index!==1){n.$14(a,c,d);return}var e=new(b("IntersectionObserver"))(function(f,e){f.forEach(function(f){b("intersectionObserverEntryIsIntersecting")(f)&&(e.disconnect(),n.$14(a,c,d))})},{});e.observe(a);l.subscribeOnce(b("BigPipe").Events.displayed,function(){m=!0,e.disconnect(),n.$14(a,c,d),b("Bootloader").loadModules(["UFISubscriptionUpdates","UFIUserActions","UFIRetryActions"],function(){},"UFIController")})};n.prepare=function(){b("Arbiter").subscribeOnce(b("BigPipe").Events.init,function(a,b){l=b.arbiter})};n.$14=function(a,b,c){if(b.rootid)return null;b.rootid=a.id;return new n(a,Object.freeze(b),c)};n.prototype.getRootNode=function(){return this.root};n.prototype.getContextArgs=function(){return this.$2};n.prototype.getFtEntIdentifier=function(){return this.$2.ftentidentifier};n.prototype.getInstanceID=function(){return this.$2.instanceid};n.prototype.getFluentContentToken=function(){return this.$2.fluentContentToken};n.prototype.shouldAutoplayLiveVODComments=function(){return!!this.$2.autoplayLiveVODComments};n.prototype.getIsCurrentCommentEmpty=function(){return this.$13};n.prototype.getOrderingMode=function(a){return a===b("CommentSection").FRIENDS?b("WebCommentViewOption").TOPLEVEL:b("UFIOrderingModeStore").getOrderingMode(this.$2.instanceid)};function n(a,c,d){__p&&__p();this.$6=!1;this.$19=[];this.componentDidRender=function(){this.$19.length&&(this.$19.forEach(b("UFICommonInteractionLogger").endInteraction),this.$19.length=0)}.bind(this);this.$15();this.$16();this.root=a;this.$2=c;this.$7=null;b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").init(c,d));b("UFIRootRegistry").registerController(c.rootid,c.instanceid,c.ftentidentifier,function(){this.$17()}.bind(this));this.$4=new(b("UFIDomRootAdapter"))(this.root,this.$2);if(b("UFIConfig").feedfocusWrapperModule&&c.location==i.NEWSSTAND){var e=b("UFIConfig").feedfocusWrapperModule,f=b("DOMQuery").scry(this.root,"^._5pat");f=f[0];if(f){var g=b("createArrayFromMixed")(f.children),h=document.createDocumentFragment();g.forEach(function(a){h.appendChild(a)});b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,b("React").createElement(e,{instanceID:c.instanceid},b("React").createElement(b("DOMContainer.react"),null,h))),f)}}g=c.feedbackMode===b("UFIFeedbackMode").NEVER||c.feedbackMode===b("UFIFeedbackMode").NONE;this.$10={payloadSource:null,feedback:null,oldRange:{},commentIDToFocusOnMount:null,showLoadingUFI:!1,isActiveLoading:{},allSeenActiveLoadDirectionData:{},requestedInitialComments:!1,isHidden:g,commentPermalinks:{},deletedCounts:{},canAddCommentMap:{},canReplyMap:{},defaultRepliesExpandedMap:{},repliesExpandedMap:{},hasPagedToplevel:!1,focusTopLevelComposer:!1,featuredCommentLists:{},featuredCommentIDs:[],translateAllCommentID:null,toplevelPagerClickCounts:{},replyPagerClickCounts:{},loadingVODComments:!1,shouldTranslateAllVisibleComments:!1,commentsLoadingTranslations:{},loadingCommentsForSection:new Set(),authorPinnedCommentID:null};this.$10.oldRange[b("CommentSection").DEFAULT]={offset:0,length:0};this.$10.deletedCounts[b("CommentSection").DEFAULT]={};this.authorProfiles={};this.comments={};this.comments[b("CommentSection").DEFAULT]=[];this.commentsToSection={};this.repliesMap={};this.$13=!0;d.authorpinnedcomments&&(this.authorPinnedComment=d.authorpinnedcomments[0],this.$10.authorPinnedCommentID=d.authorpinnedcomments[0].id);Object.assign(this.authorProfiles,d.profiles);var j=d.feedbacktarget?d.feedbacktarget:d.feedbacktargets&&d.feedbacktargets[0];this.canRenderHeader()||b("Bootloader").loadModules(["UFIActionLinkController"],function(b){return new b(a,c,j)},"UFIController");j&&this.$18(j,c);e=this.getOrderingMode(b("CommentSection").DEFAULT);f=null;var k=null;if(d.featuredcommentlists&&d.featuredcommentlists.comments&&d.featuredcommentlists.comments[c.ftentidentifier])f=d.featuredcommentlists.comments[c.ftentidentifier],this.$10.featuredCommentLists[c.ftentidentifier]=new(b("UFIFeaturedToplevelCommentListImpl"))(c.ftentidentifier,f.values,d.comments);else{g=d.commentlists&&d.commentlists.comments;g=g[c.ftentidentifier];f=g[e]}d.privatecommentlists&&d.privatecommentlists.comments&&d.privatecommentlists.comments[c.ftentidentifier]&&(k=d.privatecommentlists.comments[c.ftentidentifier][b("WebCommentViewOption").TOPLEVEL],this.$10.oldRange[b("CommentSection").FRIENDS]={offset:0,length:0});d.featuredcommentids&&(this.$10.featuredCommentIDs=d.featuredcommentids);this.ranges={};this.replyRanges={};this.commentCounts={};this.commentCounts[c.ftentidentifier]=0;this.privateCommentsCount=0;this.ranges[b("CommentSection").DEFAULT]={};this.ranges[b("CommentSection").DEFAULT][e]=new(b("UFIRange"))(f.range.offset,f.range.length);this.$10.oldRange[b("CommentSection").DEFAULT]={offset:f.range.offset,length:this.comments[b("CommentSection").DEFAULT]&&this.comments[b("CommentSection").DEFAULT].length||0};k&&(this.$10.deletedCounts[b("CommentSection").FRIENDS]={},this.comments[b("CommentSection").FRIENDS]=[],this.ranges[b("CommentSection").FRIENDS]={},this.ranges[b("CommentSection").FRIENDS][b("WebCommentViewOption").TOPLEVEL]=new(b("UFIRange"))(k.range.offset,k.range.length),this.$10.oldRange[b("CommentSection").FRIENDS]={offset:k.range.offset,length:this.comments[b("CommentSection").FRIENDS]&&this.comments[b("CommentSection").FRIENDS].length||0});d.commentlists.replies&&f.values.concat((k||{}).values||[]).concat(this.authorPinnedComment?this.authorPinnedComment.id:[]).forEach(function(a){var c=d.commentlists.replies[a];c&&(this.commentCounts[a]=this.getReplyCommentList(a).getCommentCount(),this.replaceReplyRange(a,new(b("UFIRange"))(c.range.offset,c.range.length)))}.bind(this));d.featuredcommentlists&&d.featuredcommentlists.replies&&f.values.forEach(function(a){var e=d.featuredcommentlists.replies[a];e&&(this.$10.featuredCommentLists[a]=new(b("UFIFeaturedReplyCommentListImpl"))(c.ftentidentifier,a,e.values,d.comments),this.commentCounts[a]=this.getReplyCommentList(a).getCommentCount(),this.replaceReplyRange(a,b("UFIRange").combine(new(b("UFIRange"))(e.range.offset,e.range.length),this.replyRanges[a])))}.bind(this));this.$8=null;this.ufiCentralUpdatesSubscriptions=[b("UFICentralUpdates").subscribe("feedback-updated",function(a,d){a=d.updates;c.ftentidentifier in a&&(this.$10.payloadSource=d.payloadSource,this.fetchAndUpdate(d.payloadSource,b("CommentSection").DEFAULT),k&&this.fetchAndUpdate(d.payloadSource,b("CommentSection").FRIENDS))}.bind(this)),b("UFICentralUpdates").subscribe("update-ranges",function(d,a){d=a.adjustedRanges&&a.adjustedRanges[c.ftentidentifier];d&&b("forEachObject")(d,function(a,b){b=this.getRange(b);b.updateRequestedRange(a.offset,b.length+a.length)}.bind(this))}.bind(this)),b("UFICentralUpdates").subscribe("update-feedback",function(b,a){a.ircid&&this.$19.push(a.ircid)}.bind(this))];this.$20(c);this.onUnloadSubscription=b("Run").onUnload(function(){return this.$21()}.bind(this));this.getToplevelCommentList(b("CommentSection").DEFAULT);k&&this.getToplevelCommentList(b("CommentSection").FRIENDS);b("UFICentralUpdates").handleUpdate(b("FeedbackPayloadSourceType").INITIAL_SERVER,d);if(c.islivestreaming&&c.fluentContentToken!=null){var l=Date.now();b("PinnedCommentEventCreateSubscription").subscribe(String(c.fluentContentToken),function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLivePinnedComment(c,a,Date.now()-l)},"UFIController")})}if(c.isActiveLivingRoom){var m=this.$2.ftentidentifier;b("Bootloader").loadModules(["PinnedStreamingCommentPinSubscription","RelayFBEnvironment","PinnedStreamingCommentUnpinSubscription"],function(a,d,e){a.subscribe(d,{feedback_id:m},{onNext:function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleFeedbackPinnedComment(c,a)},"UFIController")}}),e.subscribe(d,{feedback_id:m},{onNext:function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(a){b("UFISharedDispatcher").dispatch(b("UFIStoryAction").unpinComment(c))},"UFIController")}})},"UFIController")}(c.islivestreaming||c.isActiveLivingRoom)&&b("requireWeak")("UFILiveStreamingComments",function(a){var e=null;d.comments&&d.comments.length>0&&(e=d.comments[d.comments.length-1].fbid);a.start(c.ftentidentifier,j.commentcount,e,c.showLiveVideoAnnoucements,c.showLiveVideoBroadcastingJoinEvents,c.isViewerTheOwner,c.isLiveAudio,c);b("Run").onLeave(function(){return a.stop(c.ftentidentifier)})});!c.lazyFetch&&!this.canRenderHeader()&&this.$22(j);this.$2.fluentContentToken&&b("UFIVideoPlayerRegistry").registerUFIController(this,function(a){c.enableVODStreamingComments&&!this.$10.featuredCommentLists[c.ftentidentifier]&&b("UFIVODStreamingComments").start(this,a),b("UFICommercialBreakAdapter").start(c,a),b("UFIPlayLiveVODHighlightsAdapter").start(c,a),c.islivestreaming&&this.$12&&this.$12.addSubscriptions(a.addListener("stateChange",function(){a.isState("playing")&&this.render()}.bind(this))),b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").foundVideoPlayerController(c,a))}.bind(this),function(){c.enableVODStreamingComments&&b("UFIVODStreamingComments").stop(this.$2.ftentidentifier,c.instanceid),b("UFICommercialBreakAdapter").stop(c.instanceid),b("UFIPlayLiveVODHighlightsAdapter").stop(c.instanceid)}.bind(this))}n.prototype.$20=function(a){this.$1=new(b("SubscriptionsHandler"))(),this.$1.addSubscriptions(b("onEnclosingPageletDestroy")(this.root,function(){this.$17()}.bind(this)),b("Arbiter").subscribe(b("UFIUIEvents").PageCleared,function(){this.$17()}.bind(this)),b("Arbiter").subscribe("ConversationNub/destroy",function(a,c){c.root&&b("DOMQuery").contains(c.root,this.root)&&this.$17()}.bind(this)),b("Arbiter").subscribe("WorkHub/destroy",function(a,c){c.root&&b("DOMQuery").contains(c.root,this.root)&&this.$17()}.bind(this)),b("Arbiter").subscribe("TahoeController/exitTahoe",function(){return b("UFISharedDispatcher").dispatch(b("UFIStoryAction").hideFacecastReplies(a,!0))})),a.viewas&&this.$1.addSubscriptions(b("Arbiter").subscribe("pre_page_transition",function(c,d){a.viewas!==new(b("URI"))(d.to).getQueryData("viewas")&&(b("UFIToplevelPagedCommentList").resetCommentListsForFeedbackTargetID(a.ftentidentifier),b("UFIToplevelStreamedCommentList").resetAllCommentLists(a.ftentidentifier))}))};n.prototype.$18=function(a,c){__p&&__p();this.$23();var d=Date.now(),e=[];(a.ll||this.$2.source===b("FeedbackSourceType").TAHOE)&&e.push(b("UFILikeSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveLike(c.ftentidentifier,a,Date.now()-d)},"UFIController")}));this.$2.source===b("FeedbackSourceType").TAHOE&&this.$2.islivestreaming===!0&&b("gkx")("685345")&&e.push(b("UFIShareCountUpdateSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveShares(c.ftentidentifier,a.live_video_share_count_update_subscribe,Date.now()-d)},"UFIController")}));a.pagelc&&e.push(b("UFIPageCommentSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveComment(c.ftentidentifier,a.page_comment_create_subscribe,Date.now()-d)},"UFIController")}));a.lc&&e.push(b("UFICommentSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveComment(c.ftentidentifier,a.comment_create_subscribe,Date.now()-d)},"UFIController")}));a.lcl&&e.push(b("UFICommentLikeSubscription").subscribe(a.targetfbid,function(a){b("Bootloader").loadModules(["UFISubscriptionUpdates"],function(b){b.handleLiveCommentLike(c.ftentidentifier,a,Date.now()-d)},"UFIController")}));a.lti&&b("UFILiveTypingIndicator").isEnabled()&&e.push(b("UFITypingSubscriptionControllerFactory").forUFIController(a,c));a=new(b("SubscriptionsHandler"))();a.addSubscriptions.apply(a,e.filter(function(a){return!!a}));this.$7=a};n.prototype.$24=function(){var a=b("UFIFeedbackStore").getState()[this.$2.ftentidentifier];a&&this.$18(a,this.$2)};n.prototype.$25=function(){__p&&__p();var a=b("DOMQuery").scry(this.root,"^._5pat");a&&a[0]&&b("ReactDOM").unmountComponentAtNode(a[0]);b("DOM").scry(this.root,"^form ._3csb").forEach(function(a){b("ReactDOM").unmountComponentAtNode(a)});a=this.$4.getHeadRoot();a&&b("ReactDOM").unmountComponentAtNode(a);if(b("UFIRootRegistry").isSnowliftNode(this.$2.rootid)){a=this.$4.getSnowliftActionRoot();a&&b("ReactDOM").unmountComponentAtNode(a)}this.reactRoot&&this.reactRoot.unmount();b("ReactDOM").unmountComponentAtNode(this.root)};n.prototype.unitTestOnlySetFeedbackIntoState=function(a){this.$10.feedback=a};n.prototype.$15=function(){__p&&__p();this.$12||(this.$3=new(b("UFIDispatcher"))(),this.$11={UFICallbackStore:new(b("UFICallbackStore"))(this.$3),UFIReactionStore:new(b("UFIReactionStore"))(this.$3)},this.$12=new(b("SubscriptionsHandler"))(),this.$12.addSubscriptions(this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_LIKE,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.changeCommentLike(a.comment.id,a.like,{source:this.$2.source,target:a.target})}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").CHANGE_REACTION,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.changeCommentReaction(a.comment.id,a.reactionType,{source:this.$2.source,instanceid:this.$2.instanceid},a.target)}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFIStoryActionType").CHANGE_REACTION,function(a){b("Bootloader").loadModules(["UFILiveVideoCommentUtil"],function(b){return b.handleScheduledLiveSubscriberNuxLogic(a)},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").CHANGE_VOTE,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.changeCommentVote(a.comment.id,a.comment.fbid,a.arrowType,a.currentVoteState,{source:this.$2.source,instanceid:this.$2.instanceid},a.target)}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").REMOVE,function(a){b("Bootloader").loadModules(["UFICommentRemoveDialog","UFIUserActions"],function(b,c){return b.show(function(b){c.removeComment(a.comment.id,{source:this.$2.source,oneclick:!1,target:a.target},b),a.onConfirm()}.bind(this))}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").REMOVE_AND_BLOCK,function(a){b("Bootloader").loadModules(["UFICommentRemoveDialog","UFIUserActions"],function(b,c){return b.show(function(){c.removeComment(a.comment.id,{source:this.$2.source,oneclick:!1,target:a.target},!0),a.onConfirm()}.bind(this),!0)}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").DELETE_COMMENT_AND_REMOVE_COMMENTER,function(a){b("Bootloader").loadModules(["UFICommentDeleteAndMemberRemoveDialog","UFIUserActions"],function(b,c){b.showEx({authorName:a.comment.author_name,commentId:a.comment.id,showRemoveContentOptions:a.comment.canseeremovecontentoptions},function(b){c.deleteCommentAndRemoveCommenter(a.comment.id,{source:this.$2.source,oneclick:!1,target:a.target},b.selectedDeletePosts,b.selectedDeleteComments,b.selectedDeclinePendingMembers,b.selectedBlockPermanently,b.selectedApplyToOtherGroups)}.bind(this))}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").MUTE_MEMBER,function(a){__p&&__p();if(!a.comment.ismuted)b("Bootloader").loadModules(["UFIMemberMuteDialog","UFIUserActions"],function(b,c){return b.show(function(b,d){c.muteMember(a.comment.id,{source:this.$2.source,oneclick:!1,target:a.target},b,d)}.bind(this),a.comment.author_name)}.bind(this),"UFIController");else{var c;b("Bootloader").loadModules(["GroupsMemberMuteDurationDefaults"],function(a){c=a.UNMUTE},"UFIController");b("Bootloader").loadModules(["UFIUserActions"],function(b){b.muteMember(a.comment.id,{source:this.$2.source,oneclick:!1,target:a.target},c,null)}.bind(this),"UFIController")}}.bind(this)),this.$11.UFICallbackStore.on("bulk_review",function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.showBulkReview(a.comment.id,{source:this.$2.source,target:a.target})}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_TEXT_DELIGHTS,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.toggleTextDelights(a.comment,{source:this.$2.source,target:a.target},!a.comment.text_delights_are_hidden)}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").TRANSLATE,function(a){this.$10.commentsLoadingTranslations[a.comment.id]||(this.$10.commentsLoadingTranslations[a.comment.id]=!0,b("Bootloader").loadModules(["UFIUserActions"],function(b){b.translateComments(a.comment.ftentidentifier,[a.comment.id],a.trigger,{source:this.$2.source,target:a.target})}.bind(this),"UFIController"),b("UFICommentUtils").shouldShowTranslateAll(this.comments[b("CommentSection").DEFAULT],this.repliesMap,babelHelpers["extends"]({},this.$10.defaultRepliesExpandedMap,this.$10.repliesExpandedMap),this.$10.commentsLoadingTranslations)&&(this.$10.translateAllCommentID=a.comment.id),this.render())}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_MARK_AS_SPAM,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.setHideAsSpam(a.comment.id,a.is_spam,{source:this.$2.source,target:a.target})}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_KEEP_SPAM,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.keepSpam(a.comment.id,{source:this.$2.source,target:a.target})}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").CHANGE_PIN_BY_AUTHOR,function(a){__p&&__p();var c=a.comment;b("Bootloader").loadModules(["UFIReplacePinnedCommentDialog","UFIUserActions"],function(d,e){__p&&__p();if(a.pinnedByAuthor){var f=this.$10.authorPinnedCommentID;f&&f!==c.id?d.show(function(){b("AuthorPinnedCommentLogger").logReplacingPinnedCommentAttempt(c.fbid);var d=b("UFIComments").getComment(f);b("UFIComments").setComment(f,b("ImmutableObject").set(d,{ispinnedbyauthor:!1}));e.authorPinComment(c,a.pinnedByAuthor);this.$10.authorPinnedCommentID=c.id}.bind(this)):(b("AuthorPinnedCommentLogger").logPinningCommentAttempt(c.fbid),e.authorPinComment(c,a.pinnedByAuthor),this.$10.authorPinnedCommentID=c.id)}else b("AuthorPinnedCommentLogger").logUnpinningCommentAttempt(c.fbid),this.$10.authorPinnedCommentID=null,e.authorPinComment(c,a.pinnedByAuthor)}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_APPEAL_SPAM,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.appealSpam(a.comment.id,a.feedback.actorname,{source:this.$2.source,target:a.target})}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_SECURE_ACCOUNT,function(a){b("Bootloader").loadModules(["UFICommentSecureAccountDialog","UFIUserActions"],function(b,c){return b.show(function(){c.secureAccount(a.comment.id,{source:this.$2.source,target:a.target})}.bind(this),a.feedback.actorname)}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFIStoryActionType").CHANGE_ACCEPTED_ANSWER,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.changeAcceptedAnswer(a.comment,a.doAccept)},"UFIController")}),this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_INLINE_BAN,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.banUser(a.comment,a.ownerid,a.is_banned,{source:this.$2.source,target:a.target})}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").TOGGLE_INLINE_STREAM_BAN,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.streamBanUser(a.comment,a.ownerid,a.is_banned,{source:this.$2.source,target:a.target})}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").EMBED,function(a){a=b("XCommentEmbedPluginEmbedAsyncDialogController").getURIBuilder().setString("comment_id",a.comment.id).getURI();new(b("AsyncRequest"))(a).send()}),this.$11.UFICallbackStore.on(b("UFICommentActionType").DELETE_COMMENT_WITH_FEEDBACK,function(a){var c=a.comment;a=b("XGroupsContentRemoveDialogController").getURIBuilder().setFBID("group_id",a.comment.group_id.toString()).setFBID("content_id",a.comment.fbid).setEnum("source","group_mall").getURI();new(b("AsyncRequest"))(a).setMethod("POST").setData({comment_id:c.id.toString(),ft_ent_identifier:c.ftentidentifier,source:this.$2.source,client_id:b("ClientIDs").getNewClientID()}).send()}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").MANAGE_CONSTITUENT_BADGE,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.manageConstituentBadge(a.comment)},"UFIController")}),this.$11.UFICallbackStore.on(b("UFIAddCommentActionType").SUBMIT_NEW,function(a){var c=this.$4.getParentForm();c&&b("UFINewCommentNotifier").onNewComment(c,this.$2,a.comment,a.target,a.replyCommentID,a.timestamp)}.bind(this)),this.$11.UFICallbackStore.on(b("UFIAddCommentActionType").SUBMIT_EDIT,function(a){var c=a.comment,d=a.commentData,e=a.target;!d.visibleValue&&!d.attachedPhoto&&!d.attachedVideo&&!d.attachedFile&&!d.attachedSticker&&!d.attachedShareURL?b("Bootloader").loadModules(["UFICommentRemoveDialog","UFIUserActions"],function(a,b){return a.show(function(){return b.removeComment(c.id,{source:this.$2.source,oneclick:!1,target:e},!1)}.bind(this),!1)}.bind(this),"UFIController"):b("Bootloader").loadModules(["UFIUserActions"],function(a){a.editComment(c.id,d.visibleValue,d.encodedValue,{source:this.$2.source,target:e,attachedPhoto:d.attachedPhoto,attachedVideo:d.attachedVideo,attachedFile:d.attachedFile,attachedSticker:d.attachedSticker,attachedShareURL:d.attachedShareURL,isMarkdown:d.isMarkdown,delightRanges:d.delightRanges})}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFICommentActionType").REMOVE_PREVIEW,function(a){b("Bootloader").loadModules(["UFIUserActions"],function(b){b.removePreview(a.comment,{source:this.$2.source,target:a.target})}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFIAddCommentActionType").RETRY_SUBMIT,function(a){b("Bootloader").loadModules(["UFIRetryActions"],function(b){b.retrySubmit(a.comment,this.$2.source)}.bind(this),"UFIController")}.bind(this)),this.$11.UFICallbackStore.on(b("UFIStoryActionType").PAGE_IN_COMMENTS,function(a){this.$10.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION,this.$26(a.commentID,a.direction,a.nextRange,a.section),this.fetchAndUpdateWithLogs(b("FeedbackPayloadSourceType").USER_ACTION,a.section||b("CommentSection").DEFAULT,a.direction,a.interactionRequestCorrelationID)}.bind(this)),this.$11.UFICallbackStore.on(b("UFIStoryActionType").TOGGLE_REPLIES,function(a){this.$10.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION;a=a.commentID;var c=this.$10.repliesExpandedMap[a];c?(delete this.$10.isActiveLoading[a],this.$10.repliesExpandedMap[a]=!1,this.render()):(this.$10.focusedReplyComposer={replyID:"replycomposer-"+a,initiatorComment:null},this.$26(a,b("UFIPaging").BOTTOM,this.$27(a)),this.fetchAndUpdateWithLogs(b("FeedbackPayloadSourceType").USER_ACTION,this.commentsToSection[a]||b("CommentSection").DEFAULT))}.bind(this)),this.$11.UFICallbackStore.on(b("UFIStoryActionType").SHOW_REPLIES,function(a){this.$10.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION,this.$10.focusedReplyComposer={replyID:"replycomposer-"+a.commentID,initiatorComment:a.initiatorComment},this.$26(a.commentID,b("UFIPaging").BOTTOM,this.$27(a.commentID)),this.fetchAndUpdateWithLogs(b("FeedbackPayloadSourceType").USER_ACTION,this.commentsToSection[a.commentID]||b("CommentSection").DEFAULT)}.bind(this)),this.$11.UFICallbackStore.on(b("UFIStoryActionType").COMMENTS_ARRIVED,function(a){this.$10.loadingCommentsForSection["delete"](a.section),this.$10.payloadSource=a.source,this.$10.showLoadingUFI=!1,this.$10.isActiveLoading={},this.$10.commentIDToFocusOnMount=a.source===b("FeedbackPayloadSourceType").USER_ACTION&&!this.$2.isBroadcasterUFI&&!this.$2.isActiveLivingRoom?this.$28(a.newOffset,a.newLength,a.section):null,this.$10.oldRange[a.section]={offset:a.newOffset,length:a.newLength},this.$29(),this.$10.shouldTranslateAllVisibleComments&&!b("UFIOrderingModeStore").isLiveStreaming(this.$2.instanceid)&&this.$30(),a.interactionRequestCorrelationID&&this.$19.push(a.interactionRequestCorrelationID),this.render(),a.source==b("FeedbackPayloadSourceType").ENDPOINT_COMMENT_FETCH&&(b("Arbiter").inform(b("UFIUIEvents").CommentPager),b("UFIConfig").logCommentLoad&&b("UFICommentLogger").logCommentFetchReceived(this.$2.ftentidentifier,Date.now()))}.bind(this))))};n.prototype.$16=function(){__p&&__p();this.$9=[b("UFISharedDispatcher").register(function(a){__p&&__p();switch(a.type){case b("UFIInstanceActionType").REMOVE:if(a.instanceID!==this.$2.instanceid){a.ftentidentifier===this.$2.ftentidentifier&&this.$24();return}b("UFIRootRegistry").cleanupInstance(a.instanceID);break;case b("UFIInstanceActionType").TOGGLE_COMMENTS:if(a.instanceID!==this.$2.instanceid)return;this.$10.payloadSource=b("FeedbackPayloadSourceType").COLLAPSE_ACTION;this.$10.isHidden=!this.$10.isHidden;this.render();break;case b("UFIInstanceActionType").CHANGE_ORDER_MODE:if(a.instanceID!==this.$2.instanceid)return;this.$10.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION;this.comments[b("CommentSection").FRIENDS]?this.$10.loadingCommentsForSection.add(b("CommentSection").DEFAULT):this.$10.showLoadingUFI=!0;this.render();this.fetchAndUpdate(b("FeedbackPayloadSourceType").USER_ACTION,b("CommentSection").DEFAULT);break;case b("UFIInstanceActionType").REQUESTED_VOD_COMMENTS:if(a.instanceID!==this.$2.instanceid)return;this.$10.loadingVODComments=!0;this.render();break;case b("UFIInstanceActionType").RECEIVED_VOD_COMMENTS:if(a.instanceID!==this.$2.instanceid)return;this.$10.loadingVODComments=!1;this.render();break;case b("UFIStoryActionType").LIVE_PIN_COMMENT:if(a.ftentidentifier!==this.$2.ftentidentifier)return;var c=b("UFIComments").getComment(a.commentID),d=c?c.author:null;d&&b("ShortProfiles").get(d,function(a){this.authorProfiles[d]=a,this.$6||this.render()}.bind(this));break;case b("UFIStoryActionType").LIVE_UNPIN_COMMENT:if(a.ftentidentifier!==this.$2.ftentidentifier)return;this.render();break;case b("UFIStoryActionType").SHOW_COMMENTS:if(a.instanceID!==this.$2.instanceid)return;this.$10.isHidden=!1;this.$10.focusTopLevelComposer=!0;b("CommentPrelude").expand(this.root,!1,"ufi_controller");this.staticUFI&&b("CommentPrelude").expand(this.staticUFI,!1,"ufi.react");this.render();break;case b("UFIInstanceActionType").TRANSLATE_ALL:if(a.instanceID!==this.$2.instanceid)return;if(this.$2.islivestreaming)break;this.$10.shouldTranslateAllVisibleComments=!0;this.$10.translateAllCommentID=null;this.$30();this.render();break;case b("UFIAddCommentActionType").CHANGE_CONTENT:if(a.instanceID!==this.$2.instanceid)return;this.$13=a.text.length===0;break;case b("UFIAddCommentActionType").SUBMIT_NEW:if(a.instanceID!==this.$2.instanceid)return;this.$13=!0;break}}.bind(this))]};n.prototype.getStores=function(){return this.$11};n.prototype.$27=function(a){a=this.commentCounts[a];var c=Math.min(a,this.$2.pagesize);return new(b("UFIRange"))(a-c,c)};n.prototype.$26=function(a,c,d,e){__p&&__p();e=e||this.commentsToSection[a]||b("CommentSection").DEFAULT;var f=this.$10,g=f.isActiveLoading,h=f.allSeenActiveLoadDirectionData,i=f.repliesExpandedMap,j=f.toplevelPagerClickCounts;f=f.replyPagerClickCounts;var k=this.$2.ftentidentifier,l=a!==k;g[a]=c;g=h[a]||{};g[c]=!0;h[a]=g;l?i[a]=!0:this.$10.hasPagedToplevel=!0;if(a==k){c=this.getOrderingMode(e);j[e]=j[e]||{};h=j[e][c]||0;j[e][c]=h+1;this.getRange(e).updateRequestedRange(d.offset,d.length)}else{g=f[a]||0;f[a]=g+1;this.replyRanges[a].updateRequestedRange(d.offset,d.length)}};n.prototype.$31=function(){this.$10.payloadSource=b("FeedbackPayloadSourceType").USER_ACTION,this.$10.showLoadingUFI=!0,this.$10.requestedInitialComments=!0,this.$10.loadingCommentsForSection.add(b("CommentSection").DEFAULT),this.comments[b("CommentSection").FRIENDS]&&this.$10.loadingCommentsForSection.add(b("CommentSection").FRIENDS),this.$10.loadingCommentsForSection.forEach(function(a){var c=this.getToplevelCommentList(a).getCommentCount(),d=Math.min(c,this.$2.numLazyComments||0);b("forEachObject")(this.ranges[a],function(a){a.updateRequestedRange(c-d,d)});this.fetchAndUpdate(b("FeedbackPayloadSourceType").USER_ACTION,a)}.bind(this)),b("UFIFeedbackTargets").getFeedbackTarget(this.$2.ftentidentifier,function(a){this.canRenderHeader()?this.renderHeader(a):this.$22(a)}.bind(this))};n.prototype.$22=function(a){this.shouldShowCommentOrderingModeSelector(a)&&b("DOM").scry(this.root,"^form ._3csb").slice(0,1).forEach(function(c){b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",null),bootloadLoader:b("JSResource")("UFIOrderingModeSelectorContainer.react").__setRef("UFIController"),contextArgs:this.$2,feedback:a})),c)}.bind(this))};n.prototype.$29=function(){if(Object.keys(this.$10.commentsLoadingTranslations).length==0)return;this.comments[b("CommentSection").DEFAULT].concat(this.comments[b("CommentSection").FRIENDS]||[]).forEach(function(a){this.$10.commentsLoadingTranslations[a.id]&&!!a.translationdata&&delete this.$10.commentsLoadingTranslations[a.id]}.bind(this));Object.keys(this.repliesMap).forEach(function(a){a=this.repliesMap[a];a.forEach(function(a){this.$10.commentsLoadingTranslations[a.id]&&!!a.translationdata&&delete this.$10.commentsLoadingTranslations[a.id]}.bind(this))}.bind(this))};n.prototype.$30=function(){__p&&__p();var a=this.comments[b("CommentSection").DEFAULT].concat(this.comments[b("CommentSection").FRIENDS]||[]).filter(function(a){return this.$32(a)}.bind(this)).map(function(a){return a.id}),c=babelHelpers["extends"]({},this.$10.defaultRepliesExpandedMap,this.$10.repliesExpandedMap),d=[];Object.keys(this.repliesMap).filter(function(a){return c[a]}).forEach(function(a){d=d.concat(this.repliesMap[a])}.bind(this));a=a.concat(d.filter(function(a){return this.$32(a)}.bind(this)).map(function(a){return a.id}));a.length>0&&(a.forEach(function(a){return this.$10.commentsLoadingTranslations[a]=!0}.bind(this)),b("Bootloader").loadModules(["UFIUserActions"],function(c){c.translateComments(this.$2.ftentidentifier,a,b("TranslationTrigger").TRANSLATE_ALL,{source:this.$2.source})}.bind(this),"UFIController"))};n.prototype.$32=function(a){return a.istranslatable&&!a.translationdata&&!this.$10.commentsLoadingTranslations[a.id]};n.prototype.canRenderHeader=function(){return!!this.$4.getHeadRoot()};n.prototype.renderHeader=function(a){if(!this.canRenderHeader())return;b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,b("React").createElement(b("UFIActionHeader.react"),{contextArgs:this.$2,dispatcher:this.$3,feedbacktarget:a,stores:this.$11})),this.$4.getHeadRoot());var c=b("UFIRootRegistry").isSnowliftNode(this.$2.rootid);c&&this.$4.getSnowliftActionRoot()&&b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,b("React").createElement(b("UFIDispatcherContext.react"),{dispatcher:this.$3,stores:this.$11},b("React").createElement(b("UFIActionLinks.react"),{contextArgs:this.$2,feedbacktarget:a,hideActorSelector:!0,hideBling:!0}))),this.$4.getSnowliftActionRoot())};n.prototype.shouldComponentUpdate=function(){if(this.$2.islivestreaming&&(this.$10.payloadSource===b("FeedbackPayloadSourceType").STREAMING||this.$10.payloadSource===b("FeedbackPayloadSourceType").LIVE_SEND)){var a=b("UFIVideoPlayerRegistry").getAvailableVideoPlayerController(this.$2.instanceid);a=a?a.isState("playing")&&!a.getOption("WatchAndScroll","isActive"):!1;var c=b("UFICommentVisibilityStore").getVisibility(b("UFICommentVisibilityStore").getState(),this.$2)===b("UFIVisibility").VISIBLE;return a||c}return!0};n.prototype.render=function(){__p&&__p();if(!this.shouldComponentUpdate())return;if(this.$10.showLoadingUFI||b("UFIOrderingModeStore").isLiveStreaming(this.$2.instanceid)&&b("UFIThreadedFacecastCommentsStore").getCommentID(this.$2.instanceid)==null&&this.$10.loadingVODComments){b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,this.$33()),this.root);return}this.$10.feedback||h(0,5267);var a=this.$10.feedback,c=a.reactionsentences,d=a.likesentences;a=a.replysocialsentencemaxreplies;c=this.comments[b("CommentSection").DEFAULT].length||this.comments[b("CommentSection").FRIENDS]&&this.comments[b("CommentSection").FRIENDS].length||!b("isEmpty")((c||d).current);d=this.$10.payloadSource;c&&k(d)&&this.$2.feedbackMode!==b("UFIFeedbackMode").NEVER&&(this.$10.isHidden=!1,b("CommentPrelude").expand(this.root,!1,"ufi_controller"));if(this.$2.disableCSSHiding&&this.$10.isHidden){b("ReactDOM").unmountComponentAtNode(this.root);return}if(this.$2.lazyFetch&&!this.$10.requestedInitialComments){b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,this.$33()),this.root);this.$31();return}c=this.getRange(b("CommentSection").DEFAULT);this.$8===null&&(this.$8=c.getOffset()+c.getLength()-1);a=a||-1;var e={};e[this.$2.ftentidentifier]=new(b("UFIRange"))(c.offset,c.length).updateRequestedRange(c.requestedOffset,c.requestedLength);for(var f in this.replyRanges)e[f]=new(b("UFIRange"))(this.replyRanges[f].offset,this.replyRanges[f].length).updateRequestedRange(this.replyRanges[f].requestedOffset,this.replyRanges[f].requestedLength);var g=babelHelpers["extends"]({},this.$10.defaultRepliesExpandedMap,this.$10.repliesExpandedMap),i=!!this.$10.featuredCommentLists[this.$2.ftentidentifier];c=b("UFIOrderingModeStore").isLiveStreaming(this.$2.instanceid)?!0:this.getToplevelCommentList(b("CommentSection").DEFAULT).getClientHasAll()&&c.offset===0&&c.length===this.getToplevelCommentList(b("CommentSection").DEFAULT).getCommentCount();var j=this.$10.focusTopLevelComposer,l=this.$34(d),m=this.getOrderingMode(b("CommentSection").DEFAULT),n=this.comments[b("CommentSection").DEFAULT].concat(this.authorPinnedComment?this.authorPinnedComment:[]).filter(function(a){return a.id!==this.$10.authorPinnedCommentID}.bind(this)),o=this.comments[b("CommentSection").DEFAULT].concat(this.authorPinnedComment?this.authorPinnedComment:[]).filter(function(a){return a.id===this.$10.authorPinnedCommentID}.bind(this));o=o.length&&o[0];var p=this.comments[b("CommentSection").FRIENDS],q=(this.ranges[b("CommentSection").FRIENDS]||{})[b("WebCommentViewOption").TOPLEVEL],r=b("React").createElement(b("UFIDispatcherContext.react"),{dispatcher:this.$3,stores:this.$11},b("React").createElement(b("StaticUFI.react"),{ref:function(a){this.staticUFI=a}.bind(this),feedback:this.$10.feedback,contextArgs:this.$2,repliesMap:this.repliesMap,commentCounts:this.commentCounts,deletedCounts:this.$10.deletedCounts[b("CommentSection").DEFAULT],privateDeletedCounts:this.$10.deletedCounts[b("CommentSection").FRIENDS],availableComments:n,availablePrivateComments:p,source:this.$2.source,payloadSource:d,ranges:e,authorProfiles:this.authorProfiles,loggingOffset:this.$8,replySocialSentenceMaxReplies:a,orderingMode:m,hideOrderingModeSelector:i,commentPermalinks:this.$10.commentPermalinks,canAddCommentMap:this.$10.canAddCommentMap,canReplyMap:this.$10.canReplyMap,focusTopLevelComposer:j,focusReply:l,isActiveLoading:this.$10.isActiveLoading,allSeenActiveLoadDirectionData:this.$10.allSeenActiveLoadDirectionData,repliesExpandedMap:g,hasPagedToplevel:this.$10.hasPagedToplevel,commentIDToFocusOnMount:this.$10.commentIDToFocusOnMount,hideToplevelPager:c,featuredCommentIDs:this.$10.featuredCommentIDs,loadingTranslationsMap:this.$10.commentsLoadingTranslations,translateAllCommentID:this.$10.translateAllCommentID,privateCommentsCount:this.privateCommentsCount,privateCommentsRange:q,loadingCommentsForSection:this.$10.loadingCommentsForSection,authorPinnedComment:o}));if(this.$2.enableAsyncFacecastUFI){var s=this.reactRoot?this.reactRoot:this.reactRoot=b("ReactDOM").unstable_createRoot(this.root);d===b("FeedbackPayloadSourceType").INITIAL_SERVER?b("ReactDOM").flushSync(function(){s.render(r,this.componentDidRender)}.bind(this)):s.render(r,this.componentDidRender)}else b("ReactDOM").render(b("React").createElement(b("UFIAsyncWrapper"),null,r),this.root,this.componentDidRender);b("LiveTimer").updateTimeStamps();n=this.$4.getParentForm();n&&b("Arbiter").inform(b("UFIUIEvents").Changed,{form:n});d!=b("FeedbackPayloadSourceType").INITIAL_SERVER&&b("Arbiter").inform("reflow");this.$10.focusedReplyComposer=null;this.$10.focusTopLevelComposer=!1};n.prototype.$35=function(a){return this.commentsToSection[a]||b("CommentSection").DEFAULT};n.prototype.$34=function(a){if(a===b("FeedbackPayloadSourceType").INITIAL_SERVER&&this.$10.feedback&&this.$10.feedback.permalinkcommentid)return{replyID:"replycomposer-"+this.$10.feedback.permalinkcommentid};else if(this.$10.focusedReplyComposer)return this.$10.focusedReplyComposer;return null};n.prototype.$28=function(a,c,d){var e=(this.$10.oldRange||{})[b("CommentSection").DEFAULT];if(e&&(e.offset!=a||e.length!=c)){a=a<e.offset?e.length:0;if(a<c)return this.comments[d][a].id}return this.$10.commentIDToFocusOnMount};n.prototype.$36=function(a,b,c){if(a&&b.id===a.permalinkcommentid)return!0;if(c>1)return!0;if(c>0&&b.interestingReplyOffset===void 0)return!0;b=a&&b.author===a.viewerid;return b&&c==1?!0:!1};n.prototype.getNewRange=function(a,c,d,e){if(b("UFIOrderingModeStore").isLiveStreaming(this.$2.instanceid))return new(b("UFIRange"))(0,c.feedcarded?4:50);else{c=e===b("CommentSection").FRIENDS?this.privateCommentsCount:this.commentCounts[c.ftentidentifier];return j(this.getRange(e),c,d,a)}};n.prototype.getNewReplyRange=function(a,c,d){var e=c.id;if(this.replyRanges[e])return j(this.getReplyRange(e),this.commentCounts[e],d,a);else if(c.interestingReplyOffset!==void 0)return new(b("UFIRange"))(c.interestingReplyOffset,1);else{e=this.$10.feedback&&this.$10.feedback.isranked;a=e?0:Math.min(d,2);return new(b("UFIRange"))(0,a)}};n.prototype.fetchAndUpdateWithLogs=function(a,b,c,d){a===this.$10.payloadSource||h(0,5268),this.$37(a,!0,b,c,d)};n.prototype.fetchAndUpdate=function(a,b,c,d){a===this.$10.payloadSource||h(0,5269),this.$37(a,!1,b,c,d)};n.prototype.$38=function(a,b,c,d){var e=this.getOrderingMode(b);b=(this.$10.toplevelPagerClickCounts[b]||{})[e]||0;return{numPagerClicks:a?b:null,viewAs:this.$2.viewas,feedContext:this.$2.feedcontext,feedbackSource:this.$2.source,streamingOrderReversed:this.$2.streamingCommentOrderReversed,direction:c,interactionRequestCorrelationID:d}};n.prototype.$39=function(a,b){return{numPagerClicks:b?this.$10.replyPagerClickCounts[a]||0:null,viewAs:this.$2.viewas,feedContext:this.$2.feedcontext}};n.prototype.$40=function(a,c){__p&&__p();var d=this.$10.feedback,e=this.getToplevelCommentList(c),f=this.getNewRange(a,this.$2,e.getCommentCount(),c);e=b("UFIFetcher").fetchCommentsOrThrow(e,f,this.$38(!1,c));this.$41(f,e,c);var g=b("UFICommentFilters").getAuthors(e);c===b("CommentSection").DEFAULT&&this.authorPinnedComment&&(e=[].concat(e,[this.authorPinnedComment]));e.forEach(function(d){var e=d.id,f=this.getReplyCommentList(e),c=this.getNewReplyRange(a,d,f.getCommentCount());f=b("UFIFetcher").fetchCommentsOrThrow(f,c,this.$39(e,!1));g.push.apply(g,b("UFICommentFilters").getAuthors(f));this.$42(c,d,f)}.bind(this));d&&g.push.apply(g,b("UFIFeedbackFilters").getRequestedIDs(d));f=b("UFILivePinnedCommentStore").getPinnedCommentAuthorID(this.$2.ftentidentifier);f&&g.push(f);if(d&&d.acceptedanswer){c=b("UFIComments").getComment(d.acceptedanswer);c&&c.author&&g.push(c.author)}Object.assign(this.authorProfiles,b("ShortProfiles").getMultiNow(g))};n.prototype.$37=function(a,c,d,e,f){__p&&__p();var g=b("UFIFeedbackTargets").getFeedbackTargetIfExists(this.$2.ftentidentifier);if(!g){b("FBLogger")("ufi").warn("Feedback target %s not present while rendering UFI with source %s",this.$2.ftentidentifier,a);return}this.$10.feedback=g;k(a)&&this.render();this.canRenderHeader()&&this.renderHeader(g);this.$10.isHidden||(a===b("FeedbackPayloadSourceType").INITIAL_SERVER?(this.$40(a,d),this.$3.dispatch(b("UFIStoryAction").commentsArrived(this.$2,this.getRange(d).getOffset(),this.comments[d].length,a,d,f,this.$43()))):b("promiseDone")(this.fetchAllComments(a,c,d,e,f),function(){return this.$3.dispatch(b("UFIStoryAction").commentsArrived(this.$2,this.getRange(d).getOffset(),this.comments[d].length,a,d,f))}.bind(this)))};n.prototype.fetchAllComments=function(a,c,d,e,f){__p&&__p();return b("Promise").resolve().then(function(){return this.fetchCommentsForFeedbackTarget(a,c,d,e,f).then(function(e){d===b("CommentSection").DEFAULT&&this.authorPinnedComment&&(e=[].concat(e,[this.authorPinnedComment]));var f=b("UFICommentFilters").getAuthors(e);return!this.$10.feedback||!this.$10.feedback.isthreaded||!e.length?f:this.fetchAllReplyIDsForComments(e,a,c).then(function(a){return f.concat(a)})}.bind(this)).then(function(a){return!this.$10.feedback?[]:b("UFIFeedbackFilters").getRequestedIDs(this.$10.feedback).concat(a)}.bind(this))}.bind(this)).then(function(a){var c=this.$10.feedback,d=b("UFILivePinnedCommentStore").getPinnedCommentAuthorID(this.$2.ftentidentifier);d&&a.push(d);if(c&&c.acceptedanswer){d=b("UFIComments").getComment(c.acceptedanswer);d&&d.author&&a.push(d.author)}return b("UFIFetcher").fetchShortProfiles(a)}.bind(this)).then(function(a){return Object.assign(this.authorProfiles,a)}.bind(this))};n.prototype.fetchCommentsForFeedbackTarget=function(a,c,d,e,f){var g=this.getToplevelCommentList(d).getCommentCount(),h=this.getNewRange(a,this.$2,g,d);return b("UFIFetcher").fetchComments(this.getToplevelCommentList(d),h,this.$38(c,d,e,f)).then(function(a){this.$41(h,a,d);return a}.bind(this))};n.prototype.$41=function(a,c,d){__p&&__p();var e=this.getToplevelCommentList(d),f=this.$2.ftentidentifier,g=b("gkx")("678267")||b("gkx")("678268"),h=this.$10,i=h.deletedCounts,j=h.canAddCommentMap,k=h.canReplyMap,l=h.commentPermalinks;this.replaceRange(a,d);this.comments[d]=c;d===b("CommentSection").DEFAULT?this.commentCounts[f]=e.getCommentCount():this.privateCommentsCount=e.getCommentCount();c.forEach(function(a){var c=a.id,f=a.cancomment,h=a.fbid,i=a.voteEnabled,j=a.voteCount;a=a.voteState;k[c]=f;l[c]=e.getPermalinkForComment(c);this.commentsToSection[c]=d;g&&i&&h&&this.$3.dispatch(b("UFICommentAction").updateVoteCountAndState(this.$2,h,j?j:0,a?a:b("UFIConstants").UFICommentVoteType.NONE))}.bind(this));i[d]||(i[d]={});i[d][f]=e.getDeletedCount();j[f]=!this.$10.featuredCommentLists[f]};n.prototype.fetchRepliesForComment=function(a,c,d){var e=a.id,f=this.getReplyCommentList(e).getCommentCount(),g=this.getNewReplyRange(c,a,f);return b("UFIFetcher").fetchComments(this.getReplyCommentList(e),g,this.$39(e,d)).then(function(b){this.$42(g,a,b);return b}.bind(this))};n.prototype.$42=function(a,c,d){__p&&__p();var e=c.id,f=this.getReplyCommentList(e),g=this.$10,h=g.deletedCounts,i=g.canAddCommentMap,j=g.featuredCommentLists,k=g.defaultRepliesExpandedMap,l=g.feedback,m=g.canReplyMap,n=g.commentPermalinks;this.replaceReplyRange(e,a);this.repliesMap[e]=d;this.commentCounts[e]=f.getCommentCount();h[b("CommentSection").DEFAULT][e]=f.getDeletedCount();i[e]=!j[e];k[e]=this.$36(l,c,d.length);d.forEach(function(a){var b=a.id;a=a.cancomment;m[b]=a;n[b]=f.getPermalinkForComment(b)})};n.prototype.$43=function(){var a;return this.$2.islivestreaming&&((a=this.$2)!=null?(a=a.liveVideoThreadedCommentsConfig)!=null?a.enable_replies:a:a)?(a=this.$10)!=null?(a=a.feedback)!=null?a.permalinkcommentid:a:a:null};n.prototype.fetchAllReplyIDsForComments=function(a,c,d){a=new(b("Promise").all)(a.map(function(a){return this.fetchRepliesForComment(a,c,d).then(function(a){return b("UFICommentFilters").getAuthors(a)})}.bind(this)));return a.then(b("flattenArray"))};n.prototype.getToplevelCommentList=function(a){var c=this.$2;if(this.$10.featuredCommentLists[c.ftentidentifier])return this.$10.featuredCommentLists[c.ftentidentifier];if(b("UFIOrderingModeStore").isLiveStreaming(this.$2.instanceid))return b("UFIToplevelStreamedCommentList").getCommentList(c.ftentidentifier,c.islivestreaming?b("UFIToplevelStreamedCommentList").GLOBAL_ID:c.instanceid);var d=this.getOrderingMode(a);return b("UFIToplevelPagedCommentList").getCommentList(c.ftentidentifier,d,a)};n.prototype.getReplyCommentList=function(a){if(a in this.$10.featuredCommentLists)return this.$10.featuredCommentLists[a];var c=this.commentsToSection[a]||b("CommentSection").DEFAULT;c=this.getOrderingMode(c);return b("UFIReplyCommentList").getCommentList(this.$2.ftentidentifier,a,c)};n.prototype.getRange=function(a){var c=this.getOrderingMode(a);this.ranges[a]=this.ranges[a]||{};if(!(c in this.ranges[a])){var d=this.getToplevelCommentList(a).getCommentCount(),e=Math.min(d,this.$2.defaultNumCommentsToExpand);this.ranges[a][c]=new(b("UFIRange"))(d-e,e)}return this.ranges[a][c]};n.prototype.replaceRange=function(a,b){var c=this.getOrderingMode(b);this.ranges[b]=this.ranges[b]||{};this.ranges[b][c]=a};n.prototype.getReplyRange=function(a){a in this.replyRanges||(this.replyRanges[a]=new(b("UFIRange"))());return this.replyRanges[a]};n.prototype.replaceReplyRange=function(a,b){this.replyRanges[a]=b};n.prototype.$17=function(){this.$6=!0,this.$25(),this.$44()};n.prototype.$44=function(){this.$45(),this.$46(),this.$23(),this.$47(),this.$48(),this.$49(),this.$50(),this.onUnloadSubscription&&this.onUnloadSubscription.remove(),b("UFISharedDispatcher").dispatch(b("UFIInstanceAction").remove(this.$2))};n.prototype.$21=function(){this.$23()};n.prototype.$50=function(){var a=this.$2;b("UFIPlayLiveVODHighlightsAdapter").stop(a.instanceid)};n.prototype.$49=function(){var a=this.$2;b("UFICommercialBreakAdapter").stop(a.instanceid)};n.prototype.$48=function(){var a=this.$2;b("UFIVODStreamingComments").stop(a.ftentidentifier,a.instanceid)};n.prototype.$45=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(a){return a&&b("UFICentralUpdates").unsubscribe(a)})};n.prototype.$46=function(){this.$1&&this.$1.release()};n.prototype.$23=function(){this.$7&&this.$7.release()};n.prototype.$47=function(){this.$12&&(this.$12.release(),this.$12=null),this.$9.forEach(function(a){return b("UFISharedDispatcher").unregister(a)})};n.prototype.$33=function(){var a=this.$2;return b("React").createElement(b("UFIDispatcherContext.react"),{dispatcher:this.$3,stores:this.$11},b("React").createElement(b("StaticUFI.react"),{feedback:this.$10.feedback,id:this.$2.ftentidentifier,contextArgs:a,commentCounts:this.commentCounts,loadingComments:!0}))};n.prototype.shouldShowCommentOrderingModeSelector=function(a){var c=this.getToplevelCommentList(b("CommentSection").DEFAULT).getCommentCount()||a.commentcount||0;return a.orderingmodes&&c>=b("UFIConstants").minCommentsForOrderingModeSelector&&!this.$10.featuredCommentLists[this.$2.ftentidentifier]};e.exports=n}),null);