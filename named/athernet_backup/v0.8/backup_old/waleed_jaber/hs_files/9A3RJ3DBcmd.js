if (self.CavalryLogger) { CavalryLogger.start_js(["mdWHE"]); }

__d("MessengerRTCIncomingDialog.react",["cx","fbt","ImageBlock.react","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogs.bs","MessengerSpinner.react","React","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingSurface","RTWebStrings","RTWebUserActionLogger","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactImageReact.bs").jsComponent,j=b("MessengerDialogBodyReact.bs").jsComponent,k=b("MessengerDialogHeaderReact.re").component;a=b("React").PropTypes;var l=50;c=b("React").createClass({displayName:"MessengerRTCIncomingDialog",propTypes:{callID:a.string.isRequired,callerParticipant:a.object.isRequired,onAccept:a.func.isRequired,onDecline:a.func.isRequired,isVideoCall:a.bool.isRequired},componentDidMount:function(){b("RTWebUserActionLogger").logPreCallImpression({callID:this.props.callID,callType:b("RTWebLoggingCallType").P2P,surface:b("RTWebLoggingSurface").INCOMING_DIALOG,mediaType:b("RTWebUserActionLogger").getMediaType(!this.props.isVideoCall)})},render:function(){return b("React").createElement(b("MessengerDialog.react"),{layerHideOnBlur:!1,shown:!0,onToggle:this._handleToggle,width:400},b("React").createElement(k,{autofocus:!0},this._dialogTitle()),b("React").createElement(j,null,this._renderDialogBody()),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Decline"),onClick:this._handleDecline,dataTestID:b("VideoCallWebDriverIDs").IGNORE_CALL_BUTTON,type:"secondary"}),b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Accept"),onClick:this._handleAccept,dataTestID:b("VideoCallWebDriverIDs").ANSWER_CALL_BUTTON,type:"primary"})))},_dialogTitle:function(){return this.props.isVideoCall?b("RTWebStrings").incomingVideoChat:h._("Incoming call")},_renderDialogBody:function(){var a=this.props.callerParticipant;return!a?b("React").createElement(b("MessengerSpinner.react"),null):b("React").createElement(b("ImageBlock.react"),null,b("React").createElement(i,{isMessengerUser:a.is_messenger_user,size:l,src:a.big_image_src||a.image_src}),b("React").createElement("div",{className:"_2n1r"},b("React").createElement("div",{className:"_2n1s"},h._("{caller name} is calling you.",[h._param("caller name",a.name)])),b("React").createElement("div",{className:"_2n1t"},h._("The call will start as soon as you answer."))))},_handleDecline:function(a){a.preventDefault(),b("MessengerDialogs.bs").removeAllDialogs(),this.props.onDecline(),b("RTWebUserActionLogger").logPreCallClick({callID:this.props.callID,callType:b("RTWebLoggingCallType").P2P,surface:b("RTWebLoggingSurface").INCOMING_DIALOG,component:b("RTWebLoggingComponent").DECLINE,mediaType:b("RTWebUserActionLogger").getMediaType(!this.props.isVideoCall)})},_handleAccept:function(a){a.preventDefault(),b("MessengerDialogs.bs").removeAllDialogs(),this.props.onAccept(this.props.isVideoCall),b("RTWebUserActionLogger").logPreCallClick({callID:this.props.callID,callType:b("RTWebLoggingCallType").P2P,surface:b("RTWebLoggingSurface").INCOMING_DIALOG,component:b("RTWebLoggingComponent").ACCEPT,mediaType:b("RTWebUserActionLogger").getMediaType(!this.props.isVideoCall)})},_handleToggle:function(a){a||(b("MessengerDialogs.bs").removeAllDialogs(),this.props.onDecline())}});e.exports=c}),null);
__d("RTCAcceptButton.react",["cx","fbt","MessengerDialogs.bs","React","RTCCallControlsButtonWithLabel.react","RTCCallStore","RTCUICameraIcon.react","RTCUIPhoneIcon.react","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("MessengerDialogs.bs").removeAllDialogs();this.props.onAccept();var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logPreCallClick(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),surface:b("RTWebLoggingSurface").INCOMING_DIALOG,component:b("RTWebLoggingComponent").ACCEPT}))}.bind(this),c}a.prototype.componentDidMount=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logPreCallImpression(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").ACCEPT,surface:b("RTWebLoggingSurface").INCOMING_DIALOG}))};a.prototype.render=function(){return b("React").createElement(b("RTCCallControlsButtonWithLabel.react"),{className:"_6jvd icon-40","data-testid":b("VideoCallWebDriverIDs").ANSWER_CALL_BUTTON,onClick:this.$1,shouldThrottle:!1,isVideoCall:this.props.isVideoCall,label:h._("Accept"),title:h._("Accept")},this.props.isVideoCall?b("React").createElement(b("RTCUICameraIcon.react"),null):b("React").createElement(b("RTCUIPhoneIcon.react"),{variant:"start call"}))};e.exports=a}),null);
__d("RTCDeclineButton.react",["cx","fbt","MessengerDialogs.bs","React","RTCCallControlsButtonWithLabel.react","RTCCallStore","RTCUIXIcon.react","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(){b("MessengerDialogs.bs").removeAllDialogs(),this.props.onClick(),b("RTWebUserActionLogger").logPreCallClick({callID:b("RTCCallStore").getState().callInfo.callID,callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),surface:b("RTWebLoggingSurface").INCOMING_DIALOG,component:b("RTWebLoggingComponent").DECLINE})}.bind(this),c}a.prototype.componentDidMount=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logPreCallImpression(babelHelpers["extends"]({},a,{callType:b("RTWebUserActionLogger").getCallType(!this.props.isP2P),component:b("RTWebLoggingComponent").DECLINE,surface:b("RTWebLoggingSurface").INCOMING_DIALOG}))};a.prototype.render=function(){return b("React").createElement(b("RTCCallControlsButtonWithLabel.react"),{className:b("joinClasses")("_6jtv icon-40 icon-1",this.props.className),"data-testid":b("VideoCallWebDriverIDs").IGNORE_CALL_BUTTON,onClick:this.$1,label:h._("Decline"),title:h._("Decline")},b("React").createElement(b("RTCUIXIcon.react"),null))};e.exports=a}),null);
__d("RTCIncomingDialog.react",["cx","fbt","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogs.bs","MessengerSpinner.react","React","RTCAcceptButton.react","RTCDeclineButton.react","RTWebClientFeatureGating","RTWebLoggingCallType","RTWebLoggingSurface","RTWebUserActionLogger"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactImageReact.bs").jsComponent,j=b("MessengerDialogBodyReact.bs").jsComponent;a=b("React").PropTypes;var k=50;c=b("React").createClass({displayName:"RTCIncomingDialog",propTypes:{callID:a.string.isRequired,callerParticipant:a.object.isRequired,onAccept:a.func.isRequired,onDecline:a.func.isRequired,isVideoCall:a.bool.isRequired},componentDidMount:function(){b("RTWebUserActionLogger").logPreCallImpression({callID:this.props.callID,callType:b("RTWebLoggingCallType").P2P,surface:b("RTWebLoggingSurface").INCOMING_DIALOG,mediaType:b("RTWebUserActionLogger").getMediaType(!this.props.isVideoCall)})},render:function(){return b("React").createElement(b("MessengerDialog.react"),{className:"_6jvl",layerHideOnBlur:!1,onToggle:this._handleToggle,width:260},b("React").createElement(j,{className:"autofocus"},this._renderDialogBody()),b("React").createElement("div",{className:(this.props.isVideoCall&&b("RTWebClientFeatureGating").answerCallWithThreeButtons()?"_6nqr":"")+(!b("RTWebClientFeatureGating").answerCallWithThreeButtons()||!this.props.isVideoCall?" _6jvm":"")},b("React").createElement(b("RTCDeclineButton.react"),{isP2P:!0,onClick:this.props.onDecline}),b("RTWebClientFeatureGating").answerCallWithThreeButtons()||!this.props.isVideoCall?b("React").createElement(b("RTCAcceptButton.react"),{onAccept:function(){return this.props.onAccept(!1)}.bind(this),isVideoCall:!1,isP2P:!0}):null,this.props.isVideoCall?b("React").createElement(b("RTCAcceptButton.react"),{onAccept:function(){return this.props.onAccept(!0)}.bind(this),isVideoCall:!0,isP2P:!0}):null))},_dialogTitle:function(){return this.props.isVideoCall?h._("Incoming video chat"):h._("Incoming call")},_renderDialogBody:function(){var a=this.props.callerParticipant;return!a?b("React").createElement(b("MessengerSpinner.react"),null):b("React").createElement("div",null,b("React").createElement(i,{className:"_6jvn",isMessengerUser:a.is_messenger_user,size:k,src:a.big_image_src||a.image_src}),b("React").createElement("div",{className:"_6jvo"},b("React").createElement("div",{className:"_6jvp"},h._("{caller name}",[h._param("caller name",a.name)])),this._dialogTitle()))},_handleToggle:function(a){a||(b("MessengerDialogs.bs").removeAllDialogs(),this.props.onDecline())}});e.exports=c}),null);
__d("MessengerRTCIncomingDialogController",["EventEmitter","FBRTCConstants","FBRTCExperiment","FBRTCSoundController","MercuryIDs","MessengerBrowserAlerts","MessengerDialogs.bs","MessengerParticipants.bs","MessengerRTCIncomingDialog.react","React","RTCIncomingDialog.react","RTWebClientFeatureGating","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=7e4;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(a,b){g.constructor.call(this),this.$MessengerRTCIncomingDialogController1=a,this.$MessengerRTCIncomingDialogController2=b,this.$MessengerRTCIncomingDialogController3=null,this.$MessengerRTCIncomingDialogController4=!1}a.getCallEndReasonForNewRequest=function(){return null};a.prototype.showIncomingDialog=function(a){this.$MessengerRTCIncomingDialogController5=b("setTimeoutAcrossTransitions")(this.$MessengerRTCIncomingDialogController6.bind(this),h);var c=a===b("FBRTCConstants").IncomingCallDialogTypes.VIDEO;b("FBRTCSoundController").playIncomingRingtone(this.$MessengerRTCIncomingDialogController2,this.$MessengerRTCIncomingDialogController1.toString(),{loop:!0,isP2P:!0});b("MessengerParticipants.bs").get(b("MercuryIDs").getParticipantIDFromUserID(this.$MessengerRTCIncomingDialogController1.toString()),function(a){var d=b("RTWebClientFeatureGating").useNewIncomingCallDialog()?b("React").createElement(b("RTCIncomingDialog.react"),{callID:this.$MessengerRTCIncomingDialogController2.toString(),callerParticipant:a,onAccept:this.$MessengerRTCIncomingDialogController7.bind(this),onDecline:this.$MessengerRTCIncomingDialogController8.bind(this),isVideoCall:c}):b("React").createElement(b("MessengerRTCIncomingDialog.react"),{callID:this.$MessengerRTCIncomingDialogController2.toString(),callerParticipant:a,onAccept:this.$MessengerRTCIncomingDialogController7.bind(this),onDecline:this.$MessengerRTCIncomingDialogController8.bind(this),isVideoCall:c});b("MessengerDialogs.bs").showDialog(function(){return d})}.bind(this));this.$MessengerRTCIncomingDialogController9()&&this.$MessengerRTCIncomingDialogController10(c)};a.prototype.$MessengerRTCIncomingDialogController9=function(){return!b("FBRTCExperiment").getIncomingCallExperiments().getBool("skip_desktop_notification",!1)};a.prototype.$MessengerRTCIncomingDialogController10=function(a){a={callID:this.$MessengerRTCIncomingDialogController2.toString(),peerID:this.$MessengerRTCIncomingDialogController1,onNotificationClicked:this.$MessengerRTCIncomingDialogController7.bind(this,a),isVideoCall:a,isGroupCall:!1};b("MessengerBrowserAlerts").showRTCNotification(a,function(a){this.$MessengerRTCIncomingDialogController3=a,this.$MessengerRTCIncomingDialogController4&&this.$MessengerRTCIncomingDialogController11()}.bind(this))};a.prototype.cancel=function(){this.$MessengerRTCIncomingDialogController5&&b("clearTimeout")(this.$MessengerRTCIncomingDialogController5),b("MessengerDialogs.bs").removeDialog(),b("FBRTCSoundController").stopIncomingRingtone(),this.$MessengerRTCIncomingDialogController11(),this.$MessengerRTCIncomingDialogController4=!0};a.prototype.isForPeer=function(a){return this.$MessengerRTCIncomingDialogController1===a};a.prototype.isForCall=function(a){return this.$MessengerRTCIncomingDialogController2===a};a.prototype.isForPeerAndCall=function(a,b){return this.$MessengerRTCIncomingDialogController1===a&&this.$MessengerRTCIncomingDialogController2===b};a.prototype.$MessengerRTCIncomingDialogController7=function(a){this.cancel(),this.emit("answerCall",this.$MessengerRTCIncomingDialogController2.toString(),a)};a.prototype.$MessengerRTCIncomingDialogController8=function(){this.cancel(),this.emit("ignoreCall",!1)};a.prototype.$MessengerRTCIncomingDialogController6=function(){this.cancel(),this.emit("timeout",!1)};a.prototype.$MessengerRTCIncomingDialogController11=function(){this.$MessengerRTCIncomingDialogController3&&(this.$MessengerRTCIncomingDialogController3.close(),this.$MessengerRTCIncomingDialogController3=null)};e.exports=a}),null);
__d("MessengerRTCMissedCallDialog.react",["cx","fbt","ImageBlock.react","MercuryIDs","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","MessengerParticipants.bs","MessengerSpinner.react","React","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingMediaType","RTWebLoggingSurface","RTWebUserActionLogger","Timestamp.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactImageReact.bs").jsComponent,j=b("MessengerDialogBodyReact.bs").jsComponent,k=b("MessengerDialogHeaderReact.re").component,l=b("MessengerDialogTitleReact.re").component;a=b("React").PropTypes;var m=50;c=b("React").createClass({displayName:"MessengerRTCMissedCallDialog",_subscription:null,propTypes:{peerID:a.string.isRequired,removeDialog:a.func.isRequired,timeMissed:a.number.isRequired},getInitialState:function(){return{calleeParticipant:null}},componentDidMount:function(){this._computeParticipant(),b("RTWebUserActionLogger").logPreCallImpression({callType:b("RTWebLoggingCallType").P2P,mediaType:b("RTWebLoggingMediaType").VIDEO,surface:b("RTWebLoggingSurface").MISSED_CALL_DIALOG,component:b("RTWebLoggingComponent").START_CALL})},componentDidUpdate:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription);var a=b("MercuryIDs").getParticipantIDFromUserID(this.props.peerID);if(this.state.calleeParticipant&&this.state.calleeParticipant.id===a)return;this._computeParticipant()},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},_computeParticipant:function(){var a=b("MercuryIDs").getParticipantIDFromUserID(this.props.peerID),c=b("MessengerParticipants.bs").getNow(a);c?this.setState({calleeParticipant:c}):this._subscription=b("MessengerParticipants.bs").getMulti([a],function(b){this._subscription=null,this.setState({calleeParticipant:b[a]})}.bind(this))},render:function(){return b("React").createElement(b("MessengerDialog.react"),{layerHideOnBlur:!0,onToggle:this._handleToggle,shown:!0,width:400},b("React").createElement(k,null,b("React").createElement(l,null,h._("Missed call"))),b("React").createElement(j,null,this._renderBody()),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Close"),onClick:this._handleClose,type:"secondary",use:"default"}),b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Call Back"),onClick:this._handleCallBack,type:"primary",use:"default"})))},_renderBody:function(){var a=this.state.calleeParticipant;return!a?b("React").createElement(b("MessengerSpinner.react"),null):b("React").createElement(b("ImageBlock.react"),null,b("React").createElement(i,{isMessengerUser:a.is_messenger_user,size:m,src:a.big_image_src||a.image_src}),b("React").createElement("div",{className:"_2r2t"},b("React").createElement("div",{className:"_2r2u"},h._("You missed a call from {caller name}",[h._param("caller name",a.name)])),b("React").createElement("div",{className:"_2r2v"},b("React").createElement(b("Timestamp.react"),{time:this.props.timeMissed,autoUpdate:!0}))))},_handleCallBack:function(a){a.preventDefault();this.props.removeDialog();a=this.state.calleeParticipant;var b=a&&a.fbid;if(!b)return;d(["FBRTCCore"],function(a){a.startOutgoingCall(b,"messenger_dot_com_missed_call_dialog",!1)})},_handleClose:function(a){a.preventDefault(),this.props.removeDialog()},_handleToggle:function(a){a||this.props.removeDialog()}});e.exports=c}),null);
__d("RTCCloseDialogButton.react",["cx","fbt","React","RTCCallControlsButtonWithLabel.react","RTCCallStore","RTCUIXIcon.react","RTWebLoggingCallType","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(){this.props.action(),b("RTWebUserActionLogger").logPreCallClick({callID:b("RTCCallStore").getState().callInfo.callID,callType:b("RTWebLoggingCallType").P2P,surface:b("RTWebLoggingSurface").MISSED_CALL_DIALOG,component:b("RTWebLoggingComponent").CLOSE_DIALOG})}.bind(this),c}a.prototype.componentDidMount=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState());b("RTWebUserActionLogger").logPreCallImpression(babelHelpers["extends"]({},a,{callType:b("RTWebLoggingCallType").P2P,component:b("RTWebLoggingComponent").CLOSE_DIALOG,surface:b("RTWebLoggingSurface").MISSED_CALL_DIALOG}))};a.prototype.render=function(){return b("React").createElement(b("RTCCallControlsButtonWithLabel.react"),{className:"_6jtv icon-40 icon-1","data-testid":b("VideoCallWebDriverIDs").CLOSE_CHAT_BUTTON,onClick:this.$1,label:h._("Close"),title:h._("Close")},b("React").createElement(b("RTCUIXIcon.react"),null))};e.exports=a}),null);
__d("RTWebCallBackButton.react",["cx","fbt","FBLogger","React","RTCCallControlsButtonWithLabel.react","RTCCallStore","RTCUICameraIcon.react","RTWebCallTriggerMapping","RTWebLoggingCallType","RTWebUserActionLogger","VideoCallWebDriverIDs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.componentDidMount=function(){var a=b("RTWebUserActionLogger").getWebLoggerInfoFromStore(b("RTCCallStore").getState()),c=b("RTWebCallTriggerMapping")[this.props.trigger];(c===null||c===void 0)&&b("FBLogger")("rtweb").mustfix("Unexpected or unknown call trigger: %s",c);b("RTWebUserActionLogger").logPreCallImpression(babelHelpers["extends"]({},a,c,{callType:b("RTWebLoggingCallType").P2P}))};a.prototype.render=function(){return b("React").createElement(b("RTCCallControlsButtonWithLabel.react"),{className:"_6jvj icon-40","data-testid":b("VideoCallWebDriverIDs").IGNORE_CALL_BUTTON,onClick:this.props.onCallBack,label:h._("Redial"),title:h._("Redial")},b("React").createElement(b("RTCUICameraIcon.react"),null))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("RTCMissedCallDialog.react",["cx","fbt","MercuryIDs","MessengerContactImageReact.bs","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerParticipants.bs","MessengerSpinner.react","React","RTCCloseDialogButton.react","RTWebCallBackButton.react","Timestamp.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactImageReact.bs").jsComponent,j=b("MessengerDialogBodyReact.bs").jsComponent;a=b("React").PropTypes;var k=50;c=b("React").createClass({displayName:"RTCMissedCallDialog",_subscription:null,propTypes:{peerID:a.string.isRequired,removeDialog:a.func.isRequired,timeMissed:a.number.isRequired},getInitialState:function(){return{calleeParticipant:null}},componentDidMount:function(){this._computeParticipant()},componentDidUpdate:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription);var a=b("MercuryIDs").getParticipantIDFromUserID(this.props.peerID);if(this.state.calleeParticipant&&this.state.calleeParticipant.id===a)return;this._computeParticipant()},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},_computeParticipant:function(){var a=b("MercuryIDs").getParticipantIDFromUserID(this.props.peerID),c=b("MessengerParticipants.bs").getNow(a);c?this.setState({calleeParticipant:c}):this._subscription=b("MessengerParticipants.bs").getMulti([a],function(b){this._subscription=null,this.setState({calleeParticipant:b[a]})}.bind(this))},render:function(){return b("React").createElement(b("MessengerDialog.react"),{className:"_6jve",layerHideOnBlur:!0,onToggle:this._handleToggle,shown:!0,width:260},b("React").createElement(j,null,this._renderBody()),b("React").createElement("div",{className:"_6jvf"},b("React").createElement(b("RTCCloseDialogButton.react"),{action:this._Action,isP2P:!0}),b("React").createElement(b("RTWebCallBackButton.react"),{onCallBack:this._handleCallBack,trigger:"messenger_dot_com_missed_call_dialog"})))},_renderBody:function(){var a=this.state.calleeParticipant;return!a?b("React").createElement(b("MessengerSpinner.react"),null):b("React").createElement("div",null,b("React").createElement(i,{className:"_6jvg",isMessengerUser:a.is_messenger_user,size:k,src:a.big_image_src||a.image_src}),b("React").createElement("div",{className:"_6jvh"},b("React").createElement("div",{className:"_6jvi"},h._("You missed a call from {caller name}",[h._param("caller name",a.name)])),b("React").createElement("div",{className:"_2r2v"},b("React").createElement(b("Timestamp.react"),{time:this.props.timeMissed,autoUpdate:!0}))))},_Action:function(){this.props.removeDialog()},_handleCallBack:function(){this.props.removeDialog();var a=this.state.calleeParticipant,b=a&&a.fbid;if(!b)return;d(["FBRTCCore"],function(a){a.startOutgoingCall(b,"messenger_dot_com_missed_call_dialog",!1)})},_handleToggle:function(a){a||this.props.removeDialog()}});e.exports=c}),null);
__d("MessengerRTCMissedCallDialogController",["MessengerDialogs.bs","MessengerRTCMissedCallDialog.react","React","RTCMissedCallDialog.react","RTWebClientFeatureGating"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1=null,this.$2=null,this.hideDialog=function(){b("MessengerDialogs.bs").removeDialog(this.$3)}.bind(this),this.$3=function(){return this.$1}.bind(this)}a.prototype.onCallMissed=function(a){this.$2=a};a.prototype.showDialog=function(){var a=this.$2;if(a==null)return;this.$1=b("RTWebClientFeatureGating").useNewIncomingCallDialog()?b("React").createElement(b("RTCMissedCallDialog.react"),{peerID:a.toString(),removeDialog:this.hideDialog,timeMissed:Date.now()}):b("React").createElement(b("MessengerRTCMissedCallDialog.react"),{peerID:a.toString(),removeDialog:this.hideDialog,timeMissed:Date.now()});b("MessengerDialogs.bs").showDialog(this.$3)};e.exports=new a()}),null);