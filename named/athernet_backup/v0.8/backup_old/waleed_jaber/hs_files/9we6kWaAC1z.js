if (self.CavalryLogger) { CavalryLogger.start_js(["IJqZH"]); }

__d("FunnelRegistry",[],(function(a,b,c,d,e,f){e.exports={WWW_EXAMPLE_FUNNEL:!0,MSITE_EXAMPLE_FUNNEL:!0,WWW_FEED_SHARE_DIALOG_FUNNEL:!0,MSITE_FEED_SHARE_DIALOG_FUNNEL:!0,WWW_CHAT_QUICKCAM_FUNNEL:!0,PLATFORM_SHARE_DIALOG_FUNNEL:!0,WWW_CANVAS_EDITOR_FUNNEL:!0,MSITE_COMMENT_TYPING_FUNNEL:!0,MSITE_NOTE_READING_FUNNEL:!0,WWW_CAMPFIRE_COMPOSER_UPSELL_FUNNEL:!0,WWW_LISTS_COMPOSER_FUNNEL:!0,WWW_REACTIONS_LIKE_BUTTON_HOVER_FUNNEL:!0,WWW_REACTIONS_NUX_FUNNEL:!0,WWW_COMMENT_REACTIONS_NUX_FUNNEL:!0,MSITE_INLINE_REPLY_COMPOSER_FUNNEL:!0,WWW_LEAD_GEN_FORM_CREATION_FUNNEL:!0,WWW_LEAD_GEN_DESKTOP_AD_UNIT_FUNNEL:!0,WWW_LEAD_GEN_MSITE_AD_UNIT_FUNNEL:!0,WWW_LINK_PICKER_DIALOG_FUNNEL:!0,WWW_MEME_PICKER_DIALOG_FUNNEL:!0,WWW_SHOP_BUY_FUNNEL:!0,WWW_SNOWLIFT_ACTIONS_FUNNEL:!0,WWW_CANVAS_AD_CREATION_FUNNEL:!0,WWW_SEARCH_AWARENESS_LEARNING_NUX_FUNNEL:!0,WWW_CONSTITUENT_TITLE_UPSELL_FUNNEL:!0,WWW_PAGE_CREATION_FUNNEL:!0,WWW_RECRUITING_PRODUCTS_FUNNEL:!0,WWW_RECRUITING_SEARCH_FUNNEL:!0,WWW_RECRUITING_BULK_EMAIL_FUNNEL:!0,WWW_RECRUITING_LEAVE_HANDLER_FUNNEL:!0,WWW_PMT_FUNNEL:!0,WWW_PULSE_FUNNEL:!0,WWW_ORGTOOL_FUNNEL:!0,WWW_VIDEOS_CASTING_FUNNEL:!0,MSITE_PPD_FUNNEL:!0,WWW_CMS_SEARCH_FUNNEL:!0,SOCIAL_SEARCH_CONVERSION_WWW_FUNNEL:!0,SOCIAL_SEARCH_DASHBOARD_WWW_FUNNEL:!0,GAMES_QUICKSILVER_FUNNEL:!0,SRT_USER_FLOW_FUNNEL:!0,WWW_MEME_PIVOT_FUNNEL:!0,WWW_NOTIFICATION_FUNNEL:!0,MSITE_HASHTAG_PROMPT_FUNNEL:!0,MSITE_FEED_ALBUM_CTA_FUNNEL:!0,MTOUCH_COMMENT_STORIES_FUNNEL:!0,WWW_MESSENGER_SHARE_TO_FB_FUNNEL:!0,MISINFORMATION_RESHARE_ALERT_FUNNEL:!0,FACECAST_BROADCASTER_FUNNEL:!0,FACECAST_SCHEDULED_LIVE_FUNNEL:!0,WWW_MISINFO_WARNING_FOOTER_FUNNEL:!0,MTOUCH_MISINFO_WARNING_FOOTER_FUNNEL:!0,COLLEGE_COMMUNITY_NUX_ONBOARDING_FUNNEL:!0,WWW_MESSENGER_SEARCH_SESSION_FUNNEL:!0,WWW_MESSENGER_CONTENT_SEARCH_FUNNEL:!0,WWW_LIVE_PRODUCER_FUNNEL:!0,WWW_AD_BREAKS_ONBOARDING_FUNNEL:!0,WWW_LAUNCHPAD_ONBOARDING_FUNNEL:!0,WWW_LEAD_GEN_FORM_EDITOR_FUNNEL:!0,WWW_AD_BREAK_HOME_ONBOARDING_FUNNEL:!0,WEB_MESSENGER_RTC_FUNNEL:!0,WEB_RTC_SCREEN_SHARING_FUNNEL:!0,MTOUCH_NUX_PROFILE_PIC_FUNNEL:!0,ADS_VIDEO_CAPTION_FUNNEL:!0,WWW_BUSINESS_ALERT_FUNNEL:!0,SOCIAL_VR_INTERACTIVE_THREE_SIXTY_FUNNEL:!0,WWW_ALT_TEXT_COMPOSER_FUNNEL:!0,WWW_DIVEBAR_RECENTS_FUNNEL:!0,UNIDASH_EDIT_WIDGET_FUNNEL:!0,MESSENGER_UNIVERSAL_SEARCH_FUNNEL:!0,MESSENGER_JOB_APPLICATION_FUNNEL:!0,WWW_BUSINESS_CREATION_FUNNEL:!0,WWW_BUSINESS_VERIFICATION_FUNNEL:!0,WWW_APP_REVIEW_BUSINESS_VERIFICATION_FUNNEL:!0,AEC_APPLICATION_FUNNEL:!0,WWW_MESSENGER_POLL_GROUP_CREATE_FUNNEL:!0,ADS_USER_REPORTING_FUNNEL:!0,MAP_WEB_FUNNEL:!0,WWW_ACCESSIBILITY_NOTIFICATIONS_JEWEL_TABBING_FUNNEL:!0,MTOUCH_FEED_MISSED_STORIES_FUNNEL:!0,WWW_STORYSET_FUNNEL:!0,POLYGLOT_MAIN_FUNNEL:!0,CREATIVE_STUDIO_CREATION_FUNNEL:!0,CREATIVE_STUDIO_HUB_FUNNEL:!0,CREATIVE_STUDIO_INVITE_JOIN_FUNNEL:!0,FX_PLATFORM_INVITE_JOIN_FUNNEL:!0,FX_PLATFORM_INVITE_SEND_FUNNEL:!0,WWW_LIVE_VIEWER_TIPJAR_FUNNEL:!0,WWW_FUNDRAISER_CREATION_FUNNEL:!0,WWW_FUNDRAISER_EDIT_FUNNEL:!0,WWW_FBL_FUNNEL:!0,WWW_CLUE_FUNNEL:!0,WWW_OFFERS_SIMPLE_COMPOSE_FUNNEL:!0,WWW_OFFERS_SIMPLE_COMPOSE_POST_LIKE_FUNNEL:!0,WWW_SEE_OFFERS_CTA_NUX_FUNNEL:!0,WWW_CHEVRON_FUNNEL:!0,MSITE_AD_BREAKS_ONBOARDING_FLOW_FUNNEL:!0,CASUAL_GROUP_PICKER_FUNNEL:!0,TOPICS_TO_FOLLOW_FUNNEL:!0,WWW_SPATIAL_REACTION_PRODUCTION_FUNNEL:!0,WWW_ADS_TARGETING_AUDIENCE_MANAGER_FUNNEL:!0,WWW_NEWSFEED_TAILLOAD_FUNNEL:!0,SEARCH_ADS_WWW_FUNNEL:!0,KEYFRAMES_FUNNEL:!0,WWW_NOTIFS_UP_NEXT_FUNNEL:!0,MSITE_PROFILE_PICTURE_EDIT_FUNNEL:!0,WWW_PROFILE_INTRO_CARD_EDIT_MEDIA_FUNNEL:!0,BUSINESS_PAYMENTS_MERCHANT_ONBOARDING_FUNNEL:!0,MERCHANT_PAYMENTS_MERCHANT_ONBOARDING_FUNNEL:!0,SELLER_EXPERIENCE_SHOP_INSIGHTS_NEW_FUNNEL:!0,SELLER_EXPERIENCE_ONBOARDING_NEW_FUNNEL:!0,SELLER_EXPERIENCE_PAYOUT_SETUP_NEW_FUNNEL:!0,SELLER_EXPERIENCE_SHOP_MANAGEMENT_FUNNEL:!0,CHANNEL_EDIT_FUNNEL:!0,PAYOUT_ONBOARDING_FUNNEL:!0,SERVICES_INSTANT_BOOKING_SETTINGS_FUNNEL:!0,SERVICES_FB_APPOINTMENTS_CTA_CREATION_FUNNEL:!0,SERVICES_FB_APPOINTMENTS_CTA_FULL_SETUP_FUNNEL:!0,MATCHED_MARKET_LIFT_INTERNAL_FUNNEL:!0,FB_NEO_ONBOARDING_FUNNEL:!0,FB_NEO_FRIENDING_FUNNEL:!0,SEARCH_FUNNEL:!0,SHADOW_SEARCH_FUNNEL:!0,SHADOW_EARLY_END_SEARCH_FUNNEL:!0,TEXT_DELIGHTS_OPT_OUT_NUX_FUNNEL:!0,TEXT_DELIGHTS_COMPOSER_FUNNEL:!0,PRIVATE_COMMENT_COMPOSER_FUNNEL:!0,CHECKOUT_EXPERIENCES_FUNNEL:!0,CHECKOUT_EXPERIENCES_SELLER_FUNNEL:!0,MESSENGER_SECONDARY_SEARCH_FUNNEL:!0,WWW_SERVICES_INSTANT_BOOKING_CONSUMER_FUNNEL:!0,WWW_PRESENCE_FUNNEL:!0,WWW_SERVICES_BOOK_APPOINTMENT_CONSUMER_FUNNEL:!0,WWW_SPHERICAL_DIRECTOR_FUNNEL:!0,SELLER_EXPERIENCE_MIGRATION_FUNNEL:!0,SELLER_EXPERIENCE_PAYOUT_SETUP_FUNNEL:!0,NATIVE_SUPPORT_FUNNEL:!0,GROUP_MALL_NAVIGATION_FUNNEL:!0,PRIVACY_SHORTCUTS_FUNNEL:!0,PRIVACY_ACCESS_HUB_FUNNEL:!0,WWW_POLITICIAN_OFFICE_SETTING_FUNNEL:!0,WWW_CIVIC_ACTION_POST_INVITE_FUNNEL:!0,WWW_CIVIC_ACTION_POST_CREATION_FUNNEL:!0,NT_NFAS_EXAMPLE_FUNNEL:!0,WWW_ONCALL_VIEW_FUNNEL:!0,WWW_ESCALATION_TOOLS_NOTIFICATIONS_PAGE_FUNNEL:!0,ALL_VOICES_FUNNEL:!0,WWW_MESSENGER_SHARE_FILE_PREVIEW_FUNNEL:!0,POST_TRANSACTION_FUNNEL:!0,INSTANT_EXPERIENCES_MINDBODY_FUNNEL:!0,WWW_CTW_WHATSAPP_VERIFICATION_FLOW_FUNNEL:!0,GIZMO_VCPANEL_CALL_START_FUNNEL:!0,PIE_MANAGER_HIRING_HUB_FUNNEL:!0,PIE_RECRUITING_MANAGER_HIRING_OUTREACH_FUNNEL:!0,PIE_RECRUITING_MANAGER_HIRING_REVIEW_FUNNEL:!0,IG_WEB_STORY_CREATION_FUNNEL:!0,IG_WEB_IGTV_CREATION_FUNNEL:!0,IG_WEB_ONE_TAP_REGISTRATION_FUNNEL:!0,IG_WEB_SHARE_FUNNEL:!0,WWW_FB_CHAT_NEW_SETTINGS_MENU_FUNNEL:!0,FLEXIBLE_STARS_WWW_FUNNEL:!0,PAYMENT_APP_FUNNEL:!0,WWW_MESSENGER_VIDEO_CHAT_LINKS_FUNNEL:!0,KAIOS_REG_CONTACT_IMPORTER_FUNNEL:!0,ONEVC_CALL_ROUTING_FUNNEL:!0,AR_HUB_UPLOAD_FUNNEL:!0}}),null);
__d("FBProfilePhotoShadow.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a=this.props,c=a.className,d=a.children;a=babelHelpers.objectWithoutPropertiesLoose(a,["className","children"]);d=b("React").Children.only(d);return b("React").createElement("div",babelHelpers["extends"]({},a,{className:b("joinClasses")(c,"_38vo")}),b("React").cloneElement(d,{className:b("joinClasses")(d.props.className,"_44ma")}))};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("RequiredFormListener",["Event","Input"],(function(a,b,c,d,e,f){__p&&__p();b("Event").listen(document.documentElement,"submit",function(a){a=a.getTarget();if(a.getAttribute("novalidate"))return!0;a=a.getElementsByTagName("*");for(var c=0;c<a.length;c++)if(a[c].getAttribute("required")&&b("Input").isEmpty(a[c])){a[c].focus();return!1}},b("Event").Priority.URGENT)}),null);
__d("MenuDeprecated",["ArbiterMixin","CSS","DataStore","DOM","Event","HTML","Keys","Parent","Style","UserAgent_DEPRECATED","emptyFunction","mixin","Run"],(function(a,b,c,d,e,f){__p&&__p();var g,h="menu:mouseover",i=null;function j(a){return b("CSS").hasClass(a,"uiMenuContainer")?a:b("Parent").byClass(a,"uiMenu")}function k(a){return b("Parent").byClass(a,"uiMenuItem")}function l(a){if(document.activeElement){var b=k(document.activeElement);return a.indexOf(b)}return-1}function m(a){return b("DOM").find(a,"a.itemAnchor")}function n(a){return b("CSS").hasClass(a,"checked")}function o(a){return!b("CSS").hasClass(a,"disabled")&&b("Style").get(a,"display")!=="none"}function p(a){var c=document.activeElement;if(!c||!b("Parent").byClass(c,"uiMenu")||!b("DOM").isInputNode(c)){c=k(a.getTarget());c&&s.focusItem(c)}}function q(a){b("UserAgent_DEPRECATED").firefox()&&m(a).blur(),s.inform("select",{menu:j(a),item:a})}var r=function(){__p&&__p();r=b("emptyFunction");var a={};a.click=function(a){a=k(a.getTarget());if(a&&o(a)){q(a);a=m(a);var b=a.href;a=a.getAttribute("rel");return a&&a!=="ignore"||b&&b.charAt(b.length-1)!=="#"}};a.keydown=function(a){__p&&__p();var c=a.getTarget();if(a.getModifiers().any)return;if(!i||b("DOM").isInputNode(c))return;var d=b("Event").getKeyCode(a),e;switch(d){case b("Keys").UP:case b("Keys").DOWN:var f=s.getEnabledItems(i);e=l(f);s.focusItem(f[e+(d===b("Keys").UP?-1:1)]);return!1;case b("Keys").SPACE:f=k(c);f&&(q(f),a.prevent());break;default:c=String.fromCharCode(d).toLowerCase();f=s.getEnabledItems(i);e=l(f);a=e;d=f.length;while(~e&&(a=++a%d)!==e||!~e&&++a<d){var g=s.getItemLabel(f[a]);if(g&&g.charAt(0).toLowerCase()===c){s.focusItem(f[a]);return!1}}}};b("Event").listen(document.body,a)};g=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g&&g.prototype;a.prototype.focusItem=function(a){"use strict";a&&o(a)&&(this.$removeSelected(j(a)),b("CSS").addClass(a,"selected"),m(a).focus())};a.prototype.getEnabledItems=function(a){"use strict";return s.getItems(a).filter(o)};a.prototype.getCheckedItems=function(a){"use strict";return s.getItems(a).filter(n)};a.prototype.getItems=function(a){"use strict";return b("DOM").scry(a,"li.uiMenuItem")};a.prototype.getItemLabel=function(a){"use strict";return a.getAttribute("data-label",2)||""};a.prototype.isItemChecked=function(a){"use strict";return b("CSS").hasClass(a,"checked")};a.prototype.autoregister=function(a,b,c){"use strict";a.subscribe("show",function(){s.register(b,c)}),a.subscribe("hide",function(){s.unregister(b)})};a.prototype.register=function(a,c){"use strict";a=j(a),r(),b("DataStore").get(a,h)||b("DataStore").set(a,h,b("Event").listen(a,"mouseover",p)),c!==!1&&(i=a)};a.prototype.setItemEnabled=function(a,c){"use strict";!c&&!b("DOM").scry(a,"span.disabledAnchor")[0]&&b("DOM").appendContent(a,b("DOM").create("span",{className:b("DOM").find(a,"a").className+" disabledAnchor"},b("HTML")(m(a).innerHTML))),b("CSS").conditionClass(a,"disabled",!c)};a.prototype.toggleItem=function(a){"use strict";var b=!s.isItemChecked(a);s.setItemChecked(a,b)};a.prototype.setItemChecked=function(a,c){"use strict";b("CSS").conditionClass(a,"checked",c),m(a).setAttribute("aria-checked",c)};a.prototype.unregister=function(a){"use strict";a=j(a);var c=b("DataStore").remove(a,h);c&&c.remove();i=null;this.$removeSelected(a)};a.prototype.$removeSelected=function(a){"use strict";s.getItems(a).filter(function(a){return b("CSS").hasClass(a,"selected")}).forEach(function(a){b("CSS").removeClass(a,"selected")})};function a(){"use strict";g.apply(this,arguments)}var s=new a();e.exports=s}),null);
__d("WebPixelRatio",["SiteData"],(function(a,b,c,d,e,f){a={get:function(){return b("SiteData").pr!=null&&b("SiteData").pr>0?b("SiteData").pr:window.devicePixelRatio||1}};e.exports=a}),null);
__d("XFRXHandleChevronClickController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/frx/handle_chevron_click/",{})}),null);
__d("FRXHandleChevronClick",["AsyncRequest","Event","XFRXHandleChevronClickController"],(function(a,b,c,d,e,f){"use strict";a={init:function(a,c,d,e){b("Event").listen(a,"click",function(){new(b("AsyncRequest"))().setURI(b("XFRXHandleChevronClickController").getURIBuilder().getURI()).setMethod("POST").setData({reportable_ent_id:c,frx_entry_point:d,nfx_story_location:e}).send()})}};e.exports=a}),null);
__d("QueriesHistory",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a,this.reset()}a.prototype.getQueries=function(){"use strict";return this.$2};a.prototype.getCurrentLength=function(){"use strict";return this.$3};a.prototype.add=function(a){"use strict";this.$2.push(a);this.$3+=a.length;while(this.$2.length!==0&&this.$3>this.$1){a=this.$2.shift();this.$3-=a.length}};a.prototype.reset=function(){"use strict";this.$3=0,this.$2=[]};e.exports=a}),null);
__d("htmlSpecialChars",[],(function(a,b,c,d,e,f){__p&&__p();var g=/&/g,h=/</g,i=/>/g,j=/\"/g,k=/\'/g;function a(a){if(typeof a==="undefined"||a===null||!a.toString)return"";if(a===!1)return"0";else if(a===!0)return"1";return a.toString().replace(g,"&amp;").replace(j,"&quot;").replace(k,"&#039;").replace(h,"&lt;").replace(i,"&gt;")}e.exports=a}),null);
__d("StoreBasedStateMixinHelper",["invariant","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=new(b("SubscriptionsHandler"))()}a.prototype.subscribeCallback=function(a,b){__p&&__p();var c=this.$1.map(function(c){__p&&__p();var d=b!=null?function(d){b&&b(c);return a(d)}:a;if(c.hasChanged&&c.getDispatchToken&&c.addListener)return c.addListener(d);else if(c.subscribe)return c.subscribe("change",d);else if(c.addListener)return c.addListener("change",d);else g(0,574)});this.$1.length>0&&this.$2.addSubscriptions.apply(this.$2,c)};a.prototype.release=function(){this.$2.release()};e.exports=a}),null);
__d("FunnelAction",[],(function(a,b,c,d,e,f){"use strict";var g="name",h="payload",i="relative_time",j="tag";function a(a,b,c,d){this.$1={},this.$1[g]=a,this.$1[i]=b,c!==void 0&&(this.$1[j]=c),d!==void 0&&(this.$1[h]=JSON.stringify(d))}a.prototype.getData=function(){return this.$1};e.exports=a}),null);
__d("Funnel",["invariant","BinarySearch","FunnelAction","FunnelRegistry","sprintf"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="name",i="instance_id",j="start_time",k="tags",l="actions",m="sampling_rate",n="timeout_sec",o="beacon_id",p="beacon_session_id",q="funnel_level_beacon_id",r="funnel_level_beacon_session_id";c={EXPLICIT:"explicit",TIMEOUT:"timeout",SESSION_END:"session_end",RESTART:"restart",ACTIONS_FULL:"actions_full"};d={ACTION_END:"funnel_end",ACTION_WINDOW_BLUR:"window_blur",ACTION_WINDOW_FOCUS:"window_focus"};var s=600;function a(a,c,d,e,f){b("FunnelRegistry")[a]===!0||g(0,103),this.$1=a,this.$2=c,this.$3=[],this.$4={},this.$5=d,this.$6=f,this.timeout_sec=s,this.shouldTrackFocus=!1,this.$7=e,this.$9=-1,this.$10=-1,this.$11=-1,this.$12=-1,this.devModeLogger("Started funnel")}a.prototype.addTag=function(a){typeof a==="string"||g(0,6245);this.$4[a]=!0;this.devModeLogger("Added funnel tag %s",a);return this};a.prototype.appendAction=function(a,c,d,e){__p&&__p();e===void 0&&(e=Date.now());e=new(b("FunnelAction"))(a,e-this.$6,c,d);d=b("BinarySearch").leastStrictUpperBound(function(a){return this.$3[a].getData()}.bind(this),e.getData(),0,this.$3.length,function(a,b){if(a.name==="funnel_end")return 1;return b.name==="funnel_end"?-1:a.relative_time-b.relative_time});this.$3.splice(d,0,e);c?this.devModeLogger("Appended action %s with tag %s",a,c):this.devModeLogger("Appended action %s",a);this.$8=a;return this};a.prototype.appendActionIfNew=function(a,b,c){a!==this.$8&&this.appendAction(a,b,c);return this};a.prototype.getLogData=function(){__p&&__p();var a={};a[h]=this.$1;this.$2!==void 0?a[i]=this.$2:a[i]=Math.floor(Math.random()*65536);a[j]=this.$6;a[m]=this.$5;a[n]=this.timeout_sec;a[k]=[];for(var b in this.$4)this.$4[b]===!0&&a[k].push(b);if(this.$3.length>0){a[l]=[];for(var c=0;c<this.$3.length;c++)a[l].push(this.$3[c].getData())}this.$10!==-1&&this.$9!==-1&&(a[p]=this.$10,a[o]=this.$9);this.$12!==-1&&this.$11!==-1&&(a[r]=this.$12,a[q]=this.$11);return a};a.prototype.devModeLogger=function(){};a.prototype.getTags=function(){return this.$4};a.prototype.getFunnelName=function(){return this.$1};a.prototype.addReliabilityStats=function(a,b){typeof a==="number"||g(0,6246);typeof b==="number"||g(0,6247);this.$10=a;this.$9=b;this.devModeLogger("Added funnel sessionID %d and counter %d.",a,b);return this};a.prototype.addReliabilityStatsForCurFunnel=function(a,b){typeof a==="number"||g(0,6248);typeof b==="number"||g(0,6249);this.$12=a;this.$11=b;this.devModeLogger("Added funnel sessionID %d and counter %d.",a,b);return this};e.exports={Funnel:a,EndType:c,ActionType:d}}),null);
__d("FunnelLoggerSampler",["FunnelLoggerConfig"],(function(a,b,c,d,e,f){"use strict";function a(a){a=g(a);return a===0?!1:Math.random()*a<1}function g(a){a=b("FunnelLoggerConfig").freq[a];a===void 0&&(a=b("FunnelLoggerConfig").freq["default"]);return a}e.exports={shouldLog:a,getSamplingRate:g}}),null);
__d("FunnelReliabilityWhitelist",[],(function(a,b,c,d,e,f){a=["SEARCH_FUNNEL"];e.exports=a}),null);
__d("FunnelReliabilityStatsCollector",["FunnelReliabilityWhitelist","MarauderLogger","WebStorage","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h,i="fas_reliability_lib_stats_overall",j="fas_reliability_funnel_stats_overall",k=1800,l="funnel_analytics_data_loss",m="fas_reliability_lib_stats_wl",n="fas_reliability_funnel_stats_wl",o=0,p={};function a(){return b("gkx")("676890")?!0:!1}function q(){g||(g=!0,h=b("WebStorage").getLocalStorage());return h}function r(){var a=q();if(!a)return null;a=a.getItem(j);if(a)return JSON.parse(a);else{a=Math.floor(Date.now()/1e3);return{startCount:0,endCount:0,cancelCount:0,prevCount:0,lastFlushTimestamp:a}}}function s(a){__p&&__p();var b=q();if(!b)return null;b=b.getItem(n);if(b)return JSON.parse(b);else{b={};b[a]={startCount:0,endCount:0,cancelCount:0,prevCount:0};return b}}function t(){var a=q();if(!a)return null;a=a.getItem(n);return a?JSON.parse(a):null}function c(a){var c=r();if(!c)return;o+=1;c.startCount?c.startCount=parseInt(c.startCount,10)+1:c.startCount=1;b("WebStorage").setItemGuarded(localStorage,j,JSON.stringify(c));u(a)}function u(a){var c=s(a);if(!c||!b("FunnelReliabilityWhitelist").includes(a))return;var d=p[a]?p[a]+1:1;p[a]=d;d=c[a];d?d.startCount?d.startCount=parseInt(d.startCount,10)+1:d.startCount=1:(d={},d.startCount=1,d.prevCount=0,d.cancelCount=0,d.endCount=0);c[a]=d;b("WebStorage").setItemGuarded(localStorage,n,JSON.stringify(c))}function d(a){var c=r();if(!c)return;o-=1;c.cancelCount?c.cancelCount=parseInt(c.cancelCount,10)+1:c.cancelCount=1;b("WebStorage").setItemGuarded(localStorage,j,JSON.stringify(c));v(a)}function v(a){var c=s(a);if(!c||!b("FunnelReliabilityWhitelist").includes(a))return;var d=p[a]?p[a]-1:0;p[a]=d;d=c[a];d?d.cancelCount?d.cancelCount=parseInt(d.cancelCount,10)+1:d.cancelCount=1:(d={},d.startCount=0,d.prevCount=0,d.cancelCount=1,d.endCount=0);c[a]=d;b("WebStorage").setItemGuarded(localStorage,n,JSON.stringify(c))}function f(a){var c=r();if(!c)return;o-=1;c.endCount?c.endCount=parseInt(c.endCount,10)+1:c.endCount=1;b("WebStorage").setItemGuarded(localStorage,j,JSON.stringify(c));w(a)}function w(a){var c=s(a);if(!c||!b("FunnelReliabilityWhitelist").includes(a))return;var d=p[a]?p[a]-1:0;p[a]=d;d=c[a];d?d.endCount?d.endCount=parseInt(d.endCount,10)+1:d.endCount=1:(d={},d.startCount=0,d.prevCount=0,d.cancelCount=0,d.endCount=1);c[a]=d;b("WebStorage").setItemGuarded(localStorage,n,JSON.stringify(c))}function x(){var a=r();if(!a)return!1;if(a.lastFlushTimestamp){var b=Math.floor(Date.now()/1e3);return b-parseInt(a.lastFlushTimestamp,10)>=k}return!1}function y(a,c){a=q();if(!a)return;var d=Math.floor(Date.now()/1e3);c={startCount:0,endCount:0,cancelCount:0,prevCount:c,lastFlushTimestamp:d};b("WebStorage").setItemGuarded(a,j,JSON.stringify(c))}function z(a,c){__p&&__p();var d=q();if(!d||!a||Object.keys(a).length==0)return;var e={};for(var f in a){a=c[f];a={startCount:0,endCount:0,cancelCount:0,prevCount:a?a:0};e[f]=a}b("WebStorage").setItemGuarded(d,n,JSON.stringify(e))}function A(a,c,d,e){__p&&__p();var f=a.prevCount,g=a.startCount,h=a.endCount;a=a.cancelCount;var i=f+g-h-a-c,j={};j.start=g;j.end=h;j.cancel=a;j.prev=f;j.ongoing=c;j.loss=i;g={};g.overall=j;if(d){h={};for(var k in d){a=d[k];f=a.prevCount;c=a.startCount;i=a.endCount;j=a.cancelCount;a=e[k]?e[k]:0;var m=f+c-i-j-a,n={};n.start=c;n.end=i;n.cancel=j;n.prev=f;n.ongoing=a;n.loss=m;h[k]=n}g.funnel_level_data_loss=h}b("MarauderLogger").log(l,null,g)}function B(){if(!x())return;var a=r();if(!a)return;y(a,o);var b=t();b&&z(b,p);A(a,o,b,p)}function C(){var a=q();if(!a)return null;var c=a.getItem(i);c=c?JSON.parse(c):{};var d=c.counter,e=c.session;d?(d=parseInt(d,10)+1,e=parseInt(c.session,10)):(d=1,e=Math.floor(Math.random()*65536));b("WebStorage").setItemGuarded(a,i,JSON.stringify({counter:d,session:e}));return[e,d]}function D(a){__p&&__p();if(!b("FunnelReliabilityWhitelist").includes(a))return null;var c=q();if(!c)return null;var d=c.getItem(m),e=void 0,f={};d&&(f=JSON.parse(d),e=f[a]);var g=e?e.counter:void 0;e=e?e.session:void 0;g?(g=parseInt(g,10)+1,e=parseInt(e,10)):(g=1,e=Math.floor(Math.random()*65536));var h={};d?(f[a]={counter:g,session:e},h=f):h[a]={counter:g,session:e};b("WebStorage").setItemGuarded(c,m,JSON.stringify(h));return[e,g]}e.exports={increaseAndGetLibLevelStats:C,maybeIncreaseAndGetLibLevelStatsForCurFunnel:D,maybeFlushFunnelLevelStats:B,onFunnelCancel:d,onFunnelEnd:f,onFunnelStart:c,passFunnelLevelStatsRolloutGK:a}}),null);
__d("FunnelLogger",["invariant","Banzai","Funnel","FunnelLoggerSampler","FunnelRegistry","FunnelReliabilityStatsCollector","MarauderLogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={},i=!1,j=!0;function a(a,b){C(a,b)}function c(a,b,c){C(a,c,b)}function d(a,b){a=E(a,b);return!F(a)?null:h[a]}function f(a,b){}function k(a,b,c){c===void 0?G(a,void 0,b):c&&G(a,b,c)}function l(a,c){c=E(a,c);F(c)&&(h[c].devModeLogger("Cancelled funnel"),I(c),h[c]=void 0,b("FunnelReliabilityStatsCollector").passFunnelLevelStatsRolloutGK()&&(b("FunnelReliabilityStatsCollector").onFunnelCancel(a),b("FunnelReliabilityStatsCollector").maybeFlushFunnelLevelStats()))}function m(a,b){D(a,b)}function n(a,b,c){D(a,c,b)}function o(a,b,c){c===void 0?J(a,void 0,String(b)):J(a,Number(b),c)}function p(a,b,c){c===void 0?K(a,void 0,Boolean(b)):K(a,Number(b),c)}function q(a,b,c){c===void 0?L(a,void 0,String(b),void 0):L(a,Number(b),c,void 0)}function r(a,b,c){c===void 0?M(a,void 0,String(b),void 0):M(a,Number(b),c,void 0)}function s(a,b,c,d){d===void 0?L(a,void 0,String(c),void 0,void 0,b):L(a,Number(c),d,void 0,void 0,b)}function t(a,b,c,d){d===void 0?L(a,void 0,String(b),c):L(a,Number(b),c,d)}function u(a,b,c,d,e){e===void 0?L(a,void 0,String(c),d,void 0,b):L(a,Number(c),d,e,void 0,b)}function v(a,b,c,d){d===void 0?M(a,void 0,String(b),c):M(a,Number(b),c,d)}function w(a,b,c,d){d===void 0?L(a,void 0,String(b),void 0,c):L(a,Number(b),String(c),void 0,d)}function x(a,b,c,d,e){e===void 0?L(a,void 0,String(c),void 0,d,b):L(a,Number(c),String(d),void 0,e,b)}function y(a,b,c,d){d===void 0?M(a,void 0,String(b),void 0,c):M(a,Number(b),String(c),void 0,d)}function z(a,b,c,d,e){e===void 0?L(a,void 0,String(b),c,d):L(a,Number(b),String(c),String(d),e)}function A(a,b,c,d,e,f){f===void 0?L(a,void 0,String(c),d,e,b):L(a,Number(c),String(d),String(e),f,b)}function B(a,b,c,d,e){e===void 0?M(a,void 0,String(b),c,d):M(a,Number(b),String(c),String(d),e)}function C(a,c,d){var e=E(a,c);S();N(e);b("FunnelLoggerSampler").shouldLog(a)&&(h[e]=new(b("Funnel").Funnel)(a,c,b("FunnelLoggerSampler").getSamplingRate(a),!1,d!=null?d:Date.now()),H(e),b("FunnelReliabilityStatsCollector").passFunnelLevelStatsRolloutGK()&&(b("FunnelReliabilityStatsCollector").onFunnelStart(a),b("FunnelReliabilityStatsCollector").maybeFlushFunnelLevelStats()))}function D(a,c,d){a=E(a,c);F(a)&&(h[a].appendAction(b("Funnel").ActionType.ACTION_END,b("Funnel").EndType.EXPLICIT,void 0,d),O(a))}function E(a,c){b("FunnelRegistry")[a]===!0||g(0,103);if(c===void 0||c===null)return a;else return a+c.toString()}function F(a){return h[a]!==void 0}function G(a,b,c){a=E(a,b);F(a)&&(h[a].timeout_sec=c,h[a].devModeLogger("Timeout set to %s sec",c),H(a))}function H(a){I(a),h[a].timeout_handle=setTimeout(function(){h[a].appendAction(b("Funnel").ActionType.ACTION_END,b("Funnel").EndType.TIMEOUT),O(a)},1e3*h[a].timeout_sec)}function I(a){h[a].timeout_handle&&clearTimeout(h[a].timeout_handle)}function J(a,b,c){a=E(a,b);F(a)&&(h[a].addTag(c),H(a))}function K(a,b,c){a=E(a,b);F(a)&&(h[a].shouldTrackFocus=c,h[a].devModeLogger("Focus tracking %s",c?"on":"off"))}function L(a,b,c,d,e,f){a=E(a,b);F(a)&&(h[a].appendAction(c,d,e,f),H(a))}function M(a,b,c,d,e){a=E(a,b);F(a)&&h[a].appendActionIfNew(c,d,e)}function N(a){F(a)&&(h[a].appendAction(b("Funnel").ActionType.ACTION_END,b("Funnel").EndType.RESTART),O(a))}function O(a){__p&&__p();if(F(a)){if(b("gkx")("676888")){var c=b("FunnelReliabilityStatsCollector").increaseAndGetLibLevelStats();if(c){var d=c[0];c=c[1];h[a].addReliabilityStats(d,c)}}d=h[a].getFunnelName();if(b("gkx")("676889")){c=b("FunnelReliabilityStatsCollector").maybeIncreaseAndGetLibLevelStatsForCurFunnel(d);if(c){var e=c[0];c=c[1];h[a].addReliabilityStatsForCurFunnel(e,c)}}e=h[a].getLogData();b("MarauderLogger").log("funnel_analytics",null,e);h[a].devModeLogger("Logged: %s",JSON.stringify(e));I(a);h[a]=void 0;b("FunnelReliabilityStatsCollector").passFunnelLevelStatsRolloutGK()&&(b("FunnelReliabilityStatsCollector").onFunnelEnd(d),b("FunnelReliabilityStatsCollector").maybeFlushFunnelLevelStats())}}function P(){for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&F(a)&&(h[a].appendAction(b("Funnel").ActionType.ACTION_END,b("Funnel").EndType.SESSION_END),O(a))}function Q(){if(j){j=!1;for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&F(a)&&h[a].shouldTrackFocus&&(h[a].appendAction(b("Funnel").ActionType.ACTION_WINDOW_BLUR),I(a))}}function R(){if(!j){j=!0;for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&F(a)&&h[a].shouldTrackFocus&&(h[a].appendAction(b("Funnel").ActionType.ACTION_WINDOW_FOCUS),I(a))}}function S(){i||(i=!0,window.addEventListener&&(b("Banzai").subscribe(b("Banzai").SHUTDOWN,P),window.addEventListener("blur",Q),window.addEventListener("focus",R)))}e.exports={startFunnel:a,startFunnelAtTime:c,startFunnel_DEV_MODE:f,setFunnelTimeout:k,setFunnelTrackFocus:p,addFunnelTag:o,appendAction:q,appendActionAtTime:s,appendActionIfNew:r,appendActionWithTag:t,appendActionAtTimeWithTag:u,appendActionWithTagIfNew:v,appendActionWithPayload:w,appendActionAtTimeWithPayload:x,appendActionWithPayloadIfNew:y,appendActionWithTagAndPayload:z,appendActionAtTimeWithTagAndPayload:A,appendActionWithTagAndPayloadIfNew:B,cancelFunnel:l,endFunnel:m,endFunnelAtTime:n,getFunnelInstance:d}}),null);